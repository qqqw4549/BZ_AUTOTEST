cscope 15 $HOME/BZ_AUTOTEST -q 0000004934 0000655779
	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20RU/bz_commands.h

1 #ide
BZ_COMMANDS_H


2 
	#BZ_COMMANDS_H


	)

3 
	~"li.h
"

5 
STaki
(
Ti
::
WkP
 cڡ& 
li
);

6 
RegiBzCommds
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/auxADCDAC.c

1 
	~"bz_li.h
"

2 
	~"commd.h
"

3 
	~"auxADCDAC.h
"

4 
	~"bz_tys.h
"

5 
	~"bz_gpio_tys.h
"

6 
	~"bz_gpio.h
"

7 
	~<dio.h
>

8 
	~<unid.h
>

10 
	$_devi
(
ut32_t
 
devi_id
)

12 
	`ݒ_devi
(
devi_id
);

13 
	`_devi
();

14 
	`wa_bo_us
();

15 
	`ld_fmwe
();

16 
	`wa_fmwe_ady
();

17 
	`ld_cfig
();

18 
	`wre_ofe
();

19 
	`wa_ofe_de
();

20 
	}
}

22 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

24 
	`t_rf_l_eq
(
rf_eq_hz
);

25 
	`wa_l_lock_de
();

26 
	`t_aux_l_eq
(
aux_eq_hz
);

27 
	`wa_l_lock_de
();

28 
	}
}

30 
BzDevi_t
 
	gg_devi
 = { 0 };

32 
	$_auxadc
()

34 
BzAuxAdcCfig_t
 
AuxAdcCfg
 = {

35 .
auxAdcChlS
 = 
BZ_AUXADC_CH3
,

36 .
auxAdcMode
 = 
BZ_AUXADC_PIN_MODE
,

37 .
numSames
 = 1000,

38 .
mgPiod_us
 = 8,

39 .
auxadcGpioS
 = 3

42 
BzAuxAdcResu_t
 
AdcResu
 = {

43 .
auxAdcCodeAvg
 = 0,

44 .
comeIndit
 = 0

46 
	`t_auxadc
(&
AuxAdcCfg
);

47 
i
=0; i<5; i++)

49 
	`ad_auxadc
(&
AdcResu
);

50 
	`tf
("aux ADCdesu = %d\n" , 
AdcResu
.
auxAdcCodeAvg
);

51 
	`up
(1000000);

53 
	`tf
("aux ADCest finish!\n");

54 
	}
}

56 
	$_auxdac
()

58 
siP
 = 6;

59 
	`tup_auxdac
(
siP
);

60 
	`tf
("aux DACe P = %d\n",
siP
);

61 
	`tf
("testing ...\n");

62 
i
 = 0; i < 1023; i++)

64 
	`wre_auxdac
(
siP
, 
i
);

65 
	`up
(10000);

67 
	`tf
("aux DACest finish!\n");

68 
	}
}

70 
	$aux_adcdac_
()

72 
	`RegiCommd
("", " bz20 devi", (*)
_devi
);

73 
	`RegiCommd
("rm", "rm bz20 devi", (*)
o_devi
);

74 
	`RegiCommd
("teq", "teqf_eq_hzf_eq_hz", (*)
t_eq
);

75 
	`RegiCommd
("auxADC", "ux ADC funi",(*)
_auxadc
);

76 
	`RegiCommd
("auxDAC", "ux DAC funi",(*)
_auxdac
);

77 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/auxADCDAC.h

1 #ide
AUXADCDAC_H


2 
	#AUXADCDAC_H


	)

4 
aux_adcdac_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_config.c

10 
	~"bz_cfig.h
"

12 
st16_t
 
	gbzTxFCfs
[40] = {185,307,-238,-43,163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,

14 
st16_t
 
	gbzRxFCfs
[36] = {163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,471,-1155,-366,

16 
st16_t
 
	gbzObxFCfs
[36] = {163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,471,-1155,-366,

19 
BzIn_t
 
	gB20In
 =

21 .
mode
 =

23 .
tddMode
=1,

24 .
	gdpdMode
=0,

27 .
	grx
 =

29 .
rxProfe
 =

31 .
rxF
 =

33 .
ga_dB
 = -6,

34 .
	gnumFCfs
 = 72,

35 .
	gcfs
 = &
bzRxFCfs
[0],

37 .
	grxFByss
 = 1,

38 .
	grxFDecimi
 = 1,

39 .
	grhb1Decimi
 = 2,

40 .
	grxOuutRe_kHz
 = 245760,

41 .
	grfBdwidth_Hz
 = 200000000,

42 .
	grxBbf3dBCr_kHz
 = 220000,

44 .
	grxGaCl
 =

46 .
rxgaMode
 = 
BZ_MGC
,

47 .
	grxmgcMode
 = 
BZ_MGC
,

48 .
	grx1GaIndex
 = 127,

49 .
	grx2GaIndex
 = 127,

50 .
	grx1MaxGaIndex
 = 127,

51 .
	grx1MGaIndex
 = 0,

52 .
	grx2MaxGaIndex
 = 127,

53 .
	grx2MGaIndex
 = 0

55 .
	grxGaClPInfo
 =

57 .
cSp
 = 1,

58 .
	gdecSp
 = 1,

59 .
	grx1GaClPInfo
 =

61 .
rxGaIncP
 = 
BZ_GPIO_08
,

62 .
	grxGaDecP
 = 
BZ_GPIO_09
,

63 .
	grxGaIncPFunc
 = 
BZ_SEL_1
,

64 .
	grxGaDecPFunc
 = 
BZ_SEL_1
,

66 .
	grx2GaClPInfo
 =

68 .
rxGaIncP
 = 
BZ_GPIO_10
,

69 .
	grxGaDecP
 = 
BZ_GPIO_11
,

70 .
	grxGaIncPFunc
 = 
BZ_SEL_1
,

71 .
	grxGaDecPFunc
 = 
BZ_SEL_1
,

75 .
	grxSlirPInfo
 =

78 .
EbSlir
 = 
BZ_RXSLICER_EN
,

79 .
	grx1SlirPInfo
 =

81 .
rx1SlirP_0
 = 
BZ_GPIO_07
,

82 .
	grx1SlirP_1
 = 
BZ_GPIO_08
,

83 .
	grx1SlirP_2
 = 
BZ_GPIO_09
,

85 .
	grx2SlirPInfo
 =

87 .
rx2SlirP_0
 = 
BZ_GPIO_10
,

88 .
	grx2SlirP_1
 = 
BZ_GPIO_11
,

89 .
	grx2SlirP_2
 = 
BZ_GPIO_12
,

91 .
	grxSlirPFunc
 = 
BZ_SEL_3
,

93 .
	grxChls
 = 
BZ_RX1RX2


97 .
	gtx
 =

99 .
txProfe
 =

101 .
txF
 =

103 .
ga_dB
 = 0,

104 .
	gnumFCfs
 = 80,

105 .
	gcfs
 = &
bzTxFCfs
[0],

107 .
	gtxFByss
 = 1,

108 .
	gtxFIpީi
 = 1,

109 .
	gthb1Ipީi
 = 2,

110 .
	gthb2Ipީi
 = 2,

111 .
	gthb3Ipީi
 = 1,

112 .
	gtxIutRe_kHz
 = 491520,

113 .
	grfBdwidth_Hz
 = 400000000,

114 .
	gtxBbf3dBCr_kHz
 = 220000,

116 .
	gtxChls
 = 
BZ_TXOFF
,

117 .
	gtxGaCl
 =

119 .
txgaMode
 = 
BZ_MGC
,

120 .
	gtxmgcMode
 = 
BZ_APIMODE
,

121 .
	gtx1GaIndex
 = 0,

122 .
	gtx2GaIndex
 = 0,

123 .
	gtx1MaxGaIndex
 = 63,

124 .
	gtx1MGaIndex
 = 0,

125 .
	gtx2MaxGaIndex
 = 63,

126 .
	gtx2MGaIndex
 = 0

131 .
	gobsRx
 =

133 .
xProfe
 =

135 .
rxF
 =

137 .
ga_dB
 = 6,

138 .
	gnumFCfs
 = 72,

139 .
	gcfs
 = &
bzObxFCfs
[0],

141 .
	gxFByss
 = 1,

142 .
	gxFDecimi
 = 1,

143 .
	gxOuutRe_kHz
 = 491520,

144 .
	grfBdwidth_Hz
 = 450000000,

145 .
	grxBbf3dBCr_kHz
 = 495000,

147 .
	gxGaCl
 =

149 .
xgaMode
 = 
BZ_MGC
,

150 .
	gxmgcMode
 = 
BZ_APIMODE
,

151 .
	gx1GaIndex
 = 127,

152 .
	gx2GaIndex
 = 127,

153 .
	gx1MaxGaIndex
 = 127,

154 .
	gx1MGaIndex
 = 0,

155 .
	gx2MaxGaIndex
 = 127,

156 .
	gx2MGaIndex
 = 0

158 .
	gobsRxChlsEb
 = 
BZ_ORXOFF
,

162 .
	gocks
 =

164 .
deviClock_kHz
 = 122880,

165 .
	gr_equcy_Hz
 = 2400000,

166 .
	grfPUExLo
 = 0,

167 .
	grfPPhaSyncMode
 = 
BZ_RFPLLMCS_NOSYNC


171 .
	gjesd204Stgs
 =

173 .
rdesClk
 = 
SERDES_CLK_10G
,

176 .
	gtxCfig
 =

178 .
lid
 = 0x0a418820,

179 .
	gsubCss
 = 1,

180 .
	gcf
 = 0,

181 .
	gcs
 = 0,

182 .
	gf
 = 2,

183 .
	gk
 = 32,

184 .
	gl
 = 4,

185 .
	gn
 = 16,

186 .
	gm
 = 4,

187 .
	gٮ
 = 16,

188 .
	gs
 = 1,

189 .
	ghd
 = 0x1,

190 .
	grxCeIruMask
 = 0xFFFD,

191 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

192 .
	gs
 = 0x0,

193 .
	gabLkTe
 = 0x0,

195 .
	grxFtuDib
 = 0x10,

198 .
	grxCfig
 =

200 .
lid
 = 0x0a418820,

201 .
	gsubCss
 = 1,

202 .
	gcf
 = 0,

203 .
	gcs
 = 0,

204 .
	gf
 = 4,

205 .
	gk
 = 32,

206 .
	gl
 = 2,

207 .
	gn
 = 16,

208 .
	gm
 = 4,

209 .
	gٮ
 = 16,

210 .
	gs
 = 1,

211 .
	ghd
 = 0x1,

212 .
	gtxIsDay
 = 0xc,

216 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

217 .
	gs
 = 0x0,

218 .
	gceIruMask
 = 0xd,

219 .
	gbs
 = 0x0,

221 .
	gabLkTe
 = 0x1,

223 .
	grxFtuDib
 = 0x10,

226 .
	gxCfig
 =

228 .
lid
 = 0x0a418820,

229 .
	gsubCss
 = 1,

230 .
	gcf
 = 0,

231 .
	gcs
 = 0,

232 .
	gf
 = 2,

233 .
	gk
 = 32,

234 .
	gl
 = 2,

235 .
	gn
 = 16,

236 .
	gm
 = 4,

237 .
	gٮ
 = 16,

238 .
	gs
 = 1,

239 .
	ghd
 = 0x1,

240 .
	gtxIsDay
 = 0xc,

244 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

245 .
	gs
 = 0x0,

246 .
	gceIruMask
 = 0xd,

247 .
	gbs
 = 0x0,

249 .
	gabLkTe
 = 0x0,

251 .
	grxFtuDib
 = 0x10,

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_config.h

12 #ide
_BZ_CONFIG__H_


13 
	#_BZ_CONFIG__H_


	)

14 
	~<bz__h.h
>

15 
BzIn_t
 
B20In
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_example_hal.h

1 #ide
__BZ_HAL_H__


2 
	#__BZ_HAL_H__


	)

3 * 
	tbzHHd
;

4 
	~"bz__h_tys.h
"

5 
	~<dio.h
>

10 
bzHE
 
BZHAL_UDay
(
ut32_t
 
ucs
);

11 
bzHE
 
BZHAL_MDay
(
ut32_t
 
mcs
);

12 
bzHE
 
BZHAL_tTimeout
(*
devHInfo
, 
ut32_t
 
hTimeout_ms
);

16 
bzHE
 
BZHAL_GpioOn
(
bzHDevId
 
devid
, 
bzHGpio
 
gpio
);

17 
bzHE
 
BZHAL_GpioOnExt
(
bzHDevId
 
devid
, 
gpioid
);

18 
bzHE
 
BZHAL_GpioClo
(
bzHHd
 
hd
);

19 
bzHE
 
BZHAL_GpioSDei
(
bzHHd
 
hd
, 
ut8_t
 
isOuut
);

20 
bzHE
 
BZHAL_GpioGDei
(
bzHHd
 
hd
, 
ut8_t
* 
isOuut
);

21 
bzHE
 
BZHAL_GpioS
(
bzHHd
 
hd
, 
ut8_t
 
vue
);

22 
bzHE
 
BZHAL_GpioG
(
bzHHd
 
hd
, 
ut8_t
* 
vue
);

25 
bzHE
 
BZHAL_SpiOn
(
bzHDevId
 
devid
);

26 
bzHE
 
BZHAL_SpiClo
(
bzHHd
 
hd
);

27 
bzHE
 
BZHAL_SpiWreReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
 
da
);

28 
bzHE
 
BZHAL_SpiRdReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
* 
da
);

29 
bzHE
 
BZHAL_iWreFld
(
bzHHd
 
devHInfo
, 
ut16_t
 
addr
, 
ut8_t
 
fldV
, ut8_
d
, ut8_
tB
);

30 
bzHE
 
BZHAL_iRdFld
(
bzHHd
 
devHInfo
, 
ut16_t
 
addr
, 
ut8_t
 *
fldV
, ut8_
d
, ut8_
tB
);

34 
bzHE
 
BZHAL_tLogLev
(
bzHHd
 
devHInfo
, 
ut16_t
 
hLogLev
);

35 
bzHE
 
BZHAL_wreToLog
(
bzHHd
 
devHInfo
, 
bzLogLev_t
 
logLev
, 
ut32_t
 
rCode
, cڡ *
commt
);

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_talise.c

1 
	~"bz_cfig.h
"

2 
	~"bz_h.h
"

3 
	~"bz_exame_h.h
"

4 
	~"axi.h
"

6 
	~<bz_agc.h
>

7 
	~<bz_ls.h
>

8 
	~<bz_r.h
>

9 
	~<bz_gpio.h
>

10 
	~<bz_.h
>

11 
	~<bz_jesd204b.h
>

12 
	~<bz_p.h
>

13 
	~<bz__h.h
>

14 
	~<bz_dio.h
>

15 
	~<bz_riscv.h
>

16 
	~<bz_rx.h
>

17 
	~<bz_tx.h
>

19 
	~<unid.h
>

20 
	~<f.h
>

21 
	~<sys/iol.h
>

22 
	~<sys/mm.h
>

23 
	~<mloc.h
>

24 
	~"pock.h
"

25 
	~".h
"

26 
ut32_t
 
gulLogLev
;

27 
BzDevi_t
 
	gg_devi
 = { 0 };

28 
	gg_axi_fe
 = -1;

29 
	gg_mem_fe
 = -1;

30 * 
	gpRX_M
;

31 * 
	gpTX_M
;

32 
	#DEVICE_HANDLE
 &
g_devi


	)

33 
	#PLAXI_NAME
 "/dev/axi"

	)

34 
	#MEM_NAME
 "/dev/mem"

	)

35 
	#RX_204B_OFFSET
 0x38000000

	)

36 
	#RX_204B_SIZE
 0x8000000

	)

37 
	#TX_204B_OFFSET
 0x30000000

	)

38 
	#TX_204B_SIZE
 0x8000000

	)

39 
	#DATA_SIZE
 19660800

	)

41 
	ggMode
 = 0x2;

44 
	#FUNCTION_CHECK
(
ai
) \

45 if(
ai
 =
BZHAL_OK
) { \

46 
	`BZHAL_Prtf
("%iOK!\n", 
__func__
); \

50 
	`BZHAL_Prtf
("%i!\n", 
__func__
); \

52 }

	)

54 
	#RETURN_CHECK
(
tv
)\

55 if(
tv
 =
BZHAL_OK
){ \

56 
	`BZHAL_Prtf
("%iOK!\n", 
__func__
); \

59 
	`BZHAL_Prtf
("%i!\n", 
__func__
); \

60 }

	)

62 
	#FUNCTION_START
 \

63 
	`BZHAL_Prtf
("%...\n", 
__func__
);

	)

65 
t32_t
 
	$ݒ_devi
(
ut32_t
 
devi_id
)

67 
ut32_t
 
bzAi
 = 
	`BZ_ݒHw
(
DEVICE_HANDLE
, 
devi_id
);

68 
g_axi_fe
 = 
	`ݒ
(
PLAXI_NAME
, 
O_RDWR
);

70 
	`FUNCTION_CHECK
(
bzAi
)

71 
	}
}

73 
t32_t
 
	$o_devi
()

75 
	`munm
(
pTX_M
, 
TX_204B_SIZE
);

76 
	`munm
(
pRX_M
, 
RX_204B_SIZE
);

77 
	`o
(
g_axi_fe
);

78 
	`o
(
g_mem_fe
);

79 
	`BZ_oHw
(
DEVICE_HANDLE
);

80 
	}
}

82 
t32_t
 
	$_devi
()

84 
ut32_t
 
bzAi
 = 
	`BZ_tDevi
(
DEVICE_HANDLE
);

85 
	`FUNCTION_CHECK
(
bzAi
)

86 
	}
}

88 
t32_t
 
	$wa_bo_us
()

90 
FUNCTION_START


91 
ut32_t
 
bzAi
 = 
	`BZ_gBoStus
(
DEVICE_HANDLE
);

92 
	`FUNCTION_CHECK
(
bzAi
)

93 
	}
}

95 
t32_t
 
	$ld_fmwe
()

97 
ut32_t
 
bzAi
 = 
	`BZ_ldFmwe
(
DEVICE_HANDLE
);

98 
	`FUNCTION_CHECK
(
bzAi
)

99 
	}
}

101 
t32_t
 
	$wa_fmwe_ady
()

103 
FUNCTION_START


104 
ut32_t
 
bzAi
 = 
	`BZ_waFmweRdy
(
DEVICE_HANDLE
, 100);

105 
bzAi
 = 
	`BZ_gSdkVsi
(
DEVICE_HANDLE
);

106 
	`FUNCTION_CHECK
(
bzAi
)

107 
	}
}

109 
t32_t
 
	$ld_cfig
()

111 
ut32_t
 
bzAi
 = 
	`BZ_lize
(
DEVICE_HANDLE
, &
B20In
);

112 
	`FUNCTION_CHECK
(
bzAi
)

113 
	}
}

115 
t32_t
 
	$wre_ofe
()

117 
ut32_t
 
bzAi
 = 
	`BZ_wreRiscvProfe
(
DEVICE_HANDLE
, &
B20In
);

118 
	`FUNCTION_CHECK
(
bzAi
)

119 
	}
}

121 
t32_t
 
	$wa_ofe_de
()

123 
FUNCTION_START


124 
ut32_t
 
bzAi
 = 
	`BZ_waProfeDe
(
DEVICE_HANDLE
, 100);

125 
	`FUNCTION_CHECK
(
bzAi
)

126 
	}
}

128 
t32_t
 
	$t_rf_l_eq
(
ut64_t
 
eq_hz
)

130 
ut32_t
 
bzAi
 = 
	`BZ_tPFqucy
(
DEVICE_HANDLE
, 
BZ_RF_PLL
, 
eq_hz
);

131 
	`FUNCTION_CHECK
(
bzAi
)

132 
	}
}

134 
t32_t
 
	$t_aux_l_eq
(
ut64_t
 
eq_hz
)

136 
ut32_t
 
bzAi
 = 
	`BZ_tPFqucy
(
DEVICE_HANDLE
, 
BZ_AUX_PLL
, 
eq_hz
);

137 
	`FUNCTION_CHECK
(
bzAi
)

138 
	}
}

140 
t32_t
 
	$wa_l_lock_de
()

142 
FUNCTION_START


143 
ut32_t
 
bzAi
 = 
	`BZ_waPsLockDe
(
DEVICE_HANDLE
, 5000);

144 
	`FUNCTION_CHECK
(
bzAi
)

145 
	}
}

147 
t32_t
 
	$run_ls
(
ut32_t
 
mask
)

149 
ut32_t
 
bzAi
 = 
	`BZ_runInCs
(
DEVICE_HANDLE
, 
mask
);

150 
	`FUNCTION_CHECK
(
bzAi
)

151 
	}
}

153 
t32_t
 
	$wa_ls_de
()

155 
FUNCTION_START


156 
ut32_t
 
bzAi
 = 
	`BZ_waInCsDe
(
DEVICE_HANDLE
, 5000);

157 
	`BZ_gInCsStus
(
DEVICE_HANDLE
);

158 
	`FUNCTION_CHECK
(
bzAi
)

159 
	}
}

161 
t32_t
 
	$gls_us
(){

162 
FUNCTION_START


163 
ut32_t
 
bzAi
 = 
	`BZ_gInCsStus
(
DEVICE_HANDLE
);

164 
	`FUNCTION_CHECK
(
bzAi
)

165 
	}
}

167 
	$t_204b_sysc
()

169 
ut32_t
 
vue
;

170 
	`iol
(
g_axi_fe
, 
PLAXI_READ_204B_PARAM
, &
vue
);

171 
vue
 |= (1 << 16);

172 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_204B_PARAM
, &
vue
);

173 
	}
}

175 
	$d_204b_sysc
()

177 
ut32_t
 
vue
;

178 
	`iol
(
g_axi_fe
, 
PLAXI_READ_204B_PARAM
, &
vue
);

179 
vue
 &= (~(1 << 16));

180 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_204B_PARAM
, &
vue
);

181 
	}
}

183 
t32_t
 
	$jesd204b_sysc_is_ok
()

185 
ut32_t
 
vue
;

186 
	`iol
(
g_axi_fe
, 
PLAXI_READ_204B_STATE
, &
vue
);

187 
	`BZ_PRINT
("0x%x",
vue
);

188  (
vue
 & 0xF) == 0xF;

189 
	}
}

191 
t32_t
 
	$jesd204b_cfig
()

193 
ut32_t
 
bzAi
 = 
	`BZ_wreJes204bCfig
(
DEVICE_HANDLE
, &
B20In
);

194 
	`FUNCTION_CHECK
(
bzAi
)

195 
	}
}

197 
ut32_t
 
	$t_auxadc
(
BzAuxAdcCfig_t
 *
auxAdcCfig
)

199 
ut32_t
 
bzAi
 = 
	`BZ_tAuxAdc
(&
g_devi
, 
auxAdcCfig
);

200 
	`FUNCTION_CHECK
(
bzAi
)

201 
	}
}

203 
ut32_t
 
	$ad_auxadc
(
BzAuxAdcResu_t
 *
auxAdcCfig
)

205 
ut32_t
 
bzAi
 = 
	`BZ_adAuxAdc
(&
g_devi
, 
auxAdcCfig
);

206 
	`FUNCTION_CHECK
(
bzAi
)

207 
	}
}

209 
ut32_t
 
	$tup_auxdac
(
ut16_t
 
Gpio3V3Num
)

211 
ut32_t
 
bzAi
 = 
	`BZ_tupAuxDacs
(&
g_devi
, 
Gpio3V3Num
);

212 
	`FUNCTION_CHECK
(
bzAi
)

213 
	}
}

215 
ut32_t
 
	$wre_auxdac
(
ut16_t
 
Gpio3V3Num
,ut16_
auxDacCode
)

217 
ut32_t
 
bzAi
 = 
	`BZ_wreAuxDac
(&
g_devi
, 
Gpio3V3Num
, 
auxDacCode
);

218 
	`FUNCTION_CHECK
(
bzAi
)

219 
	}
}

221 
t32_t
 
	$jesd204b_cfgchge

BzTxCfig_t
 
Tx204BPam
, 
BzRxOrXCfig_t
 
Rx204BPam
 )

224 
	`BZ_PRINT
("JESD 204B Tx Cfg:\n");

225 
	`BZ_PRINT
("\c%d", 
B20In
.
jesd204Stgs
.
txCfig
.
cf
 = 
Tx204BPam
.cf);

226 
	`BZ_PRINT
("\c%d", 
B20In
.
jesd204Stgs
.
txCfig
.
cs
 = 
Tx204BPam
.cs);

227 
	`BZ_PRINT
("\%d", 
B20In
.
jesd204Stgs
.
txCfig
.
f
 = 
Tx204BPam
.f);

228 
	`BZ_PRINT
("\k = %d", 
B20In
.
jesd204Stgs
.
txCfig
.
k
 = 
Tx204BPam
.k);

229 
	`BZ_PRINT
("\%d", 
B20In
.
jesd204Stgs
.
txCfig
.
l
 = 
Tx204BPam
.l);

230 
	`BZ_PRINT
("\%d", 
B20In
.
jesd204Stgs
.
txCfig
.
n
 = 
Tx204BPam
.n);

231 
	`BZ_PRINT
("\m = %d", 
B20In
.
jesd204Stgs
.
txCfig
.
m
 = 
Tx204BPam
.m);

232 
	`BZ_PRINT
("\ٮ = %d", 
B20In
.
jesd204Stgs
.
txCfig
.
ٮ
 = 
Tx204BPam
.ntotal);

233 
	`BZ_PRINT
("\%d", 
B20In
.
jesd204Stgs
.
txCfig
.
s
 = 
Tx204BPam
.s);

234 
	`BZ_PRINT
("\hd = %d\n", 
B20In
.
jesd204Stgs
.
txCfig
.
hd
 = 
Tx204BPam
.hd);

236 
	`BZ_PRINT
("JESD 204B Rx Cfg:\n");

237 
	`BZ_PRINT
("\c%d",
B20In
.
jesd204Stgs
.
rxCfig
.
cf
 = 
Rx204BPam
.cf);

238 
	`BZ_PRINT
("\c%d",
B20In
.
jesd204Stgs
.
rxCfig
.
cs
 = 
Rx204BPam
.cs);

239 
	`BZ_PRINT
("\%d",
B20In
.
jesd204Stgs
.
rxCfig
.
f
 = 
Rx204BPam
.f);

240 
	`BZ_PRINT
("\k = %d",
B20In
.
jesd204Stgs
.
rxCfig
.
k
 = 
Rx204BPam
.k);

241 
	`BZ_PRINT
("\%d",
B20In
.
jesd204Stgs
.
rxCfig
.
l
 = 
Rx204BPam
.l);

242 
	`BZ_PRINT
("\%d",
B20In
.
jesd204Stgs
.
rxCfig
.
n
 = 
Rx204BPam
.n);

243 
	`BZ_PRINT
("\m = %d",
B20In
.
jesd204Stgs
.
rxCfig
.
m
 = 
Rx204BPam
.m);

244 
	`BZ_PRINT
("\ٮ = %d",
B20In
.
jesd204Stgs
.
rxCfig
.
ٮ
 = 
Rx204BPam
.ntotal);

245 
	`BZ_PRINT
("\%d",
B20In
.
jesd204Stgs
.
rxCfig
.
s
 = 
Rx204BPam
.s);

246 
	`BZ_PRINT
("\hd = %d",
B20In
.
jesd204Stgs
.
rxCfig
.
hd
 = 
Rx204BPam
.hd);

247 
	`BZ_PRINT
("\txIsDay = %d\n",
B20In
.
jesd204Stgs
.
rxCfig
.
txIsDay
 = 
Rx204BPam
.txIlasDelay);

248 
	}
}

250 
t32_t
 
	$wa_jesd204b_cfig
()

252 
FUNCTION_START


253 
ut32_t
 
bzAi
 = 
	`BZ_waJes204bCfigDe
(
DEVICE_HANDLE
, 100);

254 
bzAi
 = 
	`BZ_abFmLk
(
DEVICE_HANDLE
, 
BZ_FRAMER_A
, 0);

255 
bzAi
 = 
	`BZ_abFmLk
(
DEVICE_HANDLE
, 
BZ_FRAMER_A
, 1);

256 
bzAi
 = 
	`BZ_abFmLk
(
DEVICE_HANDLE
, 
BZ_FRAMER_B
, 0);

257 
bzAi
 = 
	`BZ_abFmLk
(
DEVICE_HANDLE
, 
BZ_FRAMER_B
, 1);

258 
bzAi
 = 
	`BZ_abDeamLk
(
DEVICE_HANDLE
, 
BZ_DEFRAMER
, 0);

259 
bzAi
 = 
	`BZ_abDeamLk
(
DEVICE_HANDLE
, 
BZ_DEFRAMER
, 1);

260 
	`FUNCTION_CHECK
(
bzAi
)

261 
	}
}

264 
t32_t
 
	$dio_
(
t32_t
 
siMode
)

266 
ut32_t
 
bzAi
 = 
	`BZ_dioOn
(
DEVICE_HANDLE
,
siMode
);

267 
gMode
 = 
siMode
;

268 
	`FUNCTION_CHECK
(
bzAi
)

269 
	}
}

271 
t32_t
 
	$tx1_te
(
ut32_t
 
eq1_khz
,
t32_t
 
ga1
)

273 
BzTxDdsTeTeCfg_t
 
cfig
;

274 
cfig
.
txTe1Fq_kHz
 = 
eq1_khz
;

275 
cfig
.
txTe2Fq_kHz
 = 
eq1_khz
;

277 
BzTxDdsACfg_t
 
ddsA
;

278 
ddsA
.
txTe0A
 = 
ga1
;

279 
ddsA
.
txTe1A
 = 
ga1
;

280 
ddsA
.
txTe2A
 = 
ga1
;

281 
ddsA
.
txTe3A
 = 
ga1
;

283 
ut32_t
 
bzAi
 = 
	`BZ_tDDsFqCfig
(
DEVICE_HANDLE
,

284 
BZ_TX1
, 
cfig
, 
ddsA
);

285 
	`FUNCTION_CHECK
(
bzAi
)

286 
	}
}

288 
t32_t
 
	$tx2_te
(
ut32_t
 
eq2_khz
,
t32_t
 
ga2
)

290 
BzTxDdsTeTeCfg_t
 
cfig
;

291 
cfig
.
txTe1Fq_kHz
 = 
eq2_khz
;

292 
cfig
.
txTe2Fq_kHz
 = 
eq2_khz
;

294 
BzTxDdsACfg_t
 
ddsA
;

295 
ddsA
.
txTe0A
 = 
ga2
;

296 
ddsA
.
txTe1A
 = 
ga2
;

297 
ddsA
.
txTe2A
 = 
ga2
;

298 
ddsA
.
txTe3A
 = 
ga2
;

300 
ut32_t
 
bzAi
 = 
	`BZ_tDDsFqCfig
(
DEVICE_HANDLE
,

301 
BZ_TX2
, 
cfig
, 
ddsA
);

302 
	`FUNCTION_CHECK
(
bzAi
)

303  
bzAi
 =
BZHAL_OK
 ? 0: -1;

304 
	}
}

305 
ut32_t
 
	$g_204
()

307 
ut32_t
 
uiR
=0;

308 
	`BZ_gSyncStus
(
DEVICE_HANDLE
,&
uiR
);

309 if(
uiR
==0)

311 
	`BZ_PRINT
("204 sync OK!\n");

313 
	`BZ_PRINT
("204 syn! ERRCODE = %d \n",
uiR
);

314 
	}
}

316 
ut32_t
 
	$cv_x_da
(
ut32_t
 
pots
, ut32_
chls
)

319 
ut32_t
 
vue
 = 0;

320 
t16_t
* 
da
 = 
NULL
;

321 
i
=0,
cou
 = 
pots
*2;

322 
t16_t
 
siTmpDa
 = 0;

323 
FILE
 *

;

325 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

326 
	`BZ_PRINT
("Reg.RegAdd0x5,Reg.RegVu0x%x\n", 
vue
);

328 
vue
 &= 0xFFFFFF8F;

329 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

330 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

331 
	`BZ_PRINT
("Reg.RegAdd0x5,Reg.RegVu0x%x\n", 
vue
);

332 
	`up
(10 * 1000);

334 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

335 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

336 
vue
 = 0;

337 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

338 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

339 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

340 
	`up
(10 * 1000);

342 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

343 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

344 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

345 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

346 
	`up
(10 * 1000);

348 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

349 
vue
 |= (0x01 << 3);

350 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

351 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

352 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

353 
	`p
(2);

355 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

356 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

357 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

358 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

359 
	`up
(10 * 1000);

365 
da
 = (
t16_t
*)
pRX_M
;

366 
	`BZ_PRINT
("|********x data **********|\n");

367 

 = 
	`fݒ
("data.txt","w+");

368 
i
 = 0; i < 
cou
 ; i++)

370 
siTmpDa
 = *
da
;

371 
	`rtf
(

,"%d\n",
siTmpDa
/4);

372 
	`BZ_PRINT
("%d\n",
siTmpDa
/4);

373 
da
++;

375 
	`BZ_PRINT
("|******** finish **********|\n");

376 
	`fo
(

);

377 
	`up
(30 * 1000);

378 
vue
 = 0;

381 
	`up
(30 * 1000);

383 
vue
 = 0;

384 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

385 
	`up
(10 * 1000);

386 
	}
}

388 
ut32_t
 
	$_tx_da
()

390 
ut32_t
* 
da
 = (ut32_t*)
pTX_M
;

391 
	`BZ_PRINT
("printop 10 send TX data.\n");

392 
ut32_t
 
i
 = 0; i < 10; i++)

394 
	`BZ_PRINT
("%d \n",*
da
);

395 
da
++;

397 
	`BZ_PRINT
("finish\n");

398 
	}
}

400 
ut32_t
 
	$debug_da
(
ut32_t
 
addr
,ut32_
posi
,ut32_
cou
,ut32_

)

402 
	`BZ_iGJesdDebugDa
(
DEVICE_HANDLE
,
addr
,
posi
,
cou
,

);

403 
	}
}

405 
ut32_t
 
	$grxdeow
(
BzAuxAdcChls_t
 
auxadcChl
)

407 
st16_t
 
siPow
=0;

408 
	`BZ_gRxDecPow
(
DEVICE_HANDLE
,
auxadcChl
,&
siPow
);

409 
	`BZ_PRINT
("grxDecPow = %d dBFS\n",
siPow
);

410 
	}
}

411 
ut32_t
 
	$gxdeow
(
BzAuxAdcChls_t
 
auxadcChl
)

413 
st16_t
 
siPow
=0;

414 
	`BZ_gORxDecPow
(
DEVICE_HANDLE
,
auxadcChl
,&
siPow
);

415 
	`BZ_PRINT
("gxDecPow = %d dBFS\n",
siPow
);

416 
	}
}

418 
ut32_t
 
	$ga_nd
()

420 
	`BZ_tDdsOff
(
DEVICE_HANDLE
);

421 
fe
 = 
	`ݒ
("./s10M.d", 
O_RDONLY
);

422 
ut32_t
 
vue
 = 0;

423 * 
buf
 = 
NULL
;

424 
ssize_t
 
size
 = 0;

425 if(
fe
<0)

427 
	`BZ_PRINT
("fileeadrror!\n");

430 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_TX_DATA_PARAM
, &
vue
);

431 
buf
 = (*)
	`mloc
(()*
DATA_SIZE
);

432 
size
 = 
	`ad
(
fe
,
buf
,
DATA_SIZE
);

433 if(
size
<0)

435 
	`BZ_PRINT
("file copyrror!\n");

436 
	`o
(
fe
);

439 
	`memy
(
pTX_M
,
buf
,
size
);

440 
	`_tx_da
();

441 
vue
 = ((
size
 / 4 / 1024) << 16);

442 
vue
 |= (0x02 << 1);

443 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_TX_DATA_PARAM
, &
vue
);

444 
	`up
(50 * 1000);

446 
vue
 = ((
size
 / 4 / 1024) << 16);

447 
vue
 |= (0x02 << 1);

448 
vue
 |= (0x01 << 4);

449 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_TX_DATA_PARAM
, &
vue
);

450 
	`o
(
fe
);

451 
	`
(
buf
);

452 
	}
}

453 
ut32_t
 
	$cv_rx_da
(
ut32_t
 
pots
, ut32_
chls
)

456 
ut32_t
 
vue
 = 0;

457 
t16_t
* 
da
 = 
NULL
;

458 
i
=0,
cou
 = 
pots
*2;

459 
t16_t
 
siTmpDa
 = 0;

460 
FILE
 *

;

462 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

463 
	`BZ_PRINT
("Reg.RegAdd0x5,Reg.RegVu0x%x\n", 
vue
);

465 
vue
 &= 0xFFFFFF8F;

466 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

467 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

468 
	`BZ_PRINT
("Reg.RegAdd0x5,Reg.RegVu0x%x\n", 
vue
);

469 
	`up
(10 * 1000);

471 
vue
 |(
chls
 << 4);

472 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

473 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

474 
	`BZ_PRINT
("Reg.RegAdd0x5,Reg.RegVu0x%x\n", 
vue
);

475 
	`up
(10 * 1000);

477 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

478 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

479 
vue
 = 0;

480 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

481 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

482 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

483 
	`up
(10 * 1000);

485 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

486 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

487 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

488 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

489 
	`up
(10 * 1000);

491 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

492 
vue
 |= (0x01 << 3);

493 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

494 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

495 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

496 
	`p
(2);

498 
vue
 = ((
pots
 / 1024) << 16) & 0xFFFF0000;

499 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

500 
	`iol
(
g_axi_fe
, 
PLAXI_READ_RX_DATA_PARAM
, &
vue
);

501 
	`BZ_PRINT
("Reg.RegAdd0x1,Reg.RegVu0x%x\n", 
vue
);

502 
	`up
(10 * 1000);

504 
da
 = (
t16_t
*)
pRX_M
;

505 
	`BZ_PRINT
("|********x data **********|\n");

506 

 = 
	`fݒ
("data.txt","w+");

507 
i
 = 0; i < 
cou
 ; i++)

509 
siTmpDa
 = *
da
;

510 
	`rtf
(

,"%d\n",
siTmpDa
/4);

511 
	`BZ_PRINT
("%d\n",
siTmpDa
/4);

512 
da
++;

514 
	`BZ_PRINT
("|******** finish **********|\n");

515 
	`fo
(

);

516 
	`up
(30 * 1000);

517 
vue
 = 0;

519 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_RX_DATA_PARAM
, &
vue
);

520 
	`up
(10 * 1000);

521 
	}
}

523 
ut32_t
 
	$g_dio_e
()

525 
	`BZ_gRadioS
(
DEVICE_HANDLE
);

526 
	}
}

527 
ut32_t
 
	$ad_g
(
ut16_t
 
addr
)

529 
ut32_t
 
da
;

530 
	`BZ_iRdReg
(
DEVICE_HANDLE
,
addr
,&
da
);

531 
	`BZ_PRINT
("adg 0x%x vu0x%x\n",
addr
,
da
);

532  
da
;

533 
	}
}

534 
ut32_t
 
	$ad_gb
(
ut16_t
 
addr
,
ut32_t
 
db
,ut32_
tb
)

536 
ut32_t
 
gda
=0;

538 
	`BZ_iRdFld
(
DEVICE_HANDLE
,
addr
,&
gda
,
db
,
tb
);

539 
	`BZ_PRINT
("adgb <%d:%d> = 0x%x\n",
db
,
tb
,
gda
);

540  
gda
;

541 
	}
}

542 
ut32_t
 
	$wre_g
(
ut16_t
 
addr
 ,
ut32_t
 
da
)

544 
	`BZ_iWreReg
(
DEVICE_HANDLE
,
addr
,
da
);

545 
	}
}

546 
ut32_t
 
	$wre_gb
(
ut16_t
 
addr
 ,
ut32_t
 
db
,ut32_
tb
,ut32_
da
)

548 
ut32_t
 
gda
=0,
gmask
=0;

549 
	`BZ_iRdReg
(
DEVICE_HANDLE
,
addr
,&
gda
);

550 
gmask
 = ~((1<<
tb
)-1);

551 
gmask
 &((1<<
db
)-1)|(1<<endbit);

552 
gda
 &~
gmask
;

553 
gda
 |(
da
 << 
tb
& 
gmask
;

554 
	`BZ_iWreReg
(
DEVICE_HANDLE
,
addr
,
da
);

555 
	}
}

556 
ut32_t
 
	$g_th
()

558 
ut32_t
 
siRX
, 
siORX
,
siTX
;

559 
ut32_t
 
siPhB
=0;

560 if(
gMode
==0x2)

562 
	`BZ_gRadioClSpiMode
(
DEVICE_HANDLE
,&
siRX
,&
siORX
,&
siTX
);

563 
	`BZ_PRINT
("imodRX = %d ,ORX = %d ,TX = %d \n",
siRX
,
siORX
,
siTX
);

565 if(
gMode
 == 0x1)

567 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

568 
bzHE
 
hStus
=
BZHAL_OK
;

569 
ut32_t
 
dioStus
 = 0
i
,
ulRX
=0,
ulTX
=0,
ulORX
=0;

571 
hStus
=
	`BZ_iRdReg
(
DEVICE_HANDLE
,0x411,&
dioStus
);

572 
bzRA
=
	`BZ_ApiEHdr
(
DEVICE_HANDLE
,
BZ_ERRHDL_HAL_TX
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

573 
	`IF_ERR_RETURN
(
bzRA
);

574 if((
dioStus
&
TX0ENMASK
=0x400)
ulTX
+=1;

575 if((
dioStus
&
TX1ENMASK
=0x800)
ulTX
+=2;

576 if((
dioStus
&
RX0ENMASK
=0x1000)
ulRX
+=1;

577 if((
dioStus
&
RX1ENMASK
=0x2000)
ulRX
+=2;

578 if((
dioStus
&
ORX0ENMASK
=0x4000)
ulORX
+=1;

579 if((
dioStus
&
ORX1ENMASK
=0x8000)
ulORX
+=2;

580 
	`BZ_PRINT
("pmod, RX = %d ,ORX = %d ,TX = %d \n",
ulRX
,
ulORX
,
ulTX
);

582 
	}
}

583 
ut32_t
 
	$t_th
(
siRX
,
siORX
,
siTX
)

585 
ut32_t
 
siPhB
=0;

586 if(
gMode
==0x2)

588 
	`BZ_PRINT
("spimode\n");

589 
	`BZ_tRadioClSpiMode
(
DEVICE_HANDLE
,
siRX
,
siORX
,
siTX
);

591 if(
gMode
 == 0x1)

593 
	`BZ_PRINT
("pinmode\n");

594 
	`BZ_tRadioClPMode
(
DEVICE_HANDLE
,
siRX
,
siORX
,
siTX
);

596 
	}
}

598 
ut32_t
 
	$xga
(
ut32_t
 
chls
, 
ut8_t
 
gaIndexTx
)

600 
	`BZ_tTxMuGa
(
DEVICE_HANDLE
,
chls
,
gaIndexTx
);

601 
	}
}

603 
ut32_t
 
	$xga
(
ut32_t
 
chls
, 
ut8_t
 
gaIndexRx
)

605 
	`BZ_tRxMuGa
(
DEVICE_HANDLE
,
chls
,
gaIndexRx
);

606 
	}
}

607 
ut32_t
 
	$txga
(
ut32_t
 
chls
 ,
ut8_t
 
gaIndexOrx
)

609 
	`BZ_tObsRxMuGa
(
DEVICE_HANDLE
,
chls
,
gaIndexOrx
);

610 
	}
}

613 
ut32_t
 
	$gga
(
ut32_t
 
chls
)

615 
ut32_t
 
dexrx
=0,
dextx
=0,
dexx
=0;

616 
	`BZ_gTxGa
(
DEVICE_HANDLE
,
chls
,&
dexrx
);

617 
	`BZ_PRINT
("Tx = %d ,ga = %d\n",
chls
,
dexrx
);

618 
	`BZ_gRxGa
(
DEVICE_HANDLE
,
chls
,&
dextx
);

619 
	`BZ_PRINT
("Rx = %d ,ga = %d\n",
chls
,
dextx
);

620 
	`BZ_gObsRxGa
(
DEVICE_HANDLE
,
chls
,&
dexx
);

621 
	`BZ_PRINT
("Orx = %d ,ga = %d\n",
chls
,
dexx
);

622 
	}
}

624 
	$_oss
()

626 
ut32_t
 
vue
 = 0;

628 
g_mem_fe
 = 
	`ݒ
(
MEM_NAME
, 
O_RDWR
 | 
O_SYNC
);

629 
g_axi_fe
 = 
	`ݒ
(
PLAXI_NAME
, 
O_RDWR
);

630 
pRX_M
 = (*)
	`mm
(0, 
RX_204B_SIZE
,
PROT_READ
 | 
PROT_WRITE
, 
MAP_SHARED
, 
g_mem_fe
, 
RX_204B_OFFSET
);

631 
pTX_M
 = (*)
	`mm
(0, 
TX_204B_SIZE
,
PROT_READ
 | 
PROT_WRITE
, 
MAP_SHARED
, 
g_mem_fe
, 
TX_204B_OFFSET
);

633 
	`iol
(
g_axi_fe
, 
PLAXI_CHIP_SEL
, &
vue
);

634 
	}
}

636 
	$d_oss
()

638 
i
=0;

639 
ut32_t
 
vue
 =0;

641 
i
 = 0 ;i < 10 ;i++)

643 
	`up
(1000*100);

644 if(
	`jesd204b_sysc_is_ok
())

646 
	`BZ_PRINT
("204sync ok!\n");

651 
vue
 = 0x4f4f;

652 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_204B_PARAM
, &
vue
);

655 
	`BZ_Jes204bSyefCڌ
(&
g_devi
, 
BZ_JES204B_SYSREF_OFF
);

657 
	`BZHAL_IruOn
(
g_devi
.
devHInfo
);

659 
vue
 = 1;

660 
	`iol
(
g_axi_fe
, 
PLAXI_SET_LANPA_PWR
, &
vue
);

662 
vue
 = 0;

663 
	`iol
(
g_axi_fe
, 
PLAXI_READ_IO_DIR_PARAM
, &
vue
);

664 
vue
 |= 0xF00;

665 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_IO_DIR_PARAM
, &
vue
);

666 
	}
}

668 
ut32_t
 
	$sdk_exame
(
siMode
)

670 
BzDevi_t
 *
hw_iv
=
NULL
;

672 
ut32_t
 
CTy
 = 
TX_BB_FILTER
|
ADC_TUNER
|
TIA_3DB_CORNER


673 |
DC_OFFSET
|
PATH_DELAY
|
TX_LO_LEAKAGE_INTERNAL


674 |
TX_QEC_INIT
|
LOOPBACK_RX_LO_DELAY
|
TX_DAC
|

675 
LOOPBACK_RX_QEC_INIT
|
RX_QEC_INIT
|
TIA_LPF_3DB_CORNER
|

676 
ORX_QEC_INIT
;

678 
	`BZ_PRINT
("l0x%x\n",
CTy
);

686 
ut8_t
 
rFg
 = 0;

687 
ut16_t
 
deamStus
 = 0;

689 
ut8_t
 
amStus
 = 0;

690 
ut32_t
 
bzAi
 = 
BZHAL_OK
;

691 
ut32_t
 
vue
=0,
i
=0;

693 
gMode
 = 
siMode
;

696 
vue
 = 0x14f4f;

697 
	`iol
(
g_axi_fe
, 
PLAXI_WRITE_204B_PARAM
, &
vue
);

708 
hw_iv
 = &
g_devi
;

711 
bzAi
=
	`BZ_gSdkVsi
(
hw_iv
);

714 
bzAi
 = 
	`BZ_ݒHw
(
hw_iv
,
BZHAL_DEVID0
);

715 if(
bzAi
==0){
	`BZ_PRINT
("BZ_openHw OK\n");}

716 {
	`BZ_PRINT
("BZ_openHw Error\n");}

719 
bzAi
 = 
	`BZ_tDevi
(
hw_iv
);

720 if(
bzAi
==0){
	`BZ_PRINT
("BZ_resetDevice OK\n");}

721 {
	`BZ_PRINT
("BZ_resetDevice Error\n");}

724 
bzAi
 = 
	`BZ_gBoStus
(
hw_iv
);

728 
bzAi
 = 
	`BZ_ldFmwe
(
hw_iv
);

731 
bzAi
 = 
	`BZ_waFmweRdy
(
hw_iv
,100);

735 
bzAi
 = 
	`BZ_lize
(
hw_iv
, &
B20In
);

739 
bzAi
 = 
	`BZ_wreRiscvProfe
(
hw_iv
,&
B20In
);

743 
bzAi
 = 
	`BZ_waProfeDe
(
hw_iv
,100);

750 
bzAi
 = 
	`BZ_tPFqucy
(
hw_iv
,
BZ_RF_PLL
,2600000000);

755 
bzAi
 = 
	`BZ_waPsLockDe
(
hw_iv
,100);

759 
bzAi
 = 
	`BZ_tPFqucy
(
hw_iv
,
BZ_AUX_PLL
,2600000000);

763 
bzAi
 = 
	`BZ_waPsLockDe
(
hw_iv
,100);

780 
bzAi
 = 
	`BZ_wreJes204bCfig
(
hw_iv
,&
B20In
);

784 
bzAi
 = 
	`BZ_waJes204bCfigDe
(
hw_iv
,100);

792 
bzAi
 = 
	`BZ_abFmLk
(
hw_iv
, 
BZ_FRAMER_A
, 0);

795 
bzAi
 = 
	`BZ_abFmLk
(
hw_iv
, 
BZ_FRAMER_A
, 1);

798 
bzAi
 = 
	`BZ_abFmLk
(
hw_iv
, 
BZ_FRAMER_B
, 0);

801 
bzAi
 = 
	`BZ_abFmLk
(
hw_iv
, 
BZ_FRAMER_B
, 1);

807 
bzAi
 = 
	`BZ_abDeamLk
(
hw_iv
, 
BZ_DEFRAMER
, 0);

810 
bzAi
 = 
	`BZ_abDeamLk
(
hw_iv
, 
BZ_DEFRAMER
, 1);

816 
bzAi
 = 
	`BZ_abSysRefToFm
(
hw_iv
, &
B20In
);

820 
bzAi
 = 
	`BZ_dioOn
(
hw_iv
,
siMode
);

827 
	}
}

829 
	$teoff
()

831 
	`BZ_tDdsOff
(
DEVICE_HANDLE
);

832 
	`BZ_PRINT
("dds off\n");

833 
	}
}

834 
	$glog
()

836 
	`BZ_gRiscvLog
(&
g_devi
);

837 
	}
}

838 
	$g_leq
()

840 
ut64_t
 
ulRFPLL
=0,
ulAUXPLL
=0;

841 
	`BZ_gPFqucy
(
DEVICE_HANDLE
,
BZ_RF_PLL
,&
ulRFPLL
);

842 
	`BZ_gPFqucy
(
DEVICE_HANDLE
,
BZ_AUX_PLL
,&
ulAUXPLL
);

843 
	`BZ_PRINT
("RFPLL = %dhz,AUXPLL = %dhz\n",
ulRFPLL
,
ulAUXPLL
);

844 
	}
}

845 
	$t_204b_tx
(
ut32_t
 
ab
)

847 
	`BZ_abDeamLk
(
DEVICE_HANDLE
,
BZ_DEFRAMER
,
ab
);

848 
	`BZ_PRINT
("t_204b_tx = %d\n",
ab
);

849 
	}
}

850 
	$t_204b_rx
(
ut32_t
 
ab
)

852 
	`BZ_abFmLk
(
DEVICE_HANDLE
,
BZ_FRAMER_A
,
ab
);

853 
	`BZ_PRINT
("t_204b_rx = %d\n",
ab
);

854 
	}
}

855 
	$t_204b_x
(
ut32_t
 
ab
)

857 
	`BZ_abFmLk
(
DEVICE_HANDLE
,
BZ_FRAMER_B
,
ab
);

858 
	`BZ_PRINT
("t_204b_x = %d\n",
ab
);

859 
	}
}

860 
	$syef_cڌ
(
ut32_t
 
ONOFF
)

862 if(
ONOFF
 == 1)

864 
	`BZ_Jes204bSyefCڌ
(
DEVICE_HANDLE
,
BZ_JES204B_SYSREF_ON
);

865 
	`BZ_PRINT
("sysref on\n");

867 if(
ONOFF
 == 0)

869 
	`BZ_Jes204bSyefCڌ
(
DEVICE_HANDLE
,
BZ_JES204B_SYSREF_OFF
);

870 
	`BZ_PRINT
("sysref off\n");

872 
	`BZ_PRINT
("Undefined VALLUE \n 1. BZ_JES204B_SYSREF_ON = 1 \n 2.BZ_JES204B_SYSREF_OFF = 0 \n");

874 
	}
}

876 
	$ei
()

878 
BzTxPaPreCfg_t
 
PaProCfg
 = {

879 .
TxCiC
 = 1,

880 .
TxPowThshd
 = 3000 ,

881 .
Eb
 = 1

883 
	`BZ_tPaPreiCfg
(
DEVICE_HANDLE
,&
PaProCfg
);

884 
	}
}

886 
	$_ir
(
ut32_t
 
chls
,ut32_
ab
)

888 
BzRxSlirP_t
 * 
pBzRxSlirP
 = &
B20In
.
rx
.
rxSlirPInfo
;

889 
pBzRxSlirP
->
EbSlir
 = 
ab
;

890 
	`BZ_tRxSlirEb
(
DEVICE_HANDLE
,
chls
,
pBzRxSlirP
);

891 
	}
}

892 
	$xgaCl
(
ut32_t
 
ulMode
,ut32_
ulClWay
)

894 
	`BZ_tRxGaCڌMode
(
DEVICE_HANDLE
,
ulMode
,
ulClWay
);

895 
	}
}

897 
	$grxgaCl
()

899 
ut32_t
 
ulMode
,
ulClWay
;

901 
	`BZ_PRINT
("还不支持! RxGa Mod%d , ClWay = %d\n",
ulMode
,
ulClWay
);

902 
	}
}

904 
	$txgaCl
(
ut32_t
 
ulMode
,ut32_
ulClWay
)

906 
	`BZ_tObsRxGaCڌMode
(
DEVICE_HANDLE
,
ulMode
,
ulClWay
);

907 
	}
}

909 
	$gxgaCl
()

911 
ut32_t
 
ulMode
,
ulClWay
;

912 
	`BZ_gObsRxGaCڌMode
(
DEVICE_HANDLE
,&
ulMode
,&
ulClWay
);

913 
	`BZ_PRINT
("OrxGa Mod%d , ClWay = %d\n",
ulMode
,
ulClWay
);

914 
	}
}

916 
	$riscv_a
()

918 
	`BZ_GRiscvTEvt
(
DEVICE_HANDLE
);

919 
	}
}

921 
	$t_agc
()

923 
BzAgcCfg_t
 
bzAgcCfg_t
;

924 
	`memt
(&
bzAgcCfg_t
, 0, (
BzAgcCfg_t
));

925 
bzAgcCfg_t
.
agcClkDiv
 = 2;

926 
bzAgcCfg_t
.
agcPkWaCou
 = 0xa;

927 
bzAgcCfg_t
.
agcGaUpdeCou
 = 0x3ff;

928 
bzAgcCfg_t
.
agcThshPvtGa
 = 0;

929 
bzAgcCfg_t
.
agcPkThshGaCڌMode
 = 0;

930 
bzAgcCfg_t
.
agcPow
.
powEbMsumt
 = 1;

931 
bzAgcCfg_t
.
agcPow
.
powInMux
 = 1;

932 
bzAgcCfg_t
.
agcPow
.
powMsumtDuti
 = 7;

933 
bzAgcCfg_t
.
agcPow
.
powAackHigSp
 = 2;

934 
bzAgcCfg_t
.
agcPow
.
powAackLowSp
 = 2;

935 
bzAgcCfg_t
.
agcPow
.
powRecovyHigSp
 = 2;

936 
bzAgcCfg_t
.
agcPow
.
powRecovyLowSp
 = 2;

937 
bzAgcCfg_t
.
agcPow
.
powOvHigThsh
 = 2048;

938 
bzAgcCfg_t
.
agcPow
.
powOvLowThsh
 = 2048;

939 
bzAgcCfg_t
.
agcPow
.
powUndHigThsh
 = 1024;

940 
bzAgcCfg_t
.
agcPow
.
powUndLowThsh
 = 1024;

941 
bzAgcCfg_t
.
agcPk
.
dEbMsumt
 = 1;

942 
bzAgcCfg_t
.
agcPk
.
dAackMode
 = 0;

943 
bzAgcCfg_t
.
agcPk
.
dMsumtDuti
 = 0;

945 
bzAgcCfg_t
.
agcPk
.
dPiOvNum
 = 7;

946 
bzAgcCfg_t
.
agcPk
.
dUndNum
 =383;

947 
bzAgcCfg_t
.
agcPk
.
dLowTsh
 = 3;

948 
bzAgcCfg_t
.
agcPk
.
dHighTsh
 = 8;

949 
bzAgcCfg_t
.
agcPk
.
dGaSpAack
 = 2;

950 
bzAgcCfg_t
.
agcPk
.
dGaSpRecovy
 = 2;

951 
bzAgcCfg_t
.
agcPk
.
hb2EbMsumt
 = 1;

952 
bzAgcCfg_t
.
agcPk
.
hb2MsumtDuti
 = 0;

953 
bzAgcCfg_t
.
agcPk
.
hb2RecovyMode
 = 0;

954 
bzAgcCfg_t
.
agcPk
.
hb2AackMode
 = 0;

955 
bzAgcCfg_t
.
agcPk
.
hb2OvThsh
 = 5972;

958 
bzAgcCfg_t
.
agcPk
.
hb2UndRgeHighThsh
 = 4096;

959 
bzAgcCfg_t
.
agcPk
.
hb2OvldThshC
 = 1;

960 
bzAgcCfg_t
.
agcPk
.
hb2UndRgeHighThshC
 = 255;

963 
bzAgcCfg_t
.
agcPk
.
hb2PiExededC
 = 7;

964 
bzAgcCfg_t
.
agcPk
.
hb2PiUndExededC
 = 255;

969 
bzAgcCfg_t
.
agcPk
.
hb2GaSpHighRecovy
 = 2;

970 
bzAgcCfg_t
.
agcPk
.
hb2GaSpLowRecovy
 = 2;

971 
bzAgcCfg_t
.
agcPk
.
hb2GaSpMidRecovy
 = 2;

972 
bzAgcCfg_t
.
agcPk
.
hb2GaSpAack
 = 2;

973 
	`BZ_tupRxAgc
(
DEVICE_HANDLE
, &
bzAgcCfg_t
);

974 
	}
}

975 
	$RRUrun
(
ut32_t
 
siMode
)

977 
	`_oss
();

978 
	`pock_
();

979 
	`pock_sync
();

980 
	`sdk_exame
(
siMode
);

981 
	`d_oss
();

982 
	}
}

983 
	$InfoShow
()

985 if(
gMode
==2)
	`BZ_PRINT
("BZ20un in SPI Mode.");

986 if(
gMode
==1)
	`BZ_PRINT
("BZ20un in PIN Mode.");

987 
	`bz_gFmweVsi
(
DEVICE_HANDLE
);

988 
	`BZ_PRINT
("|---------------PathInfoShow-------------------|\n");

989 
	`g_th
();

990 
	`BZ_PRINT
("|----------------PLLInfoShow-------------------|\n");

991 
	`g_dio_e
();

992 
	`g_leq
();

993 
	`BZ_PRINT
("|----------------204InfoShow-------------------|\n");

994 
	`g_204
();

995 
	`BZ_PRINT
("|---------------GainInfoShow-------------------|\n");

996 
	`gga
(1);

997 
	`gga
(2);

999 if(
B20In
.
rx
.
rxGaCl
.
rxgaMode
 =
BZ_AGC
)

1001 
	`BZ_PRINT
("RX AGC Mode.\n");

1002 
	`grxdeow
(0x3);

1004 
	`BZ_PRINT
("RX MGC Mode.\n");

1005 
	}
}

1006 
	$auto_
(
ut32_t
 
ulLogv
)

1008 
	`FT_maTe
(1,
ulLogv
);

1009 
	`FT_maTe
(2,
ulLogv
);

1010 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_talise.h

1 #ide
BZ_TALISE_H


2 
	#BZ_TALISE_H


	)

3 
	~<bz_da_tys.h
>

4 
	~"bz_jesd204b_tys.h
"

5 
	~"bz_gpio_tys.h
"

6 
t32_t
 
ݒ_devi
(
ut32_t
 
devi_id
);

7 
t32_t
 
o_devi
();

8 
t32_t
 
_devi
();

9 
t32_t
 
wa_bo_us
();

10 
t32_t
 
ld_fmwe
();

11 
t32_t
 
wa_fmwe_ady
();

12 
t32_t
 
ld_cfig
();

13 
t32_t
 
wre_ofe
();

14 
t32_t
 
wa_ofe_de
();

15 
t32_t
 
t_rf_l_eq
(
ut64_t
 
eq_hz
);

16 
t32_t
 
t_aux_l_eq
(
ut64_t
 
eq_hz
);

17 
t32_t
 
wa_l_lock_de
();

18 
t32_t
 
run_ls
(
ut32_t
 
mask
);

19 
t32_t
 
wa_ls_de
();

20 
t32_t
 
gls_us
();

21 
t_204b_sysc
();

22 
d_204b_sysc
();

23 
t32_t
 
jesd204b_sysc_is_ok
();

24 
t32_t
 
jesd204b_cfig
();

25 
ut32_t
 
t_auxadc
(
BzAuxAdcCfig_t
 *
auxAdcCfig
);

26 
ut32_t
 
ad_auxadc
(
BzAuxAdcResu_t
 *
auxAdcCfig
);

27 
ut32_t
 
tup_auxdac
(
ut16_t
 
Gpio3V3Num
);

28 
ut32_t
 
wre_auxdac
(
ut16_t
 
Gpio3V3Num
,ut16_
auxDacCode
);

29 
t32_t
 
jesd204b_cfgchge

BzTxCfig_t
 
Tx204BPam
, 
BzRxOrXCfig_t
 
Rx204BPam
 );

30 
t32_t
 
wa_jesd204b_cfig
();

31 
t32_t
 
dio_
(t32_
siMode
);

32 
t32_t
 
tx1_te
(
ut32_t
 
eq1_khz
,t32_
ga1
);

33 
t32_t
 
tx2_te
(
ut32_t
 
eq2_khz
,t32_
ga2
);

34 
ut32_t
 
g_204
();

35 
ut32_t
 
cv_x_da
(ut32_
pots
, ut32_
chls
);

36 
ut32_t
 
_tx_da
();

37 
ut32_t
 
debug_da
(ut32_
addr
,ut32_
posi
,ut32_
cou
,ut32_

);

38 
ut32_t
 
grxdeow
(
BzAuxAdcChls_t
 
rxChl
);

39 
ut32_t
 
cv_rx_da
(ut32_
pots
, ut32_
chls
);

40 
ut32_t
 
g_dio_e
();

41 
ut32_t
 
ad_g
(
ut16_t
 
addr
);

42 
ut32_t
 
ad_gb
(
ut16_t
 
addr
,ut32_
db
,ut32_
tb
);

43 
ut32_t
 
wre_g
(
ut16_t
 
addr
 ,ut32_
da
);

44 
ut32_t
 
wre_gb
(
ut16_t
 
addr
 ,ut32_
db
,ut32_
tb
,ut32_
da
);

45 
ut32_t
 
g_th
();

46 
ut32_t
 
t_th
(
siRX
,
siORX
,
siTX
);

47 
ut32_t
 
xga
(ut32_
chls
, 
ut8_t
 
gaIndexTx
);

48 
ut32_t
 
xga
(ut32_
chls
, 
ut8_t
 
gaIndexRx
);

49 
ut32_t
 
gga
(ut32_
chls
);

50 
_oss
();

51 
d_oss
();

52 
ut32_t
 
sdk_exame
(
siMode
);

53 
InfoShow
();

54 
glog
();

55 
ut32_t
 
ga_nd
();

56 
auto_
(
ut32_t
uto_test);

57 
RRUrun
(
ut32_t
 
siMode
);

58 
g_leq
();

59 
t_204b_tx
(
ut32_t
 
ab
);

60 
t_204b_rx
(
ut32_t
 
ab
);

61 
t_204b_x
(
ut32_t
 
ab
);

62 
syef_cڌ
(
ut32_t
 
ONOFF
);

63 
_ir
(
ut32_t
 
chls
,ut32_
ab
);

64 
xgaCl
(
ut32_t
 
ulMode
,ut32_
ulClWay
);

65 
grxgaCl
();

66 
txgaCl
(
ut32_t
 
ulMode
,ut32_
ulClWay
);

67 
teoff
();

68 
ut32_t
 
gxdeow
(
BzAuxAdcChls_t
 
auxadcChl
);

69 
t_agc
();

70 
riscv_a
();

71 
gxgaCl
();

72 
ut32_t
 
txga
(ut32_
chls
 ,
ut8_t
 
gaIndexOrx
);

73 
ei
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/calitest.c

1 
	~"le.h
"

3 
	~"bz_li.h
"

4 
	~"commd.h
"

6 
	#JESD204B_WAIT_MAX_COUNT
 10

	)

7 
	#JESD204B_WAIT_TIME
 1000000

8 

	)

9 
	$_devi
(
ut32_t
 
devi_id
)

11 
	`ݒ_devi
(
devi_id
);

12 
	`_devi
();

13 
	`wa_bo_us
();

14 
	`ld_fmwe
();

15 
	`wa_fmwe_ady
();

16 
	`ld_cfig
();

17 
	`wre_ofe
();

18 
	`wa_ofe_de
();

19 
	}
}

21 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

23 
	`t_rf_l_eq
(
rf_eq_hz
);

24 
	`wa_l_lock_de
();

25 
	`t_aux_l_eq
(
aux_eq_hz
);

26 
	`wa_l_lock_de
();

27 
	}
}

29 
	$ls
(
ut32_t
 
mask
)

31 
	`run_ls
(
mask
);

32 
	`wa_ls_de
();

33 
	}
}

35 
	$li_
()

37 
	`RegiCommd
("", " bz20 devi", (*)
_devi
);

38 
	`RegiCommd
("rm", "rm bz20 devi", (*)
o_devi
);

39 
	`RegiCommd
("teq", "teqf_eq_hzf_eq_hz", (*)
t_eq
);

40 
	`RegiCommd
("cals", "cals maskg. cals 0x40\n"

45 (*)
ls
);

46 
	`RegiCommd
("dioݒ", "ݒadio", (*)
dio_
);

47 
	`RegiCommd
("tx1te", "tx1tڐeq1_khz fq2_khz", (*)
tx1_te
);

48 
	`RegiCommd
("tx2te", "tx2tڐeq1_khz fq2_khz", (*)
tx2_te
);

49 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/calitest.h

1 #ide
CALI_TEST_H


2 
	#CALI_TEST_H


	)

4 
li_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/gpio_mux.c

1 
	~"bz_li.h
"

2 
	~"commd.h
"

3 
	~"auxADCDAC.h
"

4 
	~"bz_tys.h
"

5 
	~"bz_gpio_tys.h
"

6 
	~"bz_gpio.h
"

9 
	mMODE1
 = 1,

10 
	mMODE2
,

11 
	mMODE3
,

12 
	mMODE4
,

13 
	mMODE5
,

14 
	mMODE6
,

15 
	mMODE7
,

16 }
	gGPIO_MODE
;

18 
	$_devi
(
ut32_t
 
devi_id
)

20 
	`ݒ_devi
(
devi_id
);

21 
	`_devi
();

22 
	`wa_bo_us
();

23 
	`ld_fmwe
();

24 
	`wa_fmwe_ady
();

25 
	`ld_cfig
();

26 
	`wre_ofe
();

27 
	`wa_ofe_de
();

28 
	}
}

30 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

32 
	`t_rf_l_eq
(
rf_eq_hz
);

33 
	`wa_l_lock_de
();

34 
	`t_aux_l_eq
(
aux_eq_hz
);

35 
	`wa_l_lock_de
();

36 
	}
}

38 
	$gpiomux_
(
t8_t
 
Mode
)

41 
	}
}

43 
	$gpio_mux_
()

45 
	`RegiCommd
("", " bz20 devi", (*)
_devi
);

46 
	`RegiCommd
("rm", "rm bz20 devi", (*)
o_devi
);

47 
	`RegiCommd
("teq", "teqf_eq_hzux_eq_hz", (*)
t_eq
);

48 
	`RegiCommd
("gpiomux", "e.g. gpiomux 1 ( GPIO mod1)", (*)
gpiomux_
);

49 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/gpio_mux.h

1 #ide
GPIO_MUX_H


2 
	#GPIO_MUX_H


	)

4 
gpio_mux_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/jesd204btest.c

1 
	~"jesd204b.h
"

2 
	~"bz_li.h
"

3 
	~"commd.h
"

4 
	~"bz_jesd204b_tys.h
"

6 
	~<unid.h
>

7 
	~<dio.h
>

9 
	#JESD204B_WAIT_MAX_COUNT
 10

	)

10 
	#JESD204B_WAIT_TIME
 1000000

11 
	#TESTCASE
 3

	)

13 
	$_devi
(
ut32_t
 
devi_id
)

15 
	`ݒ_devi
(
devi_id
);

16 
	`_devi
();

17 
	`wa_bo_us
();

18 
	`ld_fmwe
();

19 
	`wa_fmwe_ady
();

20 
	`ld_cfig
();

21 
	`wre_ofe
();

22 
	`wa_ofe_de
();

23 
	}
}

25 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

28 
	`t_rf_l_eq
(
rf_eq_hz
);

29 
	`wa_l_lock_de
();

30 
	`t_aux_l_eq
(
aux_eq_hz
);

31 
	`wa_l_lock_de
();

32 
	}
}

36 
	$t_je204b
()

38 
dex
 = 0;

51 
BzTxCfig_t
 
AayTXCfg
[
TESTCASE
] = {

52 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1},

53 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1},

54 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1}

56 
BzRxOrXCfig_t
 
AayRXCfg
[
TESTCASE
] = {

57 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 4},

58 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 6},

59 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 8}

62 
dex
 = 0; index < 
TESTCASE
; index++)

64 
	`t_204b_sysc
();

65 
	`jesd204b_cfgchge
(
AayTXCfg
[
dex
],
AayRXCfg
[index]);

66 
	`jesd204b_cfig
();

68 
	`wa_jesd204b_cfig
();

70 
i
;

71 
i
 = 0; i < 
JESD204B_WAIT_MAX_COUNT
; i++)

73 if(
	`jesd204b_sysc_is_ok
())

75 
	`tf
("204B sync is OK\n\n");

78 
	`up
(
JESD204B_WAIT_TIME
);

80 if(
i
==
JESD204B_WAIT_MAX_COUNT
)
	`tf
("204B sync fail\n");

82 
	`d_204b_sysc
();

84 
	}
}

86 
	$jesd204b_
()

88 
	`RegiCommd
("", " bz20 devi", (*)
_devi
);

89 
	`RegiCommd
("rm", "rm bz20 devi", (*)
o_devi
);

90 
	`RegiCommd
("teq", "teqf_eq_hzux_eq_hz", (*)
t_eq
);

91 
	`RegiCommd
("t204b", "cfig 204b", (*)
t_je204b
);

92 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/jesd204btest.h

1 #ide
JESD204B_TEST_H


2 
	#JESD204B_TEST_H


	)

4 
jesd204b_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/main.c

1 
	~"commd.h
"

2 
	~<dio.h
>

3 
	~<dlib.h
>

4 
	~"u_rue.h
"

6 
	$ma
(
gc
, *
gv
[])

8 
	`u_run_
();

9 
	`WaFCommd
();

11 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/plaxi.h

1 #ide
PLAXI_H


2 
	#PLAXI_H


	)

4 
	#PLAXI_IOC_MAGIC
 'b'

	)

6 
	#PLAXI_CHIP_SEL
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 15, )

7 
	#PLAXI_SET_LANPA_PWR
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 14, )

8 
	#PLAXI_SET_TRIGGER_OUT
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 13, )

9 
	#PLAXI_FPGA_VERSION
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 12, )

10 
	#PLAXI_READ_204B_STATE
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 11, )

11 
	#PLAXI_READ_IOPAD_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 10, )

12 
	#PLAXI_WRITE_IOPAD_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 9, )

13 
	#PLAXI_READ_IO_DIR_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 8, )

14 
	#PLAXI_WRITE_IO_DIR_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 7, )

15 
	#PLAXI_READ_204B_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 6, )

16 
	#PLAXI_WRITE_204B_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 5, )

17 
	#PLAXI_READ_TX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 4, )

18 
	#PLAXI_WRITE_TX_DATA_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 3, )

19 
	#PLAXI_READ_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 2, )

20 
	#PLAXI_WRITE_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 1, )

21 

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/rru_runtest.c

1 
	~"u_rue.h
"

2 
	~"pock.h
"

3 
	~"bz_li.h
"

4 
	~"commd.h
"

5 
	~<unid.h
>

6 
	~<dio.h
>

8 
	#JESD204B_WAIT_MAX_COUNT
 10

	)

9 
	#JESD204B_WAIT_TIME
 1000000

10 
	#TESTCASE
 3

	)

12 
	$t_je204b
()

14 
dex
 = 0;

15 
BzTxCfig_t
 
AayTXCfg
[
TESTCASE
] = {

16 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1},

17 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1},

18 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1}

20 
BzRxOrXCfig_t
 
AayRXCfg
[
TESTCASE
] = {

21 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 4},

22 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 6},

23 { .
f
 = 4, .
k
 = 32, .
l
 = 2, .
n
 = 16, .
m
 = 1, .
ٮ
 = 16, .
s
 = 1, .
hd
 = 0x1, .
txIsDay
 = 8}

26 
dex
 = 0; index < 
TESTCASE
; index++)

28 
	`t_204b_sysc
();

29 
	`jesd204b_cfgchge
(
AayTXCfg
[
dex
],
AayRXCfg
[index]);

30 
	`jesd204b_cfig
();

32 
	`wa_jesd204b_cfig
();

34 
i
;

35 
i
 = 0; i < 
JESD204B_WAIT_MAX_COUNT
; i++)

37 if(
	`jesd204b_sysc_is_ok
())

39 
	`tf
("204B sync is OK\n\n");

42 
	`up
(
JESD204B_WAIT_TIME
);

44 if(
i
==
JESD204B_WAIT_MAX_COUNT
)
	`tf
("204B sync fail\n");

46 
	`d_204b_sysc
();

48 
	}
}

51 
	$ls
(
ut32_t
 
mask
)

53 
	`run_ls
(
mask
);

54 
	`wa_ls_de
();

55 
	}
}

57 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

59 
	`t_rf_l_eq
(
rf_eq_hz
);

60 
	`wa_l_lock_de
();

61 
	`t_aux_l_eq
(
aux_eq_hz
);

62 
	`wa_l_lock_de
();

63 
	}
}

65 
	$_devi
(
ut32_t
 
devi_id
)

67 
	`ݒ_devi
(
devi_id
);

68 
	`_devi
();

69 
	`wa_bo_us
();

70 
	`ld_fmwe
();

71 
	`wa_fmwe_ady
();

72 
	`ld_cfig
();

73 
	`wre_ofe
();

74 
	`wa_ofe_de
();

75 
	}
}

77 
	$debugda
(
ut32_t
 
posi
,ut32_
cou
,ut32_

)

79 
	`debug_da
(0x1008000, 
posi
, 
cou
, 

);

80 
	}
}

82 
	$u_run_
()

84 
	`RegiCommd
("", "初始化b20芯片： 0", (*)
_devi
);

85 
	`RegiCommd
("aute", "自动化测试", (*)
auto_
);

86 
	`RegiCommd
("rm", "关闭所有设备文件，做退出准备。", (*)
o_devi
);

87 
	`RegiCommd
("run","启动bz20初始化流程u1:p模式启动，ru2:i模式启动",(*)
RRUrun
);

88 
	`RegiCommd
("fo","查看RRU当前工作状态",(*)
InfoShow
);

90 
	`RegiCommd
("cals", "cals maskg. cals 0x40\n"

95 (*)
ls
);

97 
	`RegiCommd
("dioe","获取PLL状态，以及p模式下通道状态",(*)
g_dio_e
);

98 
	`RegiCommd
("leq","获取PLL频率",(*)
g_leq
);

99 
	`RegiCommd
("th","获取通道状态",(*)
g_th
);

100 
	`RegiCommd
("h" ,"设置通道开关: sthx orxx",(*)
t_th
);

101 
	`RegiCommd
("gls" ,"获取校准状态",(*)
gls_us
);

102 
	`RegiCommd
("g204" ,"获取204b同步状态",(*)
g_204
);

103 
	`RegiCommd
("t204tx" ,"设置204btx通道开关:t204tx 1: 0:off",(*)
t_204b_tx
);

104 
	`RegiCommd
("t204rx" ,"设置204brx通道开关:t204rx 1: 0:off",(*)
t_204b_rx
);

105 
	`RegiCommd
("t204x" ,"设置204bx通道开关:t204x 1: 0:off",(*)
t_204b_x
);

106 
	`RegiCommd
("syef" ,"设置syef使能:sye1: 0:off",(*)
syef_cڌ
);

107 
	`RegiCommd
("ir" ,"设置ir使能:i1: 0:off",(*)
_ir
);

108 
	`RegiCommd
("ad","读寄存器值：adddr",(*)
ad_g
);

109 
	`RegiCommd
("adb","读寄存器特定位宽内的值：addddb sb",(*)
ad_gb
);

110 
	`RegiCommd
("wre","写寄存器值：wraddvue",(*)
wre_g
);

111 
	`RegiCommd
("wreb","写寄存器特定位宽内的值：wradddb sb vue",(*)
wre_gb
);

112 
	`RegiCommd
("rxda","rx采数 点数 通道：rxdpotchls",(*)
cv_rx_da
);

113 
	`RegiCommd
("xda","x采数 点数 通道：xdpotchls",(*)
cv_x_da
);

114 
	`RegiCommd
("xga","设置rx ga的模式：xga mode(0:MGC 1:AGCway(0:1:p)",(*)
xgaCl
);

115 
	`RegiCommd
("grxga","获取rx ga的模式：grxga",(*)
grxgaCl
);

116 
	`RegiCommd
("txga","设置x ga的模式：txga mode(0:MGC 1:AGCway(0:1:p)",(*)
txgaCl
);

117 
	`RegiCommd
("gxga","获取x ga的模式：gxga",(*)
gxgaCl
);

118 
	`RegiCommd
("txga","设置txga 通道 index值：txga chldex",(*)
xga
);

119 
	`RegiCommd
("rxga","设置rxga 通道 index值：rxga chldex",(*)
xga
);

120 
	`RegiCommd
("xga","设置xga 通道 index值：xga chldex",(*)
txga
);

121 
	`RegiCommd
("gga","获取rx/tx对应通道的gadex：gga chls",(*)
gga
);

122 
	`RegiCommd
("dds1", "发送tx1DDS：dds1 frqkhz", (*)
tx1_te
);

123 
	`RegiCommd
("dds2", "发送tx2DDS：dds2 frqkhz", (*)
tx2_te
);

124 
	`RegiCommd
("ddsoff", "关闭DDS", (*)
teoff
);

125 
	`RegiCommd
("teq", "设置PLL频率：teqf_eq_hzux_eq_hz", (*)
t_eq
);

126 
	`RegiCommd
("dioݒ", "打开通道：1.p 2.i", (*)
dio_
);

127 
	`RegiCommd
("gand","从ga中发DDS:(同目录需要有.txt文件)",(*)
ga_nd
);

128 
	`RegiCommd
("debugda","在BZ20内部采数 位置 采数大小 速率(245/491)：debugdposi by1:245Mhz 2:491Mhz",(*)
debugda
);

129 
	`RegiCommd
("rxpow","rx功率统计：rxpowdcchls",(*)
grxdeow
);

130 
	`RegiCommd
("xpow","x功率统计：xpowdcchls",(*)
gxdeow
);

131 
	`RegiCommd
("gc","设置agc：rxpowdcchls",(*)
t_agc
);

132 
	`RegiCommd
("log","打印riscvlog",(*)
glog
);

133 
	`RegiCommd
("bt","打印riscva",(*)
riscv_a
);

134 
	`RegiCommd
("e","测试PA保护",(*)
ei
);

135 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/rru_runtest.h

1 #ide
RRU_RUN_TEST_H


2 
	#RRU_RUN_TEST_H


	)

3 
	~"bz_da_tys.h
"

4 
t_je204b
();

5 
ls
(
ut32_t
 
mask
);

6 
gls
();

7 
run_u
(
siMode
);

8 
t_txga
(
ut32_t
 
chls
 ,
ut8_t
 
dexTx
 );

9 
t_rxga
(
ut32_t
 
chls
,
ut8_t
 
dexRx
 );

10 
g_ga
(
ut32_t
 
chls
);

11 
g_dio
();

12 
h
(
siRX
,
siORX
,
siTX
);

13 
adg
(
ut16_t
 
addr
);

14 
adgb
(
ut16_t
 
addr
,
ut32_t
 
db
,ut32_
tb
);

15 
wreg
(
ut16_t
 
addr
,
ut32_t
 
da
);

16 
wregb
(
ut16_t
 
addr
,
ut32_t
 
db
,ut32_
tb
,ut32_
da
);

17 
th
();

18 
g204
();

19 
xda
(
ut32_t
 
pots
, ut32_
chls
);

20 
rxda
(
ut32_t
 
pots
, ut32_
chls
);

21 
t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
);

22 
_devi
(
ut32_t
 
devi_id
);

23 
gand
();

24 
grxpow
(
ut32_t
 
chls
);

25 
log_riscv
();

26 
brdInfoShow
();

27 
u_run_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/spitest.c

1 
	~"e.h
"

2 
	~"bz_h.h
"

3 
	~"commd.h
"

5 
	#IP_SRAM_CTL_REG
 0x97

	)

6 
	#REG_DEFAULT_VAL
 0x42

	)

7 
	#REG_NEW_VAL
 0x02

	)

9 
	#CHECK_HANDLE
(
hd
) \

10 if(
hd
) \

12 
	`BZHAL_Prtf
("spi had opened!\n");\

14 }

	)

16 
	#CHECK_HANDLE_IS_NULL
(
hd
) \

17 if(!
hd
) \

19 
	`BZHAL_Prtf
("spi had opened!\n");\

21 }

	)

23 
bzHHd
 
	gg_hd
 = 
NULL
;

25 
	$i_ݒ
()

27 
	`CHECK_HANDLE
(
g_hd
)

29 if(
	`BZHAL_SpiOn
(0, &
g_hd
=
BZHAL_OK
)

30 
	`BZHAL_Prtf
("spi open ok!\n");

32 
	`BZHAL_Prtf
("spi open fail!\n");

33 
	}
}

35 
	$i_o
()

37 
	`CHECK_HANDLE_IS_NULL
(
g_hd
)

39 if(
	`BZHAL_SpiClo
(
g_hd
!
BZHAL_OK
)

40 
	`BZHAL_Prtf
("spi close fail!\n");

43 
g_hd
 = 
NULL
;

44 
	`BZHAL_Prtf
("spi close ok!\n");

46 
	}
}

48 
	$i_ad
()

50 
	`CHECK_HANDLE_IS_NULL
(
g_hd
)

52 
ut32_t
 
da
;

54 if(
	`BZHAL_SpiRdReg
(
g_hd
, 
IP_SRAM_CTL_REG
, &
da
!
BZHAL_OK
)

55 
	`BZHAL_Prtf
("spiead fail!\n");

58 
	`BZHAL_Prtf
("ad v: 0x%08x\n", 
da
);

59 if(
da
 =
REG_DEFAULT_VAL
)

60 
	`BZHAL_Prtf
("spiead is ok\n");

62 
	}
}

64 
	$i_wre
()

66 
	`CHECK_HANDLE_IS_NULL
(
g_hd
)

68 
ut32_t
 
da
 = 
REG_NEW_VAL
;

70 if(
	`BZHAL_SpiWreReg
(
g_hd
, 
IP_SRAM_CTL_REG
, 
da
!
BZHAL_OK
)

71 
	`BZHAL_Prtf
("spi write fail!\n");

74 
da
 = 0;

75 
	`BZHAL_SpiRdReg
(
g_hd
, 
IP_SRAM_CTL_REG
, &
da
);

76 
	`BZHAL_Prtf
("wrv: 0x%08x\n", 
da
);

77 if(
da
 =
REG_NEW_VAL
)

78 
	`BZHAL_Prtf
("spi write is ok\n");

80 
	}
}

82 
	$i_
()

84 
	`RegiCommd
("iݒ", "ݒ spdevi", (*)
i_ݒ
);

85 
	`RegiCommd
("io", "o spdevi", (*)
i_o
);

86 
	`RegiCommd
("d", "ad by spom devi", (*)
i_ad
);\

87 
	`RegiCommd
("iwre", "wrby spom devi", (*)
i_wre
);

88 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/spitest.h

2 #ide
SPI_TEST_H


3 
	#SPI_TEST_H


	)

5 
i_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/testcase.c

1 
	~".h
"

2 
	~"bz_li.h
"

4 
ut32_t
 
	ggulLogLev
 = 3;

5 
	$FT_maTe
(
ut32_t
 
ulMode
,ut32_
ulLogLev
)

7 *
r
[] = {"auto_test_spi_mode","auto_test_pin_mode"};

8 
ut32_t
 
gulLogLev_bak
 = 
gulLogLev
;

9 
gulLogLev
 = 
ulLogLev
;

11 
	`tf
("\n|***************************************************\n");

12 
	`tf
("----------------%s------------------\n",
r
[
ulMode
-1]);

13 
	`tf
("|***************************************************\n");

17 
	`FT_SpiTe
(0x1CE);

20 
gulLogLev
 = 
gulLogLev_bak
;

21 
	}
}

23 
ut32_t
 
	$FT_Rd
(
ut32_t
 
t
, ut32_
d
)

25  (
	`nd
(% 
t
 + 
d
);

26 
	}
}

28 
	$FT_SpiTe
(
ut32_t
 
Addr
)

30 
ut32_t
 
i
=0, 
ulV
=0, 
ulRET
=0,
ulTeCa
 = 100;

32 
i
 = 0; i < 
ulTeCa
; i++)

34 
ulV
 = 
	`FT_Rd
(0xFFFF,0);

35 
ut32_t
 
ulTmp
 = 0;

36 
	`BZ_DBGPRINT
("wre_g:%d",
ulV
);

37 
	`wre_g
(
Addr
, 
ulV
);

38 
ulTmp
 = 
	`ad_g
(
Addr
);

39 
	`BZ_DBGPRINT
("ad_g:%d",
ulTmp
);

40 if(
ulV
 !
ulTmp
)

42 
	`BZ_ERRPRINT
("wre_g:%d,ad_g:%d",
ulV
,
ulTmp
);

43 
ulRET
++;

45 
	`up
(1000);

47 if(
ulRET
>0)

49 
	`BZ_LOGPRINT
("TeCa:%d ECNT:%d E",
ulTeCa
,
ulRET
);

52 
	`BZ_LOGPRINT
("TeCa:%d ECNT:%d Ok",
ulTeCa
,
ulRET
);

54 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/testcase.h

1 #ide
TESTCASE_H


2 
	#TESTCASE_H


	)

3 
	~<dio.h
>

4 
	~<dlib.h
>

5 
	~"bz_da_tys.h
"

6 
ut32_t
 
gulLogLev
;

10 
	mBZ_LOG_LEVEL_LOG
 = 1,

11 
	mBZ_LOG_LEVEL_ERR
 = 2,

12 
	mBZ_LOG_LEVEL_DBG
 = 3,

13 }
	tBzLogv_t
;

15 
	#BZ_LOGPRINT
(
r
, ...) \

16 if(
gulLogLev
 >
BZ_LOG_LEVEL_LOG
){ \

17 
	`tf
("[%s]:"
r
"\n",
__FUNCTION__
,##
__VA_ARGS__
); \

18 }

	)

19 
	#BZ_ERRPRINT
(
r
, ...) \

20 if(
gulLogLev
 >
BZ_LOG_LEVEL_ERR
){ \

21 
	`tf
("[ERR]:"
r
"(%s:%d)%s\n",##
__VA_ARGS__
,
__FILE__
,
__LINE__
,
__FUNCTION__
); \

22 }

	)

23 
	#BZ_DBGPRINT
(
r
, ...) \

24 if(
gulLogLev
 >
BZ_LOG_LEVEL_DBG
){ \

25 
	`tf
("[DBG]:"
r
"\n",##
__VA_ARGS__
); \

26 }

	)

27 
	#BZ_PRINT
(
r
, ...) \

28 if(
gulLogLev
 >
BZ_LOG_LEVEL_DBG
){ \

29 
	`tf
(
r
,##
__VA_ARGS__
); \

30 }

	)

33 
ut32_t
 
FT_Rd
(ut32_
t
, ut32_
d
);

34 
FT_SpiTe
(
ut32_t
 
Addr
);

35 
FT_maTe
(
ut32_t
 
ulMode
,ut32_
ulLogLev
);

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/tonetest.c

1 
	~"tڑe.h
"

2 
	~"bz_li.h
"

3 
	~"commd.h
"

5 
	$_devi
(
ut32_t
 
devi_id
)

7 
	`ݒ_devi
(
devi_id
);

8 
	`_devi
();

9 
	`wa_bo_us
();

10 
	`ld_fmwe
();

11 
	`wa_fmwe_ady
();

12 
	`ld_cfig
();

13 
	`wre_ofe
();

14 
	`wa_ofe_de
();

15 
	}
}

17 
	$t_eq
(
ut64_t
 
rf_eq_hz
, ut64_
aux_eq_hz
)

19 
	`t_rf_l_eq
(
rf_eq_hz
);

20 
	`wa_l_lock_de
();

21 
	`t_aux_l_eq
(
aux_eq_hz
);

22 
	`wa_l_lock_de
();

23 
	}
}

25 
	$te_
()

27 
	`RegiCommd
("", " bz20 devi", (*)
_devi
);

28 
	`RegiCommd
("rm", "rm bz20 devi", (*)
o_devi
);

29 
	`RegiCommd
("teq", "teqf_eq_hzux_eq_hz", (*)
t_eq
);

30 
	`RegiCommd
("dioݒ", "ݒadio", (*)
dio_
);

31 
	`RegiCommd
("tx1te", "tx1tڐeq1_khz fq2_khz", (*)
tx1_te
);

32 
	`RegiCommd
("tx2te", "tx2tڐeq1_khz fq2_khz", (*)
tx2_te
);

33 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/tonetest.h

1 #ide
TONE_TEST_H


2 
	#TONE_TEST_H


	)

4 
te_
();

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/authhandler.h

1 #ide
AUTH_HANDLER_H


2 
	#AUTH_HANDLER_H


	)

3 
	~"hdr.h
"

5 
	gAuthHdr
 : 
public
 
Hdr


7 
log
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

8 
logout
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

9 
g2
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/confighandler.h

1 #ide
CONGIG_HANDLER_H


2 
	#CONGIG_HANDLER_H


	)

3 
	~"hdr.h
"

4 
	~"li.h
"

6 
ut32_t
 
	tStgS
;

7 
StgS
 cڡ 
	gStgSId
 = 0;

8 
StgS
 cڡ 
	gStgSRug
 = 1;

9 
	gCfigHdr
 : 
public
 
Hdr


11 
CfigHdr
(
Ti
::
ShdP
 cڡ& 
li
)

12 : 
li_
(
li
)

15 
fo
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

16 
eq
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

17 
libti
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

18 
jesd204b
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

19 
gpio
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

20 
agc
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

21 

(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

22 
gaMode
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

23 
gpioGa
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

24 
e
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

25 
	give
:

26 
devi_gs
(
Ti
::
ShdP
 & 
li
);

27 
	gd
::
rg
 
e_xt
();

28 
	give
:

29 
Ti
::
WkP
 
li_
;

30 
StgS
 
	ge_
 = 
StgSId
;

31 
	gd
::
rg
 
xt_
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/datahandler.h

1 #ide
DATA_HANDLER_H


2 
	#DATA_HANDLER_H


	)

3 
	~"hdr.h
"

4 
	~"li.h
"

6 
	gDaHdr
 : 
public
 
Hdr


8 
DaHdr
(
Ti
::
ShdP
 cڡ& 
li
)

9 : 
li_
(
li
)

12 
x
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

13 
rx
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

14 
tx
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

15 
	give
:

16 
Ti
::
WkP
 
li_
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/debughandler.h

1 #ide
DEBUG_HANDLER_H


2 
	#DEBUG_HANDLER_H


	)

3 
	~"hdr.h
"

4 
	~"li.h
"

6 
	gDebugHdr
 : 
public
 
Hdr


8 
DebugHdr
(
Ti
::
ShdP
 cڡ& 
li
)

9 : 
li_
(
li
)

12 
g
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

13 
mem
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

14 
pc
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

15 
ga
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

16 
	give
:

17 
Ti
::
WkP
 
li_
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/functionhandler.h

1 #ide
FUNCTION_HANDLER_H


2 
	#FUNCTION_HANDLER_H


	)

3 
	~"hdr.h
"

4 
	~"li.h
"

6 
ut32_t
 
	tCiS
;

7 
CiS
 cڡ 
	gCiSId
 = 0;

8 
CiS
 cڡ 
	gCiSRug
 = 1;

10 
	gFuniHdr
 : 
public
 
Hdr


12 
FuniHdr
(
Ti
::
ShdP
 cڡ& 
li
)

13 : 
li_
(
li
)

16 
tx
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

17 
rx
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

18 
x
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

19 
libti
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

20 
e
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

21 
	give
:

22 
d
::
rg
 
e_xt
();

23 
	give
:

24 
Ti
::
WkP
 
li_
;

25 
CiS
 
	ge_
 = 
CiSId
;

26 
	gd
::
rg
 
xt_
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/handler.h

1 #ide
HANDLER_H


2 
	#HANDLER_H


	)

3 
	~"js.h
"

4 
	~"hp.h
"

6 
	#HANDLER
(
Ty
, 
Fun
, 
Obj
) \

7 
d
::
	`bd
(&
Ty
::
Fun
, &
Obj
, std::
ahds
::
_1
,d::ahds::
_2
)

	)

9 
usg
 
	gjs
 = 
ohmn
::
js
;

10 
	sHdr


12 
	meed
:

13 
d
::
rg
 
body
(
js
 cڡ& 
da
, 
code
 = 200, std::rg cڡ& 
msg
 = "")

15 
js
 
ڣ
 = {

16 { "mesge", 
msg
 },

18 { "su", 
da
 },

19 { "code", 
code
 }

21  
	mڣ
.
dump
();

23 
js
 
ڣ_body
()

25 
js
 
	mڣ
 = {

31  
	mڣ
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/http.h

1 #ide
HTTP_H


2 
	#HTTP_H


	)

3 
	~"hib.h
"

4 
mea
 
	ghp
 = 
hib
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/httplib.h

8 #ide
CPPHTTPLIB_HTTPLIB_H


9 
	#CPPHTTPLIB_HTTPLIB_H


	)

11 
	#CPPHTTPLIB_VERSION
 "0.10.7"

	)

17 #ide
CPPHTTPLIB_KEEPALIVE_TIMEOUT_SECOND


18 
	#CPPHTTPLIB_KEEPALIVE_TIMEOUT_SECOND
 5

	)

21 #ide
CPPHTTPLIB_KEEPALIVE_MAX_COUNT


22 
	#CPPHTTPLIB_KEEPALIVE_MAX_COUNT
 5

	)

25 #ide
CPPHTTPLIB_CONNECTION_TIMEOUT_SECOND


26 
	#CPPHTTPLIB_CONNECTION_TIMEOUT_SECOND
 300

	)

29 #ide
CPPHTTPLIB_CONNECTION_TIMEOUT_USECOND


30 
	#CPPHTTPLIB_CONNECTION_TIMEOUT_USECOND
 0

	)

33 #ide
CPPHTTPLIB_READ_TIMEOUT_SECOND


34 
	#CPPHTTPLIB_READ_TIMEOUT_SECOND
 5

	)

37 #ide
CPPHTTPLIB_READ_TIMEOUT_USECOND


38 
	#CPPHTTPLIB_READ_TIMEOUT_USECOND
 0

	)

41 #ide
CPPHTTPLIB_WRITE_TIMEOUT_SECOND


42 
	#CPPHTTPLIB_WRITE_TIMEOUT_SECOND
 5

	)

45 #ide
CPPHTTPLIB_WRITE_TIMEOUT_USECOND


46 
	#CPPHTTPLIB_WRITE_TIMEOUT_USECOND
 0

	)

49 #ide
CPPHTTPLIB_IDLE_INTERVAL_SECOND


50 
	#CPPHTTPLIB_IDLE_INTERVAL_SECOND
 0

	)

53 #ide
CPPHTTPLIB_IDLE_INTERVAL_USECOND


54 #ifde
_WIN32


55 
	#CPPHTTPLIB_IDLE_INTERVAL_USECOND
 10000

	)

57 
	#CPPHTTPLIB_IDLE_INTERVAL_USECOND
 0

	)

61 #ide
CPPHTTPLIB_REQUEST_URI_MAX_LENGTH


62 
	#CPPHTTPLIB_REQUEST_URI_MAX_LENGTH
 8192

	)

65 #ide
CPPHTTPLIB_HEADER_MAX_LENGTH


66 
	#CPPHTTPLIB_HEADER_MAX_LENGTH
 8192

	)

69 #ide
CPPHTTPLIB_REDIRECT_MAX_COUNT


70 
	#CPPHTTPLIB_REDIRECT_MAX_COUNT
 20

	)

73 #ide
CPPHTTPLIB_PAYLOAD_MAX_LENGTH


74 
	#CPPHTTPLIB_PAYLOAD_MAX_LENGTH
 ((
d
::
numic_lims
<
size_t
>::
max
)())

	)

77 #ide
CPPHTTPLIB_TCP_NODELAY


78 
	#CPPHTTPLIB_TCP_NODELAY
 
l


	)

81 #ide
CPPHTTPLIB_RECV_BUFSIZ


82 
	#CPPHTTPLIB_RECV_BUFSIZ
 
	`size_t
(4096u)

	)

85 #ide
CPPHTTPLIB_COMPRESSION_BUFSIZ


86 
	#CPPHTTPLIB_COMPRESSION_BUFSIZ
 
	`size_t
(16384u)

	)

89 #ide
CPPHTTPLIB_THREAD_POOL_COUNT


90 
	#CPPHTTPLIB_THREAD_POOL_COUNT
 \

91 ((
d
::
max
)(8u, std::
thad
::
	`hdwe_ccucy
() > 0 \

92 ? 
d
::
thad
::
	`hdwe_ccucy
() - 1 \

93 : 0))

	)

96 #ide
CPPHTTPLIB_RECV_FLAGS


97 
	#CPPHTTPLIB_RECV_FLAGS
 0

	)

100 #ide
CPPHTTPLIB_SEND_FLAGS


101 
	#CPPHTTPLIB_SEND_FLAGS
 0

	)

104 #ide
CPPHTTPLIB_LISTEN_BACKLOG


105 
	#CPPHTTPLIB_LISTEN_BACKLOG
 5

	)

112 #ifde
_WIN32


113 #ide
_CRT_SECURE_NO_WARNINGS


114 
	#_CRT_SECURE_NO_WARNINGS


	)

117 #ide
_CRT_NONSTDC_NO_DEPRECATE


118 
	#_CRT_NONSTDC_NO_DEPRECATE


	)

121 #i
defed
(
_MSC_VER
)

122 #ifde
_WIN64


123 
usg
 
	gssize_t
 = 
__t64
;

125 
usg
 
	gssize_t
 = ;

128 #i
_MSC_VER
 < 1900

129 
	#tf
 
_tf_s


	)

133 #ide
S_ISREG


134 
	#S_ISREG
(
m
(((m)&
S_IFREG
=S_IFREG)

	)

137 #ide
S_ISDIR


138 
	#S_ISDIR
(
m
(((m)&
S_IFDIR
=S_IFDIR)

	)

141 #ide
NOMINMAX


142 
	#NOMINMAX


	)

145 
	~<io.h
>

146 
	~<wsock2.h
>

147 
	~<ws2t.h
>

149 #ide
WSA_FLAG_NO_HANDLE_INHERIT


150 
	#WSA_FLAG_NO_HANDLE_INHERIT
 0x80

	)

153 #ifde
_MSC_VER


154 #agm
commt
(
lib
, "ws2_32.lib")

157 #ide
rcmp


158 
	#rcmp
 
_ricmp


	)

161 
usg
 
	gsock_t
 = 
SOCKET
;

162 #ifde
CPPHTTPLIB_USE_POLL


163 
	#pl
(
fds
, 
nfds
, 
timeout

	`WSAPl
(fds,fds,imeout)

	)

168 
	~</.h
>

169 
	~<crg
>

170 
	~<iddrs.h
>

171 
	~<t/if.h
>

172 
	~<tdb.h
>

173 
	~<t/.h
>

174 #ifde
__lux__


175 
	~<sv.h
>

177 
	~<t/t.h
>

178 #ifde
CPPHTTPLIB_USE_POLL


179 
	~<pl.h
>

181 
	~<csigl
>

182 
	~<had.h
>

183 
	~<sys/.h
>

184 
	~<sys/sock.h
>

185 
	~<unid.h
>

187 
usg
 
	gsock_t
 = ;

188 #ide
INVALID_SOCKET


189 
	#INVALID_SOCKET
 (-1)

	)

193 
	~<gܙhm
>

194 
	~<y
>

195 
	~<omic
>

196 
	~<s
>

197 
	~<cy
>

198 
	~<ims
>

199 
	~<cdi_vb
>

200 
	~<o.h
>

201 
	~<f.h
>

202 
	~<fam
>

203 
	~<funiڮ
>

204 
	~<iom
>

205 
	~<ioam
>

206 
	~<li
>

207 
	~<m
>

208 
	~<memy
>

209 
	~<mux
>

210 
	~<ndom
>

211 
	~<gex
>

212 
	~<t
>

213 
	~<sam
>

214 
	~<rg
>

215 
	~<sys/.h
>

216 
	~<thad
>

218 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


219 #ifde
_WIN32


220 
	~<wy.h
>

224 #unde
X509_NAME


225 #unde
X509_CERT_PAIR


226 #unde
X509_EXTENSIONS


227 #unde
PKCS7_SIGNER_INFO


229 #ifde
_MSC_VER


230 #agm
commt
(
lib
, "crypt32.lib")

231 #agm
commt
(
lib
, "cryptui.lib")

235 
	~<ݒs/r.h
>

236 
	~<ݒs/evp.h
>

237 
	~<ݒs/s.h
>

238 
	~<ݒs/x509v3.h
>

240 #i
defed
(
_WIN32
&& defed(
OPENSSL_USE_APPLINK
)

241 
	~<ݒs/k.c
>

244 
	~<ioam
>

245 
	~<sam
>

247 #i
OPENSSL_VERSION_NUMBER
 < 0x1010100fL

248 #r 
Sry
, 
OnSSL
 
vsis
 
i
 
to
 1.1.1 
e
 
n
 
su܋d


251 #i
OPENSSL_VERSION_NUMBER
 < 0x10100000L

252 
	~<ݒs/yo.h
>

253 
le
 cڡ *
	$ASN1_STRING_g0_da
(cڡ 
ASN1_STRING
 *
a1
) {

254  
	`M_ASN1_STRING_da
(
a1
);

255 
	}
}

259 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


260 
	~<zlib.h
>

263 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


264 
	~<brli/decode.h
>

265 
	~<brli/code.h
>

271 
mea
 
	ghib
 {

273 
mea
 
	gda
 {

283 
	gme
 <
ass
 
	gT
, 
	gass
... 
	gArgs
>

284 
tyme
 
	gd
::
ab_if
<!
d
::
is_y
<
T
>::
vue
, std::
unique_r
<T>>::
ty


285 
make_unique
(
Args
 &&...
gs
) {

286  
d
::
unique_r
<
T
>(
w
 T(d::
fwd
<
Args
>(
gs
)...));

289 
	gme
 <
ass
 
	gT
>

290 
tyme
 
	gd
::
ab_if
<
d
::
is_y
<
T
>::
vue
, std::
unique_r
<T>>::
ty


291 
make_unique
(
d
::
size_t
 
n
) {

292 
tyme
 
	td
::
	tmove_ex
<
	tT
>::
	tty
 
	tRT
;

293  
	gd
::
unique_r
<
T
>(
w
 
RT
[
n
]);

296 
	sci
 {

297 
bo
 
ݔ
()(cڡ 
	gd
::
rg
 &
s1
, cڡ std::rg &
s2
) const {

298  
d
::
xicogphil_com
(
s1
.
beg
(), s1.
d
(), 
s2
.begin(),

299 
s2
.
d
(),

300 [](
c1
, 
c2
) {

301  ::
tow
(
c1
< ::tow(
c2
);

308 
usg
 
	gHds
 = 
d
::
muim
<d::
rg
, 
	gd
::rg, 
	gda
::
ci
>;

310 
usg
 
	gPams
 = 
d
::
muim
<d::
rg
, 
	gd
::string>;

311 
usg
 
	gMch
 = 
d
::
smch
;

313 
usg
 
	gProgss
 = 
d
::
funi
<
bo
(
ut64_t
 
cut
, ut64_
tٮ
)>;

315 
	gReڣ
;

316 
usg
 
	gReڣHdr
 = 
d
::
funi
<
bo
(cڡ 
Reڣ
 &
ڣ
)>;

318 
	sMuɝtFmDa
 {

319 
	gd
::
rg
 
me
;

320 
	gd
::
rg
 
cڋ
;

321 
	gd
::
rg
 
fame
;

322 
	gd
::
rg
 
cڋ_ty
;

324 
usg
 
	gMuɝtFmDaIms
 = 
d
::
ve
<
MuɝtFmDa
>;

325 
usg
 
	gMuɝtFmDaM
 = 
d
::
muim
<d::
rg
, 
	gMuɝtFmDa
>;

327 as
	cDaSk
 {

328 
	gpublic
:

329 
DaSk
(: 
os
(&
sb_
), sb_(*
this
) {}

331 
DaSk
(cڡ DaSk &
de
;

332 
	gDaSk
 &
	gݔ
=(cڡ 
DaSk
 &
de
;

333 
DaSk
(DaSk &&
de
;

334 
	gDaSk
 &
	gݔ
=(
DaSk
 &&
de
;

336 
	gd
::
funi
<
bo
(cڡ *
da
, 
size_t
 
da_n
)> 
	gwre
;

337 
	gd
::
funi
<()> 
de
;

338 
	gd
::
funi
<
bo
()> 
is_wrab
;

339 
	gd
::
oam
 
os
;

341 
	give
:

342 as
	cda_sk_ambuf
 : 
public
 
d
::
ambuf
 {

343 
public
:

344 
exic
 
da_sk_ambuf
(
DaSk
 &
sk
: 
sk_
(sink) {}

346 
eed
:

347 
d
::
amsize
 
xu
(cڡ *
s
, std::amsiz
n
) {

348 
sk_
.
wre
(
s
, 
ic_
<
size_t
>(
n
));

349  
	gn
;

352 
	give
:

353 
DaSk
 &
sk_
;

356 
da_sk_ambuf
 
	gsb_
;

359 
usg
 
	gCڋProvid
 =

360 
d
::
funi
<
bo
(
size_t
 
offt
, size_
ngth
, 
DaSk
 &
sk
)>;

362 
usg
 
	gCڋProvidWhoutLgth
 =

363 
d
::
funi
<
bo
(
size_t
 
offt
, 
DaSk
 &
sk
)>;

365 
usg
 
	gCڋProvidResourRr
 = 
d
::
funi
<(
bo
 
sucss
)>;

367 
usg
 
	gCڋReivWhProgss
 =

368 
d
::
funi
<
bo
(cڡ *
da
, 
size_t
 
da_ngth
, 
ut64_t
 
offt
,

369 
ut64_t
 
tٮ_ngth
)>;

371 
usg
 
	gCڋReiv
 =

372 
d
::
funi
<
bo
(cڡ *
da
, 
size_t
 
da_ngth
)>;

374 
usg
 
	gMuɝtCڋHd
 =

375 
d
::
funi
<
bo
(cڡ 
MuɝtFmDa
 &
fe
)>;

377 as
	cCڋRd
 {

378 
	gpublic
:

379 
usg
 
Rd
 = 
d
::
funi
<
bo
(
CڋReiv
 
iv
)>;

380 
usg
 
	gMuɝtRd
 = 
d
::
funi
<
bo
(
MuɝtCڋHd
 
hd
,

381 
CڋReiv
 
iv
)>;

383 
CڋRd
(
Rd
 
ad
, 
MuɝtRd
 
muɝt_ad
)

384 : 
ad_
(
d
::
move
(
ad
)),

385 
muɝt_ad_
(
d
::
move
(
muɝt_ad
)) {}

387 
bo
 
ݔ
()(
MuɝtCڋHd
 
hd
,

388 
CڋReiv
 
	giv
) const {

389  
muɝt_ad_
(
d
::
move
(
hd
), std::move(
iv
));

392 
bo
 
ݔ
()(
CڋReiv
 
	giv
) const {

393  
ad_
(
d
::
move
(
iv
));

396 
Rd
 
	gad_
;

397 
MuɝtRd
 
	gmuɝt_ad_
;

400 
usg
 
	gRge
 = 
d
::

<
ssize_t
, 
	gssize_t
>;

401 
usg
 
	gRges
 = 
d
::
ve
<
Rge
>;

403 
	sReque
 {

404 
	gd
::
rg
 
mhod
;

405 
	gd
::
rg
 
th
;

406 
Hds
 
	ghds
;

407 
	gd
::
rg
 
body
;

409 
	gd
::
rg
 
me_addr
;

410 
	gme_pt
 = -1;

413 
	gd
::
rg
 
vsi
;

414 
	gd
::
rg
 
rg
;

415 
Pams
 
	gms
;

416 
MuɝtFmDaM
 
	gfes
;

417 
Rges
 
	gnges
;

418 
Mch
 
	gmches
;

421 
ReڣHdr
 
	gڣ_hdr
;

422 
CڋReivWhProgss
 
	gcڋ_iv
;

423 
Progss
 
	gogss
;

424 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


425 cڡ 
SSL
 *
	gs
 = 
nuαr
;

428 
bo
 
has_hd
(cڡ *
key
) const;

429 
	gd
::
rg
 
g_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

430 
	gme
 <
tyme
 
	gT
>

431 
T
 
g_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

432 
size_t
 
g_hd_vue_cou
(cڡ *
key
) const;

433 
t_hd
(cڡ *
key
, cڡ *
v
);

434 
t_hd
(cڡ *
key
, cڡ 
d
::
rg
 &
v
);

436 
bo
 
has_m
(cڡ *
key
) const;

437 
	gd
::
rg
 
g_m_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

438 
size_t
 
g_m_vue_cou
(cڡ *
key
) const;

440 
bo
 
is_muɝt_fm_da
() const;

442 
bo
 
has_fe
(cڡ *
key
) const;

443 
MuɝtFmDa
 
g_fe_vue
(cڡ *
key
) const;

446 
size_t
 
	gde_cou_
 = 
CPPHTTPLIB_REDIRECT_MAX_COUNT
;

447 
size_t
 
	gcڋ_ngth_
 = 0;

448 
CڋProvid
 
	gcڋ_ovid_
;

449 
bo
 
	gis_chunked_cڋ_ovid_
 = 
l
;

450 
size_t
 
	gauthizi_cou_
 = 0;

453 
	sReڣ
 {

454 
	gd
::
rg
 
vsi
;

455 
	gus
 = -1;

456 
	gd
::
rg
 
as
;

457 
Hds
 
	ghds
;

458 
	gd
::
rg
 
body
;

459 
	gd
::
rg
 
loti
;

461 
bo
 
has_hd
(cڡ *
key
) const;

462 
	gd
::
rg
 
g_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

463 
	gme
 <
tyme
 
	gT
>

464 
T
 
g_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

465 
size_t
 
g_hd_vue_cou
(cڡ *
key
) const;

466 
t_hd
(cڡ *
key
, cڡ *
v
);

467 
t_hd
(cڡ *
key
, cڡ 
d
::
rg
 &
v
);

469 
t_de
(cڡ *
u
, 
us
 = 302);

470 
t_de
(cڡ 
d
::
rg
 &
u
, 
us
 = 302);

471 
t_cڋ
(cڡ *
s
, 
size_t
 
n
, cڡ *
cڋ_ty
);

472 
t_cڋ
(cڡ 
d
::
rg
 &
s
, cڡ *
cڋ_ty
);

474 
t_cڋ_ovid
(

475 
size_t
 
ngth
, cڡ *
cڋ_ty
, 
CڋProvid
 
ovid
,

476 
CڋProvidResourRr
 
sour_ar
 = 
nuαr
);

478 
t_cڋ_ovid
(

479 cڡ *
cڋ_ty
, 
CڋProvidWhoutLgth
 
ovid
,

480 
CڋProvidResourRr
 
sour_ar
 = 
nuαr
);

482 
t_chunked_cڋ_ovid
(

483 cڡ *
cڋ_ty
, 
CڋProvidWhoutLgth
 
ovid
,

484 
CڋProvidResourRr
 
sour_ar
 = 
nuαr
);

486 
Reڣ
() = ;

487 
Reڣ
(const Response &) = ;

488 
	gReڣ
 &
	gݔ
=(cڡ 
Reڣ
 &) = ;

489 
Reڣ
(Response &&) = ;

490 
	gReڣ
 &
	gݔ
=(
Reڣ
 &&) = ;

491 ~
Reڣ
() {

492 i(
	gcڋ_ovid_sour_ar_
) {

493 
cڋ_ovid_sour_ar_
(
cڋ_ovid_sucss_
);

498 
size_t
 
	gcڋ_ngth_
 = 0;

499 
CڋProvid
 
	gcڋ_ovid_
;

500 
CڋProvidResourRr
 
	gcڋ_ovid_sour_ar_
;

501 
bo
 
	gis_chunked_cڋ_ovid_
 = 
l
;

502 
bo
 
	gcڋ_ovid_sucss_
 = 
l
;

505 as
	cSm
 {

506 
	gpublic
:

507 
vtu
 ~
Sm
() = ;

509 
vtu
 
bo
 
is_adab
() const = 0;

510 
vtu
 
bo
 
is_wrab
() const = 0;

512 
vtu
 
ssize_t
 
ad
(*
r
, 
size_t
 
size
) = 0;

513 
vtu
 
ssize_t
 
wre
(cڡ *
r
, 
size_t
 
size
) = 0;

514 
vtu
 
g_me__d_pt
(
d
::
rg
 &

, &
pt
) const = 0;

515 
vtu
 
sock_t
 
sock
() const = 0;

517 
	gme
 <
	gtyme
... 
	gArgs
>

518 
ssize_t
 
wre_fm
(cڡ *
fmt
, cڡ 
Args
 &...
gs
);

519 
ssize_t
 
wre
(cڡ *
r
);

520 
ssize_t
 
wre
(cڡ 
d
::
rg
 &
s
);

523 as
	cTaskQueue
 {

524 
	gpublic
:

525 
TaskQueue
() = ;

526 
	gvtu
 ~
TaskQueue
() = ;

528 
vtu
 
queue
(
d
::
funi
<()> 

) = 0;

529 
vtu
 
shutdown
() = 0;

531 
vtu
 
_id
() {}

534 as
	cThadPo
 : 
public
 
TaskQueue
 {

535 
public
:

536 
exic
 
ThadPo
(
size_t
 
n
: 
shutdown_
(
l
) {

537 
n
) {

538 
thads_
.
ema_back
(
wk
(*
this
));

539 
	gn
--;

543 
ThadPo
(cڡ ThadPo &
de
;

544 ~
ThadPo
(
	govride
 = ;

546 
queue
(
d
::
funi
<()> 


ovride
 {

547 
d
::
unique_lock
<d::
mux
> 
lock
(
mux_
);

548 
	gjobs_
.
push_back
(
d
::
move
(

));

549 
	gcd_
.
nify_e
();

552 
shutdown
(
	govride
 {

555 
	gd
::
unique_lock
<
d
::
mux
> 
lock
(
mux_
);

556 
	gshutdown_
 = 
ue
;

559 
	gcd_
.
nify_l
();

562 aut&
	gt
 : 
thads_
) {

563 
t
.
jo
();

567 
	give
:

568 
	swk
 {

569 
exic
 
wk
(
ThadPo
 &
po
: 
po_
(pool) {}

571 
ݔ
()() {

573 
	gd
::
funi
<()> 

;

575 
	gd
::
unique_lock
<
d
::
mux
> 
lock
(
po_
.
mux_
);

577 
	gpo_
.
	gcd_
.
wa
(

578 
lock
, [&] {  !
po_
.
jobs_
.
emy
(||o_.
shutdown_
; });

580 i(
	gpo_
.
	gshutdown_
 &&o_.
	gjobs_
.
emy
()) { ; }

582 
	g
 = 
po_
.
jobs_
.
t
();

583 
	gpo_
.
	gjobs_
.
p_t
();

586 
as
(
ue
 =
ic_
<
bo
>(

));

587 

();

591 
	gThadPo
 &
	gpo_
;

593 
nd
 
	gwk
;

595 
	gd
::
ve
<
d
::
thad
> 
thads_
;

596 
	gd
::
li
<
d
::
funi
<()>> 
jobs_
;

598 
bo
 
	gshutdown_
;

600 
	gd
::
cdi_vb
 
cd_
;

601 
	gd
::
mux
 
mux_
;

604 
usg
 
	gLogg
 = 
d
::
funi
<(cڡ 
Reque
 &, cڡ 
	gReڣ
 &)>;

606 
usg
 
	gSockOis
 = 
d
::
funi
<(
sock_t
 
sock
)>;

608 
deu_sock_tis
(
sock_t
 
sock
);

610 as
	cSv
 {

611 
	gpublic
:

612 
usg
 
Hdr
 = 
d
::
funi
<(cڡ 
Reque
 &, 
	gReڣ
 &)>;

614 
usg
 
	gExiHdr
 =

615 
d
::
funi
<(cڡ 
Reque
 &, 
	gReڣ
 &, 
	gd
::
exi
 &
e
)>;

617 as
	cHdrReڣ
 {

618 
	gHdd
,

619 
	gUnhdd
,

621 
usg
 
	gHdrWhReڣ
 =

622 
d
::
funi
<
HdrReڣ
(cڡ 
Reque
 &, 
Reڣ
 &)>;

624 
usg
 
	gHdrWhCڋRd
 = 
d
::
funi
<(

625 cڡ 
Reque
 &, 
	gReڣ
 &, cڡ 
	gCڋRd
 &
	gcڋ_ad
)>;

627 
usg
 
	gEx100CtueHdr
 =

628 
d
::
funi
<(cڡ 
Reque
 &, 
	gReڣ
 &)>;

630 
Sv
();

632 
	gvtu
 ~
Sv
();

634 
vtu
 
bo
 
is_vid
() const;

636 
	gSv
 &
G
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

637 
	gSv
 &
Po
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

638 
	gSv
 &
Po
(cڡ 
d
::
rg
 &
n
, 
HdrWhCڋRd
 
hdr
);

639 
	gSv
 &
Put
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

640 
	gSv
 &
Put
(cڡ 
d
::
rg
 &
n
, 
HdrWhCڋRd
 
hdr
);

641 
	gSv
 &
Pch
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

642 
	gSv
 &
Pch
(cڡ 
d
::
rg
 &
n
, 
HdrWhCڋRd
 
hdr
);

643 
	gSv
 &
De
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

644 
	gSv
 &
De
(cڡ 
d
::
rg
 &
n
, 
HdrWhCڋRd
 
hdr
);

645 
	gSv
 &
Ois
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
);

647 
bo
 
t_ba_d
(cڡ 
d
::
rg
 &
d
,

648 cڡ 
d
::
rg
 &
mou_pot
 = std::string());

649 
bo
 
t_mou_pot
(cڡ 
d
::
rg
 &
mou_pot
, cڡ std::rg &
d
,

650 
Hds
 
hds
 = Headers());

651 
bo
 
move_mou_pot
(cڡ 
d
::
rg
 &
mou_pot
);

652 
	gSv
 &
t_fe_exnsi_d_mimy_mpg
(cڡ *
ext
,

653 cڡ *
mime
);

654 
	gSv
 &
t_fe_que_hdr
(
Hdr
 
hdr
);

656 
	gSv
 &
t_r_hdr
(
HdrWhReڣ
 
hdr
);

657 
	gSv
 &
t_r_hdr
(
Hdr
 
hdr
);

658 
	gSv
 &
t_exi_hdr
(
ExiHdr
 
hdr
);

659 
	gSv
 &
t_e_routg_hdr
(
HdrWhReڣ
 
hdr
);

660 
	gSv
 &
t_po_routg_hdr
(
Hdr
 
hdr
);

662 
	gSv
 &
t_ex_100_ctue_hdr
(
Ex100CtueHdr
 
hdr
);

663 
	gSv
 &
t_logg
(
Logg
 
logg
);

665 
	gSv
 &
t_addss_my
(
my
);

666 
	gSv
 &
t_t_noday
(
bo
 

);

667 
	gSv
 &
t_sock_tis
(
SockOis
 
sock_tis
);

669 
	gSv
 &
t_deu_hds
(
Hds
 
hds
);

671 
	gSv
 &
t_kp_ive_max_cou
(
size_t
 
cou
);

672 
	gSv
 &
t_kp_ive_timeout
(
time_t
 
c
);

674 
	gSv
 &
t_ad_timeout
(
time_t
 
c
,ime_
uc
 = 0);

675 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

676 
	gSv
 &
t_ad_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

678 
	gSv
 &
t_wre_timeout
(
time_t
 
c
,ime_
uc
 = 0);

679 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

680 
	gSv
 &
t_wre_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

682 
	gSv
 &
t_id_rv
(
time_t
 
c
,ime_
uc
 = 0);

683 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

684 
	gSv
 &
t_id_rv
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

686 
	gSv
 &
t_yld_max_ngth
(
size_t
 
ngth
);

688 
bo
 
bd_to_pt
(cڡ *
ho
, 
pt
, 
sock_ags
 = 0);

689 
bd_to_y_pt
(cڡ *
ho
, 
sock_ags
 = 0);

690 
bo
 
li_a_bd
();

692 
bo
 
li
(cڡ *
ho
, 
pt
, 
sock_ags
 = 0);

694 
bo
 
is_rug
() const;

695 

();

697 
	gd
::
funi
<
TaskQueue
 *()> 
w_sk_queue
;

699 
	geed
:

700 
bo
 
oss_que
(
Sm
 &
rm
, bo 
o_ci
,

701 
bo
 &
ci_od
,

702 cڡ 
d
::
funi
<(
Reque
 &)> &
tup_que
);

704 
	gd
::
omic
<
sock_t
> 
svr_sock_
;

705 
size_t
 
	gkp_ive_max_cou_
 = 
CPPHTTPLIB_KEEPALIVE_MAX_COUNT
;

706 
time_t
 
	gkp_ive_timeout_c_
 = 
CPPHTTPLIB_KEEPALIVE_TIMEOUT_SECOND
;

707 
time_t
 
	gad_timeout_c_
 = 
CPPHTTPLIB_READ_TIMEOUT_SECOND
;

708 
time_t
 
	gad_timeout_uc_
 = 
CPPHTTPLIB_READ_TIMEOUT_USECOND
;

709 
time_t
 
	gwre_timeout_c_
 = 
CPPHTTPLIB_WRITE_TIMEOUT_SECOND
;

710 
time_t
 
	gwre_timeout_uc_
 = 
CPPHTTPLIB_WRITE_TIMEOUT_USECOND
;

711 
time_t
 
	gid_rv_c_
 = 
CPPHTTPLIB_IDLE_INTERVAL_SECOND
;

712 
time_t
 
	gid_rv_uc_
 = 
CPPHTTPLIB_IDLE_INTERVAL_USECOND
;

713 
size_t
 
	gyld_max_ngth_
 = 
CPPHTTPLIB_PAYLOAD_MAX_LENGTH
;

715 
	give
:

716 
usg
 
Hdrs
 = 
d
::
ve
<d::

<d::
gex
, 
	gHdr
>>;

717 
usg
 
	gHdrsFCڋRd
 =

718 
d
::
ve
<d::

<d::
gex
, 
	gHdrWhCڋRd
>>;

720 
sock_t
 
_rv_sock
(cڡ *
ho
, 
pt
, 
sock_ags
,

721 
SockOis
 
sock_tis
) const;

722 
bd_
(cڡ *
ho
, 
pt
, 
sock_ags
);

723 
bo
 
li_
();

725 
bo
 
routg
(
Reque
 &
q
, 
Reڣ
 &
s
, 
Sm
 &
rm
);

726 
bo
 
hd_fe_que
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

727 
bo
 
hd
 = 
l
);

728 
bo
 
dich_que
(
Reque
 &
q
, 
Reڣ
 &
s
, cڡ 
Hdrs
 &
hdrs
);

729 
bo


730 
dich_que_f_cڋ_ad
(
Reque
 &
q
, 
Reڣ
 &
s
,

731 
CڋRd
 
cڋ_ad
,

732 cڡ 
HdrsFCڋRd
 &
hdrs
);

734 
bo
 
r_que_le
(cڡ *
s
, 
Reque
 &
q
);

735 
y_nges
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

736 
d
::
rg
 &
cڋ_ty
, std::rg &
boundy
);

737 
bo
 
wre_ڣ
(
Sm
 &
rm
, bo 
o_ci
, cڡ 
Reque
 &
q
,

738 
Reڣ
 &
s
);

739 
bo
 
wre_ڣ_wh_cڋ
(
Sm
 &
rm
, bo 
o_ci
,

740 cڡ 
Reque
 &
q
, 
Reڣ
 &
s
);

741 
bo
 
wre_ڣ_ce
(
Sm
 &
rm
, bo 
o_ci
,

742 cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

743 
bo
 
ed_y_nges
);

744 
bo
 
wre_cڋ_wh_ovid
(
Sm
 &
rm
, cڡ 
Reque
 &
q
,

745 
Reڣ
 &
s
, cڡ 
d
::
rg
 &
boundy
,

746 cڡ 
d
::
rg
 &
cڋ_ty
);

747 
bo
 
ad_cڋ
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
);

748 
bo


749 
ad_cڋ_wh_cڋ_iv
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
,

750 
CڋReiv
 
iv
,

751 
MuɝtCڋHd
 
muɝt_hd
,

752 
CڋReiv
 
muɝt_iv
);

753 
bo
 
ad_cڋ_ce
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
,

754 
CڋReiv
 
iv
,

755 
MuɝtCڋHd
 
mul_hd
,

756 
CڋReiv
 
muɝt_iv
);

758 
vtu
 
bo
 
oss_d_o_sock
(
sock_t
 
sock
);

760 
	sMouPotEry
 {

761 
	gd
::
rg
 
mou_pot
;

762 
	gd
::
rg
 
ba_d
;

763 
Hds
 
	ghds
;

765 
	gd
::
ve
<
MouPotEry
> 
ba_ds_
;

767 
	gd
::
omic
<
bo
> 
is_rug_
;

768 
	gd
::
m
<
d
::
rg
, std::rg> 
fe_exnsi_d_mimy_m_
;

769 
Hdr
 
	gfe_que_hdr_
;

770 
Hdrs
 
	gg_hdrs_
;

771 
Hdrs
 
	gpo_hdrs_
;

772 
HdrsFCڋRd
 
	gpo_hdrs_f_cڋ_ad_
;

773 
Hdrs
 
	gput_hdrs_
;

774 
HdrsFCڋRd
 
	gput_hdrs_f_cڋ_ad_
;

775 
Hdrs
 
	gtch_hdrs_
;

776 
HdrsFCڋRd
 
	gtch_hdrs_f_cڋ_ad_
;

777 
Hdrs
 
	gde_hdrs_
;

778 
HdrsFCڋRd
 
	gde_hdrs_f_cڋ_ad_
;

779 
Hdrs
 
	gtis_hdrs_
;

780 
HdrWhReڣ
 
	gr_hdr_
;

781 
ExiHdr
 
	gexi_hdr_
;

782 
HdrWhReڣ
 
	ge_routg_hdr_
;

783 
Hdr
 
	gpo_routg_hdr_
;

784 
Logg
 
	glogg_
;

785 
Ex100CtueHdr
 
	gex_100_ctue_hdr_
;

787 
	gaddss_my_
 = 
AF_UNSPEC
;

788 
bo
 
	gt_noday_
 = 
CPPHTTPLIB_TCP_NODELAY
;

789 
SockOis
 
	gsock_tis_
 = 
deu_sock_tis
;

791 
Hds
 
	gdeu_hds_
;

794 as
	cE
 {

795 
	gSucss
 = 0,

796 
	gUnknown
,

797 
	gCi
,

798 
	gBdIPAddss
,

799 
	gRd
,

800 
	gWre
,

801 
	gExedRedeCou
,

802 
	gCd
,

803 
	gSSLCi
,

804 
	gSSLLdgCts
,

805 
	gSSLSvVifiti
,

806 
	gUnsu܋dMuɝtBoundyChs
,

807 
	gComessi
,

808 
	gCiTimeout
,

811 
	gd
::
rg
 
to_rg
(cڡ 
E
 
r
);

813 
	gd
::
oam
 &
ݔ
<<(
d
::oam &
os
, cڡ 
	gE
 &
	gobj
);

815 as
	cResu
 {

816 
	gpublic
:

817 
Resu
(
d
::
unique_r
<
Reڣ
> &&
s
, 
E
 
r
,

818 
Hds
 &&
que_hds
 = Headers{})

819 : 
s_
(
d
::
move
(
s
)), 
r_
(
r
),

820 
que_hds_
(
d
::
move
(
que_hds
)) {}

822 
ݔ
 
bo
(cڡ {  
s_
 !
nuαr
; }

823 
bo
 
	gݔ
==(
d
::
nuαr_t
cڡ {  
s_
 =
nuαr
; }

824 
bo
 
	gݔ
!=(
d
::
nuαr_t
cڡ {  
s_
 !
nuαr
; }

825 cڡ 
	gReڣ
 &
vue
(cڡ {  *
	gs_
; }

826 
	gReڣ
 &
vue
({  *
	gs_
; }

827 cڡ 
	gReڣ
 &
	gݔ
*(cڡ {  *
	gs_
; }

828 
	gReڣ
 &
	gݔ
*({  *
	gs_
; }

829 cڡ 
Reڣ
 *
	gݔ
->(cڡ {  
	gs_
.
g
(); }

830 
Reڣ
 *
	gݔ
->({  
	gs_
.
g
(); }

833 
E
 
r
(cڡ {  
	gr_
; }

836 
bo
 
has_que_hd
(cڡ *
key
) const;

837 
	gd
::
rg
 
g_que_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

838 
	gme
 <
tyme
 
	gT
>

839 
T
 
g_que_hd_vue
(cڡ *
key
, 
size_t
 
id
 = 0) const;

840 
size_t
 
g_que_hd_vue_cou
(cڡ *
key
) const;

842 
	give
:

843 
d
::
unique_r
<
Reڣ
> 
s_
;

844 
E
 
	gr_
;

845 
Hds
 
	gque_hds_
;

848 as
	cClIm
 {

849 
	gpublic
:

850 
exic
 
ClIm
(cڡ 
d
::
rg
 &
ho
);

852 
exic
 
ClIm
(cڡ 
d
::
rg
 &
ho
, 
pt
);

854 
exic
 
ClIm
(cڡ 
d
::
rg
 &
ho
, 
pt
,

855 cڡ 
d
::
rg
 &
__th
,

856 cڡ 
d
::
rg
 &
_key_th
);

858 
	gvtu
 ~
ClIm
();

860 
vtu
 
bo
 
is_vid
() const;

862 
Resu
 
G
(cڡ *
th
);

863 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
);

864 
Resu
 
G
(cڡ *
th
, 
Progss
 
ogss
);

865 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
Progss
 
ogss
);

866 
Resu
 
G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
);

867 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

868 
CڋReiv
 
cڋ_iv
);

869 
Resu
 
G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
,

870 
Progss
 
ogss
);

871 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

872 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
);

873 
Resu
 
G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

874 
CڋReiv
 
cڋ_iv
);

875 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

876 
ReڣHdr
 
ڣ_hdr
,

877 
CڋReiv
 
cڋ_iv
);

878 
Resu
 
G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

879 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
);

880 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

881 
ReڣHdr
 
ڣ_hdr
, 
CڋReiv
 
cڋ_iv
,

882 
Progss
 
ogss
);

884 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

885 
Progss
 
ogss
 = 
nuαr
);

886 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

887 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
 = 
nuαr
);

888 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

889 
ReڣHdr
 
ڣ_hdr
, 
CڋReiv
 
cڋ_iv
,

890 
Progss
 
ogss
 = 
nuαr
);

892 
Resu
 
Hd
(cڡ *
th
);

893 
Resu
 
Hd
(cڡ *
th
, cڡ 
Hds
 &
hds
);

895 
Resu
 
Po
(cڡ *
th
);

896 
Resu
 
Po
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

897 cڡ *
cڋ_ty
);

898 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

899 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

900 
Resu
 
Po
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

901 cڡ *
cڋ_ty
);

902 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
d
::
rg
 &
body
,

903 cڡ *
cڋ_ty
);

904 
Resu
 
Po
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

905 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

906 
Resu
 
Po
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

907 cڡ *
cڋ_ty
);

908 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

909 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

910 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

911 
CڋProvidWhoutLgth
 
cڋ_ovid
,

912 cڡ *
cڋ_ty
);

913 
Resu
 
Po
(cڡ *
th
, cڡ 
Pams
 &
ms
);

914 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
Pams
 &
ms
);

915 
Resu
 
Po
(cڡ *
th
, cڡ 
MuɝtFmDaIms
 &
ems
);

916 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

917 cڡ 
MuɝtFmDaIms
 &
ems
);

918 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

919 cڡ 
MuɝtFmDaIms
 &
ems
, cڡ 
d
::
rg
 &
boundy
);

921 
Resu
 
Put
(cڡ *
th
);

922 
Resu
 
Put
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

923 cڡ *
cڋ_ty
);

924 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

925 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

926 
Resu
 
Put
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

927 cڡ *
cڋ_ty
);

928 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
d
::
rg
 &
body
,

929 cڡ *
cڋ_ty
);

930 
Resu
 
Put
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

931 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

932 
Resu
 
Put
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

933 cڡ *
cڋ_ty
);

934 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

935 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

936 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

937 
CڋProvidWhoutLgth
 
cڋ_ovid
,

938 cڡ *
cڋ_ty
);

939 
Resu
 
Put
(cڡ *
th
, cڡ 
Pams
 &
ms
);

940 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
Pams
 &
ms
);

942 
Resu
 
Pch
(cڡ *
th
);

943 
Resu
 
Pch
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

944 cڡ *
cڋ_ty
);

945 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

946 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

947 
Resu
 
Pch
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

948 cڡ *
cڋ_ty
);

949 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

950 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
);

951 
Resu
 
Pch
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

952 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

953 
Resu
 
Pch
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

954 cڡ *
cڋ_ty
);

955 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

956 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

957 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

958 
CڋProvidWhoutLgth
 
cڋ_ovid
,

959 cڡ *
cڋ_ty
);

961 
Resu
 
De
(cڡ *
th
);

962 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
);

963 
Resu
 
De
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

964 cڡ *
cڋ_ty
);

965 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

966 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

967 
Resu
 
De
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

968 cڡ *
cڋ_ty
);

969 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

970 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
);

972 
Resu
 
Ois
(cڡ *
th
);

973 
Resu
 
Ois
(cڡ *
th
, cڡ 
Hds
 &
hds
);

975 
bo
 
nd
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
);

976 
Resu
 
nd
(cڡ 
Reque
 &
q
);

978 
size_t
 
is_sock_ݒ
() const;

980 

();

982 
t_home_addr_m
(
d
::
m
<d::
rg
, std::rg> 
addr_m
);

984 
t_deu_hds
(
Hds
 
hds
);

986 
t_addss_my
(
my
);

987 
t_t_noday
(
bo
 

);

988 
t_sock_tis
(
SockOis
 
sock_tis
);

990 
t_ci_timeout
(
time_t
 
c
,ime_
uc
 = 0);

991 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

993 
t_ci_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

995 
t_ad_timeout
(
time_t
 
c
,ime_
uc
 = 0);

996 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

997 
t_ad_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

999 
t_wre_timeout
(
time_t
 
c
,ime_
uc
 = 0);

1000 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1001 
t_wre_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

1003 
t_basic_auth
(cڡ *
uame
, cڡ *
sswd
);

1004 
t_br_tok_auth
(cڡ *
tok
);

1005 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1006 
t_dige_auth
(cڡ *
uame
, cڡ *
sswd
);

1009 
t_kp_ive
(
bo
 

);

1010 
t_flow_loti
(
bo
 

);

1012 
t_u_code
(
bo
 

);

1014 
t_comess
(
bo
 

);

1016 
t_decomess
(
bo
 

);

1018 
t_r
(cڡ *
tf
);

1020 
t_oxy
(cڡ *
ho
, 
pt
);

1021 
t_oxy_basic_auth
(cڡ *
uame
, cڡ *
sswd
);

1022 
t_oxy_br_tok_auth
(cڡ *
tok
);

1023 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1024 
t_oxy_dige_auth
(cڡ *
uame
, cڡ *
sswd
);

1027 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1028 
t___th
(cڡ *
__fe_th
,

1029 cڡ *
__d_th
 = 
nuαr
);

1030 
t___e
(
X509_STORE
 *
__e
);

1033 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1034 
ab_rv_ifi_vifiti
(
bo
 
abd
);

1037 
t_logg
(
Logg
 
logg
);

1039 
	geed
:

1040 
	sSock
 {

1041 
sock_t
 
sock
 = 
INVALID_SOCKET
;

1042 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1043 
SSL
 *
	gs
 = 
nuαr
;

1046 
bo
 
is_ݒ
(cڡ {  
	gsock
 !
INVALID_SOCKET
; }

1049 
Resu
 
nd_
(
Reque
 &&
q
);

1051 
vtu
 
bo
 
_d_c_sock
(
Sock
 &
sock
, 
E
 &
r
);

1060 
vtu
 
shutdown_s
(
Sock
 &
sock
, 
bo
 
shutdown_gfuy
);

1061 
shutdown_sock
(
Sock
 &
sock
);

1062 
o_sock
(
Sock
 &
sock
);

1064 
bo
 
oss_que
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
,

1065 
bo
 
o_ci
, 
E
 &
r
);

1067 
bo
 
wre_cڋ_wh_ovid
(
Sm
 &
rm
, cڡ 
Reque
 &
q
,

1068 
E
 &
r
);

1070 
cy_gs
(cڡ 
ClIm
 &
rhs
);

1073 cڡ 
	gd
::
rg
 
ho_
;

1074 cڡ 
	gpt_
;

1075 cڡ 
	gd
::
rg
 
ho_d_pt_
;

1078 
Sock
 
	gsock_
;

1079 
mub
 
	gd
::
mux
 
sock_mux_
;

1080 
	gd
::
cursive_mux
 
que_mux_
;

1083 
size_t
 
	gsock_ques__ight_
 = 0;

1084 
	gd
::
thad
::
id
 
sock_ques_e_om_thad_
 = 
d
::thread::id();

1085 
bo
 
	gsock_should_be_od_wh_que_is_de_
 = 
l
;

1088 
	gd
::
m
<
d
::
rg
, std::rg> 
addr_m_
;

1091 
Hds
 
	gdeu_hds_
;

1094 
	gd
::
rg
 
__th_
;

1095 
	gd
::
rg
 
_key_th_
;

1097 
time_t
 
	gci_timeout_c_
 = 
CPPHTTPLIB_CONNECTION_TIMEOUT_SECOND
;

1098 
time_t
 
	gci_timeout_uc_
 = 
CPPHTTPLIB_CONNECTION_TIMEOUT_USECOND
;

1099 
time_t
 
	gad_timeout_c_
 = 
CPPHTTPLIB_READ_TIMEOUT_SECOND
;

1100 
time_t
 
	gad_timeout_uc_
 = 
CPPHTTPLIB_READ_TIMEOUT_USECOND
;

1101 
time_t
 
	gwre_timeout_c_
 = 
CPPHTTPLIB_WRITE_TIMEOUT_SECOND
;

1102 
time_t
 
	gwre_timeout_uc_
 = 
CPPHTTPLIB_WRITE_TIMEOUT_USECOND
;

1104 
	gd
::
rg
 
basic_auth_uame_
;

1105 
	gd
::
rg
 
basic_auth_sswd_
;

1106 
	gd
::
rg
 
br_tok_auth_tok_
;

1107 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1108 
	gd
::
rg
 
dige_auth_uame_
;

1109 
	gd
::
rg
 
dige_auth_sswd_
;

1112 
bo
 
	gkp_ive_
 = 
l
;

1113 
bo
 
	gflow_loti_
 = 
l
;

1115 
bo
 
	gu_code_
 = 
ue
;

1117 
	gaddss_my_
 = 
AF_UNSPEC
;

1118 
bo
 
	gt_noday_
 = 
CPPHTTPLIB_TCP_NODELAY
;

1119 
SockOis
 
	gsock_tis_
 = 
nuαr
;

1121 
bo
 
	gcomess_
 = 
l
;

1122 
bo
 
	gdecomess_
 = 
ue
;

1124 
	gd
::
rg
 
r_
;

1126 
	gd
::
rg
 
oxy_ho_
;

1127 
	goxy_pt_
 = -1;

1129 
	gd
::
rg
 
oxy_basic_auth_uame_
;

1130 
	gd
::
rg
 
oxy_basic_auth_sswd_
;

1131 
	gd
::
rg
 
oxy_br_tok_auth_tok_
;

1132 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1133 
	gd
::
rg
 
oxy_dige_auth_uame_
;

1134 
	gd
::
rg
 
oxy_dige_auth_sswd_
;

1137 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1138 
	gd
::
rg
 
__fe_th_
;

1139 
	gd
::
rg
 
__d_th_
;

1141 
X509_STORE
 *
	g__e_
 = 
nuαr
;

1144 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1145 
bo
 
	grv_ifi_vifiti_
 = 
ue
;

1148 
Logg
 
	glogg_
;

1150 
	give
:

1151 
sock_t
 
__sock
(
E
 &
r
) const;

1152 
bo
 
ad_ڣ_le
(
Sm
 &
rm
, cڡ 
Reque
 &
q
, 
Reڣ
 &
s
);

1153 
bo
 
wre_que
(
Sm
 &
rm
, 
Reque
 &
q
, bo 
o_ci
,

1154 
E
 &
r
);

1155 
bo
 
de
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
);

1156 
bo
 
hd_que
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
,

1157 
bo
 
o_ci
, 
E
 &
r
);

1158 
	gd
::
unique_r
<
Reڣ
> 
nd_wh_cڋ_ovid
(

1159 
Reque
 &
q
,

1161 cڡ *
body
, 
size_t
 
cڋ_ngth
, 
CڋProvid
 
cڋ_ovid
,

1162 
CڋProvidWhoutLgth
 
cڋ_ovid_whout_ngth
,

1163 cڡ *
cڋ_ty
, 
E
 &
r
);

1164 
Resu
 
nd_wh_cڋ_ovid
(

1165 cڡ *
mhod
, cڡ *
th
, cڡ 
Hds
 &
hds
,

1166 cڡ *
body
, 
size_t
 
cڋ_ngth
, 
CڋProvid
 
cڋ_ovid
,

1167 
CڋProvidWhoutLgth
 
cڋ_ovid_whout_ngth
,

1168 cڡ *
cڋ_ty
);

1170 
	gd
::
rg
 
adju_ho_rg
(cڡ 
d
::rg &
ho
) const;

1172 
vtu
 
bo
 
oss_sock
(cڡ 
Sock
 &
sock
,

1173 
d
::
funi
<
bo
(
Sm
 &
rm
)> 
back
);

1174 
vtu
 
bo
 
is_s
() const;

1177 as
	cCl
 {

1178 
	gpublic
:

1180 
exic
 
Cl
(cڡ 
d
::
rg
 &
scheme_ho_pt
);

1182 
exic
 
Cl
(cڡ 
d
::
rg
 &
scheme_ho_pt
,

1183 cڡ 
d
::
rg
 &
__th
,

1184 cڡ 
d
::
rg
 &
_key_th
);

1187 
exic
 
Cl
(cڡ 
d
::
rg
 &
ho
, 
pt
);

1189 
exic
 
Cl
(cڡ 
d
::
rg
 &
ho
, 
pt
,

1190 cڡ 
d
::
rg
 &
__th
,

1191 cڡ 
d
::
rg
 &
_key_th
);

1193 
Cl
(Client &&) = ;

1195 ~
Cl
();

1197 
bo
 
is_vid
() const;

1199 
Resu
 
G
(cڡ *
th
);

1200 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
);

1201 
Resu
 
G
(cڡ *
th
, 
Progss
 
ogss
);

1202 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
Progss
 
ogss
);

1203 
Resu
 
G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
);

1204 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1205 
CڋReiv
 
cڋ_iv
);

1206 
Resu
 
G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
,

1207 
Progss
 
ogss
);

1208 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1209 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
);

1210 
Resu
 
G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

1211 
CڋReiv
 
cڋ_iv
);

1212 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1213 
ReڣHdr
 
ڣ_hdr
,

1214 
CڋReiv
 
cڋ_iv
);

1215 
Resu
 
G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1216 
ReڣHdr
 
ڣ_hdr
, 
CڋReiv
 
cڋ_iv
,

1217 
Progss
 
ogss
);

1218 
Resu
 
G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

1219 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
);

1221 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

1222 
Progss
 
ogss
 = 
nuαr
);

1223 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

1224 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
 = 
nuαr
);

1225 
Resu
 
G
(cڡ *
th
, cڡ 
Pams
 &
ms
, cڡ 
Hds
 &
hds
,

1226 
ReڣHdr
 
ڣ_hdr
, 
CڋReiv
 
cڋ_iv
,

1227 
Progss
 
ogss
 = 
nuαr
);

1229 
Resu
 
Hd
(cڡ *
th
);

1230 
Resu
 
Hd
(cڡ *
th
, cڡ 
Hds
 &
hds
);

1232 
Resu
 
Po
(cڡ *
th
);

1233 
Resu
 
Po
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

1234 cڡ *
cڋ_ty
);

1235 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

1236 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

1237 
Resu
 
Po
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

1238 cڡ *
cڋ_ty
);

1239 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
d
::
rg
 &
body
,

1240 cڡ *
cڋ_ty
);

1241 
Resu
 
Po
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

1242 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1243 
Resu
 
Po
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1244 cڡ *
cڋ_ty
);

1245 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

1246 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1247 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1248 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1249 cڡ *
cڋ_ty
);

1250 
Resu
 
Po
(cڡ *
th
, cڡ 
Pams
 &
ms
);

1251 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
Pams
 &
ms
);

1252 
Resu
 
Po
(cڡ *
th
, cڡ 
MuɝtFmDaIms
 &
ems
);

1253 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1254 cڡ 
MuɝtFmDaIms
 &
ems
);

1255 
Resu
 
Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1256 cڡ 
MuɝtFmDaIms
 &
ems
, cڡ 
d
::
rg
 &
boundy
);

1257 
Resu
 
Put
(cڡ *
th
);

1258 
Resu
 
Put
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

1259 cڡ *
cڋ_ty
);

1260 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

1261 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

1262 
Resu
 
Put
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

1263 cڡ *
cڋ_ty
);

1264 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
d
::
rg
 &
body
,

1265 cڡ *
cڋ_ty
);

1266 
Resu
 
Put
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

1267 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1268 
Resu
 
Put
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1269 cڡ *
cڋ_ty
);

1270 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

1271 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1272 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1273 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1274 cڡ *
cڋ_ty
);

1275 
Resu
 
Put
(cڡ *
th
, cڡ 
Pams
 &
ms
);

1276 
Resu
 
Put
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ 
Pams
 &
ms
);

1277 
Resu
 
Pch
(cڡ *
th
);

1278 
Resu
 
Pch
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

1279 cڡ *
cڋ_ty
);

1280 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

1281 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

1282 
Resu
 
Pch
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

1283 cڡ *
cڋ_ty
);

1284 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1285 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
);

1286 
Resu
 
Pch
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

1287 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1288 
Resu
 
Pch
(cڡ *
th
, 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1289 cڡ *
cڋ_ty
);

1290 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
, 
size_t
 
cڋ_ngth
,

1291 
CڋProvid
 
cڋ_ovid
, cڡ *
cڋ_ty
);

1292 
Resu
 
Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1293 
CڋProvidWhoutLgth
 
cڋ_ovid
,

1294 cڡ *
cڋ_ty
);

1296 
Resu
 
De
(cڡ *
th
);

1297 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
);

1298 
Resu
 
De
(cڡ *
th
, cڡ *
body
, 
size_t
 
cڋ_ngth
,

1299 cڡ *
cڋ_ty
);

1300 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
, cڡ *
body
,

1301 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
);

1302 
Resu
 
De
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

1303 cڡ *
cڋ_ty
);

1304 
Resu
 
De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

1305 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
);

1307 
Resu
 
Ois
(cڡ *
th
);

1308 
Resu
 
Ois
(cڡ *
th
, cڡ 
Hds
 &
hds
);

1310 
bo
 
nd
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
);

1311 
Resu
 
nd
(cڡ 
Reque
 &
q
);

1313 
size_t
 
is_sock_ݒ
() const;

1315 

();

1317 
t_home_addr_m
(
d
::
m
<d::
rg
, std::rg> 
addr_m
);

1319 
t_deu_hds
(
Hds
 
hds
);

1321 
t_addss_my
(
my
);

1322 
t_t_noday
(
bo
 

);

1323 
t_sock_tis
(
SockOis
 
sock_tis
);

1325 
t_ci_timeout
(
time_t
 
c
,ime_
uc
 = 0);

1326 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1328 
t_ci_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

1330 
t_ad_timeout
(
time_t
 
c
,ime_
uc
 = 0);

1331 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1332 
t_ad_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

1334 
t_wre_timeout
(
time_t
 
c
,ime_
uc
 = 0);

1335 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1336 
t_wre_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration);

1338 
t_basic_auth
(cڡ *
uame
, cڡ *
sswd
);

1339 
t_br_tok_auth
(cڡ *
tok
);

1340 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1341 
t_dige_auth
(cڡ *
uame
, cڡ *
sswd
);

1344 
t_kp_ive
(
bo
 

);

1345 
t_flow_loti
(
bo
 

);

1347 
t_u_code
(
bo
 

);

1349 
t_comess
(
bo
 

);

1351 
t_decomess
(
bo
 

);

1353 
t_r
(cڡ *
tf
);

1355 
t_oxy
(cڡ *
ho
, 
pt
);

1356 
t_oxy_basic_auth
(cڡ *
uame
, cڡ *
sswd
);

1357 
t_oxy_br_tok_auth
(cڡ *
tok
);

1358 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1359 
t_oxy_dige_auth
(cڡ *
uame
, cڡ *
sswd
);

1362 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1363 
ab_rv_ifi_vifiti
(
bo
 
abd
);

1366 
t_logg
(
Logg
 
logg
);

1369 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1370 
t___th
(cڡ *
__fe_th
,

1371 cڡ *
__d_th
 = 
nuαr
);

1373 
t___e
(
X509_STORE
 *
__e
);

1375 
g_ݒs_vify_su
() const;

1377 
SSL_CTX
 *
s_cڋxt
() const;

1380 
	give
:

1381 
d
::
unique_r
<
ClIm
> 
i_
;

1383 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1384 
bo
 
	gis_s_
 = 
l
;

1388 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


1389 as
	cSSLSv
 : 
public
 
Sv
 {

1390 
public
:

1391 
SSLSv
(cڡ *
_th
, cڡ *
ive_key_th
,

1392 cڡ *
___fe_th
 = 
nuαr
,

1393 cڡ *
___d_th
 = 
nuαr
,

1394 cڡ *
ive_key_sswd
 = 
nuαr
);

1396 
SSLSv
(
X509
 *

, 
EVP_PKEY
 *
ive_key
,

1397 
X509_STORE
 *
___e
 = 
nuαr
);

1399 
SSLSv
(

1400 cڡ 
d
::
funi
<
bo
(
SSL_CTX
 &
s_x
)> &
tup_s_x_back
);

1402 ~
SSLSv
(
	govride
;

1404 
bo
 
is_vid
(cڡ 
	govride
;

1406 
SSL_CTX
 *
s_cڋxt
() const;

1408 
	give
:

1409 
bo
 
oss_d_o_sock
(
sock_t
 
sock

ovride
;

1411 
SSL_CTX
 *
	gx_
;

1412 
	gd
::
mux
 
x_mux_
;

1415 as
	cSSLCl
 : 
public
 
ClIm
 {

1416 
public
:

1417 
exic
 
SSLCl
(cڡ 
d
::
rg
 &
ho
);

1419 
exic
 
SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
);

1421 
exic
 
SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
,

1422 cڡ 
d
::
rg
 &
__th
,

1423 cڡ 
d
::
rg
 &
_key_th
);

1425 
exic
 
SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
, 
X509
 *
_
,

1426 
EVP_PKEY
 *
_key
);

1428 ~
SSLCl
(
	govride
;

1430 
bo
 
is_vid
(cڡ 
	govride
;

1432 
t___e
(
X509_STORE
 *
__e
);

1434 
g_ݒs_vify_su
() const;

1436 
SSL_CTX
 *
s_cڋxt
() const;

1438 
	give
:

1439 
bo
 
_d_c_sock
(
Sock
 &
sock
, 
E
 &
r

	govride
;

1440 
shutdown_s
(
Sock
 &
sock
, 
bo
 
shutdown_gfuy

	govride
;

1441 
shutdown_s_im
(
Sock
 &
sock
, 
bo
 
shutdown_sock
);

1443 
bo
 
oss_sock
(cڡ 
Sock
 &
sock
,

1444 
d
::
funi
<
bo
(
Sm
 &
rm
)> 
back

ovride
;

1445 
bo
 
is_s
(cڡ 
	govride
;

1447 
bo
 
c_wh_oxy
(
Sock
 &
sock
, 
Reڣ
 &
s
, bo &
sucss
,

1448 
E
 &
r
);

1449 
bo
 
lize_s
(
Sock
 &
sock
, 
E
 &
r
);

1451 
bo
 
ld_s
();

1453 
bo
 
vify_ho
(
X509
 *
rv_
) const;

1454 
bo
 
vify_ho_wh_subje_t_me
(
X509
 *
rv_
) const;

1455 
bo
 
vify_ho_wh_comm_me
(
X509
 *
rv_
) const;

1456 
bo
 
check_ho_me
(cڡ *
n
, 
size_t
 
n_n
) const;

1458 
SSL_CTX
 *
	gx_
;

1459 
	gd
::
mux
 
x_mux_
;

1460 
	gd
::
_ag
 
lize__
;

1462 
	gd
::
ve
<
d
::
rg
> 
ho_compڒts_
;

1464 
	gvify_su_
 = 0;

1466 
nd
 
ass
 
	gClIm
;

1474 
mea
 
	gda
 {

1476 
	gme
 <
tyme
 
	gT
,ym
	gU
>

1477 
le
 
duti_to_c_d_uc
(cڡ 
T
 &
duti
, 
U
 
back
) {

1478 aut
	gc
 = 
d
::
chro
::
duti_
<d::chro::
cds
>(
duti
).
cou
();

1479 aut
	guc
 = 
d
::
chro
::
duti_
<d::chro::
miocds
>(

1480 
duti
 - 
d
::
chro
::
cds
(
c
))

1481 .
cou
();

1482 
back
(
c
, 
uc
);

1485 
	gme
 <
tyme
 
	gT
>

1486 
le
 
T
 
g_hd_vue
(cڡ 
Hds
 & , const * ,

1487 
size_t
 = 0, 
ut64_t
 = 0) {}

1489 
me
 <>

1490 
le
 
ut64_t
 
g_hd_vue
<ut64_t>(cڡ 
Hds
 &
hds
,

1491 cڡ *
	gkey
, 
size_t
 
	gid
,

1492 
ut64_t
 
	gdef
) {

1493 aut
	gg
 = 
hds
.
equ_nge
(
key
);

1494 aut
	g
 = 
g
.
f
;

1495 
	gd
::
adv
(

, 
ic_
<
ssize_t
>(
id
));

1496 i(
	g
 !
g
.
cd
) {

1497  
d
::
ou
(

->
cd
.
da
(), 
nuαr
, 10);

1499  
	gdef
;

1504 
	gme
 <
tyme
 
	gT
>

1505 
le
 
T
 
	gReque
::
	$g_hd_vue
(cڡ *
key
, 
size_t
 
id
) const {

1506  
da
::
g_hd_vue
<
T
>(
hds
, 
key
, 
id
, 0);

1507 
	}
}

1509 
	gme
 <
tyme
 
	gT
>

1510 
le
 
T
 
	gReڣ
::
	$g_hd_vue
(cڡ *
key
, 
size_t
 
id
) const {

1511  
da
::
g_hd_vue
<
T
>(
hds
, 
key
, 
id
, 0);

1512 
	}
}

1514 
	gme
 <
	gtyme
... 
	gArgs
>

1515 
le
 
ssize_t
 
	gSm
::
	$wre_fm
(cڡ *
fmt
, cڡ 
Args
 &...
gs
) {

1516 cڡut
bufsiz
 = 2048;

1517 
d
::
y
<, 
bufsiz
> 
buf
{};

1519 #i
	`defed
(
_MSC_VER
) && _MSC_VER < 1900

1520 aut

 = 
	`_tf_s
(
buf
.
	`da
(), 
bufsiz
, 
_TRUNCATE
, 
fmt
, 
gs
...);

1522 aut

 = 
	`tf
(
buf
.
	`da
(), buf.
	`size
(- 1, 
fmt
, 
gs
...);

1524 i(

 <= 0) {  sn; }

1526 aut
n
 = 
ic_
<
size_t
>(

);

1528 i(
n
 >
buf
.
	`size
() - 1) {

1529 
d
::
ve
<> 
	`glowab_buf
(
buf
.
	`size
());

1531 
n
 >
glowab_buf
.
	`size
() - 1) {

1532 
glowab_buf
.
	`size
(glowab_buf.
	`size
() * 2);

1533 #i
	`defed
(
_MSC_VER
) && _MSC_VER < 1900

1534 
n
 = 
ic_
<
size_t
>(
	`_tf_s
(&
glowab_buf
[0], glowab_buf.
	`size
(),

1535 
glowab_buf
.
	`size
(- 1, 
fmt
,

1536 
gs
...));

1538 
n
 = 
ic_
<
size_t
>(

1539 
	`tf
(&
glowab_buf
[0], glowab_buf.
	`size
(- 1, 
fmt
, 
gs
...));

1542  
	`wre
(&
glowab_buf
[0], 
n
);

1544  
	`wre
(
buf
.
	`da
(), 
n
);

1546 
	}
}

1548 
le
 
	$deu_sock_tis
(
sock_t
 
sock
) {

1549 
yes
 = 1;

1550 #ifde
_WIN32


1551 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
, 
t_
<*>(&
yes
),

1552 (
yes
));

1553 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_EXCLUSIVEADDRUSE
,

1554 
t_
<*>(&
yes
), (yes));

1556 #ifde
SO_REUSEPORT


1557 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_REUSEPORT
, 
t_
<*>(&
yes
),

1558 (
yes
));

1560 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
, 
t_
<*>(&
yes
),

1561 (
yes
));

1564 
	}
}

1566 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1567 
le
 
	gSv
 &

1568 
	gSv
::
t_ad_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1569 
	gda
::
duti_to_c_d_uc
(

1570 
duti
, [&](
time_t
 
c
,ime_
uc
{ 
t_ad_timeout
(sec, usec); });

1571  *
	gthis
;

1574 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1575 
le
 
	gSv
 &

1576 
	gSv
::
t_wre_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1577 
	gda
::
duti_to_c_d_uc
(

1578 
duti
, [&](
time_t
 
c
,ime_
uc
{ 
t_wre_timeout
(sec, usec); });

1579  *
	gthis
;

1582 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1583 
le
 
	gSv
 &

1584 
	gSv
::
t_id_rv
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1585 
	gda
::
duti_to_c_d_uc
(

1586 
duti
, [&](
time_t
 
c
,ime_
uc
{ 
t_id_rv
(sec, usec); });

1587  *
	gthis
;

1590 
le
 
	gd
::
rg
 
	$to_rg
(cڡ 
E
 
r
) {

1591 
r
) {

1592 
E
::
Sucss
:  "Success";

1593 
E
::
Ci
:  "Connection";

1594 
E
::
BdIPAddss
:  "BindIPAddress";

1595 
E
::
Rd
:  "Read";

1596 
E
::
Wre
:  "Write";

1597 
E
::
ExedRedeCou
:  "ExceedRedirectCount";

1598 
E
::
Cd
:  "Canceled";

1599 
E
::
SSLCi
:  "SSLConnection";

1600 
E
::
SSLLdgCts
:  "SSLLoadingCerts";

1601 
E
::
SSLSvVifiti
:  "SSLServerVerification";

1602 
E
::
Unsu܋dMuɝtBoundyChs
:

1604 
E
::
Comessi
:  "Compression";

1605 
E
::
CiTimeout
:  "ConnectionTimeout";

1606 
E
::
Unknown
:  "Unknown";

1611 
	}
}

1613 
le
 
	gd
::
oam
 &
ݔ
<<(
d
::oam &
os
, cڡ 
	gE
 &
	gobj
) {

1614 
	gos
 << 
to_rg
(
obj
);

1615 
	gos
 << " (" << 
	gic_
<
	gd
::
undlyg_ty
<
E
>::
ty
>(
obj
) << ')';

1616  
	gos
;

1619 
	gme
 <
tyme
 
	gT
>

1620 
le
 
T
 
	gResu
::
	$g_que_hd_vue
(cڡ *
key
, 
size_t
 
id
) const {

1621  
da
::
g_hd_vue
<
T
>(
que_hds_
, 
key
, 
id
, 0);

1622 
	}
}

1624 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1625 
le
 
	gClIm
::
t_ci_timeout
(

1626 cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1627 
	gda
::
duti_to_c_d_uc
(
duti
, [&](
time_t
 
c
,ime_
uc
) {

1628 
t_ci_timeout
(
c
, 
uc
);

1632 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1633 
le
 
	gClIm
::
t_ad_timeout
(

1634 cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1635 
	gda
::
duti_to_c_d_uc
(

1636 
duti
, [&](
time_t
 
c
,ime_
uc
{ 
t_ad_timeout
(sec, usec); });

1639 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1640 
le
 
	gClIm
::
t_wre_timeout
(

1641 cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1642 
	gda
::
duti_to_c_d_uc
(

1643 
duti
, [&](
time_t
 
c
,ime_
uc
{ 
t_wre_timeout
(sec, usec); });

1646 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1647 
le
 
	gCl
::
t_ci_timeout
(

1648 cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1649 
	gi_
->
t_ci_timeout
(
duti
);

1652 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1653 
le
 

1654 
	gCl
::
t_ad_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1655 
	gi_
->
t_ad_timeout
(
duti
);

1658 
	gme
 <
ass
 
	gR
, cs
	gPiod
>

1659 
le
 

1660 
	gCl
::
t_wre_timeout
(cڡ 
d
::
chro
::
duti
<
R
, 
Piod
> &duration) {

1661 
	gi_
->
t_wre_timeout
(
duti
);

1669 
	gd
::
rg
 
hoed_
(cڡ *
home
);

1671 
hoed_
(cڡ *
home
, 
d
::
ve
<d::
rg
> &
addrs
);

1673 
	gd
::
rg
 
nd_quy_ms
(cڡ *
th
, cڡ 
Pams
 &
ms
);

1675 
	gd
::

<
d
::
rg
, std::rg> 
make_nge_hd
(
Rges
 
nges
);

1677 
	gd
::

<
d
::
rg
, std::string>

1678 
make_basic_authtiti_hd
(cڡ 
d
::
rg
 &
uame
,

1679 cڡ 
d
::
rg
 &
sswd
,

1680 
bo
 
is_oxy
 = 
l
);

1682 
mea
 
	gda
 {

1684 
	gd
::
rg
 
code_quy_m
(cڡ 
d
::rg &
vue
);

1686 
	gd
::
rg
 
decode_u
(cڡ 
d
::rg &
s
, 
bo
 
cvt_us_to_a
);

1688 
ad_fe
(cڡ 
d
::
rg
 &
th
, std::rg &
out
);

1690 
	gd
::
rg
 
im_cy
(cڡ 
d
::rg &
s
);

1692 
l
(cڡ *
b
, cڡ *
e
, 
d
,

1693 
d
::
funi
<(cڡ *, cڡ *)> 

);

1695 
bo
 
oss__sock
(
sock_t
 
sock
, 
time_t
 
ad_timeout_c
,

1696 
time_t
 
ad_timeout_uc
,ime_
wre_timeout_c
,

1697 
time_t
 
wre_timeout_uc
,

1698 
d
::
funi
<
bo
(
Sm
 &)> 
back
);

1700 
sock_t
 
__sock
(

1701 cڡ *
ho
, cڡ *

, 
pt
, 
addss_my
,

1702 
bo
 
t_noday
, 
SockOis
 
sock_tis
,

1703 
time_t
 
ci_timeout_c
,ime_
ci_timeout_uc
,

1704 
time_t
 
ad_timeout_c
,ime_
ad_timeout_uc
,ime_
wre_timeout_c
,

1705 
time_t
 
wre_timeout_uc
, cڡ 
d
::
rg
 &
tf
, 
E
 &
r
);

1707 cڡ *
g_hd_vue
(cڡ 
Hds
 &
hds
, cڡ *
key
,

1708 
size_t
 
id
 = 0, cڡ *
def
 = 
nuαr
);

1710 
	gd
::
rg
 
ms_to_quy_r
(cڡ 
Pams
 &
ms
);

1712 
r_quy_xt
(cڡ 
d
::
rg
 &
s
, 
Pams
 &
ms
);

1714 
bo
 
r_nge_hd
(cڡ 
d
::
rg
 &
s
, 
Rges
 &
nges
);

1716 
o_sock
(
sock_t
 
sock
);

1718 
ssize_t
 
nd_sock
(
sock_t
 
sock
, cڡ *
r
, 
size_t
 
size
, 
ags
);

1720 
ssize_t
 
ad_sock
(
sock_t
 
sock
, *
r
, 
size_t
 
size
, 
ags
);

1722 as
	cEncodgTy
 { 
	gNe
 = 0, 
	gGz
, 
	gBrli
 };

1724 
EncodgTy
 
codg_ty
(cڡ 
Reque
 &
q
, cڡ 
Reڣ
 &
s
);

1726 as
	cBufrSm
 : 
public
 
Sm
 {

1727 
public
:

1728 
BufrSm
() = ;

1729 ~
BufrSm
(
	govride
 = ;

1731 
bo
 
is_adab
(cڡ 
	govride
;

1732 
bo
 
is_wrab
(cڡ 
	govride
;

1733 
ssize_t
 
ad
(*
r
, 
size_t
 
size

	govride
;

1734 
ssize_t
 
wre
(cڡ *
r
, 
size_t
 
size

	govride
;

1735 
g_me__d_pt
(
d
::
rg
 &

, &
pt
cڡ 
	govride
;

1736 
sock_t
 
sock
(cڡ 
	govride
;

1738 cڡ 
	gd
::
rg
 &
g_bufr
() const;

1740 
	give
:

1741 
d
::
rg
 
bufr
;

1742 
size_t
 
	gposi
 = 0;

1745 as
	ccomess
 {

1746 
	gpublic
:

1747 
vtu
 ~
comess
() = ;

1749 
	gd
::
	tfuni
<
	tbo
(cڡ *
	tda
, 
	tsize_t
 
	tda_n
)> 
	tClback
;

1750 
vtu
 
bo
 
comess
(cڡ *
da
, 
size_t
 
da_ngth
, bo 
ϡ
,

1751 
Clback
 
back
) = 0;

1754 as
	cdecomess
 {

1755 
	gpublic
:

1756 
vtu
 ~
decomess
() = ;

1758 
vtu
 
bo
 
is_vid
() const = 0;

1760 
	gd
::
	tfuni
<
	tbo
(cڡ *
	tda
, 
	tsize_t
 
	tda_n
)> 
	tClback
;

1761 
vtu
 
bo
 
decomess
(cڡ *
da
, 
size_t
 
da_ngth
,

1762 
Clback
 
back
) = 0;

1765 as
	cnocomess
 : 
public
 
comess
 {

1766 
public
:

1767 
vtu
 ~
nocomess
() = ;

1769 
bo
 
comess
(cڡ *
da
, 
size_t
 
da_ngth
, bool ,

1770 
Clback
 
back

	govride
;

1773 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


1774 as
	cgz_comess
 : 
public
 
comess
 {

1775 
public
:

1776 
gz_comess
();

1777 ~
gz_comess
();

1779 
bo
 
comess
(cڡ *
da
, 
size_t
 
da_ngth
, bo 
ϡ
,

1780 
Clback
 
back

	govride
;

1782 
	give
:

1783 
bo
 
is_vid_
 = 
l
;

1784 
z_am
 
	grm_
;

1787 as
	cgz_decomess
 : 
public
 
decomess
 {

1788 
public
:

1789 
gz_decomess
();

1790 ~
gz_decomess
();

1792 
bo
 
is_vid
(cڡ 
	govride
;

1794 
bo
 
decomess
(cڡ *
da
, 
size_t
 
da_ngth
,

1795 
Clback
 
back

	govride
;

1797 
	give
:

1798 
bo
 
is_vid_
 = 
l
;

1799 
z_am
 
	grm_
;

1803 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


1804 as
	cbrli_comess
 : 
public
 
comess
 {

1805 
public
:

1806 
brli_comess
();

1807 ~
brli_comess
();

1809 
bo
 
comess
(cڡ *
da
, 
size_t
 
da_ngth
, bo 
ϡ
,

1810 
Clback
 
back

	govride
;

1812 
	give
:

1813 
BrliEncodS
 *
e_
 = 
nuαr
;

1816 as
	cbrli_decomess
 : 
public
 
decomess
 {

1817 
public
:

1818 
brli_decomess
();

1819 ~
brli_decomess
();

1821 
bo
 
is_vid
(cڡ 
	govride
;

1823 
bo
 
decomess
(cڡ *
da
, 
size_t
 
da_ngth
,

1824 
Clback
 
back

	govride
;

1826 
	give
:

1827 
BrliDecodResu
 
decod_r
;

1828 
BrliDecodS
 *
	gdecod_s
 = 
nuαr
;

1834 as
	cam_le_ad
 {

1835 
	gpublic
:

1836 
am_le_ad
(
Sm
 &
rm
, *
fixed_bufr
,

1837 
size_t
 
fixed_bufr_size
);

1838 cڡ *
r
() const;

1839 
size_t
 
size
() const;

1840 
bo
 
d_wh_lf
() const;

1841 
bo
 
gle
();

1843 
	give
:

1844 
nd
(
c
);

1846 
	gSm
 &
	grm_
;

1847 *
	gfixed_bufr_
;

1848 cڡ 
size_t
 
	gfixed_bufr_size_
;

1849 
size_t
 
	gfixed_bufr_ud_size_
 = 0;

1850 
	gd
::
rg
 
glowab_bufr_
;

1861 
mea
 
	gda
 {

1863 
le
 
bo
 
is_hex
(
c
, &
v
) {

1864 i(0x20 <
c
 && 
isdig
(c)) {

1865 
v
 = 
c
 - '0';

1866  
	gue
;

1867 } i('A' <
c
 && c <= 'F') {

1868 
v
 = 
c
 - 'A' + 10;

1869  
	gue
;

1870 } i('a' <
c
 && c <= 'f') {

1871 
v
 = 
c
 - 'a' + 10;

1872  
	gue
;

1874  
	gl
;

1877 
le
 
bo
 
om_hex_to_i
(cڡ 
d
::
rg
 &
s
, 
size_t
 
i
, size_
t
,

1878 &
v
) {

1879 i(
	gi
 >
s
.
size
(){  
l
; }

1881 
	gv
 = 0;

1882 ; 
	gt
; 
	gi
++, cnt--) {

1883 i(!
	gs
[
i
]{  
	gl
; }

1884 
	gv
 = 0;

1885 i(
is_hex
(
s
[
i
], 
v
)) {

1886 
	gv
 = 
v
 * 16 + 
v
;

1888  
	gl
;

1891  
	gue
;

1894 
le
 
	gd
::
rg
 
om_i_to_hex
(
size_t
 
n
) {

1895 cڡ *
cht
 = "0123456789abcdef";

1896 
	gd
::
rg
 
t
;

1898 
	gt
 = 
cht
[
n
 & 15] + 
t
;

1899 
	gn
 >>= 4;

1900 } 
	gn
 > 0);

1901  
	gt
;

1904 
le
 
size_t
 
to_utf8
(
code
, *
buff
) {

1905 i(
	gcode
 < 0x0080) {

1906 
	gbuff
[0] = (
code
 & 0x7F);

1908 } i(
	gcode
 < 0x0800) {

1909 
	gbuff
[0] = 
ic_
<>(0xC0 | ((
code
 >> 6) & 0x1F));

1910 
	gbuff
[1] = 
ic_
<>(0x80 | (
code
 & 0x3F));

1912 } i(
	gcode
 < 0xD800) {

1913 
	gbuff
[0] = 
ic_
<>(0xE0 | ((
code
 >> 12) & 0xF));

1914 
	gbuff
[1] = 
ic_
<>(0x80 | ((
code
 >> 6) & 0x3F));

1915 
	gbuff
[2] = 
ic_
<>(0x80 | (
code
 & 0x3F));

1917 } i(
	gcode
 < 0xE000) {

1919 } i(
	gcode
 < 0x10000) {

1920 
	gbuff
[0] = 
ic_
<>(0xE0 | ((
code
 >> 12) & 0xF));

1921 
	gbuff
[1] = 
ic_
<>(0x80 | ((
code
 >> 6) & 0x3F));

1922 
	gbuff
[2] = 
ic_
<>(0x80 | (
code
 & 0x3F));

1924 } i(
	gcode
 < 0x110000) {

1925 
	gbuff
[0] = 
ic_
<>(0xF0 | ((
code
 >> 18) & 0x7));

1926 
	gbuff
[1] = 
ic_
<>(0x80 | ((
code
 >> 12) & 0x3F));

1927 
	gbuff
[2] = 
ic_
<>(0x80 | ((
code
 >> 6) & 0x3F));

1928 
	gbuff
[3] = 
ic_
<>(0x80 | (
code
 & 0x3F));

1938 
le
 
	gd
::
rg
 
ba64_code
(cڡ 
d
::rg &

) {

1939 cڡut
lookup
 =

1942 
	gd
::
rg
 
out
;

1943 
	gout
.
rve
(

.
size
());

1945 
	gv
 = 0;

1946 
	gvb
 = -6;

1948 aut
	gc
 : 

) {

1949 
v
 = (v << 8+ 
ic_
<
ut8_t
>(
c
);

1950 
	gvb
 += 8;

1951 
	gvb
 >= 0) {

1952 
out
.
push_back
(
lookup
[(
v
 >> 
vb
) & 0x3F]);

1953 
	gvb
 -= 6;

1957 i(
	gvb
 > -6{ 
	gout
.
push_back
(
lookup
[((
v
 << 8>> (
vb
 + 8)) & 0x3F]); }

1959 
	gout
.
size
() % 4) {

1960 
	gout
.
push_back
('=');

1963  
	gout
;

1966 
le
 
bo
 
is_fe
(cڡ 
d
::
rg
 &
th
) {

1967 #ifde
_WIN32


1968  
_acss_s
(
th
.
c_r
(), 0) == 0;

1970 

 
	g
;

1971  

(
th
.
c_r
(), &

>0 && 
S_ISREG
(.
_mode
);

1975 
le
 
bo
 
is_d
(cڡ 
d
::
rg
 &
th
) {

1976 

 

;

1977  

(
th
.
c_r
(), &

>0 && 
S_ISDIR
(.
_mode
);

1980 
le
 
bo
 
is_vid_th
(cڡ 
d
::
rg
 &
th
) {

1981 
size_t
 
v
 = 0;

1982 
size_t
 
	gi
 = 0;

1985 
	gi
 < 
	gth
.
size
(&&h[
i
] == '/') {

1986 
i
++;

1989 
	gi
 < 
	gth
.
size
()) {

1991 aut
	gbeg
 = 
i
;

1992 
	gi
 < 
	gth
.
size
(&&h[
i
] != '/') {

1993 
i
++;

1996 aut
	gn
 = 
i
 - 
beg
;

1997 
as
(
n
 > 0);

1999 i(!
	gth
.
com
(
beg
, 
n
, ".")) {

2001 } i(!
	gth
.
com
(
beg
, 
n
, "..")) {

2002 i(
	gv
 =0{  
l
; }

2003 
	gv
--;

2005 
	gv
++;

2009 
	gi
 < 
	gth
.
size
(&&h[
i
] == '/') {

2010 
i
++;

2014  
	gue
;

2017 
le
 
	gd
::
rg
 
code_quy_m
(cڡ 
d
::rg &
vue
) {

2018 
d
::
orgam
 
esd
;

2019 
	gesd
.
fl
('0');

2020 
	gesd
 << 
	gd
::
hex
;

2022 aut
	gc
 : 
vue
) {

2023 i(
d
::
ium
(
ic_
<
ut8_t
>(
c
)) || c == '-' || c == '_' ||

2024 
c
 == '.' || c == '!' || c == '~' || c == '*' || c == '\'' || c == '(' ||

2025 
c
 == ')') {

2026 
esd
 << 
c
;

2028 
	gesd
 << 
	gd
::
u
;

2029 
	gesd
 << '%' << 
	gd
::
tw
(2)

2030 << 
ic_
<>(ic_<>(
c
));

2031 
	gesd
 << 
	gd
::
nou
;

2035  
	gesd
.
r
();

2038 
le
 
	gd
::
rg
 
code_u
(cڡ 
d
::rg &
s
) {

2039 
d
::
rg
 
su
;

2040 
	gsu
.
rve
(
s
.
size
());

2042 
size_t
 
	gi
 = 0; 
	gs
[
i
]; i++) {

2043 
	gs
[
i
]) {

2044 ' ': 
su
 += "%20"; ;

2045 '+': 
su
 += "%2B"; ;

2046 '\r': 
su
 += "%0D"; ;

2047 '\n': 
su
 += "%0A"; ;

2048 '\'': 
su
 += "%27"; ;

2049 ',': 
su
 += "%2C"; ;

2051 ';': 
su
 += "%3B"; ;

2053 aut
c
 = 
ic_
<
ut8_t
>(
s
[
i
]);

2054 i(
	gc
 >= 0x80) {

2055 
su
 += '%';

2056 
	ghex
[4];

2057 aut
	gn
 = 
tf
(
hex
, (hex- 1, "%02X", 
c
);

2058 
as
(
n
 == 2);

2059 
	gsu
.
nd
(
hex
, 
ic_
<
size_t
>(
n
));

2061 
	gsu
 +
s
[
i
];

2067  
	gsu
;

2070 
le
 
	gd
::
rg
 
decode_u
(cڡ 
d
::rg &
s
,

2071 
bo
 
cvt_us_to_a
) {

2072 
	gd
::
rg
 
su
;

2074 
size_t
 
	gi
 = 0; i < 
	gs
.
size
(); i++) {

2075 i(
	gs
[
i
] ='%' && i + 1 < 
s
.
size
()) {

2076 i(
s
[
i
 + 1] == 'u') {

2077 
v
 = 0;

2078 i(
om_hex_to_i
(
s
, 
i
 + 2, 4, 
v
)) {

2080 
	gbuff
[4];

2081 
size_t
 
	gn
 = 
to_utf8
(
v
, 
buff
);

2082 i(
	gn
 > 0{ 
	gsu
.
nd
(
buff
, 
n
); }

2083 
	gi
 += 5;

2085 
	gsu
 +
s
[
i
];

2088 
	gv
 = 0;

2089 i(
om_hex_to_i
(
s
, 
i
 + 1, 2, 
v
)) {

2091 
	gsu
 +
ic_
<>(
v
);

2092 
	gi
 += 2;

2094 
	gsu
 +
s
[
i
];

2097 } i(
	gcvt_us_to_a
 && 
	gs
[
i
] == '+') {

2098 
su
 += ' ';

2100 
	gsu
 +
s
[
i
];

2104  
	gsu
;

2107 
le
 
ad_fe
(cڡ 
d
::
rg
 &
th
, std::rg &
out
) {

2108 
d
::
ifam
 
fs
(
th
, std::
ios_ba
::
by
);

2109 
	gfs
.
ekg
(0, 
d
::
ios_ba
::
d
);

2110 aut
	gsize
 = 
fs
.
g
();

2111 
	gfs
.
ekg
(0);

2112 
	gout
.
size
(
ic_
<
size_t
>(
size
));

2113 
	gfs
.
ad
(&
out
[0], 
ic_
<
d
::
amsize
>(
size
));

2116 
le
 
	gd
::
rg
 
fe_exnsi
(cڡ 
d
::rg &
th
) {

2117 
d
::
smch
 
m
;

2118 aut
	g
 = 
d
::
gex
("\\.([a-zA-Z0-9]+)$");

2119 i(
	gd
::
gex_ch
(
th
, 
m
, 

){  
	gm
[1].
r
(); }

2120  
	gd
::
rg
();

2123 
le
 
bo
 
is_a__b
(
c
{  
	gc
 == ' ' || c == '\t'; }

2125 
le
 
	gd
::

<
size_t
, 
	gsize_t
> 
im
(cڡ *
b
, cڡ *
e
, size_

,

2126 
size_t
 
right
) {

2127 
	gb
 + 
	g
 < 
	ge
 && 
is_a__b
(
b
[

])) {

2128 
	g
++;

2130 
	gright
 > 0 && 
is_a__b
(
b
[
right
 - 1])) {

2131 
	gright
--;

2133  
	gd
::
make_
(

, 
right
);

2136 
le
 
	gd
::
rg
 
im_cy
(cڡ 
d
::rg &
s
) {

2137 aut
r
 = 
im
(
s
.
da
(), s.da(+ s.
size
(), 0, s.size());

2138  
	gs
.
subr
(
r
.
f
,.
cd
 -.first);

2141 
le
 
l
(cڡ *
b
, cڡ *
e
, 
d
,

2142 
d
::
funi
<(cڡ *, cڡ *)> 

) {

2143 
size_t
 
	gi
 = 0;

2144 
size_t
 
	gbeg
 = 0;

2146 
	ge
 ? (
	gb
 + 
	gi
 <: (
b
[
i
] != '\0')) {

2147 i(
b
[
i
] =
d
) {

2148 aut
r
 = 
im
(
b
, 
e
, 
beg
, 
i
);

2149 i(
	gr
.
	gf
 <.
	gcd
{ 

(&
b
[
r
.
f
], &b[r.
cd
]); }

2150 
	gbeg
 = 
i
 + 1;

2152 
	gi
++;

2155 i(
	gi
) {

2156 aut
	gr
 = 
im
(
b
, 
e
, 
beg
, 
i
);

2157 i(
	gr
.
	gf
 <.
	gcd
{ 

(&
b
[
r
.
f
], &b[r.
cd
]); }

2161 
le
 
	gam_le_ad
::
am_le_ad
(
Sm
 &
rm
, *
fixed_bufr
,

2162 
size_t
 
fixed_bufr_size
)

2163 : 
rm_
(
rm
), 
fixed_bufr_
(
fixed_bufr
),

2164 
fixed_bufr_size_
(
fixed_bufr_size
) {}

2166 
le
 cڡ *
	gam_le_ad
::
r
() const {

2167 i(
glowab_bufr_
.
emy
()) {

2168  
fixed_bufr_
;

2170  
	gglowab_bufr_
.
da
();

2174 
le
 
size_t
 
	gam_le_ad
::
size
() const {

2175 i(
glowab_bufr_
.
emy
()) {

2176  
fixed_bufr_ud_size_
;

2178  
	gglowab_bufr_
.
size
();

2182 
le
 
bo
 
	gam_le_ad
::
d_wh_lf
() const {

2183 aut
d
 = 
r
(+ 
size
();

2184  
size
(>2 && 
d
[-2] == '\r' &&nd[-1] == '\n';

2187 
le
 
bo
 
	gam_le_ad
::
gle
() {

2188 
fixed_bufr_ud_size_
 = 0;

2189 
	gglowab_bufr_
.
r
();

2191 
size_t
 
	gi
 = 0;; i++) {

2192 
	gby
;

2193 aut
	gn
 = 
rm_
.
ad
(&
by
, 1);

2195 i(
	gn
 < 0) {

2196  
	gl
;

2197 } i(
	gn
 == 0) {

2198 i(
i
 == 0) {

2199  
l
;

2205 
nd
(
by
);

2207 i(
	gby
 == '\n') { ; }

2210  
	gue
;

2213 
le
 
	gam_le_ad
::
nd
(
c
) {

2214 i(
fixed_bufr_ud_size_
 < 
fixed_bufr_size_
 - 1) {

2215 
fixed_bufr_
[
fixed_bufr_ud_size_
++] = 
c
;

2216 
	gfixed_bufr_
[
fixed_bufr_ud_size_
] = '\0';

2218 i(
	gglowab_bufr_
.
emy
()) {

2219 
as
(
fixed_bufr_
[
fixed_bufr_ud_size_
] == '\0');

2220 
	gglowab_bufr_
.
assign
(
fixed_bufr_
, 
fixed_bufr_ud_size_
);

2222 
	gglowab_bufr_
 +
c
;

2226 
le
 
o_sock
(
sock_t
 
sock
) {

2227 #ifde
_WIN32


2228  
osock
(
sock
);

2230  
o
(
sock
);

2234 
	gme
 <
tyme
 
	gT
> 
le
 
ssize_t
 
hd_EINTR
(
T
 

) {

2235 
ssize_t
 
	gs
 = 
l
;

2236 
	gue
) {

2237 
	gs
 = 

();

2238 i(
	gs
 < 0 && 
	go
 =
EINTR
) { ; }

2241  
	gs
;

2244 
le
 
ssize_t
 
ad_sock
(
sock_t
 
sock
, *
r
, 
size_t
 
size
, 
ags
) {

2245  
hd_EINTR
([&]() {

2246  
cv
(
sock
,

2247 #ifde
_WIN32


2248 
ic_
<*>(
r
), stic_<>(
size
),

2250 
r
, 
size
,

2252 
ags
);

2256 
le
 
ssize_t
 
nd_sock
(
sock_t
 
sock
, cڡ *
r
, 
size_t
 
size
,

2257 
ags
) {

2258  
hd_EINTR
([&]() {

2259  
nd
(
sock
,

2260 #ifde
_WIN32


2261 
ic_
<cڡ *>(
r
), stic_<>(
size
),

2263 
r
, 
size
,

2265 
ags
);

2269 
le
 
ssize_t
 
_ad
(
sock_t
 
sock
, 
time_t
 
c
,ime_
uc
) {

2270 #ifde
CPPHTTPLIB_USE_POLL


2271 
plfd
 
	gpfd_ad
;

2272 
	gpfd_ad
.
	gfd
 = 
sock
;

2273 
	gpfd_ad
.
	gevts
 = 
POLLIN
;

2275 aut
	gtimeout
 = 
ic_
<>(
c
 * 1000 + 
uc
 / 1000);

2277  
hd_EINTR
([&]({  
pl
(&
pfd_ad
, 1, 
timeout
); });

2279 #ide
_WIN32


2280 i(
	gsock
 >
FD_SETSIZE
) {  1; }

2283 
fd_t
 
	gfds
;

2284 
FD_ZERO
(&
fds
);

2285 
FD_SET
(
sock
, &
fds
);

2287 
timev
 
	gtv
;

2288 
	gtv
.
	gtv_c
 = 
ic_
<>(
c
);

2289 
	gtv
.
	gtv_uc
 = 
ic_
<
dety
(
tv
.
tv_uc
)>(
uc
);

2291  
hd_EINTR
([&]() {

2292  

(
ic_
<>(
sock
 + 1), &
fds
, 
nuαr
,uαr, &
tv
);

2297 
le
 
ssize_t
 
_wre
(
sock_t
 
sock
, 
time_t
 
c
,ime_
uc
) {

2298 #ifde
CPPHTTPLIB_USE_POLL


2299 
plfd
 
	gpfd_ad
;

2300 
	gpfd_ad
.
	gfd
 = 
sock
;

2301 
	gpfd_ad
.
	gevts
 = 
POLLOUT
;

2303 aut
	gtimeout
 = 
ic_
<>(
c
 * 1000 + 
uc
 / 1000);

2305  
hd_EINTR
([&]({  
pl
(&
pfd_ad
, 1, 
timeout
); });

2307 #ide
_WIN32


2308 i(
	gsock
 >
FD_SETSIZE
) {  1; }

2311 
fd_t
 
	gfds
;

2312 
FD_ZERO
(&
fds
);

2313 
FD_SET
(
sock
, &
fds
);

2315 
timev
 
	gtv
;

2316 
	gtv
.
	gtv_c
 = 
ic_
<>(
c
);

2317 
	gtv
.
	gtv_uc
 = 
ic_
<
dety
(
tv
.
tv_uc
)>(
uc
);

2319  
hd_EINTR
([&]() {

2320  

(
ic_
<>(
sock
 + 1), 
nuαr
, &
fds
,uαr, &
tv
);

2325 
le
 
E
 
wa_u_sock_is_ady
(
sock_t
 
sock
, 
time_t
 
c
,

2326 
time_t
 
uc
) {

2327 #ifde
CPPHTTPLIB_USE_POLL


2328 
plfd
 
	gpfd_ad
;

2329 
	gpfd_ad
.
	gfd
 = 
sock
;

2330 
	gpfd_ad
.
	gevts
 = 
POLLIN
 | 
POLLOUT
;

2332 aut
	gtimeout
 = 
ic_
<>(
c
 * 1000 + 
uc
 / 1000);

2334 aut
	gpl_s
 = 
hd_EINTR
([&]({  
pl
(&
pfd_ad
, 1, 
timeout
); });

2336 i(
	gpl_s
 =0{  
E
::
CiTimeout
; }

2338 i(
	gpl_s
 > 0 && 
	gpfd_ad
.
	gvts
 & (
	gPOLLIN
 | 
	gPOLLOUT
)) {

2339 
	gr
 = 0;

2340 
sockn_t
 
	gn
 = (
r
);

2341 aut
	gs
 = 
gsockt
(
sock
, 
SOL_SOCKET
, 
SO_ERROR
,

2342 
t_
<*>(&
r
), &
n
);

2343 aut
	gsucssful
 = 
s
 >0 && !
r
;

2344  
	gsucssful
 ? 
	gE
::
Sucss
 : 
E
::
Ci
;

2347  
	gE
::
Ci
;

2349 #ide
_WIN32


2350 i(
	gsock
 >
FD_SETSIZE
{  
E
::
Ci
; }

2353 
fd_t
 
	gfd
;

2354 
FD_ZERO
(&
fd
);

2355 
FD_SET
(
sock
, &
fd
);

2357 aut
	gfdsw
 = 
fd
;

2358 aut
	gfd
 = 
fd
;

2360 
timev
 
	gtv
;

2361 
	gtv
.
	gtv_c
 = 
ic_
<>(
c
);

2362 
	gtv
.
	gtv_uc
 = 
ic_
<
dety
(
tv
.
tv_uc
)>(
uc
);

2364 aut
	gt
 = 
hd_EINTR
([&]() {

2365  

(
ic_
<>(
sock
 + 1), &
fd
, &
fdsw
, &
fd
, &
tv
);

2368 i(
	gt
 =0{  
E
::
CiTimeout
; }

2370 i(
	gt
 > 0 && (
FD_ISSET
(
sock
, &
fd
|| FD_ISSET(sock, &
fdsw
))) {

2371 
	gr
 = 0;

2372 
sockn_t
 
	gn
 = (
r
);

2373 aut
	gs
 = 
gsockt
(
sock
, 
SOL_SOCKET
, 
SO_ERROR
,

2374 
t_
<*>(&
r
), &
n
);

2375 aut
	gsucssful
 = 
s
 >0 && !
r
;

2376  
	gsucssful
 ? 
	gE
::
Sucss
 : 
E
::
Ci
;

2378  
	gE
::
Ci
;

2382 
le
 
bo
 
is_sock_ive
(
sock_t
 
sock
) {

2383 cڡut
	gv
 = 
da
::
_ad
(
sock
, 0, 0);

2384 i(
	gv
 == 0) {

2385  
ue
;

2386 } i(
	gv
 < 0 && 
	go
 =
EBADF
) {

2387  
l
;

2389 
	gbuf
[1];

2390  
	gda
::
ad_sock
(
sock
, &
buf
[0], (buf), 
MSG_PEEK
) > 0;

2393 as
	cSockSm
 : 
public
 
Sm
 {

2394 
public
:

2395 
SockSm
(
sock_t
 
sock
, 
time_t
 
ad_timeout_c
,ime_
ad_timeout_uc
,

2396 
time_t
 
wre_timeout_c
,ime_
wre_timeout_uc
);

2397 ~
SockSm
(
	govride
;

2399 
bo
 
is_adab
(cڡ 
	govride
;

2400 
bo
 
is_wrab
(cڡ 
	govride
;

2401 
ssize_t
 
ad
(*
r
, 
size_t
 
size

	govride
;

2402 
ssize_t
 
wre
(cڡ *
r
, 
size_t
 
size

	govride
;

2403 
g_me__d_pt
(
d
::
rg
 &

, &
pt
cڡ 
	govride
;

2404 
sock_t
 
sock
(cڡ 
	govride
;

2406 
	give
:

2407 
sock_t
 
sock_
;

2408 
time_t
 
	gad_timeout_c_
;

2409 
time_t
 
	gad_timeout_uc_
;

2410 
time_t
 
	gwre_timeout_c_
;

2411 
time_t
 
	gwre_timeout_uc_
;

2413 
	gd
::
ve
<> 
ad_buff_
;

2414 
size_t
 
	gad_buff_off_
 = 0;

2415 
size_t
 
	gad_buff_cڋ_size_
 = 0;

2417 cڡ 
size_t
 
	gad_buff_size_
 = 1024 * 4;

2420 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


2421 as
	cSSLSockSm
 : 
public
 
Sm
 {

2422 
public
:

2423 
SSLSockSm
(
sock_t
 
sock
, 
SSL
 *
s
, 
time_t
 
ad_timeout_c
,

2424 
time_t
 
ad_timeout_uc
,ime_
wre_timeout_c
,

2425 
time_t
 
wre_timeout_uc
);

2426 ~
SSLSockSm
(
	govride
;

2428 
bo
 
is_adab
(cڡ 
	govride
;

2429 
bo
 
is_wrab
(cڡ 
	govride
;

2430 
ssize_t
 
ad
(*
r
, 
size_t
 
size

	govride
;

2431 
ssize_t
 
wre
(cڡ *
r
, 
size_t
 
size

	govride
;

2432 
g_me__d_pt
(
d
::
rg
 &

, &
pt
cڡ 
	govride
;

2433 
sock_t
 
sock
(cڡ 
	govride
;

2435 
	give
:

2436 
sock_t
 
sock_
;

2437 
SSL
 *
	gs_
;

2438 
time_t
 
	gad_timeout_c_
;

2439 
time_t
 
	gad_timeout_uc_
;

2440 
time_t
 
	gwre_timeout_c_
;

2441 
time_t
 
	gwre_timeout_uc_
;

2445 
le
 
bo
 
kp_ive
(
sock_t
 
sock
, 
time_t
 
kp_ive_timeout_c
) {

2446 
usg
 
mea
 
	gd
::
chro
;

2447 aut
	gt
 = 
dy_ock
::
now
();

2448 
	gue
) {

2449 aut
	gv
 = 
_ad
(
sock
, 0, 10000);

2450 i(
	gv
 < 0) {

2451  
	gl
;

2452 } i(
	gv
 == 0) {

2453 aut
cut
 = 
dy_ock
::
now
();

2454 aut
	gduti
 = 
duti_
<
mlicds
>(
cut
 - 
t
);

2455 aut
	gtimeout
 = 
kp_ive_timeout_c
 * 1000;

2456 i(
	gduti
.
cou
(> 
	gtimeout
{  
	gl
; }

2457 
	gd
::
this_thad
::
p_f
(
d
::
chro
::
mlicds
(1));

2459  
	gue
;

2464 
	gme
 <
tyme
 
	gT
>

2465 
le
 
bo


2466 
oss_rv_sock_ce
(cڡ 
d
::
omic
<
sock_t
> &
svr_sock
, sock_
sock
,

2467 
size_t
 
kp_ive_max_cou
,

2468 
time_t
 
kp_ive_timeout_c
, 
T
 
back
) {

2469 
as
(
kp_ive_max_cou
 > 0);

2470 aut
	gt
 = 
l
;

2471 aut
	gcou
 = 
kp_ive_max_cou
;

2472 
	gsvr_sock
 !
INVALID_SOCKET
 && 
cou
 > 0 &&

2473 
kp_ive
(
sock
, 
kp_ive_timeout_c
)) {

2474 aut
	go_ci
 = 
cou
 == 1;

2475 aut
	gci_od
 = 
l
;

2476 
	gt
 = 
back
(
o_ci
, 
ci_od
);

2477 i(!
	gt
 || 
	gci_od
) { ; }

2478 
	gcou
--;

2480  
	gt
;

2483 
	gme
 <
tyme
 
	gT
>

2484 
le
 
bo


2485 
oss_rv_sock
(cڡ 
d
::
omic
<
sock_t
> &
svr_sock
, sock_
sock
,

2486 
size_t
 
kp_ive_max_cou
,

2487 
time_t
 
kp_ive_timeout_c
,ime_
ad_timeout_c
,

2488 
time_t
 
ad_timeout_uc
,ime_
wre_timeout_c
,

2489 
time_t
 
wre_timeout_uc
, 
T
 
back
) {

2490  
oss_rv_sock_ce
(

2491 
svr_sock
, 
sock
, 
kp_ive_max_cou
, 
kp_ive_timeout_c
,

2492 [&](
bo
 
o_ci
, bo &
ci_od
) {

2493 
SockSm
 
rm
(
sock
, 
ad_timeout_c
, 
ad_timeout_uc
,

2494 
wre_timeout_c
, 
wre_timeout_uc
);

2495  
back
(
rm
, 
o_ci
, 
ci_od
);

2499 
le
 
bo
 
oss__sock
(
sock_t
 
sock
, 
time_t
 
ad_timeout_c
,

2500 
time_t
 
ad_timeout_uc
,

2501 
time_t
 
wre_timeout_c
,

2502 
time_t
 
wre_timeout_uc
,

2503 
d
::
funi
<
bo
(
Sm
 &)> 
back
) {

2504 
SockSm
 
rm
(
sock
, 
ad_timeout_c
, 
ad_timeout_uc
,

2505 
wre_timeout_c
, 
wre_timeout_uc
);

2506  
back
(
rm
);

2509 
le
 
shutdown_sock
(
sock_t
 
sock
) {

2510 #ifde
_WIN32


2511  
shutdown
(
sock
, 
SD_BOTH
);

2513  
shutdown
(
sock
, 
SHUT_RDWR
);

2517 
	gme
 <
tyme
 
	gBdOrC
>

2518 
sock_t
 
_sock
(cڡ *
ho
, cڡ *

, 
pt
,

2519 
addss_my
, 
sock_ags
, 
bo
 
t_noday
,

2520 
SockOis
 
sock_tis
,

2521 
BdOrC
 
bd__c
) {

2523 cڡ *
	gnode
 = 
nuαr
;

2524 
addrfo
 
	ghts
;

2525 
addrfo
 *
	gsu
;

2527 
memt
(&
hts
, 0, (
addrfo
));

2528 
	ghts
.
	gai_sockty
 = 
SOCK_STREAM
;

2529 
	ghts
.
	gai_oc
 = 0;

2531 i(
	g
[0] != '\0') {

2532 
node
 = 

;

2534 
	ghts
.
	gai_my
 = 
AF_UNSPEC
;

2535 
	ghts
.
	gai_ags
 = 
AI_NUMERICHOST
;

2537 
	gnode
 = 
ho
;

2538 
	ghts
.
	gai_my
 = 
addss_my
;

2539 
	ghts
.
	gai_ags
 = 
sock_ags
;

2542 aut
	grvi
 = 
d
::
to_rg
(
pt
);

2544 i(
gaddrfo
(
node
, 
rvi
.
c_r
(), &
hts
, &
su
)) {

2545 #i
defed
 
__lux__
 && !defed 
__ANDROID__


2546 
s_
();

2548  
	gINVALID_SOCKET
;

2551 aut
	g
 = 
su
;p;

->
ai_xt
) {

2553 #ifde
_WIN32


2554 aut
sock
 =

2555 
WSASockW
(

->
ai_my
,p->
ai_sockty
,p->
ai_oc
, 
nuαr
, 0,

2556 
WSA_FLAG_NO_HANDLE_INHERIT
 | 
WSA_FLAG_OVERLAPPED
);

2571 i(
	gsock
 =
INVALID_SOCKET
) {

2572 
sock
 = 
sock
(

->
ai_my
,p->
ai_sockty
,p->
ai_oc
);

2575 aut
	gsock
 = 
sock
(

->
ai_my
,p->
ai_sockty
,p->
ai_oc
);

2577 i(
	gsock
 =
INVALID_SOCKET
) { ; }

2579 #ide
_WIN32


2580 i(
f
(
sock
, 
F_SETFD
, 
FD_CLOEXEC
) == -1) { ; }

2583 i(
	gt_noday
) {

2584 
	gyes
 = 1;

2585 
tsockt
(
sock
, 
IPPROTO_TCP
, 
TCP_NODELAY
, 
t_
<*>(&
yes
),

2586 (
yes
));

2589 i(
	gsock_tis
{ 
sock_tis
(
sock
); }

2591 i(
	g
->
	gai_my
 =
AF_INET6
) {

2592 
no
 = 0;

2593 
tsockt
(
sock
, 
IPPROTO_IPV6
, 
IPV6_V6ONLY
, 
t_
<*>(&
no
),

2594 (
no
));

2598 i(
bd__c
(
sock
, *

)) {

2599 
addrfo
(
su
);

2600  
	gsock
;

2603 
o_sock
(
sock
);

2606 
addrfo
(
su
);

2607  
	gINVALID_SOCKET
;

2610 
le
 
t_nblockg
(
sock_t
 
sock
, 
bo
 
nblockg
) {

2611 #ifde
_WIN32


2612 aut
	gags
 = 
nblockg
 ? 1UL : 0UL;

2613 
iolsock
(
sock
, 
FIONBIO
, &
ags
);

2615 aut
	gags
 = 
f
(
sock
, 
F_GETFL
, 0);

2616 
f
(
sock
, 
F_SETFL
,

2617 
nblockg
 ? (
ags
 | 
O_NONBLOCK
) : (flags & (~O_NONBLOCK)));

2621 
le
 
bo
 
is_ci_r
() {

2622 #ifde
_WIN32


2623  
WSAGLaE
(!
WSAEWOULDBLOCK
;

2625  
	go
 !
EINPROGRESS
;

2629 
le
 
bo
 
bd__addss
(
sock_t
 
sock
, cڡ *
ho
) {

2630 
addrfo
 
	ghts
;

2631 
addrfo
 *
	gsu
;

2633 
memt
(&
hts
, 0, (
addrfo
));

2634 
	ghts
.
	gai_my
 = 
AF_UNSPEC
;

2635 
	ghts
.
	gai_sockty
 = 
SOCK_STREAM
;

2636 
	ghts
.
	gai_oc
 = 0;

2638 i(
gaddrfo
(
ho
, "0", &
hts
, &
su
){  
	gl
; }

2640 aut
	gt
 = 
l
;

2641 aut
	g
 = 
su
;p;

->
ai_xt
) {

2642 cڡut&
ai
 = *

;

2643 i(!::
bd
(
sock
, 
ai
.
ai_addr
, 
ic_
<
sockn_t
>i.
ai_add
))) {

2644 
	gt
 = 
ue
;

2649 
addrfo
(
su
);

2650  
	gt
;

2653 #i!
defed
 
_WIN32
 && !defed 
ANDROID


2654 
	#USE_IF2IP


	)

2657 #ifde
USE_IF2IP


2658 
le
 
	gd
::
rg
 
if2
(
addss_my
, cڡ 
d
::rg &
i
) {

2659 
iddrs
 *
ip
;

2660 
giddrs
(&
ip
);

2661 
	gd
::
rg
 
addr_ndide
;

2662 aut
	gi
 = 
ip
; i; i = 
i
->
i_xt
) {

2663 i(
i
->
i_addr
 && 
i
 =i->
i_me
 &&

2664 (
AF_UNSPEC
 =
addss_my
 ||

2665 
i
->
i_addr
->
_my
 =
addss_my
)) {

2666 i(
i
->
i_addr
->
_my
 =
AF_INET
) {

2667 aut

 = 
t_
<
sockaddr_
 *>(
i
->
i_addr
);

2668 
	gbuf
[
INET_ADDRSTRLEN
];

2669 i(
_
(
AF_INET
, &

->
s_addr
, 
buf
, 
INET_ADDRSTRLEN
)) {

2670 
iddrs
(
ip
);

2671  
	gd
::
rg
(
buf
, 
INET_ADDRSTRLEN
);

2673 } i(
	gi
->
	gi_addr
->
	g_my
 =
AF_INET6
) {

2674 aut

 = 
t_
<
sockaddr_6
 *>(
i
->
i_addr
);

2675 i(!
IN6_IS_ADDR_LINKLOCAL
(&

->
s6_addr
)) {

2676 
	gbuf
[
INET6_ADDRSTRLEN
] = {};

2677 i(
_
(
AF_INET6
, &

->
s6_addr
, 
buf
, 
INET6_ADDRSTRLEN
)) {

2679 aut
	gs6_addr_hd
 = 

->
s6_addr
.
s6_addr
[0];

2680 i(
	gs6_addr_hd
 =0xf|| 
s6_addr_hd
 == 0xfd) {

2681 
addr_ndide
 = 
d
::
rg
(
buf
, 
INET6_ADDRSTRLEN
);

2683 
iddrs
(
ip
);

2684  
	gd
::
rg
(
buf
, 
INET6_ADDRSTRLEN
);

2691 
iddrs
(
ip
);

2692  
	gaddr_ndide
;

2696 
le
 
sock_t
 
__sock
(

2697 cڡ *
ho
, cڡ *

, 
pt
, 
addss_my
,

2698 
bo
 
t_noday
, 
SockOis
 
sock_tis
,

2699 
time_t
 
ci_timeout_c
,ime_
ci_timeout_uc
,

2700 
time_t
 
ad_timeout_c
,ime_
ad_timeout_uc
,ime_
wre_timeout_c
,

2701 
time_t
 
wre_timeout_uc
, cڡ 
d
::
rg
 &
tf
, 
E
 &
r
) {

2702 aut
	gsock
 = 
_sock
(

2703 
ho
, 

, 
pt
, 
addss_my
, 0, 
t_noday
, 
d
::
move
(
sock_tis
),

2704 [&](
sock_t
 
sock2
, 
addrfo
 &
ai
-> 
bo
 {

2705 i(!
tf
.
emy
()) {

2706 #ifde
USE_IF2IP


2707 aut

 = 
if2
(
addss_my
, 
tf
);

2708 i(

.
emy
(){ i
tf
; }

2709 i(!
bd__addss
(
sock2
, 

.
c_r
())) {

2710 
r
 = 
E
::
BdIPAddss
;

2711  
l
;

2716 
t_nblockg
(
sock2
, 
ue
);

2718 aut
t
 =

2719 ::
c
(
sock2
, 
ai
.
ai_addr
, 
ic_
<
sockn_t
>i.
ai_add
));

2721 i(
t
 < 0) {

2722 i(
is_ci_r
()) {

2723 
r
 = 
E
::
Ci
;

2724  
l
;

2726 
r
 = 
wa_u_sock_is_ady
(
sock2
, 
ci_timeout_c
,

2727 
ci_timeout_uc
);

2728 i(
r
 !
E
::
Sucss
{  
l
; }

2731 
t_nblockg
(
sock2
, 
l
);

2734 #ifde
_WIN32


2735 aut
timeout
 = 
ic_
<
ut32_t
>(
ad_timeout_c
 * 1000 +

2736 
ad_timeout_uc
 / 1000);

2737 
tsockt
(
sock2
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, (*)&
timeout
,

2738 (
timeout
));

2740 
timev
 
tv
;

2741 
tv
.
tv_c
 = 
ic_
<>(
ad_timeout_c
);

2742 
tv
.
tv_uc
 = 
ic_
<
dety
v.tv_uc)>(
ad_timeout_uc
);

2743 
tsockt
(
sock2
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, (*)&
tv
, (tv));

2748 #ifde
_WIN32


2749 aut
timeout
 = 
ic_
<
ut32_t
>(
wre_timeout_c
 * 1000 +

2750 
wre_timeout_uc
 / 1000);

2751 
tsockt
(
sock2
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, (*)&
timeout
,

2752 (
timeout
));

2754 
timev
 
tv
;

2755 
tv
.
tv_c
 = 
ic_
<>(
wre_timeout_c
);

2756 
tv
.
tv_uc
 = 
ic_
<
dety
v.tv_uc)>(
wre_timeout_uc
);

2757 
tsockt
(
sock2
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, (*)&
tv
, (tv));

2761 
r
 = 
E
::
Sucss
;

2762  
ue
;

2765 i(
	gsock
 !
INVALID_SOCKET
) {

2766 
r
 = 
E
::
Sucss
;

2768 i(
	gr
 =
E
::
Sucss
{ 
r
 = E::
Ci
; }

2771  
	gsock
;

2774 
le
 
bo
 
g_me__d_pt
(cڡ 
sockaddr_age
 &
addr
,

2775 
sockn_t
 
addr_n
, 
d
::
rg
 &

,

2776 &
pt
) {

2777 i(
	gaddr
.
	gss_my
 =
AF_INET
) {

2778 
pt
 = 
ohs
(
t_
<cڡ 
sockaddr_
 *>(&
addr
)->
s_pt
);

2779 } i(
	gaddr
.
	gss_my
 =
AF_INET6
) {

2780 
pt
 =

2781 
ohs
(
t_
<cڡ 
sockaddr_6
 *>(&
addr
)->
s6_pt
);

2783  
	gl
;

2786 
	gd
::
y
<, 
	gNI_MAXHOST
> 
	gr
{};

2787 i(
gmefo
(
t_
<cڡ 
sockaddr
 *>(&
addr
), 
addr_n
,

2788 
r
.
da
(), 
ic_
<
sockn_t
>(r.
size
()), 
nuαr
,

2789 0, 
NI_NUMERICHOST
)) {

2790  
	gl
;

2793 
	g
 = 
r
.
da
();

2794  
	gue
;

2797 
le
 
g_me__d_pt
(
sock_t
 
sock
, 
d
::
rg
 &

, &
pt
) {

2798 
sockaddr_age
 
	gaddr
;

2799 
sockn_t
 
	gaddr_n
 = (
addr
);

2801 i(!
gme
(
sock
, 
t_
<
sockaddr
 *>(&
addr
),

2802 &
addr_n
)) {

2803 
g_me__d_pt
(
addr
, 
addr_n
, 

, 
pt
);

2807 
le
 
cڡex
 
r2g_ce
(cڡ *
s
, 
size_t
 
l
,

2808 
h
) {

2809  (
	gl
 =0? 
h


2810 : 
r2g_ce
(
s
 + 1, 
l
 - 1,

2811 (
h
 * 33^ 
ic_
<>(*
s
));

2814 
le
 
r2g
(cڡ 
d
::
rg
 &
s
) {

2815  
r2g_ce
(
s
.
da
(), s.
size
(), 0);

2818 
mea
 
	gudl
 {

2820 
le
 
cڡex
 
	gݔ
"" 
_t
(cڡ *
s
, 
size_t
 
l
) {

2821  
r2g_ce
(
s
, 
l
, 0);

2826 
le
 const *

2827 
fd_cڋ_ty
(cڡ 
d
::
rg
 &
th
,

2828 cڡ 
d
::
m
<d::
rg
, std::rg> &
ur_da
) {

2829 aut
ext
 = 
fe_exnsi
(
th
);

2831 aut
	g
 = 
ur_da
.
fd
(
ext
);

2832 i(
	g
 !
ur_da
.
d
(){  

->
cd
.
c_r
(); }

2834 
usg
 
	gudl
::
ݔ
""
_t
;

2836 
r2g
(
ext
)) {

2837 :  
nuαr
;

2838 "css"
	g_t
:  "text/css";

2839 "csv"
	g_t
:  "text/csv";

2840 "htm"
	g_t
:

2841 "html"
_t
:  "text/html";

2842 "js"
	g_t
:

2843 "mjs"
_t
:  "text/javascript";

2844 "txt"
	g_t
:  "text/plain";

2845 "v"
	g_t
:  "text/vtt";

2847 "ng"
	g_t
:  "image/apng";

2848 "avif"
	g_t
:  "image/avif";

2849 "bmp"
	g_t
:  "image/bmp";

2850 "gif"
	g_t
:  "image/gif";

2851 "g"
	g_t
:  "image/png";

2852 "svg"
	g_t
:  "image/svg+xml";

2853 "webp"
	g_t
:  "image/webp";

2854 "ico"
	g_t
:  "image/x-icon";

2855 "tif"
	g_t
:  "image/tiff";

2856 "tiff"
	g_t
:  "image/tiff";

2857 "jpg"
	g_t
:

2858 "jg"
_t
:  "image/jpeg";

2860 "mp4"
	g_t
:  "video/mp4";

2861 "mg"
	g_t
:  "video/mpeg";

2862 "webm"
	g_t
:  "video/webm";

2864 "mp3"
	g_t
:  "audio/mp3";

2865 "mpga"
	g_t
:  "audio/mpeg";

2866 "weba"
	g_t
:  "audio/webm";

2867 "wav"
	g_t
:  "audio/wave";

2869 "f"
	g_t
:  "font/otf";

2870 "f"
	g_t
:  "font/ttf";

2871 "woff"
	g_t
:  "font/woff";

2872 "woff2"
	g_t
:  "font/woff2";

2874 "7z"
	g_t
:  "application/x-7z-compressed";

2875 "om"
	g_t
:  "application/atom+xml";

2876 "pdf"
	g_t
:  "application/pdf";

2877 "js"
	g_t
:  "application/json";

2878 "rss"
	g_t
:  "application/rss+xml";

2879 "r"
	g_t
:  "application/x-tar";

2880 "xht"
	g_t
:

2881 "xhtml"
_t
:  "application/xhtml+xml";

2882 "xt"
	g_t
:  "application/xslt+xml";

2883 "xml"
	g_t
:  "application/xml";

2884 "gz"
	g_t
:  "application/gzip";

2885 "z"
	g_t
:  "application/zip";

2886 "wasm"
	g_t
:  "application/wasm";

2890 
le
 cڡ *
us_mesge
(
us
) {

2891 
	gus
) {

2960 
le
 
bo
 
n_comess_cڋ_ty
(cڡ 
d
::
rg
 &
cڋ_ty
) {

2961 
usg
 
udl
::
ݔ
""
_t
;

2963 aut
	gg
 = 
r2g
(
cڋ_ty
);

2965 
	gg
) {

2966 "image/svg+xml"
	g_t
:

2967 "iti/javast"
_t
:

2968 "iti/js"
_t
:

2969 "iti/xml"
_t
:

2970 "iti/obuf"
_t
:

2971 "iti/xhtml+xml"
_t
:  
ue
;

2974  !
cڋ_ty
.
rfd
("xt/", 0&& 
	gg
 !"xt/evt-am"
_t
;

2978 
le
 
EncodgTy
 
codg_ty
(cڡ 
Reque
 &
q
, cڡ 
Reڣ
 &
s
) {

2979 aut
	gt
 =

2980 
da
::
n_comess_cڋ_ty
(
s
.
g_hd_vue
("Content-Type"));

2981 i(!
	gt
{  
	gEncodgTy
::
Ne
; }

2983 cڡut&
	gs
 = 
q
.
g_hd_vue
("Accept-Encoding");

2984 ()(
	gs
);

2986 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


2988 
	gt
 = 
s
.
fd
("br"!
d
::
rg
::
os
;

2989 i(
	gt
{  
	gEncodgTy
::
Brli
; }

2992 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


2994 
	gt
 = 
s
.
fd
("gz"!
d
::
rg
::
os
;

2995 i(
	gt
{  
	gEncodgTy
::
Gz
; }

2998  
	gEncodgTy
::
Ne
;

3001 
le
 
bo
 
	gnocomess
::
comess
(cڡ *
da
, 
size_t
 
da_ngth
,

3002 
bo
 , 
Clback
 
back
) {

3003 i(!
	gda_ngth
{  
	gue
; }

3004  
back
(
da
, 
da_ngth
);

3007 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


3008 
le
 
	ggz_comess
::
gz_comess
() {

3009 
d
::
memt
(&
rm_
, 0, (strm_));

3010 
	grm_
.
	gzloc
 = 
Z_NULL
;

3011 
	grm_
.
	gz
 = 
Z_NULL
;

3012 
	grm_
.
	gaque
 = 
Z_NULL
;

3014 
	gis_vid_
 = 
deeIn2
(&
rm_
, 
Z_DEFAULT_COMPRESSION
, 
Z_DEFLATED
, 31, 8,

3015 
Z_DEFAULT_STRATEGY
=
Z_OK
;

3018 
le
 
	ggz_comess
::~
gz_comess
({ 
deeEnd
(&
rm_
); }

3020 
le
 
bo
 
	ggz_comess
::
comess
(cڡ *
da
, 
size_t
 
da_ngth
,

3021 
bo
 
ϡ
, 
Clback
 
back
) {

3022 
as
(
is_vid_
);

3025 
cڡex
 
size_t
 
	gmax_ava_
 =

3026 (
d
::
numic_lims
<
dety
(
rm_
.
ava_
)>::
max
)();

3028 
	grm_
.
	gava_
 = 
ic_
<
dety
(
rm_
.
ava_
)>(

3029 (
d
::
m
)(
da_ngth
, 
	gmax_ava_
));

3030 
	grm_
.
	gxt_
 = 
cڡ_
<
Byf
 *>(
t_
<cڡ By*>(
da
));

3032 
	gda_ngth
 -
rm_
.
ava_
;

3033 
	gda
 +
rm_
.
ava_
;

3035 aut
	gush
 = (
ϡ
 && 
da_ngth
 =0? 
Z_FINISH
 : 
Z_NO_FLUSH
;

3036 
	gt
 = 
Z_OK
;

3038 
	gd
::
y
<, 
	gCPPHTTPLIB_COMPRESSION_BUFSIZ
> 
	gbuff
{};

3040 
	grm_
.
	gava_out
 = 
ic_
<
uI
>(
buff
.
size
());

3041 
	grm_
.
	gxt_out
 = 
t_
<
Byf
 *>(
buff
.
da
());

3043 
	gt
 = 
dee
(&
rm_
, 
ush
);

3044 i(
	gt
 =
Z_STREAM_ERROR
{  
l
; }

3046 i(!
back
(
buff
.
da
(), buff.
size
(- 
rm_
.
ava_out
)) {

3047  
	gl
;

3049 } 
	grm_
.
	gava_out
 == 0);

3051 
as
((
ush
 =
Z_FINISH
 && 
t
 =
Z_STREAM_END
) ||

3052 (
ush
 =
Z_NO_FLUSH
 && 
t
 =
Z_OK
));

3053 
as
(
rm_
.
ava_
 == 0);

3054 } 
	gda_ngth
 > 0);

3056  
	gue
;

3059 
le
 
	ggz_decomess
::
gz_decomess
() {

3060 
d
::
memt
(&
rm_
, 0, (strm_));

3061 
	grm_
.
	gzloc
 = 
Z_NULL
;

3062 
	grm_
.
	gz
 = 
Z_NULL
;

3063 
	grm_
.
	gaque
 = 
Z_NULL
;

3069 
	gis_vid_
 = 
eIn2
(&
rm_
, 32 + 15=
Z_OK
;

3072 
le
 
	ggz_decomess
::~
gz_decomess
({ 
eEnd
(&
rm_
); }

3074 
le
 
bo
 
	ggz_decomess
::
is_vid
(cڡ {  
is_vid_
; }

3076 
le
 
bo
 
	ggz_decomess
::
decomess
(cڡ *
da
, 
size_t
 
da_ngth
,

3077 
Clback
 
back
) {

3078 
as
(
is_vid_
);

3080 
	gt
 = 
Z_OK
;

3083 
cڡex
 
size_t
 
	gmax_ava_
 =

3084 (
d
::
numic_lims
<
dety
(
rm_
.
ava_
)>::
max
)();

3086 
	grm_
.
	gava_
 = 
ic_
<
dety
(
rm_
.
ava_
)>(

3087 (
d
::
m
)(
da_ngth
, 
	gmax_ava_
));

3088 
	grm_
.
	gxt_
 = 
cڡ_
<
Byf
 *>(
t_
<cڡ By*>(
da
));

3090 
	gda_ngth
 -
rm_
.
ava_
;

3091 
	gda
 +
rm_
.
ava_
;

3093 
	gd
::
y
<, 
	gCPPHTTPLIB_COMPRESSION_BUFSIZ
> 
	gbuff
{};

3094 
	grm_
.
	gava_
 > 0) {

3095 
	grm_
.
	gava_out
 = 
ic_
<
uI
>(
buff
.
size
());

3096 
	grm_
.
	gxt_out
 = 
t_
<
Byf
 *>(
buff
.
da
());

3098 aut
	gev_ava_
 = 
rm_
.
ava_
;

3100 
	gt
 = 
e
(&
rm_
, 
Z_NO_FLUSH
);

3102 i(
	gev_ava_
 - 
	grm_
.
	gava_
 =0{  
l
; }

3104 
as
(
t
 !
Z_STREAM_ERROR
);

3105 
	gt
) {

3106 
	gZ_NEED_DICT
:

3107 
Z_DATA_ERROR
:

3108 
Z_MEM_ERROR
: 
eEnd
(&
rm_
);  
	gl
;

3111 i(!
back
(
buff
.
da
(), buff.
size
(- 
rm_
.
ava_out
)) {

3112  
	gl
;

3116 i(
	gt
 !
Z_OK
 && 
t
 !
Z_STREAM_END
 
l
;

3118 } 
	gda_ngth
 > 0);

3120  
	gue
;

3124 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


3125 
le
 
	gbrli_comess
::
brli_comess
() {

3126 
e_
 = 
BrliEncodCeIn
(
nuαr
,ullptr,ullptr);

3129 
le
 
	gbrli_comess
::~
brli_comess
() {

3130 
BrliEncodDeroyIn
(
e_
);

3133 
le
 
bo
 
	gbrli_comess
::
comess
(cڡ *
da
, 
size_t
 
da_ngth
,

3134 
bo
 
ϡ
, 
Clback
 
back
) {

3135 
	gd
::
y
<
ut8_t
, 
	gCPPHTTPLIB_COMPRESSION_BUFSIZ
> 
	gbuff
{};

3137 aut
	gݔi
 = 
ϡ
 ? 
BROTLI_OPERATION_FINISH
 : 
BROTLI_OPERATION_PROCESS
;

3138 aut
	gavaab_
 = 
da_ngth
;

3139 aut
	gxt_
 = 
t_
<cڡ 
ut8_t
 *>(
da
);

3142 i(
	gϡ
) {

3143 i(
BrliEncodIsFished
(
e_
)) { ; }

3145 i(!
	gavaab_
) { ; }

3148 aut
	gavaab_out
 = 
buff
.
size
();

3149 aut
	gxt_out
 = 
buff
.
da
();

3151 i(!
BrliEncodComessSm
(
e_
, 
ݔi
, &
avaab_
, &
xt_
,

3152 &
avaab_out
, &
xt_out
, 
nuαr
)) {

3153  
	gl
;

3156 aut
	gouut_bys
 = 
buff
.
size
(- 
avaab_out
;

3157 i(
	gouut_bys
) {

3158 
back
(
t_
<cڡ *>(
buff
.
da
()), 
ouut_bys
);

3162  
	gue
;

3165 
le
 
	gbrli_decomess
::
brli_decomess
() {

3166 
decod_s
 = 
BrliDecodCeIn
(0, 0, 0);

3167 
	gdecod_r
 = 
decod_s
 ? 
BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT


3168 : 
BROTLI_DECODER_RESULT_ERROR
;

3171 
le
 
	gbrli_decomess
::~
brli_decomess
() {

3172 i(
decod_s
{ 
BrliDecodDeroyIn
(decoder_s); }

3175 
le
 
bo
 
	gbrli_decomess
::
is_vid
(cڡ {  
decod_s
; }

3177 
le
 
bo
 
	gbrli_decomess
::
decomess
(cڡ *
da
,

3178 
size_t
 
da_ngth
,

3179 
Clback
 
back
) {

3180 i(
	gdecod_r
 =
BROTLI_DECODER_RESULT_SUCCESS
 ||

3181 
decod_r
 =
BROTLI_DECODER_RESULT_ERROR
) {

3185 cڡ 
ut8_t
 *
	gxt_
 = (cڡ ut8_*)
da
;

3186 
size_t
 
	gava_
 = 
da_ngth
;

3187 
size_t
 
	gtٮ_out
;

3189 
	gdecod_r
 = 
BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT
;

3191 
	gd
::
y
<, 
	gCPPHTTPLIB_COMPRESSION_BUFSIZ
> 
	gbuff
{};

3192 
	gdecod_r
 =
BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT
) {

3193 *
xt_out
 = 
buff
.
da
();

3194 
size_t
 
	gava_out
 = 
buff
.
size
();

3196 
	gdecod_r
 = 
BrliDecodDecomessSm
(

3197 
decod_s
, &
ava_
, &
xt_
, &
ava_out
,

3198 
t_
<
ut8_t
 **>(&
xt_out
), &
tٮ_out
);

3200 i(
	gdecod_r
 =
BROTLI_DECODER_RESULT_ERROR
{  
l
; }

3202 i(!
back
(
buff
.
da
(), buff.
size
(- 
ava_out
){  
	gl
; }

3205  
	gdecod_r
 =
BROTLI_DECODER_RESULT_SUCCESS
 ||

3206 
decod_r
 =
BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT
;

3210 
le
 
bo
 
has_hd
(cڡ 
Hds
 &
hds
, cڡ *
key
) {

3211  
	ghds
.
fd
(
key
!
hds
.
d
();

3214 
le
 cڡ *
g_hd_vue
(cڡ 
Hds
 &
hds
, cڡ *
key
,

3215 
size_t
 
id
, cڡ *
def
) {

3216 aut
	gg
 = 
hds
.
equ_nge
(
key
);

3217 aut
	g
 = 
g
.
f
;

3218 
	gd
::
adv
(

, 
ic_
<
ssize_t
>(
id
));

3219 i(
	g
 !
g
.
cd
{  

->cd.
c_r
(); }

3220  
	gdef
;

3223 
	gme
 <
tyme
 
	gT
>

3224 
le
 
bo
 
r_hd
(cڡ *
beg
, cڡ *
d
, 
T
 

) {

3226 
	gbeg
 < 
	gd
 && 
is_a__b
(
d
[-1])) {

3227 
	gd
--;

3230 aut
	gp
 = 
beg
;

3231 
	gp
 < 
	gd
 && *p != ':') {

3232 
p
++;

3235 i(
	gp
 =
d
{  
l
; }

3237 aut
	gkey_d
 = 
p
;

3239 i(*
	gp
++ !':'{  
l
; }

3241 
	gp
 < 
	gd
 && 
is_a__b
(*
p
)) {

3242 
	gp
++;

3245 i(
	gp
 < 
	gd
) {

3246 

(
d
::
rg
(
beg
, 
key_d
), 
decode_u
(d::rg(
p
, 
d
), 
l
));

3247  
	gue
;

3250  
	gl
;

3253 
le
 
bo
 
ad_hds
(
Sm
 &
rm
, 
Hds
 &
hds
) {

3254 cڡut
	gbufsiz
 = 2048;

3255 
	gbuf
[
bufsiz
];

3256 
am_le_ad
 
le_ad
(
rm
, 
buf
, 
bufsiz
);

3259 i(!
	gle_ad
.
gle
(){  
	gl
; }

3262 aut
	gle_rm_n
 = 2;

3263 i(
	gle_ad
.
d_wh_lf
()) {

3265 i(
	gle_ad
.
size
() == 2) { ; }

3266 #ifde
CPPHTTPLIB_ALLOW_LF_AS_LINE_TERMINATOR


3269 i(
	gle_ad
.
size
() == 1) { ; }

3270 
	gle_rm_n
 = 1;

3278 i(
	gle_ad
.
size
(> 
	gCPPHTTPLIB_HEADER_MAX_LENGTH
{  
	gl
; }

3281 aut
	gd
 = 
le_ad
.
r
(+e_ad.
size
(- 
le_rm_n
;

3283 
r_hd
(
le_ad
.
r
(), 
d
,

3284 [&](
d
::
rg
 &&
key
, std::rg &&
v
) {

3285 
hds
.
ema
(
d
::
move
(
key
), std::move(
v
));

3289  
	gue
;

3292 
le
 
bo
 
ad_cڋ_wh_ngth
(
Sm
 &
rm
, 
ut64_t
 
n
,

3293 
Progss
 
ogss
,

3294 
CڋReivWhProgss
 
out
) {

3295 
	gbuf
[
CPPHTTPLIB_RECV_BUFSIZ
];

3297 
ut64_t
 
	gr
 = 0;

3298 
	gr
 < 
	gn
) {

3299 aut
	gad_n
 = 
ic_
<
size_t
>(
n
 - 
r
);

3300 aut
	gn
 = 
rm
.
ad
(
buf
, (
d
::
m
)(
ad_n
, 
CPPHTTPLIB_RECV_BUFSIZ
));

3301 i(
	gn
 <0{  
l
; }

3303 i(!
out
(
buf
, 
ic_
<
size_t
>(
n
), 
r
, 
n
){  
	gl
; }

3304 
	gr
 +
ic_
<
ut64_t
>(
n
);

3306 i(
	gogss
) {

3307 i(!
ogss
(
r
, 
n
){  
	gl
; }

3311  
	gue
;

3314 
le
 
sk_cڋ_wh_ngth
(
Sm
 &
rm
, 
ut64_t
 
n
) {

3315 
	gbuf
[
CPPHTTPLIB_RECV_BUFSIZ
];

3316 
ut64_t
 
	gr
 = 0;

3317 
	gr
 < 
	gn
) {

3318 aut
	gad_n
 = 
ic_
<
size_t
>(
n
 - 
r
);

3319 aut
	gn
 = 
rm
.
ad
(
buf
, (
d
::
m
)(
ad_n
, 
CPPHTTPLIB_RECV_BUFSIZ
));

3320 i(
	gn
 <= 0) { ; }

3321 
	gr
 +
ic_
<
ut64_t
>(
n
);

3325 
le
 
bo
 
ad_cڋ_whout_ngth
(
Sm
 &
rm
,

3326 
CڋReivWhProgss
 
out
) {

3327 
	gbuf
[
CPPHTTPLIB_RECV_BUFSIZ
];

3328 
ut64_t
 
	gr
 = 0;

3330 aut
	gn
 = 
rm
.
ad
(
buf
, 
CPPHTTPLIB_RECV_BUFSIZ
);

3331 i(
	gn
 < 0) {

3332  
	gl
;

3333 } i(
	gn
 == 0) {

3334  
ue
;

3337 i(!
out
(
buf
, 
ic_
<
size_t
>(
n
), 
r
, 0){  
	gl
; }

3338 
	gr
 +
ic_
<
ut64_t
>(
n
);

3341  
	gue
;

3344 
le
 
bo
 
ad_cڋ_chunked
(
Sm
 &
rm
,

3345 
CڋReivWhProgss
 
out
) {

3346 cڡut
	gbufsiz
 = 16;

3347 
	gbuf
[
bufsiz
];

3349 
am_le_ad
 
le_ad
(
rm
, 
buf
, 
bufsiz
);

3351 i(!
	gle_ad
.
gle
(){  
	gl
; }

3353 
	gchunk_n
;

3354 
	gue
) {

3355 *
	gd_r
;

3357 
	gchunk_n
 = 
d
::
oul
(
le_ad
.
r
(), &
d_r
, 16);

3359 i(
	gd_r
 =
le_ad
.
r
(){  
l
; }

3360 i(
	gchunk_n
 =
ULONG_MAX
{  
l
; }

3362 i(
	gchunk_n
 == 0) { ; }

3364 i(!
ad_cڋ_wh_ngth
(
rm
, 
chunk_n
, 
nuαr
, 
out
)) {

3365  
	gl
;

3368 i(!
	gle_ad
.
gle
(){  
	gl
; }

3370 i(
rcmp
(
le_ad
.
r
(), "\r\n")) { ; }

3372 i(!
	gle_ad
.
gle
(){  
	gl
; }

3375 i(
	gchunk_n
 == 0) {

3377 i(!
le_ad
.
gle
(|| 
rcmp
֚e_ad.
r
(), "\r\n"))

3378  
l
;

3381  
	gue
;

3384 
le
 
bo
 
is_chunked_sr_codg
(cڡ 
Hds
 &
hds
) {

3385  !
rcmp
(
g_hd_vue
(
hds
, "Transfer-Encoding", 0, ""),

3389 
	gme
 <
tyme
 
	gT
,ym
	gU
>

3390 
bo
 
e_cڋ_iv
(
T
 &
x
, &
us
,

3391 
CڋReivWhProgss
 
iv
,

3392 
bo
 
decomess
, 
U
 
back
) {

3393 i(
	gdecomess
) {

3394 
	gd
::
rg
 
codg
 = 
x
.
g_hd_vue
("Content-Encoding");

3395 
	gd
::
unique_r
<
decomess
> decompressor;

3397 i(
	gcodg
 ="gz" || 
codg
 == "deflate") {

3398 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


3399 
decomess
 = 
da
::
make_unique
<
gz_decomess
>();

3401 
	gus
 = 415;

3402  
	gl
;

3404 } i(
	gcodg
.
fd
("br"!
d
::
rg
::
os
) {

3405 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


3406 
decomess
 = 
da
::
make_unique
<
brli_decomess
>();

3408 
	gus
 = 415;

3409  
	gl
;

3413 i(
	gdecomess
) {

3414 i(
	gdecomess
->
is_vid
()) {

3415 
CڋReivWhProgss
 
	gout
 = [&](cڡ *
buf
, 
size_t
 
	gn
,

3416 
ut64_t
 
	goff
, ut64_
	gn
) {

3417  
	gdecomess
->
decomess
(
buf
, 
n
,

3418 [&](cڡ *
buf2
, 
size_t
 
n2
) {

3419  
iv
(
buf2
, 
n2
, 
off
, 
n
);

3422  
back
(
d
::
move
(
out
));

3424 
	gus
 = 500;

3425  
	gl
;

3430 
CڋReivWhProgss
 
	gout
 = [&](cڡ *
buf
, 
size_t
 
	gn
, 
ut64_t
 
	goff
,

3431 
ut64_t
 
	gn
) {

3432  
iv
(
buf
, 
n
, 
off
, 
n
);

3434  
back
(
d
::
move
(
out
));

3437 
	gme
 <
tyme
 
	gT
>

3438 
bo
 
ad_cڋ
(
Sm
 &
rm
, 
T
 &
x
, 
size_t
 
yld_max_ngth
, &
us
,

3439 
Progss
 
ogss
, 
CڋReivWhProgss
 
iv
,

3440 
bo
 
decomess
) {

3441  
e_cڋ_iv
(

3442 
x
, 
us
, 
d
::
move
(
iv
), 
decomess
,

3443 [&](cڡ 
CڋReivWhProgss
 &
out
) {

3444 aut
t
 = 
ue
;

3445 aut
exed_yld_max_ngth
 = 
l
;

3447 i(
is_chunked_sr_codg
(
x
.
hds
)) {

3448 
t
 = 
ad_cڋ_chunked
(
rm
, 
out
);

3449 } i(!
has_hd
(
x
.
hds
, "Content-Length")) {

3450 
t
 = 
ad_cڋ_whout_ngth
(
rm
, 
out
);

3452 aut
n
 = 
g_hd_vue
<
ut64_t
>(
x
.
hds
, "Content-Length");

3453 i(
n
 > 
yld_max_ngth
) {

3454 
exed_yld_max_ngth
 = 
ue
;

3455 
sk_cڋ_wh_ngth
(
rm
, 
n
);

3456 
t
 = 
l
;

3457 } i(
n
 > 0) {

3458 
t
 = 
ad_cڋ_wh_ngth
(
rm
, 
n
, 
d
::
move
(
ogss
), 
out
);

3462 i(!
t
{ 
us
 = 
exed_yld_max_ngth
 ? 413 : 400; }

3463  
t
;

3467 
le
 
ssize_t
 
wre_hds
(
Sm
 &
rm
, cڡ 
Hds
 &
hds
) {

3468 
ssize_t
 
	gwre_n
 = 0;

3469 cڡut&
	gx
 : 
hds
) {

3470 aut
n
 =

3471 
rm
.
wre_fm
("%s: %s\r\n", 
x
.
f
.
c_r
(), x.
cd
.c_str());

3472 i(
	gn
 < 0) { en; }

3473 
	gwre_n
 +
n
;

3475 aut
	gn
 = 
rm
.
wre
("\r\n");

3476 i(
	gn
 < 0) { en; }

3477 
	gwre_n
 +
n
;

3478  
	gwre_n
;

3481 
le
 
bo
 
wre_da
(
Sm
 &
rm
, cڡ *
d
, 
size_t
 
l
) {

3482 
size_t
 
	gofft
 = 0;

3483 
	gofft
 < 
	gl
) {

3484 aut
	gngth
 = 
rm
.
wre
(
d
 + 
offt
, 
l
 - offset);

3485 i(
	gngth
 < 0{  
	gl
; }

3486 
	gofft
 +
ic_
<
size_t
>(
ngth
);

3488  
	gue
;

3491 
	gme
 <
tyme
 
	gT
>

3492 
le
 
bo
 
wre_cڋ
(
Sm
 &
rm
, cڡ 
CڋProvid
 &
cڋ_ovid
,

3493 
size_t
 
offt
, size_
ngth
, 
T
 
is_shug_down
,

3494 
E
 &
r
) {

3495 
size_t
 
	gd_offt
 = 
offt
 + 
ngth
;

3496 aut
	gok
 = 
ue
;

3497 
DaSk
 
	gda_sk
;

3499 
	gda_sk
.
	gwre
 = [&](cڡ *
d
, 
size_t
 
	gl
-> 
	gbo
 {

3500 i(
	gok
) {

3501 i(
wre_da
(
rm
, 
d
, 
l
)) {

3502 
	gofft
 +
l
;

3504 
	gok
 = 
l
;

3507  
	gok
;

3510 
	gda_sk
.
	gis_wrab
 = [&]({  
ok
 && 
rm
.
is_wrab
(); };

3512 
	gofft
 < 
	gd_offt
 && !
is_shug_down
()) {

3513 i(!
cڋ_ovid
(
offt
, 
d_offt
 - offt, 
da_sk
)) {

3514 
	gr
 = 
E
::
Cd
;

3515  
	gl
;

3517 i(!
	gok
) {

3518 
	gr
 = 
E
::
Wre
;

3519  
	gl
;

3523 
	gr
 = 
E
::
Sucss
;

3524  
	gue
;

3527 
	gme
 <
tyme
 
	gT
>

3528 
le
 
bo
 
wre_cڋ
(
Sm
 &
rm
, cڡ 
CڋProvid
 &
cڋ_ovid
,

3529 
size_t
 
offt
, size_
ngth
,

3530 cڡ 
T
 &
is_shug_down
) {

3531 aut
	gr
 = 
E
::
Sucss
;

3532  
wre_cڋ
(
rm
, 
cڋ_ovid
, 
offt
, 
ngth
, 
is_shug_down
,

3533 
r
);

3536 
	gme
 <
tyme
 
	gT
>

3537 
le
 
bo


3538 
wre_cڋ_whout_ngth
(
Sm
 &
rm
,

3539 cڡ 
CڋProvid
 &
cڋ_ovid
,

3540 cڡ 
T
 &
is_shug_down
) {

3541 
size_t
 
	gofft
 = 0;

3542 aut
	gda_avaab
 = 
ue
;

3543 aut
	gok
 = 
ue
;

3544 
DaSk
 
	gda_sk
;

3546 
	gda_sk
.
	gwre
 = [&](cڡ *
d
, 
size_t
 
	gl
-> 
	gbo
 {

3547 i(
	gok
) {

3548 
	gofft
 +
l
;

3549 i(!
wre_da
(
rm
, 
d
, 
l
){ 
	gok
 = 
l
; }

3551  
	gok
;

3554 
	gda_sk
.
	gde
 = [&]({ 
da_avaab
 = 
l
; };

3556 
	gda_sk
.
	gis_wrab
 = [&]({  
ok
 && 
rm
.
is_wrab
(); };

3558 
	gda_avaab
 && !
is_shug_down
()) {

3559 i(!
cڋ_ovid
(
offt
, 0, 
da_sk
){  
	gl
; }

3560 i(!
	gok
{  
	gl
; }

3562  
	gue
;

3565 
	gme
 <
tyme
 
	gT
,ym
	gU
>

3566 
le
 
bo


3567 
wre_cڋ_chunked
(
Sm
 &
rm
, cڡ 
CڋProvid
 &
cڋ_ovid
,

3568 cڡ 
T
 &
is_shug_down
, 
U
 &
comess
, 
E
 &
r
) {

3569 
size_t
 
	gofft
 = 0;

3570 aut
	gda_avaab
 = 
ue
;

3571 aut
	gok
 = 
ue
;

3572 
DaSk
 
	gda_sk
;

3574 
	gda_sk
.
	gwre
 = [&](cڡ *
d
, 
size_t
 
	gl
-> 
	gbo
 {

3575 i(
	gok
) {

3576 
	gda_avaab
 = 
l
 > 0;

3577 
	gofft
 +
l
;

3579 
	gd
::
rg
 
yld
;

3580 i(
	gcomess
.
comess
(
d
, 
l
, 
l
,

3581 [&](cڡ *
da
, 
size_t
 
da_n
) {

3582 
yld
.
nd
(
da
, 
da_n
);

3583  
ue
;

3585 i(!
	gyld
.
emy
()) {

3587 aut
	gchunk
 =

3588 
om_i_to_hex
(
yld
.
size
()) + "\r\n" +ayload + "\r\n";

3589 i(!
wre_da
(
rm
, 
chunk
.
da
(), chunk.
size
()){ 
	gok
 = 
l
; }

3592 
	gok
 = 
l
;

3595  
	gok
;

3598 
	gda_sk
.
	gde
 = [&]() {

3599 i(!
ok
) { ; }

3601 
	gda_avaab
 = 
l
;

3603 
	gd
::
rg
 
yld
;

3604 i(!
	gcomess
.
comess
(
nuαr
, 0, 
ue
,

3605 [&](cڡ *
da
, 
size_t
 
da_n
) {

3606 
yld
.
nd
(
da
, 
da_n
);

3607  
ue
;

3609 
	gok
 = 
l
;

3613 i(!
	gyld
.
emy
()) {

3615 aut
	gchunk
 = 
om_i_to_hex
(
yld
.
size
()) + "\r\n" +ayload + "\r\n";

3616 i(!
wre_da
(
rm
, 
chunk
.
da
(), chunk.
size
())) {

3617 
	gok
 = 
l
;

3622 cڡ 
	gd
::
rg
 
de_mk
("0\r\n\r\n");

3623 i(!
wre_da
(
rm
, 
de_mk
.
da
(), de_mk.
size
())) {

3624 
	gok
 = 
l
;

3628 
	gda_sk
.
	gis_wrab
 = [&]({  
ok
 && 
rm
.
is_wrab
(); };

3630 
	gda_avaab
 && !
is_shug_down
()) {

3631 i(!
cڋ_ovid
(
offt
, 0, 
da_sk
)) {

3632 
	gr
 = 
E
::
Cd
;

3633  
	gl
;

3635 i(!
	gok
) {

3636 
	gr
 = 
E
::
Wre
;

3637  
	gl
;

3641 
	gr
 = 
E
::
Sucss
;

3642  
	gue
;

3645 
	gme
 <
tyme
 
	gT
,ym
	gU
>

3646 
le
 
bo
 
wre_cڋ_chunked
(
Sm
 &
rm
,

3647 cڡ 
CڋProvid
 &
cڋ_ovid
,

3648 cڡ 
T
 &
is_shug_down
, 
U
 &
comess
) {

3649 aut
	gr
 = 
E
::
Sucss
;

3650  
wre_cڋ_chunked
(
rm
, 
cڋ_ovid
, 
is_shug_down
,

3651 
comess
, 
r
);

3654 
	gme
 <
tyme
 
	gT
>

3655 
le
 
bo
 
de
(
T
 &
i
, 
Reque
 &
q
, 
Reڣ
 &
s
,

3656 cڡ 
d
::
rg
 &
th
, cڡ std::rg &
loti
,

3657 
E
 &
r
) {

3658 
Reque
 
	gw_q
 = 
q
;

3659 
	gw_q
.
	gth
 = 
th
;

3660 
	gw_q
.
	gde_cou_
 -= 1;

3662 i(
	gs
.
	gus
 =303 && (
q
.
mhod
 != "GET" &&eq.method != "HEAD")) {

3663 
w_q
.
mhod
 = "GET";

3664 
	gw_q
.
	gbody
.
r
();

3665 
	gw_q
.
	ghds
.
r
();

3668 
Reڣ
 
	gw_s
;

3670 aut
	gt
 = 
i
.
nd
(
w_q
, 
w_s
, 
r
);

3671 i(
	gt
) {

3672 
	gq
 = 
w_q
;

3673 
	gs
 = 
w_s
;

3674 
	gs
.
	gloti
 = 
loti
;

3676  
	gt
;

3679 
le
 
	gd
::
rg
 
ms_to_quy_r
(cڡ 
Pams
 &
ms
) {

3680 
d
::
rg
 
quy
;

3682 aut
	g
 = 
ms
.
beg
(); i!ms.
d
(); ++it) {

3683 i(
	g
 !
ms
.
beg
(){ 
quy
 += "&"; }

3684 
	gquy
 +

->
f
;

3685 
	gquy
 += "=";

3686 
	gquy
 +
code_quy_m
(

->
cd
);

3688  
	gquy
;

3691 
le
 
r_quy_xt
(cڡ 
d
::
rg
 &
s
, 
Pams
 &
ms
) {

3692 
	gd
::
t
<
d
::
rg
> 
che
;

3693 
l
(
s
.
da
(), s.da(+ s.
size
(), '&', [&](cڡ *
b
, cڡ *
e
) {

3694 
d
::
rg
 
kv
(
b
, 
e
);

3695 i(
che
.
fd
(
kv
!che.
d
()) { ; }

3696 
che
.

(
kv
);

3698 
d
::
rg
 
key
;

3699 
d
::
rg
 
v
;

3700 
l
(
b
, 
e
, '=', [&](cڡ *
b2
, cڡ *
e2
) {

3701 i(
key
.
emy
()) {

3702 
key
.
assign
(
b2
, 
e2
);

3704 
v
.
assign
(
b2
, 
e2
);

3708 i(!
key
.
emy
()) {

3709 
ms
.
ema
(
decode_u
(
key
, 
ue
), decode_u(
v
,rue));

3714 
le
 
bo
 
r_muɝt_boundy
(cڡ 
d
::
rg
 &
cڋ_ty
,

3715 
d
::
rg
 &
boundy
) {

3716 aut
pos
 = 
cڋ_ty
.
fd
("boundary=");

3717 i(
	gpos
 =
d
::
rg
::
os
{  
l
; }

3718 
	gboundy
 = 
cڋ_ty
.
subr
(
pos
 + 9);

3719 i(
	gboundy
.
ngth
(>2 && 
boundy
.
t
() == '"' &&

3720 
boundy
.
back
() == '"') {

3721 
boundy
 = boundy.
subr
(1, boundy.
size
() - 2);

3723  !
	gboundy
.
emy
();

3726 #ifde
CPPHTTPLIB_NO_EXCEPTIONS


3727 
le
 
bo
 
r_nge_hd
(cڡ 
d
::
rg
 &
s
, 
Rges
 &
nges
) {

3729 
le
 
bo
 
r_nge_hd
(cڡ 
d
::
rg
 &
s
, 
Rges
 &
nges

	gy
 {

3731 aut
	g_f_nge
 = 
d
::
gex
(
R
"(bytes=(\d*-\d*(?:,\s*\d*-\d*)*))");

3732 
	gd
::
smch
 
m
;

3733 i(
	gd
::
gex_mch
(
s
, 
m
, 
_f_nge
)) {

3734 aut
	gpos
 = 
ic_
<
size_t
>(
m
.
posi
(1));

3735 aut
	gn
 = 
ic_
<
size_t
>(
m
.
ngth
(1));

3736 
bo
 
	gl_vid_nges
 = 
ue
;

3737 
l
(&
s
[
pos
], &s[po+ 
n
], ',', [&](cڡ *
b
, cڡ *
e
) {

3738 i(!
l_vid_nges
) ;

3739 aut
_h_nge
 = 
d
::
gex
(
R
"(\s*(\d*)-(\d*))");

3740 
d
::
cmch
 
cm
;

3741 i(
d
::
gex_mch
(
b
, 
e
, 
cm
, 
_h_nge
)) {

3742 
ssize_t
 
f
 = -1;

3743 i(!
cm
.
r
(1).
emy
()) {

3744 
f
 = 
ic_
<
ssize_t
>(
d
::
l
(
cm
.
r
(1)));

3747 
ssize_t
 
ϡ
 = -1;

3748 i(!
cm
.
r
(2).
emy
()) {

3749 
ϡ
 = 
ic_
<
ssize_t
>(
d
::
l
(
cm
.
r
(2)));

3752 i(
f
 !-1 && 
ϡ
 != -1 && first >ast) {

3753 
l_vid_nges
 = 
l
;

3756 
nges
.
ema_back
(
d
::
make_
(
f
, 
ϡ
));

3759  
	gl_vid_nges
;

3761  
	gl
;

3762 #ifde
CPPHTTPLIB_NO_EXCEPTIONS


3765 } 
tch
 (...{  
	gl
; }

3768 as
	cMuɝtFmDaPr
 {

3769 
	gpublic
:

3770 
MuɝtFmDaPr
() = ;

3772 
t_boundy
(
d
::
rg
 &&
boundy
{ 
boundy_
 = boundary; }

3774 
bo
 
is_vid
(cڡ {  
	gis_vid_
; }

3776 
bo
 
r
(cڡ *
buf
, 
size_t
 
n
, cڡ 
CڋReiv
 &
cڋ_back
,

3777 cڡ 
MuɝtCڋHd
 &
hd_back
) {

3780 cڡ 
	gd
::
gex
 
_cڋ_diosi
(

3781 
R
"~(^Content-Disposition:\s*form-data;\s*name="(.*?)"(?:;\s*filename="(.*?)")?(?:;\s*filename\*=\S+)?\s*$)~",

3782 
d
::
gex_cڡts
::
i
);

3784 cڡ 
	gd
::
rg
 
dash_
 = "--";

3785 cڡ 
	gd
::
rg
 
lf_
 = "\r\n";

3787 
buf_nd
(
buf
, 
n
);

3789 
buf_size
() > 0) {

3790 
	ge_
) {

3792 aut
n
 = 
dash_
 + 
boundy_
 + 
lf_
;

3793 i(
	gn
.
size
(> 
buf_size
(){  
	gue
; }

3794 i(!
buf_t_wh
(
n
){  
	gl
; }

3795 
buf_a
(
n
.
size
());

3796 
	ge_
 = 1;

3800 
r_fe_fo
();

3801 
	ge_
 = 2;

3805 aut
pos
 = 
buf_fd
(
lf_
);

3806 i(
	gpos
 > 
	gCPPHTTPLIB_HEADER_MAX_LENGTH
{  
	gl
; }

3807 
	gpos
 < 
buf_size
()) {

3809 i(
	gpos
 == 0) {

3810 i(!
hd_back
(
fe_
)) {

3811 
is_vid_
 = 
l
;

3812  
	gl
;

3814 
buf_a
(
lf_
.
size
());

3815 
	ge_
 = 3;

3819 cڡ 
	gd
::
rg
 
hd_me
 = "content-type:";

3820 cڡut
	ghd
 = 
buf_hd
(
pos
);

3821 i(
t_wh__igne
(
hd
, 
hd_me
)) {

3822 
	gfe_
.
	gcڋ_ty
 = 
im_cy
(
hd
.
subr
(
hd_me
.
size
()));

3824 
	gd
::
smch
 
m
;

3825 i(
	gd
::
gex_mch
(
hd
, 
m
, 
_cڋ_diosi
)) {

3826 
	gfe_
.
	gme
 = 
m
[1];

3827 
	gfe_
.
	gfame
 = 
m
[2];

3831 
buf_a
(
pos
 + 
lf_
.
size
());

3832 
	gpos
 = 
buf_fd
(
lf_
);

3834 i(
	ge_
 !3{  
ue
; }

3839 aut
n
 = 
lf_
 + 
dash_
;

3840 i(
	gn
.
size
(> 
buf_size
(){  
	gue
; }

3842 aut
	gpos
 = 
buf_fd
(
n
);

3844 i(!
cڋ_back
(
buf_da
(), 
pos
)) {

3845 
	gis_vid_
 = 
l
;

3846  
	gl
;

3849 
buf_a
(
pos
);

3852 aut
	gn
 = 
lf_
 + 
dash_
 + 
boundy_
;

3853 i(
	gn
.
size
(> 
buf_size
(){  
	gue
; }

3855 aut
	gpos
 = 
buf_fd
(
n
);

3856 i(
	gpos
 < 
buf_size
()) {

3857 i(!
cڋ_back
(
buf_da
(), 
pos
)) {

3858 
	gis_vid_
 = 
l
;

3859  
	gl
;

3862 
buf_a
(
pos
 + 
n
.
size
());

3863 
	ge_
 = 4;

3865 i(!
cڋ_back
(
buf_da
(), 
n
.
size
())) {

3866 
	gis_vid_
 = 
l
;

3867  
	gl
;

3870 
buf_a
(
n
.
size
());

3876 i(
lf_
.
size
(> 
buf_size
(){  
ue
; }

3877 i(
buf_t_wh
(
lf_
)) {

3878 
buf_a
(
lf_
.
size
());

3879 
	ge_
 = 1;

3881 aut
	gn
 = 
dash_
 + 
lf_
;

3882 i(
	gn
.
size
(> 
buf_size
(){  
	gue
; }

3883 i(
buf_t_wh
(
n
)) {

3884 
buf_a
(
n
.
size
());

3885 
	gis_vid_
 = 
ue
;

3886 
	ge_
 = 5;

3888  
	gue
;

3894 
is_vid_
 = 
l
;

3895  
	gl
;

3900  
	gue
;

3903 
	give
:

3904 
r_fe_fo
() {

3905 
fe_
.
me
.
r
();

3906 
	gfe_
.
	gfame
.
r
();

3907 
	gfe_
.
	gcڋ_ty
.
r
();

3910 
bo
 
t_wh__igne
(cڡ 
d
::
rg
 &
a
,

3911 cڡ 
d
::
rg
 &
b
) const {

3912 i(
a
.
size
(< 
b
.size(){  
l
; }

3913 
size_t
 
	gi
 = 0; i < 
	gb
.
size
(); i++) {

3914 i(::
tow
(
a
[
i
]!::tow(
b
[i]){  
l
; }

3916  
	gue
;

3919 
	gd
::
rg
 
boundy_
;

3921 
size_t
 
	ge_
 = 0;

3922 
bo
 
	gis_vid_
 = 
l
;

3923 
MuɝtFmDa
 
	gfe_
;

3926 
bo
 
t_wh
(cڡ 
d
::
rg
 &
a
, 
size_t
 
os
, size_
os
,

3927 cڡ 
d
::
rg
 &
b
) const {

3928 i(
os
 - 
os
 < 
b
.
size
(){  
l
; }

3929 
size_t
 
	gi
 = 0; i < 
	gb
.
size
(); i++) {

3930 i(
	ga
[
i
 + 
os
] !
b
[i]{  
l
; }

3932  
	gue
;

3935 
size_t
 
buf_size
(cڡ {  
	gbuf_os_
 - 
	gbuf_os_
; }

3937 cڡ *
buf_da
(cڡ {  &
	gbuf_
[
buf_os_
]; }

3939 
	gd
::
rg
 
buf_hd
(
size_t
 
l
cڡ {  
buf_
.
subr
(
buf_os_
,); }

3941 
bo
 
buf_t_wh
(cڡ 
d
::
rg
 &
s
) const {

3942  
t_wh
(
buf_
, 
buf_os_
, 
buf_os_
, 
s
);

3945 
size_t
 
buf_fd
(cڡ 
d
::
rg
 &
s
) const {

3946 aut
c
 = 
s
.
t
();

3948 
size_t
 
	goff
 = 
buf_os_
;

3949 
	goff
 < 
	gbuf_os_
) {

3950 aut
	gpos
 = 
off
;

3951 
	gue
) {

3952 i(
	gpos
 =
buf_os_
{  
buf_size
(); }

3953 i(
	gbuf_
[
pos
] =
c
) { ; }

3954 
	gpos
++;

3957 aut
	gmag_size
 = 
buf_os_
 - 
pos
;

3958 i(
	gs
.
size
(> 
	gmag_size
{  
buf_size
(); }

3960 i(
t_wh
(
buf_
, 
pos
, 
buf_os_
, 
s
){  
	gpos
 - 
	gbuf_os_
; }

3962 
	goff
 = 
pos
 + 1;

3965  
buf_size
();

3968 
buf_nd
(cڡ *
da
, 
size_t
 
n
) {

3969 aut
	gmag_size
 = 
buf_size
();

3970 i(
	gmag_size
 > 0 && 
	gbuf_os_
 > 0) {

3971 
size_t
 
	gi
 = 0; i < 
	gmag_size
; i++) {

3972 
	gbuf_
[
i
] = 
buf_
[
buf_os_
 + i];

3975 
	gbuf_os_
 = 0;

3976 
	gbuf_os_
 = 
mag_size
;

3978 i(
	gmag_size
 + 
	gn
 > 
	gbuf_
.
size
(){ buf_.
size
(
mag_size
 + 
n
); }

3980 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

3981 
	gbuf_
[
buf_os_
 + 
i
] = 
da
[i];

3983 
	gbuf_os_
 +
n
;

3986 
buf_a
(
size_t
 
size
{ 
	gbuf_os_
 += size; }

3988 
	gd
::
rg
 
buf_
;

3989 
size_t
 
	gbuf_os_
 = 0;

3990 
size_t
 
	gbuf_os_
 = 0;

3993 
le
 
	gd
::
rg
 
to_low
(cڡ *
beg
, cڡ *
d
) {

3994 
	gd
::
rg
 
out
;

3995 aut
	g
 = 
beg
;

3996 
	g
 !
d
) {

3997 
out
 +
ic_
<>(::
tow
(*

));

3998 
	g
++;

4000  
	gout
;

4003 
le
 
	gd
::
rg
 
make_muɝt_da_boundy
() {

4004 cڡ 
da
[] =

4010 
	gd
::
ndom_devi
 
ed_g
;

4013 
	gd
::
ed_q
 
ed_qu
{
ed_g
(), seed_gen(), seed_gen(), seed_gen()};

4014 
	gd
::
mt19937
 
ge
(
ed_qu
);

4016 
	gd
::
rg
 
su
 = "--cpp-httplib-multipart-data-";

4018 aut
	gi
 = 0; i < 16; i++) {

4019 
	gsu
 +
da
[
ge
() % ((data) - 1)];

4022  
	gsu
;

4025 
le
 
	gd
::

<
size_t
, 
	gsize_t
>

4026 
g_nge_offt_d_ngth
(cڡ 
Reque
 &
q
, 
size_t
 
cڋ_ngth
,

4027 
size_t
 
dex
) {

4028 aut
	gr
 = 
q
.
nges
[
dex
];

4030 i(
	gr
.
	gf
 =-1 && 
r
.
cd
 == -1) {

4031  
d
::
make_
(0, 
cڋ_ngth
);

4034 aut
	g
 = 
ic_
<
ssize_t
>(
cڋ_ngth
);

4036 i(
	gr
.
	gf
 == -1) {

4037 
r
.
f
 = (
d
::
max
)(
ic_
<
ssize_t
>(0), 
	g
 - 
	gr
.
	gcd
);

4038 
	gr
.
	gcd
 = 

 - 1;

4041 i(
	gr
.
	gcd
 =-1{ 
r
.
cd
 = 

 - 1; }

4042  
	gd
::
make_
(
r
.
f
, 
ic_
<
size_t
>.
cd
 -.first) + 1);

4045 
le
 
	gd
::
rg
 
make_cڋ_nge_hd_fld
(
size_t
 
offt
, size_
ngth
,

4046 
size_t
 
cڋ_ngth
) {

4047 
	gd
::
rg
 
fld
 = "bytes ";

4048 
	gfld
 +
d
::
to_rg
(
offt
);

4049 
	gfld
 += "-";

4050 
	gfld
 +
d
::
to_rg
(
offt
 + 
ngth
 - 1);

4051 
	gfld
 += "/";

4052 
	gfld
 +
d
::
to_rg
(
cڋ_ngth
);

4053  
	gfld
;

4056 
	gme
 <
tyme
 
	gSTok
,ym
	gCTok
,ym
	gCڋ
>

4057 
bo
 
oss_muɝt_nges_da
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

4058 cڡ 
d
::
rg
 &
boundy
,

4059 cڡ 
d
::
rg
 &
cڋ_ty
,

4060 
STok
 
ok
, 
CTok
 
ok
,

4061 
Cڋ
 
cڋ
) {

4062 
size_t
 
	gi
 = 0; i < 
	gq
.
	gnges
.
size
(); i++) {

4063 
ok
("--");

4064 
ok
(
boundy
);

4065 
ok
("\r\n");

4066 i(!
	gcڋ_ty
.
emy
()) {

4067 
ok
("Content-Type: ");

4068 
ok
(
cڋ_ty
);

4069 
ok
("\r\n");

4072 aut
	goffts
 = 
g_nge_offt_d_ngth
(
q
, 
s
.
body
.
size
(), 
i
);

4073 aut
	gofft
 = 
offts
.
f
;

4074 aut
	gngth
 = 
offts
.
cd
;

4076 
ok
("Content-Range: ");

4077 
ok
(
make_cڋ_nge_hd_fld
(
offt
, 
ngth
, 
s
.
body
.
size
()));

4078 
ok
("\r\n");

4079 
ok
("\r\n");

4080 i(!
cڋ
(
offt
, 
ngth
){  
	gl
; }

4081 
ok
("\r\n");

4084 
ok
("--");

4085 
ok
(
boundy
);

4086 
ok
("--\r\n");

4088  
	gue
;

4091 
le
 
bo
 
make_muɝt_nges_da
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

4092 cڡ 
d
::
rg
 &
boundy
,

4093 cڡ 
d
::
rg
 &
cڋ_ty
,

4094 
d
::
rg
 &
da
) {

4095  
oss_muɝt_nges_da
(

4096 
q
, 
s
, 
boundy
, 
cڋ_ty
,

4097 [&](cڡ 
d
::
rg
 &
tok
{ 
da
 +=oken; },

4098 [&](cڡ *
tok
{ 
da
 +=oken; },

4099 [&](
size_t
 
offt
, size_
ngth
) {

4100 i(
offt
 < 
s
.
body
.
size
()) {

4101 
da
 +
s
.
body
.
subr
(
offt
, 
ngth
);

4102  
ue
;

4104  
l
;

4108 
le
 
size_t


4109 
g_muɝt_nges_da_ngth
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

4110 cڡ 
d
::
rg
 &
boundy
,

4111 cڡ 
d
::
rg
 &
cڋ_ty
) {

4112 
size_t
 
da_ngth
 = 0;

4114 
oss_muɝt_nges_da
(

4115 
q
, 
s
, 
boundy
, 
cڋ_ty
,

4116 [&](cڡ 
d
::
rg
 &
tok
{ 
da_ngth
 +tok.
size
(); },

4117 [&](cڡ *
tok
{ 
da_ngth
 +

(token); },

4118 [&](
size_t
 , size_
ngth
) {

4119 
da_ngth
 +
ngth
;

4120  
ue
;

4123  
	gda_ngth
;

4126 
	gme
 <
tyme
 
	gT
>

4127 
le
 
bo
 
wre_muɝt_nges_da
(
Sm
 &
rm
, cڡ 
Reque
 &
q
,

4128 
Reڣ
 &
s
,

4129 cڡ 
d
::
rg
 &
boundy
,

4130 cڡ 
d
::
rg
 &
cڋ_ty
,

4131 cڡ 
T
 &
is_shug_down
) {

4132  
oss_muɝt_nges_da
(

4133 
q
, 
s
, 
boundy
, 
cڋ_ty
,

4134 [&](cڡ 
d
::
rg
 &
tok
{ 
rm
.
wre
(token); },

4135 [&](cڡ *
tok
{ 
rm
.
wre
(token); },

4136 [&](
size_t
 
offt
, size_
ngth
) {

4137  
wre_cڋ
(
rm
, 
s
.
cڋ_ovid_
, 
offt
, 
ngth
,

4138 
is_shug_down
);

4142 
le
 
	gd
::

<
size_t
, 
	gsize_t
>

4143 
g_nge_offt_d_ngth
(cڡ 
Reque
 &
q
, cڡ 
Reڣ
 &
s
,

4144 
size_t
 
dex
) {

4145 aut
	gr
 = 
q
.
nges
[
dex
];

4147 i(
	gr
.
	gcd
 == -1) {

4148 
r
.
cd
 = 
ic_
<
ssize_t
>(
s
.
cڋ_ngth_
) - 1;

4151  
	gd
::
make_
(
r
.
f
,.
cd
 -.first + 1);

4154 
le
 
bo
 
ex_cڋ
(cڡ 
Reque
 &
q
) {

4155 i(
	gq
.
	gmhod
 ="POST" || 
q
.
mhod
 == "PUT" ||eq.method == "PATCH" ||

4156 
q
.
mhod
 == "PRI" ||eq.method == "DELETE") {

4157  
ue
;

4160  
	gl
;

4163 
le
 
bo
 
has_lf
(cڡ *
s
) {

4164 aut
	gp
 = 
s
;

4165 *
	gp
) {

4166 i(*
	gp
 ='\r' || *
p
 ='\n'{  
ue
; }

4167 
	gp
++;

4169  
	gl
;

4172 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


4173 
le
 
	gd
::
rg
 
mesge_dige
(cڡ 
d
::rg &
s
, cڡ 
EVP_MD
 *
go
) {

4174 aut
	gcڋxt
 = 
d
::
unique_r
<
EVP_MD_CTX
, 
dety
(&
EVP_MD_CTX_
)>(

4175 
EVP_MD_CTX_w
(), 
	gEVP_MD_CTX_
);

4177 
	ghash_ngth
 = 0;

4178 
	ghash
[
EVP_MAX_MD_SIZE
];

4180 
EVP_DigeIn_ex
(
cڋxt
.
g
(), 
go
, 
nuαr
);

4181 
EVP_DigeUpde
(
cڋxt
.
g
(), 
s
.
c_r
(), s.
size
());

4182 
EVP_DigeF_ex
(
cڋxt
.
g
(), 
hash
, &
hash_ngth
);

4184 
	gd
::
rgam
 
ss
;

4185 aut
	gi
 = 0u; i < 
	ghash_ngth
; ++i) {

4186 
	gss
 << 
	gd
::
hex
 << 
d
::
tw
(2<< std::
tfl
('0')

4187 << ()
hash
[
i
];

4190  
	gss
.
r
();

4193 
le
 
	gd
::
rg
 
MD5
(cڡ 
d
::rg &
s
) {

4194  
mesge_dige
(
s
, 
EVP_md5
());

4197 
le
 
	gd
::
rg
 
SHA_256
(cڡ 
d
::rg &
s
) {

4198  
mesge_dige
(
s
, 
EVP_sha256
());

4201 
le
 
	gd
::
rg
 
SHA_512
(cڡ 
d
::rg &
s
) {

4202  
mesge_dige
(
s
, 
EVP_sha512
());

4206 #ifde
_WIN32


4207 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


4210 
le
 
bo
 
ld_syem_s__wdows
(
X509_STORE
 *
e
) {

4211 aut
	ghSte
 = 
CtOnSyemSteW
((
HCRYPTPROV_LEGACY
)
NULL
, 
L
"ROOT");

4213 i(!
	ghSte
{  
	gl
; }

4215 
PCCERT_CONTEXT
 
	gpCڋxt
 = 
NULL
;

4216 (
	gpCڋxt
 = 
CtEnumCtifisInSte
(
hSte
, 
pCڋxt
)) !=

4217 
nuαr
) {

4218 aut
coded_
 =

4219 
ic_
<cڡ *>(
pCڋxt
->
pbCtEncoded
);

4221 aut
	gx509
 = 
d2i_X509
(
NULL
, &
coded_
, 
pCڋxt
->
cbCtEncoded
);

4222 i(
	gx509
) {

4223 
X509_STORE_add_
(
e
, 
x509
);

4224 
X509_
(
x509
);

4228 
CtFeCtifiCڋxt
(
pCڋxt
);

4229 
CtCloSte
(
hSte
, 0);

4231  
	gue
;

4235 as
	cWSIn
 {

4236 
	gpublic
:

4237 
WSIn
() {

4238 
WSADATA
 
wDa
;

4239 i(
WSASup
(0x0002, &
wDa
=0
is_vid_
 = 
ue
;

4242 ~
WSIn
() {

4243 i(
	gis_vid_

WSAC˪up
();

4246 
bo
 
	gis_vid_
 = 
l
;

4249 
WSIn
 
	gws_
;

4252 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


4253 
le
 
	gd
::

<
d
::
rg
, std::rg> 
make_dige_authtiti_hd
(

4254 cڡ 
Reque
 &
q
, cڡ 
d
::
m
<d::
rg
, std::rg> &
auth
,

4255 
size_t
 
_cou
, cڡ 
d
::
rg
 &

, cڡ std::rg &
uame
,

4256 cڡ 
d
::
rg
 &
sswd
, 
bo
 
is_oxy
 = 
l
) {

4257 
d
::
rg
 
nc
;

4259 
	gd
::
rgam
 
ss
;

4260 
	gss
 << 
	gd
::
tfl
('0'<< 
d
::
tw
(8<< std::
hex
 << 
_cou
;

4261 
	gnc
 = 
ss
.
r
();

4264 
	gd
::
rg
 
q
;

4265 i(
	gauth
.
fd
("q"!
auth
.
d
()) {

4266 
q
 = 
auth
.

("qop");

4267 i(
	gq
.
fd
("auth-t"!
d
::
rg
::
os
) {

4268 
q
 = "auth-int";

4269 } i(
	gq
.
fd
("auth"!
d
::
rg
::
os
) {

4270 
q
 = "auth";

4272 
	gq
.
r
();

4276 
	gd
::
rg
 
go
 = "MD5";

4277 i(
	gauth
.
fd
("gܙhm"!
auth
.
d
(){ 
go
 =uth.

("algorithm"); }

4279 
	gd
::
rg
 
ڣ
;

4281 aut
	gH
 = 
go
 ="SHA-256" ? 
da
::
SHA_256


4282 : 
go
 ="SHA-512" ? 
da
::
SHA_512


4283 : 
da
::
MD5
;

4285 aut
	gA1
 = 
uame
 + ":" + 
auth
.

("m"+ ":" + 
sswd
;

4287 aut
	gA2
 = 
q
.
mhod
 + ":" +eq.
th
;

4288 i(
	gq
 ="auth-t"{ 
A2
 +":" + 
H
(
q
.
body
); }

4290 i(
	gq
.
emy
()) {

4291 
	gڣ
 = 
H
(H(
A1
+ ":" + 
auth
.

("n"+ ":" + H(
A2
));

4293 
	gڣ
 = 
H
(H(
A1
+ ":" + 
auth
.

("n"+ ":" + 
nc
 + ":" + 

 +

4294 ":" + 
q
 + ":" + 
H
(
A2
));

4298 aut
	gaque
 = (
auth
.
fd
("aque"!auth.
d
()?uth.

("opaque") : "";

4300 aut
	gfld
 = "Dige uame=\"" + 
uame
 + "\",ealm=\"" +

4301 
auth
.

("realm") + "\",once=\"" +uth.at("nonce") +

4302 "\", uri=\"" + 
q
.
th
 + "\",lgܙhm=" + 
go
 +

4303 (
q
.
emy
() ? ",esponse=\""

4304 : ", q=" + 
q
 + ",c=" + 
nc
 + ", cnonce=\"" +

4305 

 + "\",esponse=\"") +

4306 
ڣ
 + "\"" +

4307 (
aque
.
emy
() ? "" : ", opaque=\"" + opaque + "\"");

4309 aut
	gkey
 = 
is_oxy
 ? "Proxy-Authorization" : "Authorization";

4310  
	gd
::
make_
(
key
, 
fld
);

4314 
le
 
bo
 
r_www_authti
(cڡ 
Reڣ
 &
s
,

4315 
d
::
m
<d::
rg
, std::rg> &
auth
,

4316 
bo
 
is_oxy
) {

4317 aut
	gauth_key
 = 
is_oxy
 ? "Proxy-Authenticate" : "WWW-Authenticate";

4318 i(
	gs
.
has_hd
(
auth_key
)) {

4319 aut
	g
 = 
d
::
gex
(
R
"~((?:(?:,\s*)?(.+?)=(?:"(.*?)"|([^,]*))))~");

4320 aut
	gs
 = 
s
.
g_hd_vue
(
auth_key
);

4321 aut
	gpos
 = 
s
.
fd
(' ');

4322 i(
	gpos
 !
d
::
rg
::
os
) {

4323 aut
ty
 = 
s
.
subr
(0, 
pos
);

4324 i(
	gty
 == "Basic") {

4325  
l
;

4326 } i(
	gty
 == "Digest") {

4327 
s
 = s.
subr
(
pos
 + 1);

4328 aut
	gbeg
 = 
d
::
egex_
(
s
.
beg
(), s.
d
(), 

);

4329 aut
	gi
 = 
beg
; i !
d
::
egex_
(); ++i) {

4330 aut
	gm
 = *
i
;

4331 aut
	gkey
 = 
s
.
subr
(
ic_
<
size_t
>(
m
.
posi
(1)),

4332 
ic_
<
size_t
>(
m
.
ngth
(1)));

4333 aut
	gv
 = 
m
.
ngth
(2) > 0

4334 ? 
s
.
subr
(
ic_
<
size_t
>(
m
.
posi
(2)),

4335 
ic_
<
size_t
>(
m
.
ngth
(2)))

4336 : 
s
.
subr
(
ic_
<
size_t
>(
m
.
posi
(3)),

4337 
ic_
<
size_t
>(
m
.
ngth
(3)));

4338 
	gauth
[
key
] = 
v
;

4340  
	gue
;

4344  
	gl
;

4348 
le
 
	gd
::
rg
 
ndom_rg
(
size_t
 
ngth
) {

4349 aut
ndch
 = []() -> {

4350 cڡ 
cht
[] = "0123456789"

4353 cڡ 
size_t
 
	gmax_dex
 = ((
cht
) - 1);

4354  
	gcht
[
ic_
<
size_t
>(
d
::
nd
()% 
max_dex
];

4356 
	gd
::
rg
 
r
(
ngth
, 0);

4357 
	gd
::
ge_n
(
r
.
beg
(), 
ngth
, 
ndch
);

4358  
	gr
;

4361 as
	cCڋProvidAdr
 {

4362 
	gpublic
:

4363 
exic
 
CڋProvidAdr
(

4364 
CڋProvidWhoutLgth
 &&
cڋ_ovid
)

4365 : 
cڋ_ovid_
(
cڋ_ovid
) {}

4367 
bo
 
ݔ
()(
size_t
 
offt
, 
	gsize_t
, 
	gDaSk
 &
	gsk
) {

4368  
cڋ_ovid_
(
offt
, 
sk
);

4371 
	give
:

4372 
CڋProvidWhoutLgth
 
cڋ_ovid_
;

4377 
le
 
	gd
::
rg
 
	$hoed_
(cڡ *
home
) {

4378 
d
::
ve
<d::
rg
> 
addrs
;

4379 
	`hoed_
(
home
, 
addrs
);

4380 i(
addrs
.
	`emy
(){  
d
::
	`rg
(); }

4381  
addrs
[0];

4382 
	}
}

4384 
le
 
hoed_
(cڡ *
home
, 
d
::
ve
<d::
rg
> &
addrs
) {

4385 
addrfo
 
hts
;

4386 
addrfo
 *
	gsu
;

4388 
memt
(&
hts
, 0, (
addrfo
));

4389 
	ghts
.
	gai_my
 = 
AF_UNSPEC
;

4390 
	ghts
.
	gai_sockty
 = 
SOCK_STREAM
;

4391 
	ghts
.
	gai_oc
 = 0;

4393 i(
gaddrfo
(
home
, 
nuαr
, &
hts
, &
su
)) {

4394 #i
defed
 
__lux__
 && !defed 
__ANDROID__


4395 
s_
();

4400 aut
	g
 = 
su
;p;

->
ai_xt
) {

4401 cڡut&
addr
 =

4402 *
t_
<
sockaddr_age
 *>(

->
ai_addr
);

4403 
	gd
::
rg
 

;

4404 
	gdummy
 = -1;

4405 i(
	gda
::
g_me__d_pt
(
addr
, (
sockaddr_age
),

4406 

, 
dummy
)) {

4407 
	gaddrs
.
push_back
(

);

4412 
le
 
	gd
::
rg
 
	$nd_quy_ms
(cڡ *
th
, cڡ 
Pams
 &
ms
) {

4413 
d
::
rg
 
th_wh_quy
 = 
th
;

4414 cڡ 
d
::
gex
 
	`
("[^?]+\\?.*");

4415 aut
dm
 = 
d
::
	`gex_mch
(
th
, 

) ? '&' : '?';

4416 
th_wh_quy
 +
dm
 + 
da
::
	`ms_to_quy_r
(
ms
);

4417  
th_wh_quy
;

4418 
	}
}

4421 
le
 
	gd
::

<
d
::
rg
, std::rg> 
	$make_nge_hd
(
Rges
 
nges
) {

4422 
d
::
rg
 
fld
 = "bytes=";

4423 aut
i
 = 0;

4424 aut
r
 : 
nges
) {

4425 i(
i
 !0{ 
fld
 += ", "; }

4426 i(
r
.
f
 !-1{ 
fld
 +
d
::
	`to_rg
(r.first); }

4427 
fld
 += '-';

4428 i(
r
.
cd
 !-1{ 
fld
 +
d
::
	`to_rg
(r.second); }

4429 
i
++;

4431  
d
::
	`make_
("Rge", std::
	`move
(
fld
));

4432 
	}
}

4434 
le
 
	gd
::

<
d
::
rg
, std::string>

4435 
	$make_basic_authtiti_hd
(cڡ 
d
::
rg
 &
uame
,

4436 cڡ 
d
::
rg
 &
sswd
, 
bo
 
is_oxy
) {

4437 aut
fld
 = "Basi" + 
da
::
	`ba64_code
(
uame
 + ":" + 
sswd
);

4438 aut
key
 = 
is_oxy
 ? "Proxy-Authorization" : "Authorization";

4439  
d
::
	`make_
(
key
, std::
	`move
(
fld
));

4440 
	}
}

4442 
le
 
	gd
::

<
d
::
rg
, std::string>

4443 
	$make_br_tok_authtiti_hd
(cڡ 
d
::
rg
 &
tok
,

4444 
bo
 
is_oxy
 = 
l
) {

4445 aut
fld
 = "B" + 
tok
;

4446 aut
key
 = 
is_oxy
 ? "Proxy-Authorization" : "Authorization";

4447  
d
::
	`make_
(
key
, std::
	`move
(
fld
));

4448 
	}
}

4451 
le
 
bo
 
	gReque
::
	$has_hd
(cڡ *
key
) const {

4452  
da
::
	`has_hd
(
hds
, 
key
);

4453 
	}
}

4455 
le
 
	gd
::
rg
 
Reque
::
	$g_hd_vue
(cڡ *
key
, 
size_t
 
id
) const {

4456  
da
::
	`g_hd_vue
(
hds
, 
key
, 
id
, "");

4457 
	}
}

4459 
le
 
size_t
 
	gReque
::
	$g_hd_vue_cou
(cڡ *
key
) const {

4460 aut
r
 = 
hds
.
	`equ_nge
(
key
);

4461  
ic_
<
size_t
>(
d
::
	`di
(
r
.
f
,.
cd
));

4462 
	}
}

4464 
le
 
	gReque
::
	$t_hd
(cڡ *
key
, cڡ *
v
) {

4465 i(!
da
::
	`has_lf
(
key
&& !da::has_lf(
v
)) {

4466 
hds
.
	`ema
(
key
, 
v
);

4468 
	}
}

4470 
le
 
	gReque
::
	$t_hd
(cڡ *
key
, cڡ 
d
::
rg
 &
v
) {

4471 i(!
da
::
	`has_lf
(
key
&& !da::has_lf(
v
.
	`c_r
())) {

4472 
hds
.
	`ema
(
key
, 
v
);

4474 
	}
}

4476 
le
 
bo
 
	gReque
::
	$has_m
(cڡ *
key
) const {

4477  
ms
.
	`fd
(
key
!ms.
	`d
();

4478 
	}
}

4480 
le
 
	gd
::
rg
 
Reque
::
	$g_m_vue
(cڡ *
key
, 
size_t
 
id
) const {

4481 aut
g
 = 
ms
.
	`equ_nge
(
key
);

4482 aut

 = 
g
.
f
;

4483 
d
::
	`adv
(

, 
ic_
<
ssize_t
>(
id
));

4484 i(

 !
g
.
cd
) {  it->second; }

4485  
d
::
	`rg
();

4486 
	}
}

4488 
le
 
size_t
 
	gReque
::
	$g_m_vue_cou
(cڡ *
key
) const {

4489 aut
r
 = 
ms
.
	`equ_nge
(
key
);

4490  
ic_
<
size_t
>(
d
::
	`di
(
r
.
f
,.
cd
));

4491 
	}
}

4493 
le
 
bo
 
	gReque
::
	$is_muɝt_fm_da
() const {

4494 cڡut&
cڋ_ty
 = 
	`g_hd_vue
("Content-Type");

4495  !
cڋ_ty
.
	`rfd
("multipart/form-data", 0);

4496 
	}
}

4498 
le
 
bo
 
	gReque
::
	$has_fe
(cڡ *
key
) const {

4499  
fes
.
	`fd
(
key
!fes.
	`d
();

4500 
	}
}

4502 
le
 
MuɝtFmDa
 
	gReque
::
	$g_fe_vue
(cڡ *
key
) const {

4503 aut

 = 
fes
.
	`fd
(
key
);

4504 i(

 !
fes
.
	`d
(){  it->
cd
; }

4505  
	`MuɝtFmDa
();

4506 
	}
}

4509 
le
 
bo
 
	gReڣ
::
	$has_hd
(cڡ *
key
) const {

4510  
hds
.
	`fd
(
key
!hds.
	`d
();

4511 
	}
}

4513 
le
 
	gd
::
rg
 
Reڣ
::
	$g_hd_vue
(cڡ *
key
,

4514 
size_t
 
id
) const {

4515  
da
::
	`g_hd_vue
(
hds
, 
key
, 
id
, "");

4516 
	}
}

4518 
le
 
size_t
 
	gReڣ
::
	$g_hd_vue_cou
(cڡ *
key
) const {

4519 aut
r
 = 
hds
.
	`equ_nge
(
key
);

4520  
ic_
<
size_t
>(
d
::
	`di
(
r
.
f
,.
cd
));

4521 
	}
}

4523 
le
 
	gReڣ
::
	$t_hd
(cڡ *
key
, cڡ *
v
) {

4524 i(!
da
::
	`has_lf
(
key
&& !da::has_lf(
v
)) {

4525 
hds
.
	`ema
(
key
, 
v
);

4527 
	}
}

4529 
le
 
	gReڣ
::
	$t_hd
(cڡ *
key
, cڡ 
d
::
rg
 &
v
) {

4530 i(!
da
::
	`has_lf
(
key
&& !da::has_lf(
v
.
	`c_r
())) {

4531 
hds
.
	`ema
(
key
, 
v
);

4533 
	}
}

4535 
le
 
	gReڣ
::
	$t_de
(cڡ *
u
, 

) {

4536 i(!
da
::
	`has_lf
(
u
)) {

4537 
	`t_hd
("Loti", 
u
);

4538 i(300 <

 && stat < 400) {

4539 
this
->
us
 = 

;

4541 
this
->
us
 = 302;

4544 
	}
}

4546 
le
 
	gReڣ
::
	$t_de
(cڡ 
d
::
rg
 &
u
, 

) {

4547 
	`t_de
(
u
.
	`c_r
(), 

);

4548 
	}
}

4550 
le
 
	gReڣ
::
	$t_cڋ
(cڡ *
s
, 
size_t
 
n
,

4551 cڡ *
cڋ_ty
) {

4552 
body
.
	`assign
(
s
, 
n
);

4554 aut
g
 = 
hds
.
	`equ_nge
("Content-Type");

4555 
hds
.
	`a
(
g
.
f
,ng.
cd
);

4556 
	`t_hd
("Cڋ-Ty", 
cڋ_ty
);

4557 
	}
}

4559 
le
 
	gReڣ
::
	$t_cڋ
(cڡ 
d
::
rg
 &
s
,

4560 cڡ *
cڋ_ty
) {

4561 
	`t_cڋ
(
s
.
	`da
(), s.
	`size
(), 
cڋ_ty
);

4562 
	}
}

4564 
le
 
	gReڣ
::
	$t_cڋ_ovid
(

4565 
size_t
 
_ngth
, cڡ *
cڋ_ty
, 
CڋProvid
 
ovid
,

4566 
CڋProvidResourRr
 
sour_ar
) {

4567 
	`as
(
_ngth
 > 0);

4568 
	`t_hd
("Cڋ-Ty", 
cڋ_ty
);

4569 
cڋ_ngth_
 = 
_ngth
;

4570 
cڋ_ovid_
 = 
d
::
	`move
(
ovid
);

4571 
cڋ_ovid_sour_ar_
 = 
sour_ar
;

4572 
is_chunked_cڋ_ovid_
 = 
l
;

4573 
	}
}

4575 
le
 
	gReڣ
::
	$t_cڋ_ovid
(

4576 cڡ *
cڋ_ty
, 
CڋProvidWhoutLgth
 
ovid
,

4577 
CڋProvidResourRr
 
sour_ar
) {

4578 
	`t_hd
("Cڋ-Ty", 
cڋ_ty
);

4579 
cڋ_ngth_
 = 0;

4580 
cڋ_ovid_
 = 
da
::
	`CڋProvidAdr
(
d
::
	`move
(
ovid
));

4581 
cڋ_ovid_sour_ar_
 = 
sour_ar
;

4582 
is_chunked_cڋ_ovid_
 = 
l
;

4583 
	}
}

4585 
le
 
	gReڣ
::
	$t_chunked_cڋ_ovid
(

4586 cڡ *
cڋ_ty
, 
CڋProvidWhoutLgth
 
ovid
,

4587 
CڋProvidResourRr
 
sour_ar
) {

4588 
	`t_hd
("Cڋ-Ty", 
cڋ_ty
);

4589 
cڋ_ngth_
 = 0;

4590 
cڋ_ovid_
 = 
da
::
	`CڋProvidAdr
(
d
::
	`move
(
ovid
));

4591 
cڋ_ovid_sour_ar_
 = 
sour_ar
;

4592 
is_chunked_cڋ_ovid_
 = 
ue
;

4593 
	}
}

4596 
le
 
bo
 
	gResu
::
	$has_que_hd
(cڡ *
key
) const {

4597  
que_hds_
.
	`fd
(
key
!que_hds_.
	`d
();

4598 
	}
}

4600 
le
 
	gd
::
rg
 
Resu
::
	$g_que_hd_vue
(cڡ *
key
,

4601 
size_t
 
id
) const {

4602  
da
::
	`g_hd_vue
(
que_hds_
, 
key
, 
id
, "");

4603 
	}
}

4605 
le
 
size_t
 
	gResu
::
	$g_que_hd_vue_cou
(cڡ *
key
) const {

4606 aut
r
 = 
que_hds_
.
	`equ_nge
(
key
);

4607  
ic_
<
size_t
>(
d
::
	`di
(
r
.
f
,.
cd
));

4608 
	}
}

4611 
le
 
ssize_t
 
	gSm
::
	$wre
(cڡ *
r
) {

4612  
	`wre
(
r
, 
	`
(ptr));

4613 
	}
}

4615 
le
 
ssize_t
 
	gSm
::
	$wre
(cڡ 
d
::
rg
 &
s
) {

4616  
	`wre
(
s
.
	`da
(), s.
	`size
());

4617 
	}
}

4619 
mea
 
	gda
 {

4622 
le
 
	gSockSm
::
SockSm
(
sock_t
 
sock
, 
time_t
 
ad_timeout_c
,

4623 
time_t
 
ad_timeout_uc
,

4624 
time_t
 
wre_timeout_c
,

4625 
time_t
 
wre_timeout_uc
)

4626 : 
sock_
(
sock
), 
ad_timeout_c_
(
ad_timeout_c
),

4627 
ad_timeout_uc_
(
ad_timeout_uc
),

4628 
wre_timeout_c_
(
wre_timeout_c
),

4629 
wre_timeout_uc_
(
wre_timeout_uc
), 
ad_buff_
(
ad_buff_size_
, 0) {}

4631 
le
 
	gSockSm
::~
SockSm
() {}

4633 
le
 
bo
 
SockSm
::
is_adab
() const {

4634  
_ad
(
sock_
, 
ad_timeout_c_
, 
ad_timeout_uc_
) > 0;

4637 
le
 
bo
 
	gSockSm
::
is_wrab
() const {

4638  
_wre
(
sock_
, 
wre_timeout_c_
, 
wre_timeout_uc_
) > 0;

4641 
le
 
ssize_t
 
	gSockSm
::
ad
(*
r
, 
size_t
 
size
) {

4642 #ifde
_WIN32


4643 
	gsize
 =

4644 (
d
::
m
)(
size
, 
	gic_
<
	gsize_t
>((
	gd
::
numic_lims
<>::
max
)()));

4646 
	gsize
 = (
d
::
m
)(
size
,

4647 
	gic_
<
	gsize_t
>((
	gd
::
numic_lims
<
ssize_t
>::
max
)()));

4650 i(
	gad_buff_off_
 < 
	gad_buff_cڋ_size_
) {

4651 aut
	gmag_size
 = 
ad_buff_cڋ_size_
 - 
ad_buff_off_
;

4652 i(
	gsize
 <
mag_size
) {

4653 
memy
(
r
, 
ad_buff_
.
da
(+ 
ad_buff_off_
, 
size
);

4654 
	gad_buff_off_
 +
size
;

4655  
	gic_
<
	gssize_t
>(
	gsize
);

4657 
memy
(
r
, 
ad_buff_
.
da
(+ 
ad_buff_off_
, 
mag_size
);

4658 
	gad_buff_off_
 +
mag_size
;

4659  
	gic_
<
	gssize_t
>(
	gmag_size
);

4663 i(!
is_adab
()) {  -1; }

4665 
	gad_buff_off_
 = 0;

4666 
	gad_buff_cڋ_size_
 = 0;

4668 i(
	gsize
 < 
	gad_buff_size_
) {

4669 aut
	gn
 = 
ad_sock
(
sock_
, 
ad_buff_
.
da
(), 
ad_buff_size_
,

4670 
CPPHTTPLIB_RECV_FLAGS
);

4671 i(
	gn
 <= 0) {

4672  
n
;

4673 } i(
	gn
 <
ic_
<
ssize_t
>(
size
)) {

4674 
memy
(
r
, 
ad_buff_
.
da
(), 
ic_
<
size_t
>(
n
));

4675  
	gn
;

4677 
memy
(
r
, 
ad_buff_
.
da
(), 
size
);

4678 
	gad_buff_off_
 = 
size
;

4679 
	gad_buff_cڋ_size_
 = 
ic_
<
size_t
>(
n
);

4680  
	gic_
<
	gssize_t
>(
	gsize
);

4683  
ad_sock
(
sock_
, 
r
, 
size
, 
CPPHTTPLIB_RECV_FLAGS
);

4687 
le
 
ssize_t
 
	gSockSm
::
wre
(cڡ *
r
, 
size_t
 
size
) {

4688 i(!
is_wrab
()) {  -1; }

4690 #ifde
_WIN32


4691 
	gsize
 =

4692 (
d
::
m
)(
size
, 
	gic_
<
	gsize_t
>((
	gd
::
numic_lims
<>::
max
)()));

4695  
nd_sock
(
sock_
, 
r
, 
size
, 
CPPHTTPLIB_SEND_FLAGS
);

4698 
le
 
	gSockSm
::
g_me__d_pt
(
d
::
rg
 &

,

4699 &
pt
) const {

4700  
	gda
::
g_me__d_pt
(
sock_
, 

, 
pt
);

4703 
le
 
sock_t
 
	gSockSm
::
sock
(cڡ {  
sock_
; }

4706 
le
 
bo
 
	gBufrSm
::
is_adab
(cڡ {  
ue
; }

4708 
le
 
bo
 
	gBufrSm
::
is_wrab
(cڡ {  
ue
; }

4710 
le
 
ssize_t
 
	gBufrSm
::
ad
(*
r
, 
size_t
 
size
) {

4711 #i
defed
(
_MSC_VER
) && _MSC_VER <= 1900

4712 aut
	gn_ad
 = 
bufr
.
_Cy_s
(
r
, 
size
, size, 
posi
);

4714 aut
	gn_ad
 = 
bufr
.
cy
(
r
, 
size
, 
posi
);

4716 
	gposi
 +
ic_
<
size_t
>(
n_ad
);

4717  
	gic_
<
	gssize_t
>(
	gn_ad
);

4720 
le
 
ssize_t
 
	gBufrSm
::
wre
(cڡ *
r
, 
size_t
 
size
) {

4721 
	gbufr
.
nd
(
r
, 
size
);

4722  
	gic_
<
	gssize_t
>(
	gsize
);

4725 
le
 
	gBufrSm
::
g_me__d_pt
(
d
::
rg
 & ,

4728 
le
 
sock_t
 
	gBufrSm
::
sock
() const {  0; }

4730 
le
 cڡ 
	gd
::
rg
 &
BufrSm
::
g_bufr
(cڡ {  
bufr
; }

4735 
le
 
	gSv
::
	$Sv
()

4736 : 
	`w_sk_queue
(

4737 [] {  
w
 
	`ThadPo
(
CPPHTTPLIB_THREAD_POOL_COUNT
); 
	}
}),

4738 
svr_sock_
(
INVALID_SOCKET
), 
	$is_rug_
(
l
) {

4739 #ide
_WIN32


4740 
	`sigl
(
SIGPIPE
, 
SIG_IGN
);

4742 
	}
}

4744 
le
 
	gSv
::~
	$Sv
({
	}
}

4746 
le
 
Sv
 &Sv::
	$G
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4747 
g_hdrs_
.
	`push_back
(

4748 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4749  *
this
;

4750 
	}
}

4752 
le
 
	gSv
 &Sv::
	$Po
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4753 
po_hdrs_
.
	`push_back
(

4754 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4755  *
this
;

4756 
	}
}

4758 
le
 
	gSv
 &Sv::
	$Po
(cڡ 
d
::
rg
 &
n
,

4759 
HdrWhCڋRd
 
hdr
) {

4760 
po_hdrs_f_cڋ_ad_
.
	`push_back
(

4761 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4762  *
this
;

4763 
	}
}

4765 
le
 
	gSv
 &Sv::
	$Put
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4766 
put_hdrs_
.
	`push_back
(

4767 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4768  *
this
;

4769 
	}
}

4771 
le
 
	gSv
 &Sv::
	$Put
(cڡ 
d
::
rg
 &
n
,

4772 
HdrWhCڋRd
 
hdr
) {

4773 
put_hdrs_f_cڋ_ad_
.
	`push_back
(

4774 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4775  *
this
;

4776 
	}
}

4778 
le
 
	gSv
 &Sv::
	$Pch
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4779 
tch_hdrs_
.
	`push_back
(

4780 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4781  *
this
;

4782 
	}
}

4784 
le
 
	gSv
 &Sv::
	$Pch
(cڡ 
d
::
rg
 &
n
,

4785 
HdrWhCڋRd
 
hdr
) {

4786 
tch_hdrs_f_cڋ_ad_
.
	`push_back
(

4787 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4788  *
this
;

4789 
	}
}

4791 
le
 
	gSv
 &Sv::
	$De
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4792 
de_hdrs_
.
	`push_back
(

4793 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4794  *
this
;

4795 
	}
}

4797 
le
 
	gSv
 &Sv::
	$De
(cڡ 
d
::
rg
 &
n
,

4798 
HdrWhCڋRd
 
hdr
) {

4799 
de_hdrs_f_cڋ_ad_
.
	`push_back
(

4800 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4801  *
this
;

4802 
	}
}

4804 
le
 
	gSv
 &Sv::
	$Ois
(cڡ 
d
::
rg
 &
n
, 
Hdr
 
hdr
) {

4805 
tis_hdrs_
.
	`push_back
(

4806 
d
::
	`make_
(d::
	`gex
(
n
), std::
	`move
(
hdr
)));

4807  *
this
;

4808 
	}
}

4810 
le
 
bo
 
	gSv
::
	$t_ba_d
(cڡ 
d
::
rg
 &
d
,

4811 cڡ 
d
::
rg
 &
mou_pot
) {

4812  
	`t_mou_pot
(
mou_pot
, 
d
);

4813 
	}
}

4815 
le
 
bo
 
	gSv
::
	$t_mou_pot
(cڡ 
d
::
rg
 &
mou_pot
,

4816 cڡ 
d
::
rg
 &
d
, 
Hds
 
hds
) {

4817 i(
da
::
	`is_d
(
d
)) {

4818 
d
::
rg
 
m
 = !
mou_pot
.
	`emy
() ? mount_point : "/";

4819 i(!
m
.
	`emy
() && mnt[0] == '/') {

4820 
ba_ds_
.
	`push_back
({
m
, 
d
, 
d
::
	`move
(
hds
)});

4821  
ue
;

4824  
l
;

4825 
	}
}

4827 
le
 
bo
 
	gSv
::
	$move_mou_pot
(cڡ 
d
::
rg
 &
mou_pot
) {

4828 aut

 = 
ba_ds_
.
	`beg
(); i!ba_ds_.
	`d
(); ++it) {

4829 i(

->
mou_pot
 == mount_point) {

4830 
ba_ds_
.
	`a
(

);

4831  
ue
;

4834  
l
;

4835 
	}
}

4837 
le
 
	gSv
 &

4838 
	gSv
::
	$t_fe_exnsi_d_mimy_mpg
(cڡ *
ext
,

4839 cڡ *
mime
) {

4840 
fe_exnsi_d_mimy_m_
[
ext
] = 
mime
;

4841  *
this
;

4842 
	}
}

4844 
le
 
	gSv
 &Sv::
	$t_fe_que_hdr
(
Hdr
 
hdr
) {

4845 
fe_que_hdr_
 = 
d
::
	`move
(
hdr
);

4846  *
this
;

4847 
	}
}

4849 
le
 
	gSv
 &Sv::
	$t_r_hdr
(
HdrWhReڣ
 
hdr
) {

4850 
r_hdr_
 = 
d
::
	`move
(
hdr
);

4851  *
this
;

4852 
	}
}

4854 
le
 
	gSv
 &Sv::
	$t_r_hdr
(
Hdr
 
hdr
) {

4855 
r_hdr_
 = [
hdr
](cڡ 
Reque
 &
q
, 
Reڣ
 &
s
) {

4856 
	`hdr
(
q
, 
s
);

4857  
HdrReڣ
::
Hdd
;

4859  *
this
;

4860 
	}
}

4862 
le
 
	gSv
 &Sv::
	$t_exi_hdr
(
ExiHdr
 
hdr
) {

4863 
exi_hdr_
 = 
d
::
	`move
(
hdr
);

4864  *
this
;

4865 
	}
}

4867 
le
 
	gSv
 &Sv::
	$t_e_routg_hdr
(
HdrWhReڣ
 
hdr
) {

4868 
e_routg_hdr_
 = 
d
::
	`move
(
hdr
);

4869  *
this
;

4870 
	}
}

4872 
le
 
	gSv
 &Sv::
	$t_po_routg_hdr
(
Hdr
 
hdr
) {

4873 
po_routg_hdr_
 = 
d
::
	`move
(
hdr
);

4874  *
this
;

4875 
	}
}

4877 
le
 
	gSv
 &Sv::
	$t_logg
(
Logg
 
logg
) {

4878 
logg_
 = 
d
::
	`move
(
logg
);

4879  *
this
;

4880 
	}
}

4882 
le
 
	gSv
 &

4883 
	gSv
::
	$t_ex_100_ctue_hdr
(
Ex100CtueHdr
 
hdr
) {

4884 
ex_100_ctue_hdr_
 = 
d
::
	`move
(
hdr
);

4886  *
this
;

4887 
	}
}

4889 
le
 
	gSv
 &Sv::
	$t_addss_my
(
my
) {

4890 
addss_my_
 = 
my
;

4891  *
this
;

4892 
	}
}

4894 
le
 
	gSv
 &Sv::
	$t_t_noday
(
bo
 

) {

4895 
t_noday_
 = 

;

4896  *
this
;

4897 
	}
}

4899 
le
 
	gSv
 &Sv::
	$t_sock_tis
(
SockOis
 
sock_tis
) {

4900 
sock_tis_
 = 
d
::
	`move
(
sock_tis
);

4901  *
this
;

4902 
	}
}

4904 
le
 
	gSv
 &Sv::
	$t_deu_hds
(
Hds
 
hds
) {

4905 
deu_hds_
 = 
d
::
	`move
(
hds
);

4906  *
this
;

4907 
	}
}

4909 
le
 
	gSv
 &Sv::
	$t_kp_ive_max_cou
(
size_t
 
cou
) {

4910 
kp_ive_max_cou_
 = 
cou
;

4911  *
this
;

4912 
	}
}

4914 
le
 
	gSv
 &Sv::
	$t_kp_ive_timeout
(
time_t
 
c
) {

4915 
kp_ive_timeout_c_
 = 
c
;

4916  *
this
;

4917 
	}
}

4919 
le
 
	gSv
 &Sv::
	$t_ad_timeout
(
time_t
 
c
,ime_
uc
) {

4920 
ad_timeout_c_
 = 
c
;

4921 
ad_timeout_uc_
 = 
uc
;

4922  *
this
;

4923 
	}
}

4925 
le
 
	gSv
 &Sv::
	$t_wre_timeout
(
time_t
 
c
,ime_
uc
) {

4926 
wre_timeout_c_
 = 
c
;

4927 
wre_timeout_uc_
 = 
uc
;

4928  *
this
;

4929 
	}
}

4931 
le
 
	gSv
 &Sv::
	$t_id_rv
(
time_t
 
c
,ime_
uc
) {

4932 
id_rv_c_
 = 
c
;

4933 
id_rv_uc_
 = 
uc
;

4934  *
this
;

4935 
	}
}

4937 
le
 
	gSv
 &Sv::
	$t_yld_max_ngth
(
size_t
 
ngth
) {

4938 
yld_max_ngth_
 = 
ngth
;

4939  *
this
;

4940 
	}
}

4942 
le
 
bo
 
	gSv
::
	$bd_to_pt
(cڡ *
ho
, 
pt
, 
sock_ags
) {

4943 i(
	`bd_
(
ho
, 
pt
, 
sock_ags
< 0 
l
;

4944  
ue
;

4945 
	}
}

4946 
le
 
	gSv
::
	$bd_to_y_pt
(cڡ *
ho
, 
sock_ags
) {

4947  
	`bd_
(
ho
, 0, 
sock_ags
);

4948 
	}
}

4950 
le
 
bo
 
	gSv
::
	$li_a_bd
({  
	`li_
(); 
	}
}

4952 
le
 
bo
 
	gSv
::
	$li
(cڡ *
ho
, 
pt
, 
sock_ags
) {

4953  
	`bd_to_pt
(
ho
, 
pt
, 
sock_ags
&& 
	`li_
();

4954 
	}
}

4956 
le
 
bo
 
	gSv
::
	$is_rug
(cڡ {  
is_rug_
; 
	}
}

4958 
le
 
	gSv
::
	$
() {

4959 i(
is_rug_
) {

4960 
	`as
(
svr_sock_
 !
INVALID_SOCKET
);

4961 
d
::
omic
<
sock_t
> 
	`sock
(
svr_sock_
.
	`exchge
(
INVALID_SOCKET
));

4962 
da
::
	`shutdown_sock
(
sock
);

4963 
da
::
	`o_sock
(
sock
);

4965 
	}
}

4967 
le
 
bo
 
	gSv
::
	$r_que_le
(cڡ *
s
, 
Reque
 &
q
) {

4968 aut
n
 = 
	`
(
s
);

4969 i(
n
 < 2 || 
s
[- 2] !'\r' || s[- 1] !'\n'{  
l
; }

4970 
n
 -= 2;

4973 
size_t
 
cou
 = 0;

4975 
da
::
	`l
(
s
, s + 
n
, ' ', [&](cڡ *
b
, cڡ *
e
) {

4976 
cou
) {

4977 0: 
q
.
mhod
 = 
d
::
	`rg
(
b
, 
e
); ;

4978 1: 
q
.
rg
 = 
d
::
	`rg
(
b
, 
e
); ;

4979 2: 
q
.
vsi
 = 
d
::
	`rg
(
b
, 
e
); ;

4982 
cou
++;

4985 i(
cou
 !3{  
l
; }

4988 cڡ 
d
::
t
<d::
rg
> 
mhods
{

4992 i(
mhods
.
	`fd
(
q
.
mhod
=mhods.
	`d
(){  
l
; }

4994 i(
q
.
vsi
 !"HTTP/1.1" &&eq.vsi !"HTTP/1.0"{  
l
; }

4998 
size_t
 
i
 = 0; i < 
q
.
rg
.
	`size
(); i++) {

4999 i(
q
.
rg
[
i
] == '#') {

5000 
q
.
rg
.
	`a
(
i
);

5005 
size_t
 
cou
 = 0;

5007 
da
::
	`l
(
q
.
rg
.
	`da
(),eq.rg.da(+eq.rg.
	`size
(), '?',

5008 [&](cڡ *
b
, cڡ *
e
) {

5009 
cou
) {

5011 
q
.
th
 = 
da
::
	`decode_u
(
d
::
	`rg
(
b
, 
e
), 
l
);

5014 i(
e
 - 
b
 > 0) {

5015 
da
::
	`r_quy_xt
(
d
::
	`rg
(
b
, 
e
), 
q
.
ms
);

5021 
cou
++;

5024 i(
cou
 > 2{  
l
; }

5027  
ue
;

5028 
	}
}

5030 
le
 
bo
 
	gSv
::
	$wre_ڣ
(
Sm
 &
rm
, 
bo
 
o_ci
,

5031 cڡ 
Reque
 &
q
, 
Reڣ
 &
s
) {

5032  
	`wre_ڣ_ce
(
rm
, 
o_ci
, 
q
, 
s
, 
l
);

5033 
	}
}

5035 
le
 
bo
 
	gSv
::
	$wre_ڣ_wh_cڋ
(
Sm
 &
rm
,

5036 
bo
 
o_ci
,

5037 cڡ 
Reque
 &
q
,

5038 
Reڣ
 &
s
) {

5039  
	`wre_ڣ_ce
(
rm
, 
o_ci
, 
q
, 
s
, 
ue
);

5040 
	}
}

5042 
le
 
bo
 
	gSv
::
	$wre_ڣ_ce
(
Sm
 &
rm
, 
bo
 
o_ci
,

5043 cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

5044 
bo
 
ed_y_nges
) {

5045 
	`as
(
s
.
us
 != -1);

5047 i(400 <
s
.
us
 && 
r_hdr_
 &&

5048 
	`r_hdr_
(
q
, 
s
=
HdrReڣ
::
Hdd
) {

5049 
ed_y_nges
 = 
ue
;

5052 
d
::
rg
 
cڋ_ty
;

5053 
d
::
rg
 
boundy
;

5054 i(
ed_y_nges
{ 
	`y_nges
(
q
, 
s
, 
cڋ_ty
, 
boundy
); }

5057 i(
o_ci
 || 
q
.
	`g_hd_vue
("Connection") == "close") {

5058 
s
.
	`t_hd
("Connection", "close");

5060 
d
::
rgam
 
ss
;

5061 
ss
 << "timeout=" << 
kp_ive_timeout_c_


5062 << ", max=" << 
kp_ive_max_cou_
;

5063 
s
.
	`t_hd
("Kp-Alive", 
ss
.
	`r
());

5066 i(!
s
.
	`has_hd
("Content-Type") &&

5067 (!
s
.
body
.
	`emy
(||es.
cڋ_ngth_
 > 0 ||es.
cڋ_ovid_
)) {

5068 
s
.
	`t_hd
("Content-Type", "text/plain");

5071 i(!
s
.
	`has_hd
("Cڋ-Lgth"&&es.
body
.
	`emy
() &&

5072 !
s
.
cڋ_ngth_
 && !s.
cڋ_ovid_
) {

5073 
s
.
	`t_hd
("Content-Length", "0");

5076 i(!
s
.
	`has_hd
("Ac-Rges"&& 
q
.
mhod
 == "HEAD") {

5077 
s
.
	`t_hd
("Accept-Ranges", "bytes");

5080 i(
po_routg_hdr_
{ 
	`po_routg_hdr_
(
q
, 
s
); }

5084 
da
::
BufrSm
 
brm
;

5086 i(!
brm
.
	`wre_fm
("HTTP/1.1 %d %s\r\n", 
s
.
us
,

5087 
da
::
	`us_mesge
(
s
.
us
))) {

5088  
l
;

5091 i(!
da
::
	`wre_hds
(
brm
, 
s
.
hds
){  
l
; }

5094 aut&
da
 = 
brm
.
	`g_bufr
();

5095 
rm
.
	`wre
(
da
.
	`da
(), da.
	`size
());

5099 aut
t
 = 
ue
;

5100 i(
q
.
mhod
 != "HEAD") {

5101 i(!
s
.
body
.
	`emy
()) {

5102 i(!
rm
.
	`wre
(
s
.
body
){ 
t
 = 
l
; }

5103 } i(
s
.
cڋ_ovid_
) {

5104 i(
	`wre_cڋ_wh_ovid
(
rm
, 
q
, 
s
, 
boundy
, 
cڋ_ty
)) {

5105 
s
.
cڋ_ovid_sucss_
 = 
ue
;

5107 
s
.
cڋ_ovid_sucss_
 = 
l
;

5108 
t
 = 
l
;

5114 i(
logg_
{ 
	`logg_
(
q
, 
s
); }

5116  
t
;

5117 
	}
}

5119 
le
 
bo


5120 
	gSv
::
	$wre_cڋ_wh_ovid
(
Sm
 &
rm
, cڡ 
Reque
 &
q
,

5121 
Reڣ
 &
s
, cڡ 
d
::
rg
 &
boundy
,

5122 cڡ 
d
::
rg
 &
cڋ_ty
) {

5123 aut
is_shug_down
 = [
this
]() {

5124  
this
->
svr_sock_
 =
INVALID_SOCKET
;

5127 i(
s
.
cڋ_ngth_
 > 0) {

5128 i(
q
.
nges
.
	`emy
()) {

5129  
da
::
	`wre_cڋ
(
rm
, 
s
.
cڋ_ovid_
, 0,

5130 
s
.
cڋ_ngth_
, 
is_shug_down
);

5131 } i(
q
.
nges
.
	`size
() == 1) {

5132 aut
offts
 =

5133 
da
::
	`g_nge_offt_d_ngth
(
q
, 
s
.
cڋ_ngth_
, 0);

5134 aut
offt
 = 
offts
.
f
;

5135 aut
ngth
 = 
offts
.
cd
;

5136  
da
::
	`wre_cڋ
(
rm
, 
s
.
cڋ_ovid_
, 
offt
, 
ngth
,

5137 
is_shug_down
);

5139  
da
::
	`wre_muɝt_nges_da
(

5140 
rm
, 
q
, 
s
, 
boundy
, 
cڋ_ty
, 
is_shug_down
);

5143 i(
s
.
is_chunked_cڋ_ovid_
) {

5144 aut
ty
 = 
da
::
	`codg_ty
(
q
, 
s
);

5146 
d
::
unique_r
<
da
::
comess
> compressor;

5147 i(
ty
 =
da
::
EncodgTy
::
Gz
) {

5148 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


5149 
comess
 = 
da
::
make_unique
<da::
gz_comess
>();

5151 } i(
ty
 =
da
::
EncodgTy
::
Brli
) {

5152 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


5153 
comess
 = 
da
::
make_unique
<da::
brli_comess
>();

5156 
comess
 = 
da
::
make_unique
<da::
nocomess
>();

5158 
	`as
(
comess
 !
nuαr
);

5160  
da
::
	`wre_cڋ_chunked
(
rm
, 
s
.
cڋ_ovid_
,

5161 
is_shug_down
, *
comess
);

5163  
da
::
	`wre_cڋ_whout_ngth
(
rm
, 
s
.
cڋ_ovid_
,

5164 
is_shug_down
);

5167 
	}
}

5169 
le
 
bo
 
	gSv
::
	$ad_cڋ
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
) {

5170 
MuɝtFmDaM
::

 
cur
;

5171 i(
	`ad_cڋ_ce
(

5172 
rm
, 
q
, 
s
,

5174 [&](cڡ *
buf
, 
size_t
 
n
) {

5175 i(
q
.
body
.
	`size
(+ 
n
 >eq.body.
	`max_size
(){  
l
; }

5176 
q
.
body
.
	`nd
(
buf
, 
n
);

5177  
ue
;

5180 [&](cڡ 
MuɝtFmDa
 &
fe
) {

5181 
cur
 = 
q
.
fes
.
	`ema
(
fe
.
me
, file);

5182  
ue
;

5184 [&](cڡ *
buf
, 
size_t
 
n
) {

5185 aut&
cڋ
 = 
cur
->
cd
.content;

5186 i(
cڋ
.
	`size
(+ 
n
 > cڋ.
	`max_size
(){  
l
; }

5187 
cڋ
.
	`nd
(
buf
, 
n
);

5188  
ue
;

5190 cڡut&
cڋ_ty
 = 
q
.
	`g_hd_vue
("Content-Type");

5191 i(!
cڋ_ty
.
	`fd
("application/x-www-form-urlencoded")) {

5192 i(
q
.
body
.
	`size
(> 
CPPHTTPLIB_REQUEST_URI_MAX_LENGTH
) {

5193 
s
.
us
 = 413;

5194  
l
;

5196 
da
::
	`r_quy_xt
(
q
.
body
,eq.
ms
);

5198  
ue
;

5200  
l
;

5201 
	}
}

5203 
le
 
bo
 
	gSv
::
	$ad_cڋ_wh_cڋ_iv
(

5204 
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
, 
CڋReiv
 
iv
,

5205 
MuɝtCڋHd
 
muɝt_hd
,

5206 
CڋReiv
 
muɝt_iv
) {

5207  
	`ad_cڋ_ce
(
rm
, 
q
, 
s
, 
d
::
	`move
(
iv
),

5208 
d
::
	`move
(
muɝt_hd
),

5209 
d
::
	`move
(
muɝt_iv
));

5210 
	}
}

5212 
le
 
bo
 
	gSv
::
	$ad_cڋ_ce
(
Sm
 &
rm
, 
Reque
 &
q
, 
Reڣ
 &
s
,

5213 
CڋReiv
 
iv
,

5214 
MuɝtCڋHd
 
mul_hd
,

5215 
CڋReiv
 
muɝt_iv
) {

5216 
da
::
MuɝtFmDaPr
 
muɝt_fm_da_rr
;

5217 
CڋReivWhProgss
 
out
;

5219 i(
q
.
	`is_muɝt_fm_da
()) {

5220 cڡut&
cڋ_ty
 = 
q
.
	`g_hd_vue
("Content-Type");

5221 
d
::
rg
 
boundy
;

5222 i(!
da
::
	`r_muɝt_boundy
(
cڋ_ty
, 
boundy
)) {

5223 
s
.
us
 = 400;

5224  
l
;

5227 
muɝt_fm_da_rr
.
	`t_boundy
(
d
::
	`move
(
boundy
));

5228 
out
 = [&](cڡ *
buf
, 
size_t
 
n
, 
ut64_t
 , uint64_t ) {

5240  
muɝt_fm_da_rr
.
	`r
(
buf
, 
n
, 
muɝt_iv
,

5241 
mul_hd
);

5244 
out
 = [
iv
](cڡ *
buf
, 
size_t
 
n
, 
ut64_t
 ,

5245 
ut64_t
 ) {  
	`iv
(
buf
, 
n
); };

5248 i(
q
.
mhod
 ="DELETE" && !q.
	`has_hd
("Content-Length")) {

5249  
ue
;

5252 i(!
da
::
	`ad_cڋ
(
rm
, 
q
, 
yld_max_ngth_
, 
s
.
us
, 
nuαr
,

5253 
out
, 
ue
)) {

5254  
l
;

5257 i(
q
.
	`is_muɝt_fm_da
()) {

5258 i(!
muɝt_fm_da_rr
.
	`is_vid
()) {

5259 
s
.
us
 = 400;

5260  
l
;

5264  
ue
;

5265 
	}
}

5267 
le
 
bo
 
	gSv
::
	$hd_fe_que
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

5268 
bo
 
hd
) {

5269 cڡut&
y
 : 
ba_ds_
) {

5271 i(!
q
.
th
.
	`com
(0, 
y
.
mou_pot
.
	`size
(),ntry.mount_point)) {

5272 
d
::
rg
 
sub_th
 = "/" + 
q
.
th
.
	`subr
(
y
.
mou_pot
.
	`size
());

5273 i(
da
::
	`is_vid_th
(
sub_th
)) {

5274 aut
th
 = 
y
.
ba_d
 + 
sub_th
;

5275 i(
th
.
	`back
() == '/') {ath += "index.html"; }

5277 i(
da
::
	`is_fe
(
th
)) {

5278 
da
::
	`ad_fe
(
th
, 
s
.
body
);

5279 aut
ty
 =

5280 
da
::
	`fd_cڋ_ty
(
th
, 
fe_exnsi_d_mimy_m_
);

5281 i(
ty
{ 
s
.
	`t_hd
("Content-Type",ype); }

5282 cڡut&
kv
 : 
y
.
hds
) {

5283 
s
.
	`t_hd
(
kv
.
f
.
	`c_r
(), kv.
cd
);

5285 
s
.
us
 = 
q
.
	`has_hd
("Range") ? 206 : 200;

5286 i(!
hd
 && 
fe_que_hdr_
) {

5287 
	`fe_que_hdr_
(
q
, 
s
);

5289  
ue
;

5294  
l
;

5295 
	}
}

5297 
le
 
sock_t


5298 
	gSv
::
	$_rv_sock
(cڡ *
ho
, 
pt
, 
sock_ags
,

5299 
SockOis
 
sock_tis
) const {

5300  
da
::
	`_sock
(

5301 
ho
, "", 
pt
, 
addss_my_
, 
sock_ags
, 
t_noday_
,

5302 
d
::
	`move
(
sock_tis
),

5303 [](
sock_t
 
sock
, 
addrfo
 &
ai
-> 
bo
 {

5304 i(::
	`bd
(
sock
, 
ai
.
ai_addr
, 
ic_
<
sockn_t
>i.
ai_add
))) {

5305  
l
;

5307 i(::
	`li
(
sock
, 
CPPHTTPLIB_LISTEN_BACKLOG
){  
l
; }

5308  
ue
;

5310 
	}
}

5312 
le
 
	gSv
::
	$bd_
(cڡ *
ho
, 
pt
, 
sock_ags
) {

5313 i(!
	`is_vid
()) {  -1; }

5315 
svr_sock_
 = 
	`_rv_sock
(
ho
, 
pt
, 
sock_ags
, 
sock_tis_
);

5316 i(
svr_sock_
 =
INVALID_SOCKET
) {  -1; }

5318 i(
pt
 == 0) {

5319 
sockaddr_age
 
addr
;

5320 
sockn_t
 
addr_n
 = (
addr
);

5321 i(
	`gsockme
(
svr_sock_
, 
t_
<
sockaddr
 *>(&
addr
),

5322 &
addr_n
) == -1) {

5325 i(
addr
.
ss_my
 =
AF_INET
) {

5326  
	`ohs
(
t_
<
sockaddr_
 *>(&
addr
)->
s_pt
);

5327 } i(
addr
.
ss_my
 =
AF_INET6
) {

5328  
	`ohs
(
t_
<
sockaddr_6
 *>(&
addr
)->
s6_pt
);

5333  
pt
;

5335 
	}
}

5337 
le
 
bo
 
	gSv
::
	$li_
() {

5338 aut
t
 = 
ue
;

5339 
is_rug_
 = 
ue
;

5342 
d
::
unique_r
<
TaskQueue
> 
	`sk_queue
(
	`w_sk_queue
());

5344 
svr_sock_
 !
INVALID_SOCKET
) {

5345 #ide
_WIN32


5346 i(
id_rv_c_
 > 0 || 
id_rv_uc_
 > 0) {

5348 aut
v
 = 
da
::
	`_ad
(
svr_sock_
, 
id_rv_c_
,

5349 
id_rv_uc_
);

5350 i(
v
 == 0) {

5351 
sk_queue
->
	`_id
();

5354 #ide
_WIN32


5357 
sock_t
 
sock
 = 
	`ac
(
svr_sock_
, 
nuαr
,ullptr);

5359 i(
sock
 =
INVALID_SOCKET
) {

5360 i(
o
 =
EMFILE
) {

5363 
d
::
this_thad
::
	`p_f
(d::
chro
::
	`mlicds
(1));

5366 i(
svr_sock_
 !
INVALID_SOCKET
) {

5367 
da
::
	`o_sock
(
svr_sock_
);

5368 
t
 = 
l
;

5376 #ifde
_WIN32


5377 aut
timeout
 = 
ic_
<
ut32_t
>(
ad_timeout_c_
 * 1000 +

5378 
ad_timeout_uc_
 / 1000);

5379 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, (*)&
timeout
,

5380 (
timeout
));

5382 
timev
 
tv
;

5383 
tv
.
tv_c
 = 
ic_
<>(
ad_timeout_c_
);

5384 
tv
.
tv_uc
 = 
ic_
<
	`dety
v.tv_uc)>(
ad_timeout_uc_
);

5385 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, (*)&
tv
, (tv));

5390 #ifde
_WIN32


5391 aut
timeout
 = 
ic_
<
ut32_t
>(
wre_timeout_c_
 * 1000 +

5392 
wre_timeout_uc_
 / 1000);

5393 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, (*)&
timeout
,

5394 (
timeout
));

5396 
timev
 
tv
;

5397 
tv
.
tv_c
 = 
ic_
<>(
wre_timeout_c_
);

5398 
tv
.
tv_uc
 = 
ic_
<
	`dety
v.tv_uc)>(
wre_timeout_uc_
);

5399 
	`tsockt
(
sock
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, (*)&
tv
, (tv));

5403 #i
__lulus
 > 201703L

5404 
sk_queue
->
	`queue
([=, 
this
]({ 
	`oss_d_o_sock
(
sock
); });

5406 
sk_queue
->
	`queue
([=]({ 
	`oss_d_o_sock
(
sock
); });

5410 
sk_queue
->
	`shutdown
();

5413 
is_rug_
 = 
l
;

5414  
t
;

5415 
	}
}

5417 
le
 
bo
 
	gSv
::
	$routg
(
Reque
 &
q
, 
Reڣ
 &
s
, 
Sm
 &
rm
) {

5418 i(
e_routg_hdr_
 &&

5419 
	`e_routg_hdr_
(
q
, 
s
=
HdrReڣ
::
Hdd
) {

5420  
ue
;

5424 
bo
 
is_hd_que
 = 
q
.
mhod
 == "HEAD";

5425 i((
q
.
mhod
 ="GET" || 
is_hd_que
) &&

5426 
	`hd_fe_que
(
q
, 
s
, 
is_hd_que
)) {

5427  
ue
;

5430 i(
da
::
	`ex_cڋ
(
q
)) {

5433 
CڋRd
 
	`ad
(

5434 [&](
CڋReiv
 
iv
) {

5435  
	`ad_cڋ_wh_cڋ_iv
(

5436 
rm
, 
q
, 
s
, 
d
::
	`move
(
iv
), 
nuαr
,ullptr);

5438 [&](
MuɝtCڋHd
 
hd
, 
CڋReiv
 
iv
) {

5439  
	`ad_cڋ_wh_cڋ_iv
(
rm
, 
q
, 
s
, 
nuαr
,

5440 
d
::
	`move
(
hd
),

5441 
d
::
	`move
(
iv
));

5444 i(
q
.
mhod
 == "POST") {

5445 i(
	`dich_que_f_cڋ_ad
(

5446 
q
, 
s
, 
d
::
	`move
(
ad
),

5447 
po_hdrs_f_cڋ_ad_
)) {

5448  
ue
;

5450 } i(
q
.
mhod
 == "PUT") {

5451 i(
	`dich_que_f_cڋ_ad
(

5452 
q
, 
s
, 
d
::
	`move
(
ad
),

5453 
put_hdrs_f_cڋ_ad_
)) {

5454  
ue
;

5456 } i(
q
.
mhod
 == "PATCH") {

5457 i(
	`dich_que_f_cڋ_ad
(

5458 
q
, 
s
, 
d
::
	`move
(
ad
),

5459 
tch_hdrs_f_cڋ_ad_
)) {

5460  
ue
;

5462 } i(
q
.
mhod
 == "DELETE") {

5463 i(
	`dich_que_f_cڋ_ad
(

5464 
q
, 
s
, 
d
::
	`move
(
ad
),

5465 
de_hdrs_f_cڋ_ad_
)) {

5466  
ue
;

5472 i(!
	`ad_cڋ
(
rm
, 
q
, 
s
){  
l
; }

5476 i(
q
.
mhod
 == "GET" ||eq.method == "HEAD") {

5477  
	`dich_que
(
q
, 
s
, 
g_hdrs_
);

5478 } i(
q
.
mhod
 == "POST") {

5479  
	`dich_que
(
q
, 
s
, 
po_hdrs_
);

5480 } i(
q
.
mhod
 == "PUT") {

5481  
	`dich_que
(
q
, 
s
, 
put_hdrs_
);

5482 } i(
q
.
mhod
 == "DELETE") {

5483  
	`dich_que
(
q
, 
s
, 
de_hdrs_
);

5484 } i(
q
.
mhod
 == "OPTIONS") {

5485  
	`dich_que
(
q
, 
s
, 
tis_hdrs_
);

5486 } i(
q
.
mhod
 == "PATCH") {

5487  
	`dich_que
(
q
, 
s
, 
tch_hdrs_
);

5490 
s
.
us
 = 400;

5491  
l
;

5492 
	}
}

5494 
le
 
bo
 
	gSv
::
	$dich_que
(
Reque
 &
q
, 
Reڣ
 &
s
,

5495 cڡ 
Hdrs
 &
hdrs
) {

5496 cڡut&
x
 : 
hdrs
) {

5497 cڡut&
n
 = 
x
.
f
;

5498 cڡut&
hdr
 = 
x
.
cd
;

5500 i(
d
::
	`gex_mch
(
q
.
th
,eq.
mches
, 
n
)) {

5501 
	`hdr
(
q
, 
s
);

5502  
ue
;

5505  
l
;

5506 
	}
}

5508 
le
 
	gSv
::
	$y_nges
(cڡ 
Reque
 &
q
, 
Reڣ
 &
s
,

5509 
d
::
rg
 &
cڋ_ty
,

5510 
d
::
rg
 &
boundy
) {

5511 i(
q
.
nges
.
	`size
() > 1) {

5512 
boundy
 = 
da
::
	`make_muɝt_da_boundy
();

5514 aut

 = 
s
.
hds
.
	`fd
("Content-Type");

5515 i(

 !
s
.
hds
.
	`d
()) {

5516 
cڋ_ty
 = 

->
cd
;

5517 
s
.
hds
.
	`a
(

);

5520 
s
.
hds
.
	`ema
("Content-Type",

5521 "muɝt/bynges; boundy=" + 
boundy
);

5524 aut
ty
 = 
da
::
	`codg_ty
(
q
, 
s
);

5526 i(
s
.
body
.
	`emy
()) {

5527 i(
s
.
cڋ_ngth_
 > 0) {

5528 
size_t
 
ngth
 = 0;

5529 i(
q
.
nges
.
	`emy
()) {

5530 
ngth
 = 
s
.
cڋ_ngth_
;

5531 } i(
q
.
nges
.
	`size
() == 1) {

5532 aut
offts
 =

5533 
da
::
	`g_nge_offt_d_ngth
(
q
, 
s
.
cڋ_ngth_
, 0);

5534 aut
offt
 = 
offts
.
f
;

5535 
ngth
 = 
offts
.
cd
;

5536 aut
cڋ_nge
 = 
da
::
	`make_cڋ_nge_hd_fld
(

5537 
offt
, 
ngth
, 
s
.
cڋ_ngth_
);

5538 
s
.
	`t_hd
("Cڋ-Rge", 
cڋ_nge
);

5540 
ngth
 = 
da
::
	`g_muɝt_nges_da_ngth
(
q
, 
s
, 
boundy
,

5541 
cڋ_ty
);

5543 
s
.
	`t_hd
("Cڋ-Lgth", 
d
::
	`to_rg
(
ngth
));

5545 i(
s
.
cڋ_ovid_
) {

5546 i(
s
.
is_chunked_cڋ_ovid_
) {

5547 
s
.
	`t_hd
("Transfer-Encoding", "chunked");

5548 i(
ty
 =
da
::
EncodgTy
::
Gz
) {

5549 
s
.
	`t_hd
("Content-Encoding", "gzip");

5550 } i(
ty
 =
da
::
EncodgTy
::
Brli
) {

5551 
s
.
	`t_hd
("Content-Encoding", "br");

5557 i(
q
.
nges
.
	`emy
()) {

5559 } i(
q
.
nges
.
	`size
() == 1) {

5560 aut
offts
 =

5561 
da
::
	`g_nge_offt_d_ngth
(
q
, 
s
.
body
.
	`size
(), 0);

5562 aut
offt
 = 
offts
.
f
;

5563 aut
ngth
 = 
offts
.
cd
;

5564 aut
cڋ_nge
 = 
da
::
	`make_cڋ_nge_hd_fld
(

5565 
offt
, 
ngth
, 
s
.
body
.
	`size
());

5566 
s
.
	`t_hd
("Cڋ-Rge", 
cڋ_nge
);

5567 i(
offt
 < 
s
.
body
.
	`size
()) {

5568 
s
.
body
 =es.body.
	`subr
(
offt
, 
ngth
);

5570 
s
.
body
.
	`r
();

5571 
s
.
us
 = 416;

5574 
d
::
rg
 
da
;

5575 i(
da
::
	`make_muɝt_nges_da
(
q
, 
s
, 
boundy
, 
cڋ_ty
,

5576 
da
)) {

5577 
s
.
body
.
	`sw
(
da
);

5579 
s
.
body
.
	`r
();

5580 
s
.
us
 = 416;

5584 i(
ty
 !
da
::
EncodgTy
::
Ne
) {

5585 
d
::
unique_r
<
da
::
comess
> compressor;

5586 
d
::
rg
 
cڋ_codg
;

5588 i(
ty
 =
da
::
EncodgTy
::
Gz
) {

5589 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


5590 
comess
 = 
da
::
make_unique
<da::
gz_comess
>();

5591 
cڋ_codg
 = "gzip";

5593 } i(
ty
 =
da
::
EncodgTy
::
Brli
) {

5594 #ifde
CPPHTTPLIB_BROTLI_SUPPORT


5595 
comess
 = 
da
::
make_unique
<da::
brli_comess
>();

5596 
cڋ_codg
 = "br";

5600 i(
comess
) {

5601 
d
::
rg
 
comesd
;

5602 i(
comess
->
	`comess
(
s
.
body
.
	`da
(),es.body.
	`size
(), 
ue
,

5603 [&](cڡ *
da
, 
size_t
 
da_n
) {

5604 
comesd
.
	`nd
(
da
, 
da_n
);

5605  
ue
;

5607 
s
.
body
.
	`sw
(
comesd
);

5608 
s
.
	`t_hd
("Cڋ-Encodg", 
cڋ_codg
);

5613 aut
ngth
 = 
d
::
	`to_rg
(
s
.
body
.
	`size
());

5614 
s
.
	`t_hd
("Cڋ-Lgth", 
ngth
);

5616 
	}
}

5618 
le
 
bo
 
	gSv
::
	$dich_que_f_cڋ_ad
(

5619 
Reque
 &
q
, 
Reڣ
 &
s
, 
CڋRd
 
cڋ_ad
,

5620 cڡ 
HdrsFCڋRd
 &
hdrs
) {

5621 cڡut&
x
 : 
hdrs
) {

5622 cڡut&
n
 = 
x
.
f
;

5623 cڡut&
hdr
 = 
x
.
cd
;

5625 i(
d
::
	`gex_mch
(
q
.
th
,eq.
mches
, 
n
)) {

5626 
	`hdr
(
q
, 
s
, 
cڋ_ad
);

5627  
ue
;

5630  
l
;

5631 
	}
}

5633 
le
 
bo


5634 
	gSv
::
oss_que
(
Sm
 &
rm
, 
bo
 
o_ci
,

5635 
bo
 &
ci_od
,

5636 cڡ 
d
::
funi
<(
Reque
 &)> &
tup_que
) {

5637 
d
::
y
<, 2048> 
	gbuf
{};

5639 
	gda
::
am_le_ad
 
le_ad
(
rm
, 
buf
.
da
(), buf.
size
());

5642 i(!
	gle_ad
.
gle
(){  
	gl
; }

5644 
Reque
 
	gq
;

5645 
Reڣ
 
	gs
;

5647 
	gs
.
	gvsi
 = "HTTP/1.1";

5649 cڡut&
	ghd
 : 
deu_hds_
) {

5650 i(
s
.
hds
.
fd
(
hd
.
f
=s.hds.
d
()) {

5651 
s
.
hds
.

(
hd
);

5655 #ifde
_WIN32


5658 #ide
CPPHTTPLIB_USE_POLL


5660 i(
	grm
.
sock
(>
FD_SETSIZE
) {

5661 
Hds
 
dummy
;

5662 
	gda
::
ad_hds
(
rm
, 
dummy
);

5663 
	gs
.
	gus
 = 500;

5664  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5670 i(
	gle_ad
.
size
(> 
	gCPPHTTPLIB_REQUEST_URI_MAX_LENGTH
) {

5671 
Hds
 
	gdummy
;

5672 
	gda
::
ad_hds
(
rm
, 
dummy
);

5673 
	gs
.
	gus
 = 414;

5674  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5678 i(!
r_que_le
(
le_ad
.
r
(), 
q
) ||

5679 !
	gda
::
ad_hds
(
rm
, 
q
.
hds
)) {

5680 
	gs
.
	gus
 = 400;

5681  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5684 i(
	gq
.
g_hd_vue
("Connection") == "close") {

5685 
ci_od
 = 
ue
;

5688 i(
	gq
.
	gvsi
 == "HTTP/1.0" &&

5689 
q
.
g_hd_vue
("Connection") != "Keep-Alive") {

5690 
ci_od
 = 
ue
;

5693 
	grm
.
g_me__d_pt
(
q
.
me_addr
,eq.
me_pt
);

5694 
	gq
.
t_hd
("REMOTE_ADDR", 
q
.
me_addr
);

5695 
	gq
.
t_hd
("REMOTE_PORT", 
d
::
to_rg
(
q
.
me_pt
));

5697 i(
	gq
.
has_hd
("Range")) {

5698 cڡut&
	gnge_hd_vue
 = 
q
.
g_hd_vue
("Range");

5699 i(!
	gda
::
r_nge_hd
(
nge_hd_vue
, 
q
.
nges
)) {

5700 
	gs
.
	gus
 = 416;

5701  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5705 i(
	gtup_que
{ 
tup_que
(
q
); }

5707 i(
	gq
.
g_hd_vue
("Expect") == "100-continue") {

5708 aut
us
 = 100;

5709 i(
	gex_100_ctue_hdr_
) {

5710 
	gus
 = 
ex_100_ctue_hdr_
(
q
, 
s
);

5712 
	gus
) {

5715 
rm
.
wre_fm
("HTTP/1.1 %d %s\r\n\r\n", 
us
,

5716 
da
::
us_mesge
(
us
));

5718 :  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5723 
bo
 
	groud
 = 
l
;

5724 #ifde
CPPHTTPLIB_NO_EXCEPTIONS


5725 
	groud
 = 
routg
(
q
, 
s
, 
rm
);

5727 
	gy
 {

5728 
	groud
 = 
routg
(
q
, 
s
, 
rm
);

5729 } 
tch
 (
d
::
exi
 &
e
) {

5730 i(
exi_hdr_
) {

5731 
exi_hdr_
(
q
, 
s
, 
e
);

5732 
	groud
 = 
ue
;

5734 
	gs
.
	gus
 = 500;

5735 
	gs
.
t_hd
("EXCEPTION_WHAT", 
e
.
wh
());

5737 } 
tch
 (...) {

5738 
	gs
.
	gus
 = 500;

5739 
	gs
.
t_hd
("EXCEPTION_WHAT", "UNKNOWN");

5743 i(
	groud
) {

5744 i(
	gs
.
	gus
 =-1{ 
s
.
us
 = 
q
.
nges
.
emy
() ? 200 : 206; }

5745  
wre_ڣ_wh_cڋ
(
rm
, 
o_ci
, 
q
, 
s
);

5747 i(
	gs
.
	gus
 =-1{ 
s
.
us
 = 404; }

5748  
wre_ڣ
(
rm
, 
o_ci
, 
q
, 
s
);

5752 
le
 
bo
 
	gSv
::
	$is_vid
(cڡ {  
ue
; 
	}
}

5754 
le
 
bo
 
	gSv
::
	$oss_d_o_sock
(
sock_t
 
sock
) {

5755 aut
t
 = 
da
::
	`oss_rv_sock
(

5756 
svr_sock_
, 
sock
, 
kp_ive_max_cou_
, 
kp_ive_timeout_c_
,

5757 
ad_timeout_c_
, 
ad_timeout_uc_
, 
wre_timeout_c_
,

5758 
wre_timeout_uc_
,

5759 [
this
](
Sm
 &
rm
, 
bo
 
o_ci
, bo &
ci_od
) {

5760  
	`oss_que
(
rm
, 
o_ci
, 
ci_od
,

5761 
nuαr
);

5764 
da
::
	`shutdown_sock
(
sock
);

5765 
da
::
	`o_sock
(
sock
);

5766  
t
;

5767 
	}
}

5770 
le
 
	gClIm
::
	$ClIm
(cڡ 
d
::
rg
 &
ho
)

5771 : 
	`ClIm
(
ho
, 80, 
d
::
	`rg
(), std::
	$rg
(){
	}
}

5773 
le
 
ClIm
::
	$ClIm
(cڡ 
d
::
rg
 &
ho
, 
pt
)

5774 : 
	`ClIm
(
ho
, 
pt
, 
d
::
	`rg
(), std::
	$rg
(){
	}
}

5776 
le
 
ClIm
::
	$ClIm
(cڡ 
d
::
rg
 &
ho
, 
pt
,

5777 cڡ 
d
::
rg
 &
__th
,

5778 cڡ 
d
::
rg
 &
_key_th
)

5779 : 
	`ho_
(
ho
), 
	`pt_
(
pt
),

5780 
	`ho_d_pt_
(
	`adju_ho_rg
(
ho
+ ":" + 
d
::
	`to_rg
(
pt
)),

5781 
	`__th_
(
__th
), 
	$_key_th_
(
_key_th
{
	}
}

5783 
le
 
	gClIm
::~
	$ClIm
() {

5784 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

5785 
	`shutdown_sock
(
sock_
);

5786 
	`o_sock
(
sock_
);

5787 
	}
}

5789 
le
 
bo
 
	gClIm
::
	$is_vid
(cڡ {  
ue
; 
	}
}

5791 
le
 
	gClIm
::
	$cy_gs
(cڡ 
ClIm
 &
rhs
) {

5792 
__th_
 = 
rhs
.client_cert_path_;

5793 
_key_th_
 = 
rhs
.client_key_path_;

5794 
ci_timeout_c_
 = 
rhs
.connection_timeout_sec_;

5795 
ad_timeout_c_
 = 
rhs
.read_timeout_sec_;

5796 
ad_timeout_uc_
 = 
rhs
.read_timeout_usec_;

5797 
wre_timeout_c_
 = 
rhs
.write_timeout_sec_;

5798 
wre_timeout_uc_
 = 
rhs
.write_timeout_usec_;

5799 
basic_auth_uame_
 = 
rhs
.basic_auth_username_;

5800 
basic_auth_sswd_
 = 
rhs
.basic_auth_password_;

5801 
br_tok_auth_tok_
 = 
rhs
.bearer_token_auth_token_;

5802 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5803 
dige_auth_uame_
 = 
rhs
.digest_auth_username_;

5804 
dige_auth_sswd_
 = 
rhs
.digest_auth_password_;

5806 
kp_ive_
 = 
rhs
.keep_alive_;

5807 
flow_loti_
 = 
rhs
.follow_location_;

5808 
u_code_
 = 
rhs
.url_encode_;

5809 
addss_my_
 = 
rhs
.address_family_;

5810 
t_noday_
 = 
rhs
.tcp_nodelay_;

5811 
sock_tis_
 = 
rhs
.socket_options_;

5812 
comess_
 = 
rhs
.compress_;

5813 
decomess_
 = 
rhs
.decompress_;

5814 
r_
 = 
rhs
.interface_;

5815 
oxy_ho_
 = 
rhs
.proxy_host_;

5816 
oxy_pt_
 = 
rhs
.proxy_port_;

5817 
oxy_basic_auth_uame_
 = 
rhs
.proxy_basic_auth_username_;

5818 
oxy_basic_auth_sswd_
 = 
rhs
.proxy_basic_auth_password_;

5819 
oxy_br_tok_auth_tok_
 = 
rhs
.proxy_bearer_token_auth_token_;

5820 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5821 
oxy_dige_auth_uame_
 = 
rhs
.proxy_digest_auth_username_;

5822 
oxy_dige_auth_sswd_
 = 
rhs
.proxy_digest_auth_password_;

5824 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5825 
__fe_th_
 = 
rhs
.ca_cert_file_path_;

5826 
__d_th_
 = 
rhs
.ca_cert_dir_path_;

5827 
__e_
 = 
rhs
.ca_cert_store_;

5829 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5830 
rv_ifi_vifiti_
 = 
rhs
.server_certificate_verification_;

5832 
logg_
 = 
rhs
.logger_;

5833 
	}
}

5835 
le
 
sock_t
 
	gClIm
::
	$__sock
(
E
 &
r
) const {

5836 i(!
oxy_ho_
.
	`emy
(&& 
oxy_pt_
 != -1) {

5837  
da
::
	`__sock
(

5838 
oxy_ho_
.
	`c_r
(), "", 
oxy_pt_
, 
addss_my_
, 
t_noday_
,

5839 
sock_tis_
, 
ci_timeout_c_
, 
ci_timeout_uc_
,

5840 
ad_timeout_c_
, 
ad_timeout_uc_
, 
wre_timeout_c_
,

5841 
wre_timeout_uc_
, 
r_
, 
r
);

5845 
d
::
rg
 

;

5846 aut

 = 
addr_m_
.
	`fd
(
ho_
);

5847 i(

 !
addr_m_
.
	`d
()

 = it->
cd
;

5849  
da
::
	`__sock
(

5850 
ho_
.
	`c_r
(), 

.c_r(), 
pt_
, 
addss_my_
, 
t_noday_
,

5851 
sock_tis_
, 
ci_timeout_c_
, 
ci_timeout_uc_
,

5852 
ad_timeout_c_
, 
ad_timeout_uc_
, 
wre_timeout_c_
,

5853 
wre_timeout_uc_
, 
r_
, 
r
);

5854 
	}
}

5856 
le
 
bo
 
	gClIm
::
	$_d_c_sock
(
Sock
 &
sock
,

5857 
E
 &
r
) {

5858 aut
sock
 = 
	`__sock
(
r
);

5859 i(
sock
 =
INVALID_SOCKET
{  
l
; }

5860 
sock
.
sock
 = sock;

5861  
ue
;

5862 
	}
}

5864 
le
 
	gClIm
::
	$shutdown_s
(
Sock
 & ,

5865 
bo
 ) {

5868 
	`as
(
sock_ques__ight_
 == 0 ||

5869 
sock_ques_e_om_thad_
 =
d
::
this_thad
::
	`g_id
());

5870 
	}
}

5872 
le
 
	gClIm
::
	$shutdown_sock
(
Sock
 &
sock
) {

5873 i(
sock
.
sock
 =
INVALID_SOCKET
) { ; }

5874 
da
::
	`shutdown_sock
(
sock
.
sock
);

5875 
	}
}

5877 
le
 
	gClIm
::
	$o_sock
(
Sock
 &
sock
) {

5884 
	`as
(
sock_ques__ight_
 == 0 ||

5885 
sock_ques_e_om_thad_
 =
d
::
this_thad
::
	`g_id
());

5888 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5889 
	`as
(
sock
.
s
 =
nuαr
);

5891 i(
sock
.
sock
 =
INVALID_SOCKET
) { ; }

5892 
da
::
	`o_sock
(
sock
.
sock
);

5893 
sock
.
sock
 = 
INVALID_SOCKET
;

5894 
	}
}

5896 
le
 
bo
 
	gClIm
::
	$ad_ڣ_le
(
Sm
 &
rm
, cڡ 
Reque
 &
q
,

5897 
Reڣ
 &
s
) {

5898 
d
::
y
<, 2048> 
buf
{};

5900 
da
::
am_le_ad
 
	`le_ad
(
rm
, 
buf
.
	`da
(), buf.
	`size
());

5902 i(!
le_ad
.
	`gle
(){  
l
; }

5904 #ifde
CPPHTTPLIB_ALLOW_LF_AS_LINE_TERMINATOR


5905 cڡ 
d
::
gex
 
	`
("(HTTP/1\\.[01]) (\\d{3})(?: (.*?))?\r\n");

5907 cڡ 
d
::
gex
 
	`
("(HTTP/1\\.[01]) (\\d{3})(?: (.*?))?\r?\n");

5910 
d
::
cmch
 
m
;

5911 i(!
d
::
	`gex_mch
(
le_ad
.
	`r
(), 
m
, 

)) {

5912  
q
.
mhod
 == "CONNECT";

5914 
s
.
vsi
 = 
d
::
	`rg
(
m
[1]);

5915 
s
.
us
 = 
d
::
	`oi
(d::
	`rg
(
m
[2]));

5916 
s
.
as
 = 
d
::
	`rg
(
m
[3]);

5919 
s
.
us
 == 100) {

5920 i(!
le_ad
.
	`gle
(){  
l
; }

5921 i(!
le_ad
.
	`gle
(){  
l
; }

5923 i(!
d
::
	`gex_mch
(
le_ad
.
	`r
(), 
m
, 

){  
l
; }

5924 
s
.
vsi
 = 
d
::
	`rg
(
m
[1]);

5925 
s
.
us
 = 
d
::
	`oi
(d::
	`rg
(
m
[2]));

5926 
s
.
as
 = 
d
::
	`rg
(
m
[3]);

5929  
ue
;

5930 
	}
}

5932 
le
 
bo
 
	gClIm
::
	$nd
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
) {

5933 
d
::
lock_gud
<d::
cursive_mux
> 
	`que_mux_gud
(
que_mux_
);

5936 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

5940 
sock_should_be_od_wh_que_is_de_
 = 
l
;

5942 aut
is_ive
 = 
l
;

5943 i(
sock_
.
	`is_ݒ
()) {

5944 
is_ive
 = 
da
::
	`is_sock_ive
(
sock_
.
sock
);

5945 i(!
is_ive
) {

5950 cڡ 
bo
 
shutdown_gfuy
 = 
l
;

5951 
	`shutdown_s
(
sock_
, 
shutdown_gfuy
);

5952 
	`shutdown_sock
(
sock_
);

5953 
	`o_sock
(
sock_
);

5957 i(!
is_ive
) {

5958 i(!
	`_d_c_sock
(
sock_
, 
r
){  
l
; }

5960 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


5962 i(
	`is_s
()) {

5963 aut&
si
 = 
ic_
<
SSLCl
 &>(*
this
);

5964 i(!
oxy_ho_
.
	`emy
(&& 
oxy_pt_
 != -1) {

5965 
bo
 
sucss
 = 
l
;

5966 i(!
si
.
	`c_wh_oxy
(
sock_
, 
s
, 
sucss
, 
r
)) {

5967  
sucss
;

5971 i(!
si
.
	`lize_s
(
sock_
, 
r
){  
l
; }

5979 i(
sock_ques__ight_
 > 1) {

5980 
	`as
(
sock_ques_e_om_thad_
 =
d
::
this_thad
::
	`g_id
());

5982 
sock_ques__ight_
 += 1;

5983 
sock_ques_e_om_thad_
 = 
d
::
this_thad
::
	`g_id
();

5986 cڡut&
hd
 : 
deu_hds_
) {

5987 i(
q
.
hds
.
	`fd
(
hd
.
f
=q.hds.
	`d
()) {

5988 
q
.
hds
.
	`
(
hd
);

5992 aut
o_ci
 = !
kp_ive_
;

5993 aut
t
 = 
	`oss_sock
(
sock_
, [&](
Sm
 &
rm
) {

5994  
	`hd_que
(
rm
, 
q
, 
s
, 
o_ci
, 
r
);

5999 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

6000 
sock_ques__ight_
 -= 1;

6001 i(
sock_ques__ight_
 <= 0) {

6002 
	`as
(
sock_ques__ight_
 == 0);

6003 
sock_ques_e_om_thad_
 = 
d
::
thad
::
	`id
();

6006 i(
sock_should_be_od_wh_que_is_de_
 || 
o_ci
 ||

6007 !
t
) {

6008 
	`shutdown_s
(
sock_
, 
ue
);

6009 
	`shutdown_sock
(
sock_
);

6010 
	`o_sock
(
sock_
);

6014 i(!
t
) {

6015 i(
r
 =
E
::
Sucss
{ = E::
Unknown
; }

6018  
t
;

6019 
	}
}

6021 
le
 
Resu
 
	gClIm
::
	$nd
(cڡ 
Reque
 &
q
) {

6022 aut
q2
 = 
q
;

6023  
	`nd_
(
d
::
	`move
(
q2
));

6024 
	}
}

6026 
le
 
Resu
 
	gClIm
::
	$nd_
(
Reque
 &&
q
) {

6027 aut
s
 = 
da
::
make_unique
<
Reڣ
>();

6028 aut
r
 = 
E
::
Sucss
;

6029 aut
t
 = 
	`nd
(
q
, *
s
, 
r
);

6030  
Resu
{
t
 ? 
d
::
	`move
(
s
: 
nuαr
, 
r
, std::move(
q
.
hds
)};

6031 
	}
}

6033 
le
 
bo
 
	gClIm
::
	$hd_que
(
Sm
 &
rm
, 
Reque
 &
q
,

6034 
Reڣ
 &
s
, 
bo
 
o_ci
,

6035 
E
 &
r
) {

6036 i(
q
.
th
.
	`emy
()) {

6037 
r
 = 
E
::
Ci
;

6038  
l
;

6041 aut
q_ve
 = 
q
;

6043 
bo
 
t
;

6045 i(!
	`is_s
(&& !
oxy_ho_
.
	`emy
(&& 
oxy_pt_
 != -1) {

6046 aut
q2
 = 
q
;

6047 
q2
.
th
 = "hp://" + 
ho_d_pt_
 + 
q
.path;

6048 
t
 = 
	`oss_que
(
rm
, 
q2
, 
s
, 
o_ci
, 
r
);

6049 
q
 = 
q2
;

6050 
q
.
th
 = 
q_ve
.path;

6052 
t
 = 
	`oss_que
(
rm
, 
q
, 
s
, 
o_ci
, 
r
);

6055 i(!
t
{  
l
; }

6057 i(300 < 
s
.
us
 &&es.u< 400 && 
flow_loti_
) {

6058 
q
 = 
q_ve
;

6059 
t
 = 
	`de
(
q
, 
s
, 
r
);

6062 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


6063 i((
s
.
us
 == 401 ||es.status == 407) &&

6064 
q
.
authizi_cou_
 < 5) {

6065 aut
is_oxy
 = 
s
.
us
 == 407;

6066 cڡut&
uame
 =

6067 
is_oxy
 ? 
oxy_dige_auth_uame_
 : 
dige_auth_uame_
;

6068 cڡut&
sswd
 =

6069 
is_oxy
 ? 
oxy_dige_auth_sswd_
 : 
dige_auth_sswd_
;

6071 i(!
uame
.
	`emy
(&& !
sswd
.empty()) {

6072 
d
::
m
<d::
rg
, std::rg> 
auth
;

6073 i(
da
::
	`r_www_authti
(
s
, 
auth
, 
is_oxy
)) {

6074 
Reque
 
w_q
 = 
q
;

6075 
w_q
.
authizi_cou_
 += 1;

6076 
w_q
.
hds
.
	`a
(
is_oxy
 ? "Proxy-Authorization"

6078 
w_q
.
hds
.
	`
(
da
::
	`make_dige_authtiti_hd
(

6079 
q
, 
auth
, 
w_q
.
authizi_cou_
, 
da
::
	`ndom_rg
(10),

6080 
uame
, 
sswd
, 
is_oxy
));

6082 
Reڣ
 
w_s
;

6084 
t
 = 
	`nd
(
w_q
, 
w_s
, 
r
);

6085 i(
t
{ 
s
 = 
w_s
; }

6091  
t
;

6092 
	}
}

6094 
le
 
bo
 
	gClIm
::
	$de
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
) {

6095 i(
q
.
de_cou_
 == 0) {

6096 
r
 = 
E
::
ExedRedeCou
;

6097  
l
;

6100 aut
loti
 = 
da
::
	`decode_u
(
s
.
	`g_hd_vue
("loti"), 
ue
);

6101 i(
loti
.
	`emy
(){  
l
; }

6103 cڡ 
d
::
gex
 
	`
(

6104 
R
"((?:(https?):)?(?://(?:\[([\d:]+)\]|([^:/?#]+))(?::(\d+))?)?([^?#]*(?:\?[^#]*)?)(?:#.*)?)");

6106 
d
::
smch
 
m
;

6107 i(!
d
::
	`gex_mch
(
loti
, 
m
, 

){  
l
; }

6109 aut
scheme
 = 
	`is_s
() ? "https" : "http";

6111 aut
xt_scheme
 = 
m
[1].
	`r
();

6112 aut
xt_ho
 = 
m
[2].
	`r
();

6113 i(
xt_ho
.
	`emy
(){ext_ho = 
m
[3].
	`r
(); }

6114 aut
pt_r
 = 
m
[4].
	`r
();

6115 aut
xt_th
 = 
m
[5].
	`r
();

6117 aut
xt_pt
 = 
pt_
;

6118 i(!
pt_r
.
	`emy
()) {

6119 
xt_pt
 = 
d
::
	`oi
(
pt_r
);

6120 } i(!
xt_scheme
.
	`emy
()) {

6121 
xt_pt
 = 
xt_scheme
 == "https" ? 443 : 80;

6124 i(
xt_scheme
.
	`emy
(){ext_schem
scheme
; }

6125 i(
xt_ho
.
	`emy
(){ext_ho = 
ho_
; }

6126 i(
xt_th
.
	`emy
()) {ext_path = "/"; }

6128 i(
xt_scheme
 =
scheme
 && 
xt_ho
 =
ho_
 && 
xt_pt
 =
pt_
) {

6129  
da
::
	`de
(*
this
, 
q
, 
s
, 
xt_th
, 
loti
, 
r
);

6131 i(
xt_scheme
 == "https") {

6132 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


6133 
SSLCl
 
	`i
(
xt_ho
.
	`c_r
(), 
xt_pt
);

6134 
i
.
	`cy_gs
(*
this
);

6135 i(
__e_
{ 
i
.
	`t___e
(ca_cert_store_); }

6136  
da
::
	`de
(
i
, 
q
, 
s
, 
xt_th
, 
loti
, 
r
);

6138  
l
;

6141 
ClIm
 
	`i
(
xt_ho
.
	`c_r
(), 
xt_pt
);

6142 
i
.
	`cy_gs
(*
this
);

6143  
da
::
	`de
(
i
, 
q
, 
s
, 
xt_th
, 
loti
, 
r
);

6146 
	}
}

6148 
le
 
bo
 
	gClIm
::
	$wre_cڋ_wh_ovid
(
Sm
 &
rm
,

6149 cڡ 
Reque
 &
q
,

6150 
E
 &
r
) {

6151 aut
is_shug_down
 = []({  
l
; };

6153 i(
q
.
is_chunked_cڋ_ovid_
) {

6155 
d
::
unique_r
<
da
::
comess
> compressor;

6156 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


6157 i(
comess_
) {

6158 
comess
 = 
da
::
make_unique
<da::
gz_comess
>();

6162 
comess
 = 
da
::
make_unique
<da::
nocomess
>();

6165  
da
::
	`wre_cڋ_chunked
(
rm
, 
q
.
cڋ_ovid_
,

6166 
is_shug_down
, *
comess
, 
r
);

6168  
da
::
	`wre_cڋ
(
rm
, 
q
.
cڋ_ovid_
, 0,

6169 
q
.
cڋ_ngth_
, 
is_shug_down
, 
r
);

6171 
	}
}

6173 
le
 
bo
 
	gClIm
::
	$wre_que
(
Sm
 &
rm
, 
Reque
 &
q
,

6174 
bo
 
o_ci
, 
E
 &
r
) {

6176 i(
o_ci
) {

6177 i(!
q
.
	`has_hd
("Connection")) {

6178 
q
.
hds
.
	`ema
("Connection", "close");

6182 i(!
q
.
	`has_hd
("Host")) {

6183 i(
	`is_s
()) {

6184 i(
pt_
 == 443) {

6185 
q
.
hds
.
	`ema
("Ho", 
ho_
);

6187 
q
.
hds
.
	`ema
("Ho", 
ho_d_pt_
);

6190 i(
pt_
 == 80) {

6191 
q
.
hds
.
	`ema
("Ho", 
ho_
);

6193 
q
.
hds
.
	`ema
("Ho", 
ho_d_pt_
);

6198 i(!
q
.
	`has_hd
("Ac"){eq.
hds
.
	`ema
("Accept", "*/*"); }

6200 #ide
CPPHTTPLIB_NO_DEFAULT_USER_AGENT


6201 i(!
q
.
	`has_hd
("User-Agent")) {

6202 aut
agt
 = 
d
::
	`rg
("p-hib/"+ 
CPPHTTPLIB_VERSION
;

6203 
q
.
hds
.
	`ema
("Ur-Agt", 
agt
);

6207 i(
q
.
body
.
	`emy
()) {

6208 i(
q
.
cڋ_ovid_
) {

6209 i(!
q
.
is_chunked_cڋ_ovid_
) {

6210 i(!
q
.
	`has_hd
("Content-Length")) {

6211 aut
ngth
 = 
d
::
	`to_rg
(
q
.
cڋ_ngth_
);

6212 
q
.
hds
.
	`ema
("Cڋ-Lgth", 
ngth
);

6216 i(
q
.
mhod
 == "POST" ||eq.method == "PUT" ||

6217 
q
.
mhod
 == "PATCH") {

6218 
q
.
hds
.
	`ema
("Content-Length", "0");

6222 i(!
q
.
	`has_hd
("Content-Type")) {

6223 
q
.
hds
.
	`ema
("Content-Type", "text/plain");

6226 i(!
q
.
	`has_hd
("Content-Length")) {

6227 aut
ngth
 = 
d
::
	`to_rg
(
q
.
body
.
	`size
());

6228 
q
.
hds
.
	`ema
("Cڋ-Lgth", 
ngth
);

6232 i(!
basic_auth_sswd_
.
	`emy
(|| !
basic_auth_uame_
.empty()) {

6233 i(!
q
.
	`has_hd
("Authorization")) {

6234 
q
.
hds
.
	`
(
	`make_basic_authtiti_hd
(

6235 
basic_auth_uame_
, 
basic_auth_sswd_
, 
l
));

6239 i(!
oxy_basic_auth_uame_
.
	`emy
() &&

6240 !
oxy_basic_auth_sswd_
.
	`emy
()) {

6241 i(!
q
.
	`has_hd
("Proxy-Authorization")) {

6242 
q
.
hds
.
	`
(
	`make_basic_authtiti_hd
(

6243 
oxy_basic_auth_uame_
, 
oxy_basic_auth_sswd_
, 
ue
));

6247 i(!
br_tok_auth_tok_
.
	`emy
()) {

6248 i(!
q
.
	`has_hd
("Authorization")) {

6249 
q
.
hds
.
	`
(
	`make_br_tok_authtiti_hd
(

6250 
br_tok_auth_tok_
, 
l
));

6254 i(!
oxy_br_tok_auth_tok_
.
	`emy
()) {

6255 i(!
q
.
	`has_hd
("Proxy-Authorization")) {

6256 
q
.
hds
.
	`
(
	`make_br_tok_authtiti_hd
(

6257 
oxy_br_tok_auth_tok_
, 
ue
));

6263 
da
::
BufrSm
 
brm
;

6265 cڡut&
th
 = 
u_code_
 ? 
da
::
	`code_u
(
q
.path) :eq.path;

6266 
brm
.
	`wre_fm
("%%HTTP/1.1\r\n", 
q
.
mhod
.
	`c_r
(), 
th
.c_str());

6268 
da
::
	`wre_hds
(
brm
, 
q
.
hds
);

6271 aut&
da
 = 
brm
.
	`g_bufr
();

6272 i(!
da
::
	`wre_da
(
rm
, 
da
.
	`da
(), da.
	`size
())) {

6273 
r
 = 
E
::
Wre
;

6274  
l
;

6279 i(
q
.
body
.
	`emy
()) {

6280  
	`wre_cڋ_wh_ovid
(
rm
, 
q
, 
r
);

6283 i(!
da
::
	`wre_da
(
rm
, 
q
.
body
.
	`da
(),eq.body.
	`size
())) {

6284 
r
 = 
E
::
Wre
;

6285  
l
;

6288  
ue
;

6289 
	}
}

6291 
le
 
	gd
::
unique_r
<
Reڣ
> 
ClIm
::
	$nd_wh_cڋ_ovid
(

6292 
Reque
 &
q
,

6294 cڡ *
body
, 
size_t
 
cڋ_ngth
, 
CڋProvid
 
cڋ_ovid
,

6295 
CڋProvidWhoutLgth
 
cڋ_ovid_whout_ngth
,

6296 cڡ *
cڋ_ty
, 
E
 &
r
) {

6298 i(
cڋ_ty
{ 
q
.
hds
.
	`ema
("Content-Type", content_type); }

6300 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


6301 i(
comess_
{ 
q
.
hds
.
	`ema
("Content-Encoding", "gzip"); }

6304 #ifde
CPPHTTPLIB_ZLIB_SUPPORT


6305 i(
comess_
 && !
cڋ_ovid_whout_ngth
) {

6307 
da
::
gz_comess
 
comess
;

6309 i(
cڋ_ovid
) {

6310 aut
ok
 = 
ue
;

6311 
size_t
 
offt
 = 0;

6312 
DaSk
 
da_sk
;

6314 
da_sk
.
wre
 = [&](cڡ *
da
, 
size_t
 
da_n
-> 
bo
 {

6315 i(
ok
) {

6316 aut
ϡ
 = 
offt
 + 
da_n
 =
cڋ_ngth
;

6318 aut
t
 = 
comess
.
	`comess
(

6319 
da
, 
da_n
, 
ϡ
, [&](cڡ *da, 
size_t
 data_len) {

6320 
q
.
body
.
	`nd
(
da
, 
da_n
);

6321  
ue
;

6324 i(
t
) {

6325 
offt
 +
da_n
;

6327 
ok
 = 
l
;

6330  
ok
;

6333 
da_sk
.
is_wrab
 = [&]({  
ok
 && 
ue
; };

6335 
ok
 && 
offt
 < 
cڋ_ngth
) {

6336 i(!
	`cڋ_ovid
(
offt
, 
cڋ_ngth
 - offt, 
da_sk
)) {

6337 
r
 = 
E
::
Cd
;

6338  
nuαr
;

6342 i(!
comess
.
	`comess
(
body
, 
cڋ_ngth
, 
ue
,

6343 [&](cڡ *
da
, 
size_t
 
da_n
) {

6344 
q
.
body
.
	`nd
(
da
, 
da_n
);

6345  
ue
;

6347 
r
 = 
E
::
Comessi
;

6348  
nuαr
;

6354 i(
cڋ_ovid
) {

6355 
q
.
cڋ_ngth_
 = 
cڋ_ngth
;

6356 
q
.
cڋ_ovid_
 = 
d
::
	`move
(
cڋ_ovid
);

6357 
q
.
is_chunked_cڋ_ovid_
 = 
l
;

6358 } i(
cڋ_ovid_whout_ngth
) {

6359 
q
.
cڋ_ngth_
 = 0;

6360 
q
.
cڋ_ovid_
 = 
da
::
	`CڋProvidAdr
(

6361 
d
::
	`move
(
cڋ_ovid_whout_ngth
));

6362 
q
.
is_chunked_cڋ_ovid_
 = 
ue
;

6363 
q
.
hds
.
	`ema
("Transfer-Encoding", "chunked");

6365 
q
.
body
.
	`assign
(body, 
cڋ_ngth
);

6370 aut
s
 = 
da
::
make_unique
<
Reڣ
>();

6371  
	`nd
(
q
, *
s
, 
r
? 
d
::
	`move
es: 
nuαr
;

6372 
	}
}

6374 
le
 
Resu
 
	gClIm
::
	$nd_wh_cڋ_ovid
(

6375 cڡ *
mhod
, cڡ *
th
, cڡ 
Hds
 &
hds
,

6376 cڡ *
body
, 
size_t
 
cڋ_ngth
, 
CڋProvid
 
cڋ_ovid
,

6377 
CڋProvidWhoutLgth
 
cڋ_ovid_whout_ngth
,

6378 cڡ *
cڋ_ty
) {

6379 
Reque
 
q
;

6380 
q
.
mhod
 = method;

6381 
q
.
hds
 = headers;

6382 
q
.
th
 =ath;

6384 aut
r
 = 
E
::
Sucss
;

6386 aut
s
 = 
	`nd_wh_cڋ_ovid
(

6387 
q
,

6389 
body
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6390 
d
::
	`move
(
cڋ_ovid_whout_ngth
), 
cڋ_ty
, 
r
);

6392  
Resu
{
d
::
	`move
(
s
), 
r
, std::move(
q
.
hds
)};

6393 
	}
}

6395 
le
 
	gd
::
rg


6396 
ClIm
::
	$adju_ho_rg
(cڡ 
d
::
rg
 &
ho
) const {

6397 i(
ho
.
	`fd
(':'!
d
::
rg
::
os
) {  "[" + host + "]"; }

6398  
ho
;

6399 
	}
}

6401 
le
 
bo
 
	gClIm
::
	$oss_que
(
Sm
 &
rm
, 
Reque
 &
q
,

6402 
Reڣ
 &
s
, 
bo
 
o_ci
,

6403 
E
 &
r
) {

6405 i(!
	`wre_que
(
rm
, 
q
, 
o_ci
, 
r
){  
l
; }

6408 i(!
	`ad_ڣ_le
(
rm
, 
q
, 
s
) ||

6409 !
da
::
	`ad_hds
(
rm
, 
s
.
hds
)) {

6410 
r
 = 
E
::
Rd
;

6411  
l
;

6415 i((
s
.
us
 !204&& 
q
.
mhod
 != "HEAD" &&eq.method != "CONNECT") {

6416 aut
de
 = 300 < 
s
.
us
 &&es.u< 400 && 
flow_loti_
;

6418 i(
q
.
ڣ_hdr
 && !
de
) {

6419 i(!
q
.
	`ڣ_hdr
(
s
)) {

6420 
r
 = 
E
::
Cd
;

6421  
l
;

6425 aut
out
 =

6426 
q
.
cڋ_iv


6427 ? 
ic_
<
CڋReivWhProgss
>(

6428 [&](cڡ *
buf
, 
size_t
 
n
, 
ut64_t
 
off
, ut64_
n
) {

6429 i(
de
{  
ue
; }

6430 aut
t
 = 
q
.
	`cڋ_iv
(
buf
, 
n
, 
off
, 
n
);

6431 i(!
t
{ 
r
 = 
E
::
Cd
; }

6432  
t
;

6434 : 
ic_
<
CڋReivWhProgss
>(

6435 [&](cڡ *
buf
, 
size_t
 
n
, 
ut64_t
 ,

6436 
ut64_t
 ) {

6437 i(
s
.
body
.
	`size
(+ 
n
 >es.body.
	`max_size
()) {

6438  
l
;

6440 
s
.
body
.
	`nd
(
buf
, 
n
);

6441  
ue
;

6444 aut
ogss
 = [&](
ut64_t
 
cut
, ut64_
tٮ
) {

6445 i(!
q
.
ogss
 || 
de
{  
ue
; }

6446 aut
t
 = 
q
.
	`ogss
(
cut
, 
tٮ
);

6447 i(!
t
{ 
r
 = 
E
::
Cd
; }

6448  
t
;

6451 
dummy_us
;

6452 i(!
da
::
	`ad_cڋ
(
rm
, 
s
, (
d
::
numic_lims
<
size_t
>::
max
)(),

6453 
dummy_us
, 
d
::
	`move
(
ogss
), std::move(
out
),

6454 
decomess_
)) {

6455 i(
r
 !
E
::
Cd
{ = E::
Rd
; }

6456  
l
;

6460 i(
s
.
	`g_hd_vue
("Connection") == "close" ||

6461 (
s
.
vsi
 ="HTTP/1.0" &&es.
as
 != "Connectionstablished")) {

6472 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

6473 
	`shutdown_s
(
sock_
, 
ue
);

6474 
	`shutdown_sock
(
sock_
);

6475 
	`o_sock
(
sock_
);

6479 i(
logg_
{ 
	`logg_
(
q
, 
s
); }

6481  
ue
;

6482 
	}
}

6484 
le
 
bo


6485 
	gClIm
::
oss_sock
(cڡ 
Sock
 &
sock
,

6486 
d
::
funi
<
bo
(
Sm
 &
rm
)> 
back
) {

6487  
da
::
oss__sock
(

6488 
sock
.
sock
, 
ad_timeout_c_
, 
ad_timeout_uc_
, 
wre_timeout_c_
,

6489 
wre_timeout_uc_
, 
d
::
move
(
back
));

6492 
le
 
bo
 
	gClIm
::
	$is_s
(cڡ {  
l
; 
	}
}

6494 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
) {

6495  
	`G
(
th
, 
	`Hds
(), 
	`Progss
());

6496 
	}
}

6498 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, 
Progss
 
ogss
) {

6499  
	`G
(
th
, 
	`Hds
(), 
d
::
	`move
(
ogss
));

6500 
	}
}

6502 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

6503  
	`G
(
th
, 
hds
, 
	`Progss
());

6504 
	}
}

6506 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6507 
Progss
 
ogss
) {

6508 
Reque
 
q
;

6509 
q
.
mhod
 = "GET";

6510 
q
.
th
 =ath;

6511 
q
.
hds
 = headers;

6512 
q
.
ogss
 = 
d
::
	`move
(progress);

6514  
	`nd_
(
d
::
	`move
(
q
));

6515 
	}
}

6517 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
,

6518 
CڋReiv
 
cڋ_iv
) {

6519  
	`G
(
th
, 
	`Hds
(), 
nuαr
, 
d
::
	`move
(
cڋ_iv
),ullptr);

6520 
	}
}

6522 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
,

6523 
CڋReiv
 
cڋ_iv
,

6524 
Progss
 
ogss
) {

6525  
	`G
(
th
, 
	`Hds
(), 
nuαr
, 
d
::
	`move
(
cڋ_iv
),

6526 
d
::
	`move
(
ogss
));

6527 
	}
}

6529 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6530 
CڋReiv
 
cڋ_iv
) {

6531  
	`G
(
th
, 
hds
, 
nuαr
, 
d
::
	`move
(
cڋ_iv
),ullptr);

6532 
	}
}

6534 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6535 
CڋReiv
 
cڋ_iv
,

6536 
Progss
 
ogss
) {

6537  
	`G
(
th
, 
hds
, 
nuαr
, 
d
::
	`move
(
cڋ_iv
),

6538 
d
::
	`move
(
ogss
));

6539 
	}
}

6541 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
,

6542 
ReڣHdr
 
ڣ_hdr
,

6543 
CڋReiv
 
cڋ_iv
) {

6544  
	`G
(
th
, 
	`Hds
(), 
d
::
	`move
(
ڣ_hdr
),

6545 
d
::
	`move
(
cڋ_iv
), 
nuαr
);

6546 
	}
}

6548 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6549 
ReڣHdr
 
ڣ_hdr
,

6550 
CڋReiv
 
cڋ_iv
) {

6551  
	`G
(
th
, 
hds
, 
d
::
	`move
(
ڣ_hdr
),

6552 
d
::
	`move
(
cڋ_iv
), 
nuαr
);

6553 
	}
}

6555 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
,

6556 
ReڣHdr
 
ڣ_hdr
,

6557 
CڋReiv
 
cڋ_iv
,

6558 
Progss
 
ogss
) {

6559  
	`G
(
th
, 
	`Hds
(), 
d
::
	`move
(
ڣ_hdr
),

6560 
d
::
	`move
(
cڋ_iv
), std::move(
ogss
));

6561 
	}
}

6563 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6564 
ReڣHdr
 
ڣ_hdr
,

6565 
CڋReiv
 
cڋ_iv
,

6566 
Progss
 
ogss
) {

6567 
Reque
 
q
;

6568 
q
.
mhod
 = "GET";

6569 
q
.
th
 =ath;

6570 
q
.
hds
 = headers;

6571 
q
.
ڣ_hdr
 = 
d
::
	`move
(response_handler);

6572 
q
.
cڋ_iv
 =

6573 [
cڋ_iv
](cڡ *
da
, 
size_t
 
da_ngth
,

6574 
ut64_t
 , uint64_t ) {

6575  
	`cڋ_iv
(
da
, 
da_ngth
);

6577 
q
.
ogss
 = 
d
::
	`move
(progress);

6579  
	`nd_
(
d
::
	`move
(
q
));

6580 
	}
}

6582 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

6583 cڡ 
Hds
 &
hds
, 
Progss
 
ogss
) {

6584 i(
ms
.
	`emy
(){  
	`G
(
th
, 
hds
); }

6586 
d
::
rg
 
th_wh_quy
 = 
	`nd_quy_ms
(
th
, 
ms
);

6587  
	`G
(
th_wh_quy
.
	`c_r
(), 
hds
, 
ogss
);

6588 
	}
}

6590 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

6591 cڡ 
Hds
 &
hds
,

6592 
CڋReiv
 
cڋ_iv
,

6593 
Progss
 
ogss
) {

6594  
	`G
(
th
, 
ms
, 
hds
, 
nuαr
, 
cڋ_iv
, 
ogss
);

6595 
	}
}

6597 
le
 
Resu
 
	gClIm
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

6598 cڡ 
Hds
 &
hds
,

6599 
ReڣHdr
 
ڣ_hdr
,

6600 
CڋReiv
 
cڋ_iv
,

6601 
Progss
 
ogss
) {

6602 i(
ms
.
	`emy
()) {

6603  
	`G
(
th
, 
hds
, 
ڣ_hdr
, 
cڋ_iv
, 
ogss
);

6606 
d
::
rg
 
th_wh_quy
 = 
	`nd_quy_ms
(
th
, 
ms
);

6607  
	`G
(
th_wh_quy
.
	`c_r
(), 
hds
, 
ڣ_hdr
,

6608 
cڋ_iv
, 
ogss
);

6609 
	}
}

6611 
le
 
Resu
 
	gClIm
::
	$Hd
(cڡ *
th
) {

6612  
	`Hd
(
th
, 
	`Hds
());

6613 
	}
}

6615 
le
 
Resu
 
	gClIm
::
	$Hd
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

6616 
Reque
 
q
;

6617 
q
.
mhod
 = "HEAD";

6618 
q
.
hds
 = headers;

6619 
q
.
th
 =ath;

6621  
	`nd_
(
d
::
	`move
(
q
));

6622 
	}
}

6624 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
) {

6625  
	`Po
(
th
, 
d
::
	`rg
(), 
nuαr
);

6626 
	}
}

6628 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ *
body
,

6629 
size_t
 
cڋ_ngth
,

6630 cڡ *
cڋ_ty
) {

6631  
	`Po
(
th
, 
	`Hds
(), 
body
, 
cڋ_ngth
, 
cڋ_ty
);

6632 
	}
}

6634 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6635 cڡ *
body
, 
size_t
 
cڋ_ngth
,

6636 cڡ *
cڋ_ty
) {

6637  
	`nd_wh_cڋ_ovid
("POST", 
th
, 
hds
, 
body
, 
cڋ_ngth
,

6638 
nuαr
,uαr, 
cڋ_ty
);

6639 
	}
}

6641 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

6642 cڡ *
cڋ_ty
) {

6643  
	`Po
(
th
, 
	`Hds
(), 
body
, 
cڋ_ty
);

6644 
	}
}

6646 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6647 cڡ 
d
::
rg
 &
body
,

6648 cڡ *
cڋ_ty
) {

6649  
	`nd_wh_cڋ_ovid
("POST", 
th
, 
hds
, 
body
.
	`da
(),

6650 
body
.
	`size
(), 
nuαr
,ullptr,

6651 
cڋ_ty
);

6652 
	}
}

6654 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Pams
 &
ms
) {

6655  
	`Po
(
th
, 
	`Hds
(), 
ms
);

6656 
	}
}

6658 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

6659 
CڋProvid
 
cڋ_ovid
,

6660 cڡ *
cڋ_ty
) {

6661  
	`Po
(
th
, 
	`Hds
(), 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6662 
cڋ_ty
);

6663 
	}
}

6665 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
,

6666 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6667 cڡ *
cڋ_ty
) {

6668  
	`Po
(
th
, 
	`Hds
(), 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6669 
	}
}

6671 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6672 
size_t
 
cڋ_ngth
,

6673 
CڋProvid
 
cڋ_ovid
,

6674 cڡ *
cڋ_ty
) {

6675  
	`nd_wh_cڋ_ovid
("POST", 
th
, 
hds
, 
nuαr
,

6676 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6677 
nuαr
, 
cڋ_ty
);

6678 
	}
}

6680 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6681 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6682 cڡ *
cڋ_ty
) {

6683  
	`nd_wh_cڋ_ovid
("POST", 
th
, 
hds
, 
nuαr
, 0,ullptr,

6684 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6685 
	}
}

6687 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6688 cڡ 
Pams
 &
ms
) {

6689 aut
quy
 = 
da
::
	`ms_to_quy_r
(
ms
);

6690  
	`Po
(
th
, 
hds
, 
quy
, "application/x-www-form-urlencoded");

6691 
	}
}

6693 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
,

6694 cڡ 
MuɝtFmDaIms
 &
ems
) {

6695  
	`Po
(
th
, 
	`Hds
(), 
ems
);

6696 
	}
}

6698 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6699 cڡ 
MuɝtFmDaIms
 &
ems
) {

6700  
	`Po
(
th
, 
hds
, 
ems
, 
da
::
	`make_muɝt_da_boundy
());

6701 
	}
}

6702 
le
 
Resu
 
	gClIm
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6703 cڡ 
MuɝtFmDaIms
 &
ems
,

6704 cڡ 
d
::
rg
 &
boundy
) {

6705 
size_t
 
i
 = 0; i < 
boundy
.
	`size
(); i++) {

6706 
c
 = 
boundy
[
i
];

6707 i(!
d
::
	`ium
(
c
) && c != '-' && c != '_') {

6708  
Resu
{
nuαr
, 
E
::
Unsu܋dMuɝtBoundyChs
};

6712 
d
::
rg
 
body
;

6714 cڡut&
em
 : 
ems
) {

6715 
body
 +"--" + 
boundy
 + "\r\n";

6716 
body
 +"Cڋ-Diosi: fm-da;ame=\"" + 
em
.
me
 + "\"";

6717 i(!
em
.
fame
.
	`emy
()) {

6718 
body
 +"; fame=\"" + 
em
.
fame
 + "\"";

6720 
body
 += "\r\n";

6721 i(!
em
.
cڋ_ty
.
	`emy
()) {

6722 
body
 +"Cڋ-Ty: " + 
em
.
cڋ_ty
 + "\r\n";

6724 
body
 += "\r\n";

6725 
body
 +
em
.
cڋ
 + "\r\n";

6728 
body
 +"--" + 
boundy
 + "--\r\n";

6730 
d
::
rg
 
cڋ_ty
 = "muɝt/fm-da; boundy=" + 
boundy
;

6731  
	`Po
(
th
, 
hds
, 
body
, 
cڋ_ty
.
	`c_r
());

6732 
	}
}

6734 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
) {

6735  
	`Put
(
th
, 
d
::
	`rg
(), 
nuαr
);

6736 
	}
}

6738 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ *
body
,

6739 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
) {

6740  
	`Put
(
th
, 
	`Hds
(), 
body
, 
cڋ_ngth
, 
cڋ_ty
);

6741 
	}
}

6743 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6744 cڡ *
body
, 
size_t
 
cڋ_ngth
,

6745 cڡ *
cڋ_ty
) {

6746  
	`nd_wh_cڋ_ovid
("PUT", 
th
, 
hds
, 
body
, 
cڋ_ngth
,

6747 
nuαr
,uαr, 
cڋ_ty
);

6748 
	}
}

6750 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

6751 cڡ *
cڋ_ty
) {

6752  
	`Put
(
th
, 
	`Hds
(), 
body
, 
cڋ_ty
);

6753 
	}
}

6755 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6756 cڡ 
d
::
rg
 &
body
,

6757 cڡ *
cڋ_ty
) {

6758  
	`nd_wh_cڋ_ovid
("PUT", 
th
, 
hds
, 
body
.
	`da
(),

6759 
body
.
	`size
(), 
nuαr
,ullptr,

6760 
cڋ_ty
);

6761 
	}
}

6763 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

6764 
CڋProvid
 
cڋ_ovid
,

6765 cڡ *
cڋ_ty
) {

6766  
	`Put
(
th
, 
	`Hds
(), 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6767 
cڋ_ty
);

6768 
	}
}

6770 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
,

6771 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6772 cڡ *
cڋ_ty
) {

6773  
	`Put
(
th
, 
	`Hds
(), 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6774 
	}
}

6776 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6777 
size_t
 
cڋ_ngth
,

6778 
CڋProvid
 
cڋ_ovid
,

6779 cڡ *
cڋ_ty
) {

6780  
	`nd_wh_cڋ_ovid
("PUT", 
th
, 
hds
, 
nuαr
,

6781 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6782 
nuαr
, 
cڋ_ty
);

6783 
	}
}

6785 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6786 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6787 cڡ *
cڋ_ty
) {

6788  
	`nd_wh_cڋ_ovid
("PUT", 
th
, 
hds
, 
nuαr
, 0,ullptr,

6789 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6790 
	}
}

6792 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Pams
 &
ms
) {

6793  
	`Put
(
th
, 
	`Hds
(), 
ms
);

6794 
	}
}

6796 
le
 
Resu
 
	gClIm
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6797 cڡ 
Pams
 &
ms
) {

6798 aut
quy
 = 
da
::
	`ms_to_quy_r
(
ms
);

6799  
	`Put
(
th
, 
hds
, 
quy
, "application/x-www-form-urlencoded");

6800 
	}
}

6802 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
) {

6803  
	`Pch
(
th
, 
d
::
	`rg
(), 
nuαr
);

6804 
	}
}

6806 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ *
body
,

6807 
size_t
 
cڋ_ngth
,

6808 cڡ *
cڋ_ty
) {

6809  
	`Pch
(
th
, 
	`Hds
(), 
body
, 
cڋ_ngth
, 
cڋ_ty
);

6810 
	}
}

6812 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6813 cڡ *
body
, 
size_t
 
cڋ_ngth
,

6814 cڡ *
cڋ_ty
) {

6815  
	`nd_wh_cڋ_ovid
("PATCH", 
th
, 
hds
, 
body
,

6816 
cڋ_ngth
, 
nuαr
,ullptr,

6817 
cڋ_ty
);

6818 
	}
}

6820 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

6821 cڡ *
cڋ_ty
) {

6822  
	`Pch
(
th
, 
	`Hds
(), 
body
, 
cڋ_ty
);

6823 
	}
}

6825 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6826 cڡ 
d
::
rg
 &
body
,

6827 cڡ *
cڋ_ty
) {

6828  
	`nd_wh_cڋ_ovid
("PATCH", 
th
, 
hds
, 
body
.
	`da
(),

6829 
body
.
	`size
(), 
nuαr
,ullptr,

6830 
cڋ_ty
);

6831 
	}
}

6833 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

6834 
CڋProvid
 
cڋ_ovid
,

6835 cڡ *
cڋ_ty
) {

6836  
	`Pch
(
th
, 
	`Hds
(), 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6837 
cڋ_ty
);

6838 
	}
}

6840 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
,

6841 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6842 cڡ *
cڋ_ty
) {

6843  
	`Pch
(
th
, 
	`Hds
(), 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6844 
	}
}

6846 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6847 
size_t
 
cڋ_ngth
,

6848 
CڋProvid
 
cڋ_ovid
,

6849 cڡ *
cڋ_ty
) {

6850  
	`nd_wh_cڋ_ovid
("PATCH", 
th
, 
hds
, 
nuαr
,

6851 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

6852 
nuαr
, 
cڋ_ty
);

6853 
	}
}

6855 
le
 
Resu
 
	gClIm
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6856 
CڋProvidWhoutLgth
 
cڋ_ovid
,

6857 cڡ *
cڋ_ty
) {

6858  
	`nd_wh_cڋ_ovid
("PATCH", 
th
, 
hds
, 
nuαr
, 0,ullptr,

6859 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

6860 
	}
}

6862 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
) {

6863  
	`De
(
th
, 
	`Hds
(), 
d
::
	`rg
(), 
nuαr
);

6864 
	}
}

6866 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

6867  
	`De
(
th
, 
hds
, 
d
::
	`rg
(), 
nuαr
);

6868 
	}
}

6870 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
, cڡ *
body
,

6871 
size_t
 
cڋ_ngth
,

6872 cڡ *
cڋ_ty
) {

6873  
	`De
(
th
, 
	`Hds
(), 
body
, 
cڋ_ngth
, 
cڋ_ty
);

6874 
	}
}

6876 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6877 cڡ *
body
, 
size_t
 
cڋ_ngth
,

6878 cڡ *
cڋ_ty
) {

6879 
Reque
 
q
;

6880 
q
.
mhod
 = "DELETE";

6881 
q
.
hds
 = headers;

6882 
q
.
th
 =ath;

6884 i(
cڋ_ty
{ 
q
.
hds
.
	`ema
("Content-Type", content_type); }

6885 
q
.
body
.
	`assign
(body, 
cڋ_ngth
);

6887  
	`nd_
(
d
::
	`move
(
q
));

6888 
	}
}

6890 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

6891 cڡ *
cڋ_ty
) {

6892  
	`De
(
th
, 
	`Hds
(), 
body
.
	`da
(), body.
	`size
(), 
cڋ_ty
);

6893 
	}
}

6895 
le
 
Resu
 
	gClIm
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

6896 cڡ 
d
::
rg
 &
body
,

6897 cڡ *
cڋ_ty
) {

6898  
	`De
(
th
, 
hds
, 
body
.
	`da
(), body.
	`size
(), 
cڋ_ty
);

6899 
	}
}

6901 
le
 
Resu
 
	gClIm
::
	$Ois
(cڡ *
th
) {

6902  
	`Ois
(
th
, 
	`Hds
());

6903 
	}
}

6905 
le
 
Resu
 
	gClIm
::
	$Ois
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

6906 
Reque
 
q
;

6907 
q
.
mhod
 = "OPTIONS";

6908 
q
.
hds
 = headers;

6909 
q
.
th
 =ath;

6911  
	`nd_
(
d
::
	`move
(
q
));

6912 
	}
}

6914 
le
 
size_t
 
	gClIm
::
	$is_sock_ݒ
() const {

6915 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

6916  
sock_
.
	`is_ݒ
();

6917 
	}
}

6919 
le
 
	gClIm
::
	$
() {

6920 
d
::
lock_gud
<d::
mux
> 
	`gud
(
sock_mux_
);

6927 i(
sock_ques__ight_
 > 0) {

6928 
	`shutdown_sock
(
sock_
);

6932 
sock_should_be_od_wh_que_is_de_
 = 
ue
;

6937 
	`shutdown_s
(
sock_
, 
ue
);

6938 
	`shutdown_sock
(
sock_
);

6939 
	`o_sock
(
sock_
);

6940 
	}
}

6942 
le
 
	gClIm
::
	$t_ci_timeout
(
time_t
 
c
,ime_
uc
) {

6943 
ci_timeout_c_
 = 
c
;

6944 
ci_timeout_uc_
 = 
uc
;

6945 
	}
}

6947 
le
 
	gClIm
::
	$t_ad_timeout
(
time_t
 
c
,ime_
uc
) {

6948 
ad_timeout_c_
 = 
c
;

6949 
ad_timeout_uc_
 = 
uc
;

6950 
	}
}

6952 
le
 
	gClIm
::
	$t_wre_timeout
(
time_t
 
c
,ime_
uc
) {

6953 
wre_timeout_c_
 = 
c
;

6954 
wre_timeout_uc_
 = 
uc
;

6955 
	}
}

6957 
le
 
	gClIm
::
	$t_basic_auth
(cڡ *
uame
,

6958 cڡ *
sswd
) {

6959 
basic_auth_uame_
 = 
uame
;

6960 
basic_auth_sswd_
 = 
sswd
;

6961 
	}
}

6963 
le
 
	gClIm
::
	$t_br_tok_auth
(cڡ *
tok
) {

6964 
br_tok_auth_tok_
 = 
tok
;

6965 
	}
}

6967 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


6968 
le
 
	gClIm
::
	$t_dige_auth
(cڡ *
uame
,

6969 cڡ *
sswd
) {

6970 
dige_auth_uame_
 = 
uame
;

6971 
dige_auth_sswd_
 = 
sswd
;

6972 
	}
}

6975 
le
 
	gClIm
::
	$t_kp_ive
(
bo
 

{ 
kp_ive_
 = on; 
	}
}

6977 
le
 
	gClIm
::
	$t_flow_loti
(
bo
 

{ 
flow_loti_
 = on; 
	}
}

6979 
le
 
	gClIm
::
	$t_u_code
(
bo
 

{ 
u_code_
 = on; 
	}
}

6981 
le
 

6982 
	gClIm
::
t_home_addr_m
(
d
::
m
<d::
rg
, std::rg> 
addr_m
) {

6983 
addr_m_
 = 
d
::
move
(
addr_m
);

6986 
le
 
	gClIm
::
	$t_deu_hds
(
Hds
 
hds
) {

6987 
deu_hds_
 = 
d
::
	`move
(
hds
);

6988 
	}
}

6990 
le
 
	gClIm
::
	$t_addss_my
(
my
) {

6991 
addss_my_
 = 
my
;

6992 
	}
}

6994 
le
 
	gClIm
::
	$t_t_noday
(
bo
 

{ 
t_noday_
 = on; 
	}
}

6996 
le
 
	gClIm
::
	$t_sock_tis
(
SockOis
 
sock_tis
) {

6997 
sock_tis_
 = 
d
::
	`move
(
sock_tis
);

6998 
	}
}

7000 
le
 
	gClIm
::
	$t_comess
(
bo
 

{ 
comess_
 = on; 
	}
}

7002 
le
 
	gClIm
::
	$t_decomess
(
bo
 

{ 
decomess_
 = on; 
	}
}

7004 
le
 
	gClIm
::
	$t_r
(cڡ *
tf
{ 
r_
 = if; 
	}
}

7006 
le
 
	gClIm
::
	$t_oxy
(cڡ *
ho
, 
pt
) {

7007 
oxy_ho_
 = 
ho
;

7008 
oxy_pt_
 = 
pt
;

7009 
	}
}

7011 
le
 
	gClIm
::
	$t_oxy_basic_auth
(cڡ *
uame
,

7012 cڡ *
sswd
) {

7013 
oxy_basic_auth_uame_
 = 
uame
;

7014 
oxy_basic_auth_sswd_
 = 
sswd
;

7015 
	}
}

7017 
le
 
	gClIm
::
	$t_oxy_br_tok_auth
(cڡ *
tok
) {

7018 
oxy_br_tok_auth_tok_
 = 
tok
;

7019 
	}
}

7021 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7022 
le
 
	gClIm
::
	$t_oxy_dige_auth
(cڡ *
uame
,

7023 cڡ *
sswd
) {

7024 
oxy_dige_auth_uame_
 = 
uame
;

7025 
oxy_dige_auth_sswd_
 = 
sswd
;

7026 
	}
}

7029 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7030 
le
 
	gClIm
::
	$t___th
(cڡ *
__fe_th
,

7031 cڡ *
__d_th
) {

7032 i(
__fe_th
{ 
__fe_th_
 = ca_cert_file_path; }

7033 i(
__d_th
{ 
__d_th_
 = ca_cert_dir_path; }

7034 
	}
}

7036 
le
 
	gClIm
::
	$t___e
(
X509_STORE
 *
__e
) {

7037 i(
__e
 && ca__ܐ!
__e_
) {

7038 
__e_
 = 
__e
;

7040 
	}
}

7043 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7044 
le
 
	gClIm
::
	$ab_rv_ifi_vifiti
(
bo
 
abd
) {

7045 
rv_ifi_vifiti_
 = 
abd
;

7046 
	}
}

7049 
le
 
	gClIm
::
	$t_logg
(
Logg
 
logg
) {

7050 
logg_
 = 
d
::
	`move
(
logg
);

7051 
	}
}

7056 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7057 
mea
 
	gda
 {

7059 
	gme
 <
tyme
 
	gU
,ym
	gV
>

7060 
le
 
SSL
 *
s_w
(
sock_t
 
sock
, 
SSL_CTX
 *
x
, 
d
::
mux
 &
x_mux
,

7061 
U
 
SSL_c__ac
, 
V
 
tup
) {

7062 
SSL
 *
	gs
 = 
nuαr
;

7064 
	gd
::
lock_gud
<
d
::
mux
> 
gud
(
x_mux
);

7065 
	gs
 = 
SSL_w
(
x
);

7068 i(
	gs
) {

7069 
t_nblockg
(
sock
, 
ue
);

7070 aut
	gbio
 = 
BIO_w_sock
(
ic_
<>(
sock
), 
BIO_NOCLOSE
);

7071 
BIO_t_nbio
(
bio
, 1);

7072 
SSL_t_bio
(
s
, 
bio
, bio);

7074 i(!
tup
(
s
|| 
SSL_c__ac
(ssl) != 1) {

7075 
SSL_shutdown
(
s
);

7077 
	gd
::
lock_gud
<
d
::
mux
> 
gud
(
x_mux
);

7078 
SSL_
(
s
);

7080 
t_nblockg
(
sock
, 
l
);

7081  
	gnuαr
;

7083 
BIO_t_nbio
(
bio
, 0);

7084 
t_nblockg
(
sock
, 
l
);

7087  
	gs
;

7090 
le
 
s_de
(
d
::
mux
 &
x_mux
, 
SSL
 *
s
,

7091 
bo
 
shutdown_gfuy
) {

7096 i(
	gshutdown_gfuy
{ 
SSL_shutdown
(
s
); }

7098 
	gd
::
lock_gud
<
d
::
mux
> 
gud
(
x_mux
);

7099 
SSL_
(
s
);

7102 
	gme
 <
tyme
 
	gU
>

7103 
bo
 
s_c__ac_nblockg
(
sock_t
 
sock
, 
SSL
 *
s
,

7104 
U
 
s_c__ac
,

7105 
time_t
 
timeout_c
,

7106 
time_t
 
timeout_uc
) {

7107 
	gs
 = 0;

7108 (
	gs
 = 
s_c__ac
(
s
)) != 1) {

7109 aut
r
 = 
SSL_g_r
(
s
, 
s
);

7110 
	gr
) {

7111 
	gSSL_ERROR_WANT_READ
:

7112 i(
_ad
(
sock
, 
timeout_c
, 
timeout_uc
) > 0) { ; }

7114 
	gSSL_ERROR_WANT_WRITE
:

7115 i(
_wre
(
sock
, 
timeout_c
, 
timeout_uc
) > 0) { ; }

7119  
	gl
;

7121  
	gue
;

7124 
	gme
 <
tyme
 
	gT
>

7125 
le
 
bo
 
oss_rv_sock_s
(

7126 cڡ 
d
::
omic
<
sock_t
> &
svr_sock
, 
SSL
 *
s
, sock_
sock
,

7127 
size_t
 
kp_ive_max_cou
, 
time_t
 
kp_ive_timeout_c
,

7128 
time_t
 
ad_timeout_c
,ime_
ad_timeout_uc
,ime_
wre_timeout_c
,

7129 
time_t
 
wre_timeout_uc
, 
T
 
back
) {

7130  
oss_rv_sock_ce
(

7131 
svr_sock
, 
sock
, 
kp_ive_max_cou
, 
kp_ive_timeout_c
,

7132 [&](
bo
 
o_ci
, bo &
ci_od
) {

7133 
SSLSockSm
 
rm
(
sock
, 
s
, 
ad_timeout_c
, 
ad_timeout_uc
,

7134 
wre_timeout_c
, 
wre_timeout_uc
);

7135  
back
(
rm
, 
o_ci
, 
ci_od
);

7139 
	gme
 <
tyme
 
	gT
>

7140 
le
 
bo


7141 
oss__sock_s
(
SSL
 *
s
, 
sock_t
 
sock
, 
time_t
 
ad_timeout_c
,

7142 
time_t
 
ad_timeout_uc
,ime_
wre_timeout_c
,

7143 
time_t
 
wre_timeout_uc
, 
T
 
back
) {

7144 
SSLSockSm
 
rm
(
sock
, 
s
, 
ad_timeout_c
, 
ad_timeout_uc
,

7145 
wre_timeout_c
, 
wre_timeout_uc
);

7146  
back
(
rm
);

7149 #i
OPENSSL_VERSION_NUMBER
 < 0x10100000L

7150 
	gd
::
shed_r
<
d
::
ve
<d::
mux
>> 
ݒSSL_locks_
;

7152 as
	cSSLThadLocks
 {

7153 
	gpublic
:

7154 
SSLThadLocks
() {

7155 
ݒSSL_locks_
 =

7156 
d
::
make_shed
<d::
ve
<d::
mux
>>(
CRYPTO_num_locks
());

7157 
CRYPTO_t_lockg_back
(
lockg_back
);

7160 ~
SSLThadLocks
({ 
CRYPTO_t_lockg_back
(
nuαr
); }

7162 
	give
:

7163 
lockg_back
(
mode
, 
ty
, const * ,

7165 aut&
	glk
 = (*
ݒSSL_locks_
)[
ic_
<
size_t
>(
ty
)];

7166 i(
	gmode
 & 
	gCRYPTO_LOCK
) {

7167 
	glk
.
lock
();

7169 
	glk
.
uock
();

7176 as
	cSSLIn
 {

7177 
	gpublic
:

7178 
SSLIn
() {

7179 #i
OPENSSL_VERSION_NUMBER
 < 0x1010001fL

7180 
SSL_ld_r_rgs
();

7181 
SSL_libry_
();

7183 
OPENSSL__s
(

7184 
OPENSSL_INIT_LOAD_SSL_STRINGS
 | 
OPENSSL_INIT_LOAD_CRYPTO_STRINGS
, 
NULL
);

7188 ~
SSLIn
() {

7189 #i
OPENSSL_VERSION_NUMBER
 < 0x1010001fL

7190 
ERR__rgs
();

7194 
	give
:

7195 #i
OPENSSL_VERSION_NUMBER
 < 0x10100000L

7196 
SSLThadLocks
 
thad__
;

7201 
le
 
	gSSLSockSm
::
SSLSockSm
(
sock_t
 
sock
, 
SSL
 *
s
,

7202 
time_t
 
ad_timeout_c
,

7203 
time_t
 
ad_timeout_uc
,

7204 
time_t
 
wre_timeout_c
,

7205 
time_t
 
wre_timeout_uc
)

7206 : 
sock_
(
sock
), 
s_
(
s
), 
ad_timeout_c_
(
ad_timeout_c
),

7207 
ad_timeout_uc_
(
ad_timeout_uc
),

7208 
wre_timeout_c_
(
wre_timeout_c
),

7209 
wre_timeout_uc_
(
wre_timeout_uc
) {

7210 
SSL_r_mode
(
s
, 
SSL_MODE_AUTO_RETRY
);

7213 
le
 
	gSSLSockSm
::~
SSLSockSm
() {}

7215 
le
 
bo
 
SSLSockSm
::
is_adab
() const {

7216  
da
::
_ad
(
sock_
, 
ad_timeout_c_
, 
ad_timeout_uc_
) > 0;

7219 
le
 
bo
 
	gSSLSockSm
::
is_wrab
() const {

7220  
da
::
_wre
(
sock_
, 
wre_timeout_c_
, 
wre_timeout_uc_
) >

7224 
le
 
ssize_t
 
	gSSLSockSm
::
ad
(*
r
, 
size_t
 
size
) {

7225 
size_t
 
	gadbys
 = 0;

7226 i(
SSL_ndg
(
s_
) > 0) {

7227 aut
	gt
 = 
SSL_ad_ex
(
s_
, 
r
, 
size
, &
adbys
);

7228 i(
	gt
 =1{  
ic_
<
ssize_t
>(
adbys
); }

7229 i(
SSL_g_r
(
s_
, 
t
=
SSL_ERROR_ZERO_RETURN
) {  0; }

7232 i(!
is_adab
()) {  -1; }

7234 aut
	gt
 = 
SSL_ad_ex
(
s_
, 
r
, 
size
, &
adbys
);

7235 i(
	gt
 =1{  
ic_
<
ssize_t
>(
adbys
); }

7236 aut
	gr
 = 
SSL_g_r
(
s_
, 
t
);

7237 
	gn
 = 1000;

7238 #ifde
_WIN32


7239 --
	gn
 >= 0 &&

7240 (
r
 =
SSL_ERROR_WANT_READ
 ||

7241 (
r
 =
SSL_ERROR_SYSCALL
 && 
WSAGLaE
(=
WSAETIMEDOUT
))) {

7243 --
n
 >0 && 
r
 =
SSL_ERROR_WANT_READ
) {

7245 i(
SSL_ndg
(
s_
) > 0) {

7246 
t
 = 
SSL_ad_ex
(
s_
, 
r
, 
size
, &
adbys
);

7247 i(
	gt
 =1{  
ic_
<
ssize_t
>(
adbys
); }

7248 i(
SSL_g_r
(
s_
, 
t
=
SSL_ERROR_ZERO_RETURN
) {  0; }

7251 i(!
is_adab
()) {  -1; }

7252 
	gd
::
this_thad
::
p_f
(
d
::
chro
::
mlicds
(1));

7253 
	gt
 = 
SSL_ad_ex
(
s_
, 
r
, 
size
, &
adbys
);

7254 i(
	gt
 =1{  
ic_
<
ssize_t
>(
adbys
); }

7255 
	gr
 = 
SSL_g_r
(
s_
, 
t
);

7257 i(
	gr
 =
SSL_ERROR_ZERO_RETURN
) {  0; }

7261 
le
 
ssize_t
 
	gSSLSockSm
::
wre
(cڡ *
r
, 
size_t
 
size
) {

7262 i(!
is_wrab
()) {  -1; }

7263 
size_t
 
	gwrn
 = 0;

7264 aut
	gt
 = 
SSL_wre_ex
(
s_
, 
r
, 
size
, &
wrn
);

7265 i(
	gt
 =1{  
ic_
<
ssize_t
>(
wrn
); }

7266 aut
	gr
 = 
SSL_g_r
(
s_
, 
t
);

7267 
	gn
 = 1000;

7268 #ifde
_WIN32


7269 --
	gn
 >= 0 &&

7270 (
r
 =
SSL_ERROR_WANT_WRITE
 ||

7271 (
r
 =
SSL_ERROR_SYSCALL
 && 
WSAGLaE
(=
WSAETIMEDOUT
))) {

7273 --
n
 >0 && 
r
 =
SSL_ERROR_WANT_WRITE
) {

7275 i(!
is_wrab
()) {  -1; }

7276 
	gd
::
this_thad
::
p_f
(
d
::
chro
::
mlicds
(1));

7277 
	gt
 = 
SSL_wre_ex
(
s_
, 
r
, 
size
, &
wrn
);

7278 i(
	gt
 =1{  
ic_
<
ssize_t
>(
wrn
); }

7279 
	gr
 = 
SSL_g_r
(
s_
, 
t
);

7281 i(
	gr
 =
SSL_ERROR_ZERO_RETURN
) {  0; }

7285 
le
 
	gSSLSockSm
::
g_me__d_pt
(
d
::
rg
 &

,

7286 &
pt
) const {

7287 
	gda
::
g_me__d_pt
(
sock_
, 

, 
pt
);

7290 
le
 
sock_t
 
	gSSLSockSm
::
sock
(cڡ {  
sock_
; }

7292 
SSLIn
 
	gs_
;

7297 
le
 
	gSSLSv
::
	$SSLSv
(cڡ *
_th
, cڡ *
ive_key_th
,

7298 cڡ *
___fe_th
,

7299 cڡ *
___d_th
,

7300 cڡ *
ive_key_sswd
) {

7301 
x_
 = 
	`SSL_CTX_w
(
	`TLS_rv_mhod
());

7303 i(
x_
) {

7304 
	`SSL_CTX_t_tis
(
x_
,

7305 
SSL_OP_NO_COMPRESSION
 |

7306 
SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION
);

7308 
	`SSL_CTX_t_m_o_vsi
(
x_
, 
TLS1_1_VERSION
);

7311 i(
ive_key_sswd
 !
nuαr
 && (private_key_password[0] != '\0')) {

7312 
	`SSL_CTX_t_deu_sswd_cb_urda
(
x_
,

7313 (*)
ive_key_sswd
);

7316 i(
	`SSL_CTX_u_ifi_cha_fe
(
x_
, 
_th
) != 1 ||

7317 
	`SSL_CTX_u_PriveKey_fe
(
x_
, 
ive_key_th
, 
SSL_FILETYPE_PEM
) !=

7319 
	`SSL_CTX_
(
x_
);

7320 
x_
 = 
nuαr
;

7321 } i(
___fe_th
 || 
___d_th
) {

7322 
	`SSL_CTX_ld_vify_lotis
(
x_
, 
___fe_th
,

7323 
___d_th
);

7325 
	`SSL_CTX_t_vify
(

7326 
x_
, 
SSL_VERIFY_PEER
 | 
SSL_VERIFY_FAIL_IF_NO_PEER_CERT
, 
nuαr
);

7329 
	}
}

7331 
le
 
	gSSLSv
::
	$SSLSv
(
X509
 *

, 
EVP_PKEY
 *
ive_key
,

7332 
X509_STORE
 *
___e
) {

7333 
x_
 = 
	`SSL_CTX_w
(
	`TLS_rv_mhod
());

7335 i(
x_
) {

7336 
	`SSL_CTX_t_tis
(
x_
,

7337 
SSL_OP_NO_COMPRESSION
 |

7338 
SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION
);

7340 
	`SSL_CTX_t_m_o_vsi
(
x_
, 
TLS1_1_VERSION
);

7342 i(
	`SSL_CTX_u_ifi
(
x_
, 

) != 1 ||

7343 
	`SSL_CTX_u_PriveKey
(
x_
, 
ive_key
) != 1) {

7344 
	`SSL_CTX_
(
x_
);

7345 
x_
 = 
nuαr
;

7346 } i(
___e
) {

7347 
	`SSL_CTX_t__e
(
x_
, 
___e
);

7349 
	`SSL_CTX_t_vify
(

7350 
x_
, 
SSL_VERIFY_PEER
 | 
SSL_VERIFY_FAIL_IF_NO_PEER_CERT
, 
nuαr
);

7353 
	}
}

7355 
le
 
	gSSLSv
::
SSLSv
(

7356 cڡ 
d
::
funi
<
bo
(
SSL_CTX
 &
s_x
)> &
tup_s_x_back
) {

7357 
x_
 = 
SSL_CTX_w
(
TLS_mhod
());

7358 i(
	gx_
) {

7359 i(!
tup_s_x_back
(*
x_
)) {

7360 
SSL_CTX_
(
x_
);

7361 
	gx_
 = 
nuαr
;

7366 
le
 
	gSSLSv
::~
	$SSLSv
() {

7367 i(
x_
{ 
	`SSL_CTX_
(ctx_); }

7368 
	}
}

7370 
le
 
bo
 
	gSSLSv
::
	$is_vid
(cڡ {  
x_
; 
	}
}

7372 
le
 
SSL_CTX
 *
	gSSLSv
::
	$s_cڋxt
(cڡ {  
x_
; 
	}
}

7374 
le
 
bo
 
	gSSLSv
::
	$oss_d_o_sock
(
sock_t
 
sock
) {

7375 aut
s
 = 
da
::
	`s_w
(

7376 
sock
, 
x_
, 
x_mux_
,

7377 [&](
SSL
 *
s
) {

7378  
da
::
	`s_c__ac_nblockg
(

7379 
sock
, 
s
, 
SSL_ac
, 
ad_timeout_c_
, 
ad_timeout_uc_
);

7381 [](
SSL
 * ) {  
ue
; });

7383 
bo
 
t
 = 
l
;

7384 i(
s
) {

7385 
t
 = 
da
::
	`oss_rv_sock_s
(

7386 
svr_sock_
, 
s
, 
sock
, 
kp_ive_max_cou_
, 
kp_ive_timeout_c_
,

7387 
ad_timeout_c_
, 
ad_timeout_uc_
, 
wre_timeout_c_
,

7388 
wre_timeout_uc_
,

7389 [
this
, 
s
](
Sm
 &
rm
, 
bo
 
o_ci
,

7390 
bo
 &
ci_od
) {

7391  
	`oss_que
(
rm
, 
o_ci
, 
ci_od
,

7392 [&](
Reque
 &
q
{eq.
s
 = ssl; });

7397 cڡ 
bo
 
shutdown_gfuy
 = 
t
;

7398 
da
::
	`s_de
(
x_mux_
, 
s
, 
shutdown_gfuy
);

7401 
da
::
	`shutdown_sock
(
sock
);

7402 
da
::
	`o_sock
(
sock
);

7403  
t
;

7404 
	}
}

7407 
le
 
	gSSLCl
::
	$SSLCl
(cڡ 
d
::
rg
 &
ho
)

7408 : 
	`SSLCl
(
ho
, 443, 
d
::
	`rg
(), std::
	$rg
(){
	}
}

7410 
le
 
SSLCl
::
	$SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
)

7411 : 
	`SSLCl
(
ho
, 
pt
, 
d
::
	`rg
(), std::
	$rg
(){
	}
}

7413 
le
 
SSLCl
::
	$SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
,

7414 cڡ 
d
::
rg
 &
__th
,

7415 cڡ 
d
::
rg
 &
_key_th
)

7416 : 
	$ClIm
(
ho
, 
pt
, 
__th
, 
_key_th
) {

7417 
x_
 = 
	`SSL_CTX_w
(
	`TLS__mhod
());

7419 
da
::
	`l
(&
ho_
[0], &ho_[ho_.
	`size
()], '.',

7420 [&](cڡ *
b
, cڡ *
e
) {

7421 
ho_compڒts_
.
	`ema_back
(
d
::
	`rg
(
b
, 
e
));

7424 i(!
__th
.
	`emy
(&& !
_key_th
.empty()) {

7425 i(
	`SSL_CTX_u_ifi_fe
(
x_
, 
__th
.
	`c_r
(),

7426 
SSL_FILETYPE_PEM
) != 1 ||

7427 
	`SSL_CTX_u_PriveKey_fe
(
x_
, 
_key_th
.
	`c_r
(),

7428 
SSL_FILETYPE_PEM
) != 1) {

7429 
	`SSL_CTX_
(
x_
);

7430 
x_
 = 
nuαr
;

7433 
	}
}

7435 
le
 
	gSSLCl
::
	$SSLCl
(cڡ 
d
::
rg
 &
ho
, 
pt
,

7436 
X509
 *
_
, 
EVP_PKEY
 *
_key
)

7437 : 
	$ClIm
(
ho
, 
pt
) {

7438 
x_
 = 
	`SSL_CTX_w
(
	`TLS__mhod
());

7440 
da
::
	`l
(&
ho_
[0], &ho_[ho_.
	`size
()], '.',

7441 [&](cڡ *
b
, cڡ *
e
) {

7442 
ho_compڒts_
.
	`ema_back
(
d
::
	`rg
(
b
, 
e
));

7445 i(
_
 !
nuαr
 && 
_key
 !=ullptr) {

7446 i(
	`SSL_CTX_u_ifi
(
x_
, 
_
) != 1 ||

7447 
	`SSL_CTX_u_PriveKey
(
x_
, 
_key
) != 1) {

7448 
	`SSL_CTX_
(
x_
);

7449 
x_
 = 
nuαr
;

7452 
	}
}

7454 
le
 
	gSSLCl
::~
	$SSLCl
() {

7455 i(
x_
{ 
	`SSL_CTX_
(ctx_); }

7459 
	`shutdown_s_im
(
sock_
, 
ue
);

7460 
	}
}

7462 
le
 
bo
 
	gSSLCl
::
	$is_vid
(cڡ {  
x_
; 
	}
}

7464 
le
 
	gSSLCl
::
	$t___e
(
X509_STORE
 *
__e
) {

7465 i(
__e
) {

7466 i(
x_
) {

7467 i(
	`SSL_CTX_g__e
(
x_
!
__e
) {

7469 
	`SSL_CTX_t__e
(
x_
, 
__e
);

7472 
	`X509_STORE_
(
__e
);

7475 
	}
}

7477 
le
 
	gSSLCl
::
	$g_ݒs_vify_su
() const {

7478  
vify_su_
;

7479 
	}
}

7481 
le
 
SSL_CTX
 *
	gSSLCl
::
	$s_cڋxt
(cڡ {  
x_
; 
	}
}

7483 
le
 
bo
 
	gSSLCl
::
	$_d_c_sock
(
Sock
 &
sock
, 
E
 &
r
) {

7484  
	`is_vid
(&& 
ClIm
::
	`_d_c_sock
(
sock
, 
r
);

7485 
	}
}

7488 
le
 
bo
 
	gSSLCl
::
	$c_wh_oxy
(
Sock
 &
sock
, 
Reڣ
 &
s
,

7489 
bo
 &
sucss
, 
E
 &
r
) {

7490 
sucss
 = 
ue
;

7491 
Reڣ
 
s2
;

7492 i(!
da
::
	`oss__sock
(

7493 
sock
.
sock
, 
ad_timeout_c_
, 
ad_timeout_uc_
,

7494 
wre_timeout_c_
, 
wre_timeout_uc_
, [&](
Sm
 &
rm
) {

7495 
Reque
 
q2
;

7496 
q2
.
mhod
 = "CONNECT";

7497 
q2
.
th
 = 
ho_d_pt_
;

7498  
	`oss_que
(
rm
, 
q2
, 
s2
, 
l
, 
r
);

7502 
	`shutdown_s
(
sock
, 
ue
);

7503 
	`shutdown_sock
(
sock
);

7504 
	`o_sock
(
sock
);

7505 
sucss
 = 
l
;

7506  
l
;

7509 i(
s2
.
us
 == 407) {

7510 i(!
oxy_dige_auth_uame_
.
	`emy
() &&

7511 !
oxy_dige_auth_sswd_
.
	`emy
()) {

7512 
d
::
m
<d::
rg
, std::rg> 
auth
;

7513 i(
da
::
	`r_www_authti
(
s2
, 
auth
, 
ue
)) {

7514 
Reڣ
 
s3
;

7515 i(!
da
::
	`oss__sock
(

7516 
sock
.
sock
, 
ad_timeout_c_
, 
ad_timeout_uc_
,

7517 
wre_timeout_c_
, 
wre_timeout_uc_
, [&](
Sm
 &
rm
) {

7518 
Reque
 
q3
;

7519 
q3
.
mhod
 = "CONNECT";

7520 
q3
.
th
 = 
ho_d_pt_
;

7521 
q3
.
hds
.
	`
(
da
::
	`make_dige_authtiti_hd
(

7522 
q3
, 
auth
, 1, 
da
::
	`ndom_rg
(10),

7523 
oxy_dige_auth_uame_
, 
oxy_dige_auth_sswd_
,

7524 
ue
));

7525  
	`oss_que
(
rm
, 
q3
, 
s3
, 
l
, 
r
);

7529 
	`shutdown_s
(
sock
, 
ue
);

7530 
	`shutdown_sock
(
sock
);

7531 
	`o_sock
(
sock
);

7532 
sucss
 = 
l
;

7533  
l
;

7537 
s
 = 
s2
;

7538  
l
;

7542  
ue
;

7543 
	}
}

7545 
le
 
bo
 
	gSSLCl
::
	$ld_s
() {

7546 
bo
 
t
 = 
ue
;

7548 
d
::
	`_
(
lize__
, [&]() {

7549 
d
::
lock_gud
<d::
mux
> 
	`gud
(
x_mux_
);

7550 i(!
__fe_th_
.
	`emy
()) {

7551 i(!
	`SSL_CTX_ld_vify_lotis
(
x_
, 
__fe_th_
.
	`c_r
(),

7552 
nuαr
)) {

7553 
t
 = 
l
;

7555 } i(!
__d_th_
.
	`emy
()) {

7556 i(!
	`SSL_CTX_ld_vify_lotis
(
x_
, 
nuαr
,

7557 
__d_th_
.
	`c_r
())) {

7558 
t
 = 
l
;

7561 #ifde
_WIN32


7562 
da
::
	`ld_syem_s__wdows
(
	`SSL_CTX_g__e
(
x_
));

7564 
	`SSL_CTX_t_deu_vify_ths
(
x_
);

7569  
t
;

7570 
	}
}

7572 
le
 
bo
 
	gSSLCl
::
	$lize_s
(
Sock
 &
sock
, 
E
 &
r
) {

7573 aut
s
 = 
da
::
	`s_w
(

7574 
sock
.
sock
, 
x_
, 
x_mux_
,

7575 [&](
SSL
 *
s
) {

7576 i(
rv_ifi_vifiti_
) {

7577 i(!
	`ld_s
()) {

7578 
r
 = 
E
::
SSLLdgCts
;

7579  
l
;

7581 
	`SSL_t_vify
(
s
, 
SSL_VERIFY_NONE
, 
nuαr
);

7584 i(!
da
::
	`s_c__ac_nblockg
(

7585 
sock
.
sock
, 
s
, 
SSL_c
, 
ci_timeout_c_
,

7586 
ci_timeout_uc_
)) {

7587 
r
 = 
E
::
SSLCi
;

7588  
l
;

7591 i(
rv_ifi_vifiti_
) {

7592 
vify_su_
 = 
	`SSL_g_vify_su
(
s
);

7594 i(
vify_su_
 !
X509_V_OK
) {

7595 
r
 = 
E
::
SSLSvVifiti
;

7596  
l
;

7599 aut
rv_
 = 
	`SSL_g__ifi
(
s
);

7601 i(
rv_
 =
nuαr
) {

7602 
r
 = 
E
::
SSLSvVifiti
;

7603  
l
;

7606 i(!
	`vify_ho
(
rv_
)) {

7607 
	`X509_
(
rv_
);

7608 
r
 = 
E
::
SSLSvVifiti
;

7609  
l
;

7611 
	`X509_
(
rv_
);

7614  
ue
;

7616 [&](
SSL
 *
s
) {

7617 
	`SSL_t_xt_ho_me
(
s
, 
ho_
.
	`c_r
());

7618  
ue
;

7621 i(
s
) {

7622 
sock
.
s
 = ssl;

7623  
ue
;

7626 
	`shutdown_sock
(
sock
);

7627 
	`o_sock
(
sock
);

7628  
l
;

7629 
	}
}

7631 
le
 
	gSSLCl
::
	$shutdown_s
(
Sock
 &
sock
, 
bo
 
shutdown_gfuy
) {

7632 
	`shutdown_s_im
(
sock
, 
shutdown_gfuy
);

7633 
	}
}

7635 
le
 
	gSSLCl
::
	$shutdown_s_im
(
Sock
 &
sock
,

7636 
bo
 
shutdown_gfuy
) {

7637 i(
sock
.
sock
 =
INVALID_SOCKET
) {

7638 
	`as
(
sock
.
s
 =
nuαr
);

7641 i(
sock
.
s
) {

7642 
da
::
	`s_de
(
x_mux_
, 
sock
.
s
, 
shutdown_gfuy
);

7643 
sock
.
s
 = 
nuαr
;

7645 
	`as
(
sock
.
s
 =
nuαr
);

7646 
	}
}

7648 
le
 
bo


7649 
	gSSLCl
::
oss_sock
(cڡ 
Sock
 &
sock
,

7650 
d
::
funi
<
bo
(
Sm
 &
rm
)> 
back
) {

7651 
as
(
sock
.
s
);

7652  
	gda
::
oss__sock_s
(

7653 
sock
.
s
, sock.
sock
, 
ad_timeout_c_
, 
ad_timeout_uc_
,

7654 
wre_timeout_c_
, 
wre_timeout_uc_
, 
d
::
move
(
back
));

7657 
le
 
bo
 
	gSSLCl
::
	$is_s
(cڡ {  
ue
; 
	}
}

7659 
le
 
bo
 
	gSSLCl
::
	$vify_ho
(
X509
 *
rv_
) const {

7681  
	`vify_ho_wh_subje_t_me
(
rv_
) ||

7682 
	`vify_ho_wh_comm_me
(
rv_
);

7683 
	}
}

7685 
le
 
bo


7686 
	gSSLCl
::
	$vify_ho_wh_subje_t_me
(
X509
 *
rv_
) const {

7687 aut
t
 = 
l
;

7689 aut
ty
 = 
GEN_DNS
;

7691 
6_addr
 
addr6
;

7692 
_addr
 
addr
;

7693 
size_t
 
addr_n
 = 0;

7695 #ide
__MINGW32__


7696 i(
	`_
(
AF_INET6
, 
ho_
.
	`c_r
(), &
addr6
)) {

7697 
ty
 = 
GEN_IPADD
;

7698 
addr_n
 = (
6_addr
);

7699 } i(
	`_
(
AF_INET
, 
ho_
.
	`c_r
(), &
addr
)) {

7700 
ty
 = 
GEN_IPADD
;

7701 
addr_n
 = (
_addr
);

7705 aut
t_mes
 = 
ic_
<cڡ 
ack__GENERAL_NAME
 *>(

7706 
	`X509_g_ext_d2i
(
rv_
, 
NID_subje_t_me
, 
nuαr
,ullptr));

7708 i(
t_mes
) {

7709 aut
d_mched
 = 
l
;

7710 aut
_mached
 = 
l
;

7712 aut
cou
 = 
	`sk_GENERAL_NAME_num
(
t_mes
);

7714 
	`dety
(
cou

i
 = 0; i < cou && !
d_mched
; i++) {

7715 aut
v
 = 
	`sk_GENERAL_NAME_vue
(
t_mes
, 
i
);

7716 i(
v
->
ty
 ==ype) {

7717 aut
me
 = (cڡ *)
	`ASN1_STRING_g0_da
(
v
->
d
.
5
);

7718 aut
me_n
 = (
size_t
)
	`ASN1_STRING_ngth
(
v
->
d
.
5
);

7720 
ty
) {

7721 
GEN_DNS
: 
d_mched
 = 
	`check_ho_me
(
me
, 
me_n
); ;

7723 
GEN_IPADD
:

7724 i(!
	`memcmp
(&
addr6
, 
me
, 
addr_n
) ||

7725 !
	`memcmp
(&
addr
, 
me
, 
addr_n
)) {

7726 
_mached
 = 
ue
;

7733 i(
d_mched
 || 
_mached
{ 
t
 = 
ue
; }

7736 
	`GENERAL_NAMES_
((
	`STACK_OF
(
GENERAL_NAME
*)
t_mes
);

7737  
t
;

7738 
	}
}

7740 
le
 
bo
 
	gSSLCl
::
	$vify_ho_wh_comm_me
(
X509
 *
rv_
) const {

7741 cڡut
subje_me
 = 
	`X509_g_subje_me
(
rv_
);

7743 i(
subje_me
 !
nuαr
) {

7744 
me
[
BUFSIZ
];

7745 aut
me_n
 = 
	`X509_NAME_g_xt_by_NID
(
subje_me
, 
NID_commName
,

7746 
me
, (name));

7748 i(
me_n
 != -1) {

7749  
	`check_ho_me
(
me
, 
ic_
<
size_t
>(
me_n
));

7753  
l
;

7754 
	}
}

7756 
le
 
bo
 
	gSSLCl
::
	$check_ho_me
(cڡ *
n
,

7757 
size_t
 
n_n
) const {

7758 i(
ho_
.
	`size
(=
n_n
 && ho_ =
n
{  
ue
; }

7762 
d
::
ve
<d::
rg
> 
n_compڒts
;

7763 
da
::
	`l
(&
n
[0], &n[
n_n
], '.',

7764 [&](cڡ *
b
, cڡ *
e
) {

7765 
n_compڒts
.
	`ema_back
(
d
::
	`rg
(
b
, 
e
));

7768 i(
ho_compڒts_
.
	`size
(!
n_compڒts
.size(){  
l
; }

7770 aut
r
 = 
n_compڒts
.
	`beg
();

7771 cڡut&
h
 : 
ho_compڒts_
) {

7772 aut&
p
 = *
r
;

7773 i(
p
 !
h
 && != "*") {

7774 aut
l_mch
 = (
p
.
	`size
() > 0 &&[p.size() - 1] == '*' &&

7775 !
p
.
	`com
(0,.
	`size
(- 1, 
h
));

7776 i(!
l_mch
{  
l
; }

7778 ++
r
;

7781  
ue
;

7782 
	}
}

7786 
le
 
	gCl
::
	$Cl
(cڡ 
d
::
rg
 &
scheme_ho_pt
)

7787 : 
	`Cl
(
scheme_ho_pt
, 
d
::
	`rg
(), std::
	$rg
(){
	}
}

7789 
le
 
Cl
::
	$Cl
(cڡ 
d
::
rg
 &
scheme_ho_pt
,

7790 cڡ 
d
::
rg
 &
__th
,

7791 cڡ 
d
::
rg
 &
_key_th
) {

7792 cڡ 
d
::
gex
 
	`
(

7793 
R
"((?:([a-z]+):\/\/)?(?:\[([\d:]+)\]|([^:/?#]+))(?::(\d+))?)");

7795 
d
::
smch
 
m
;

7796 i(
d
::
	`gex_mch
(
scheme_ho_pt
, 
m
, 

)) {

7797 aut
scheme
 = 
m
[1].
	`r
();

7799 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7800 i(!
scheme
.
	`emy
() && (scheme != "http" && scheme != "https")) {

7802 i(!
scheme
.
	`emy
() && scheme != "http") {

7804 #ide
CPPHTTPLIB_NO_EXCEPTIONS


7805 
d
::
rg
 
msg
 = "'" + 
scheme
 + "' scheme isot supported.";

7806 
throw
 
d
::
	`vid_gumt
(
msg
);

7811 aut
is_s
 = 
scheme
 == "https";

7813 aut
ho
 = 
m
[2].
	`r
();

7814 i(
ho
.
	`emy
(){ ho = 
m
[3].
	`r
(); }

7816 aut
pt_r
 = 
m
[4].
	`r
();

7817 aut
pt
 = !
pt_r
.
	`emy
(? 
d
::
	`oi
t_r: (
is_s
 ? 443 : 80);

7819 i(
is_s
) {

7820 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


7821 
i_
 = 
da
::
make_unique
<
SSLCl
>(
ho
.
	`c_r
(), 
pt
,

7822 
__th
, 
_key_th
);

7823 
is_s_
 = 
is_s
;

7826 
i_
 = 
da
::
make_unique
<
ClIm
>(
ho
.
	`c_r
(), 
pt
,

7827 
__th
, 
_key_th
);

7830 
i_
 = 
da
::
make_unique
<
ClIm
>(
scheme_ho_pt
, 80,

7831 
__th
, 
_key_th
);

7833 
	}
}

7835 
le
 
	gCl
::
	$Cl
(cڡ 
d
::
rg
 &
ho
, 
pt
)

7836 : 
	`i_
(
da
::
make_unique
<
ClIm
>(
ho
, 
pt
){
	}
}

7838 
le
 
	gCl
::
	$Cl
(cڡ 
d
::
rg
 &
ho
, 
pt
,

7839 cڡ 
d
::
rg
 &
__th
,

7840 cڡ 
d
::
rg
 &
_key_th
)

7841 : 
	`i_
(
da
::
make_unique
<
ClIm
>(
ho
, 
pt
, 
__th
,

7842 
_key_th
){
	}
}

7844 
le
 
	gCl
::~
	$Cl
({
	}
}

7846 
le
 
bo
 
Cl
::
	$is_vid
() const {

7847  
i_
 !
nuαr
 && cli_->
	`is_vid
();

7848 
	}
}

7850 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
{  
i_
->
	`G
թh); 
	}
}

7851 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

7852  
i_
->
	`G
(
th
, 
hds
);

7853 
	}
}

7854 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, 
Progss
 
ogss
) {

7855  
i_
->
	`G
(
th
, 
d
::
	`move
(
ogss
));

7856 
	}
}

7857 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7858 
Progss
 
ogss
) {

7859  
i_
->
	`G
(
th
, 
hds
, 
d
::
	`move
(
ogss
));

7860 
	}
}

7861 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
) {

7862  
i_
->
	`G
(
th
, 
d
::
	`move
(
cڋ_iv
));

7863 
	}
}

7864 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7865 
CڋReiv
 
cڋ_iv
) {

7866  
i_
->
	`G
(
th
, 
hds
, 
d
::
	`move
(
cڋ_iv
));

7867 
	}
}

7868 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, 
CڋReiv
 
cڋ_iv
,

7869 
Progss
 
ogss
) {

7870  
i_
->
	`G
(
th
, 
d
::
	`move
(
cڋ_iv
), std::move(
ogss
));

7871 
	}
}

7872 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7873 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
) {

7874  
i_
->
	`G
(
th
, 
hds
, 
d
::
	`move
(
cڋ_iv
),

7875 
d
::
	`move
(
ogss
));

7876 
	}
}

7877 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

7878 
CڋReiv
 
cڋ_iv
) {

7879  
i_
->
	`G
(
th
, 
d
::
	`move
(
ڣ_hdr
),

7880 
d
::
	`move
(
cڋ_iv
));

7881 
	}
}

7882 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7883 
ReڣHdr
 
ڣ_hdr
,

7884 
CڋReiv
 
cڋ_iv
) {

7885  
i_
->
	`G
(
th
, 
hds
, 
d
::
	`move
(
ڣ_hdr
),

7886 
d
::
	`move
(
cڋ_iv
));

7887 
	}
}

7888 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, 
ReڣHdr
 
ڣ_hdr
,

7889 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
) {

7890  
i_
->
	`G
(
th
, 
d
::
	`move
(
ڣ_hdr
),

7891 
d
::
	`move
(
cڋ_iv
), std::move(
ogss
));

7892 
	}
}

7893 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7894 
ReڣHdr
 
ڣ_hdr
,

7895 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
) {

7896  
i_
->
	`G
(
th
, 
hds
, 
d
::
	`move
(
ڣ_hdr
),

7897 
d
::
	`move
(
cڋ_iv
), std::move(
ogss
));

7898 
	}
}

7899 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

7900 cڡ 
Hds
 &
hds
, 
Progss
 
ogss
) {

7901  
i_
->
	`G
(
th
, 
ms
, 
hds
, 
ogss
);

7902 
	}
}

7903 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

7904 cڡ 
Hds
 &
hds
,

7905 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
) {

7906  
i_
->
	`G
(
th
, 
ms
, 
hds
, 
cڋ_iv
, 
ogss
);

7907 
	}
}

7908 
le
 
Resu
 
	gCl
::
	$G
(cڡ *
th
, cڡ 
Pams
 &
ms
,

7909 cڡ 
Hds
 &
hds
,

7910 
ReڣHdr
 
ڣ_hdr
,

7911 
CڋReiv
 
cڋ_iv
, 
Progss
 
ogss
) {

7912  
i_
->
	`G
(
th
, 
ms
, 
hds
, 
ڣ_hdr
, 
cڋ_iv
,

7913 
ogss
);

7914 
	}
}

7916 
le
 
Resu
 
	gCl
::
	$Hd
(cڡ *
th
{  
i_
->
	`Hd
թh); 
	}
}

7917 
le
 
Resu
 
	gCl
::
	$Hd
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

7918  
i_
->
	`Hd
(
th
, 
hds
);

7919 
	}
}

7921 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
{  
i_
->
	`Po
թh); 
	}
}

7922 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ *
body
,

7923 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
) {

7924  
i_
->
	`Po
(
th
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

7925 
	}
}

7926 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7927 cڡ *
body
, 
size_t
 
cڋ_ngth
,

7928 cڡ *
cڋ_ty
) {

7929  
i_
->
	`Po
(
th
, 
hds
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

7930 
	}
}

7931 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

7932 cڡ *
cڋ_ty
) {

7933  
i_
->
	`Po
(
th
, 
body
, 
cڋ_ty
);

7934 
	}
}

7935 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7936 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
) {

7937  
i_
->
	`Po
(
th
, 
hds
, 
body
, 
cڋ_ty
);

7938 
	}
}

7939 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

7940 
CڋProvid
 
cڋ_ovid
,

7941 cڡ *
cڋ_ty
) {

7942  
i_
->
	`Po
(
th
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

7943 
cڋ_ty
);

7944 
	}
}

7945 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
,

7946 
CڋProvidWhoutLgth
 
cڋ_ovid
,

7947 cڡ *
cڋ_ty
) {

7948  
i_
->
	`Po
(
th
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

7949 
	}
}

7950 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7951 
size_t
 
cڋ_ngth
,

7952 
CڋProvid
 
cڋ_ovid
,

7953 cڡ *
cڋ_ty
) {

7954  
i_
->
	`Po
(
th
, 
hds
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

7955 
cڋ_ty
);

7956 
	}
}

7957 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7958 
CڋProvidWhoutLgth
 
cڋ_ovid
,

7959 cڡ *
cڋ_ty
) {

7960  
i_
->
	`Po
(
th
, 
hds
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

7961 
	}
}

7962 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Pams
 &
ms
) {

7963  
i_
->
	`Po
(
th
, 
ms
);

7964 
	}
}

7965 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7966 cڡ 
Pams
 &
ms
) {

7967  
i_
->
	`Po
(
th
, 
hds
, 
ms
);

7968 
	}
}

7969 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
,

7970 cڡ 
MuɝtFmDaIms
 &
ems
) {

7971  
i_
->
	`Po
(
th
, 
ems
);

7972 
	}
}

7973 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7974 cڡ 
MuɝtFmDaIms
 &
ems
) {

7975  
i_
->
	`Po
(
th
, 
hds
, 
ems
);

7976 
	}
}

7977 
le
 
Resu
 
	gCl
::
	$Po
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7978 cڡ 
MuɝtFmDaIms
 &
ems
,

7979 cڡ 
d
::
rg
 &
boundy
) {

7980  
i_
->
	`Po
(
th
, 
hds
, 
ems
, 
boundy
);

7981 
	}
}

7982 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
{  
i_
->
	`Put
թh); 
	}
}

7983 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ *
body
,

7984 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
) {

7985  
i_
->
	`Put
(
th
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

7986 
	}
}

7987 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7988 cڡ *
body
, 
size_t
 
cڋ_ngth
,

7989 cڡ *
cڋ_ty
) {

7990  
i_
->
	`Put
(
th
, 
hds
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

7991 
	}
}

7992 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

7993 cڡ *
cڋ_ty
) {

7994  
i_
->
	`Put
(
th
, 
body
, 
cڋ_ty
);

7995 
	}
}

7996 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

7997 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
) {

7998  
i_
->
	`Put
(
th
, 
hds
, 
body
, 
cڋ_ty
);

7999 
	}
}

8000 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

8001 
CڋProvid
 
cڋ_ovid
,

8002 cڡ *
cڋ_ty
) {

8003  
i_
->
	`Put
(
th
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

8004 
cڋ_ty
);

8005 
	}
}

8006 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
,

8007 
CڋProvidWhoutLgth
 
cڋ_ovid
,

8008 cڡ *
cڋ_ty
) {

8009  
i_
->
	`Put
(
th
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

8010 
	}
}

8011 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8012 
size_t
 
cڋ_ngth
,

8013 
CڋProvid
 
cڋ_ovid
,

8014 cڡ *
cڋ_ty
) {

8015  
i_
->
	`Put
(
th
, 
hds
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

8016 
cڋ_ty
);

8017 
	}
}

8018 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8019 
CڋProvidWhoutLgth
 
cڋ_ovid
,

8020 cڡ *
cڋ_ty
) {

8021  
i_
->
	`Put
(
th
, 
hds
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

8022 
	}
}

8023 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Pams
 &
ms
) {

8024  
i_
->
	`Put
(
th
, 
ms
);

8025 
	}
}

8026 
le
 
Resu
 
	gCl
::
	$Put
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8027 cڡ 
Pams
 &
ms
) {

8028  
i_
->
	`Put
(
th
, 
hds
, 
ms
);

8029 
	}
}

8030 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
{  
i_
->
	`Pch
թh); 
	}
}

8031 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ *
body
,

8032 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
) {

8033  
i_
->
	`Pch
(
th
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

8034 
	}
}

8035 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8036 cڡ *
body
, 
size_t
 
cڋ_ngth
,

8037 cڡ *
cڋ_ty
) {

8038  
i_
->
	`Pch
(
th
, 
hds
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

8039 
	}
}

8040 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

8041 cڡ *
cڋ_ty
) {

8042  
i_
->
	`Pch
(
th
, 
body
, 
cڋ_ty
);

8043 
	}
}

8044 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8045 cڡ 
d
::
rg
 &
body
, cڡ *
cڋ_ty
) {

8046  
i_
->
	`Pch
(
th
, 
hds
, 
body
, 
cڋ_ty
);

8047 
	}
}

8048 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, 
size_t
 
cڋ_ngth
,

8049 
CڋProvid
 
cڋ_ovid
,

8050 cڡ *
cڋ_ty
) {

8051  
i_
->
	`Pch
(
th
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

8052 
cڋ_ty
);

8053 
	}
}

8054 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
,

8055 
CڋProvidWhoutLgth
 
cڋ_ovid
,

8056 cڡ *
cڋ_ty
) {

8057  
i_
->
	`Pch
(
th
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

8058 
	}
}

8059 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8060 
size_t
 
cڋ_ngth
,

8061 
CڋProvid
 
cڋ_ovid
,

8062 cڡ *
cڋ_ty
) {

8063  
i_
->
	`Pch
(
th
, 
hds
, 
cڋ_ngth
, 
d
::
	`move
(
cڋ_ovid
),

8064 
cڋ_ty
);

8065 
	}
}

8066 
le
 
Resu
 
	gCl
::
	$Pch
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8067 
CڋProvidWhoutLgth
 
cڋ_ovid
,

8068 cڡ *
cڋ_ty
) {

8069  
i_
->
	`Pch
(
th
, 
hds
, 
d
::
	`move
(
cڋ_ovid
), 
cڋ_ty
);

8070 
	}
}

8071 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
{  
i_
->
	`De
թh); 
	}
}

8072 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

8073  
i_
->
	`De
(
th
, 
hds
);

8074 
	}
}

8075 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
, cڡ *
body
,

8076 
size_t
 
cڋ_ngth
, cڡ *
cڋ_ty
) {

8077  
i_
->
	`De
(
th
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

8078 
	}
}

8079 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8080 cڡ *
body
, 
size_t
 
cڋ_ngth
,

8081 cڡ *
cڋ_ty
) {

8082  
i_
->
	`De
(
th
, 
hds
, 
body
, 
cڋ_ngth
, 
cڋ_ty
);

8083 
	}
}

8084 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
, cڡ 
d
::
rg
 &
body
,

8085 cڡ *
cڋ_ty
) {

8086  
i_
->
	`De
(
th
, 
body
, 
cڋ_ty
);

8087 
	}
}

8088 
le
 
Resu
 
	gCl
::
	$De
(cڡ *
th
, cڡ 
Hds
 &
hds
,

8089 cڡ 
d
::
rg
 &
body
,

8090 cڡ *
cڋ_ty
) {

8091  
i_
->
	`De
(
th
, 
hds
, 
body
, 
cڋ_ty
);

8092 
	}
}

8093 
le
 
Resu
 
	gCl
::
	$Ois
(cڡ *
th
{  
i_
->
	`Ois
թh); 
	}
}

8094 
le
 
Resu
 
	gCl
::
	$Ois
(cڡ *
th
, cڡ 
Hds
 &
hds
) {

8095  
i_
->
	`Ois
(
th
, 
hds
);

8096 
	}
}

8098 
le
 
bo
 
	gCl
::
	$nd
(
Reque
 &
q
, 
Reڣ
 &
s
, 
E
 &
r
) {

8099  
i_
->
	`nd
(
q
, 
s
, 
r
);

8100 
	}
}

8102 
le
 
Resu
 
	gCl
::
	$nd
(cڡ 
Reque
 &
q
{  
i_
->
	`nd
eq); 
	}
}

8104 
le
 
size_t
 
	gCl
::
	$is_sock_ݒ
(cڡ {  
i_
->
	`is_sock_ݒ
(); 
	}
}

8106 
le
 
	gCl
::
	$
({ 
i_
->
	`
(); 
	}
}

8108 
le
 

8109 
	gCl
::
t_home_addr_m
(
d
::
m
<d::
rg
, std::rg> 
addr_m
) {

8110 
i_
->
t_home_addr_m
(
d
::
move
(
addr_m
));

8113 
le
 
	gCl
::
	$t_deu_hds
(
Hds
 
hds
) {

8114 
i_
->
	`t_deu_hds
(
d
::
	`move
(
hds
));

8115 
	}
}

8117 
le
 
	gCl
::
	$t_addss_my
(
my
) {

8118 
i_
->
	`t_addss_my
(
my
);

8119 
	}
}

8121 
le
 
	gCl
::
	$t_t_noday
(
bo
 

{ 
i_
->
	`t_t_noday
(); 
	}
}

8123 
le
 
	gCl
::
	$t_sock_tis
(
SockOis
 
sock_tis
) {

8124 
i_
->
	`t_sock_tis
(
d
::
	`move
(
sock_tis
));

8125 
	}
}

8127 
le
 
	gCl
::
	$t_ci_timeout
(
time_t
 
c
,ime_
uc
) {

8128 
i_
->
	`t_ci_timeout
(
c
, 
uc
);

8129 
	}
}

8131 
le
 
	gCl
::
	$t_ad_timeout
(
time_t
 
c
,ime_
uc
) {

8132 
i_
->
	`t_ad_timeout
(
c
, 
uc
);

8133 
	}
}

8135 
le
 
	gCl
::
	$t_wre_timeout
(
time_t
 
c
,ime_
uc
) {

8136 
i_
->
	`t_wre_timeout
(
c
, 
uc
);

8137 
	}
}

8139 
le
 
	gCl
::
	$t_basic_auth
(cڡ *
uame
, cڡ *
sswd
) {

8140 
i_
->
	`t_basic_auth
(
uame
, 
sswd
);

8141 
	}
}

8142 
le
 
	gCl
::
	$t_br_tok_auth
(cڡ *
tok
) {

8143 
i_
->
	`t_br_tok_auth
(
tok
);

8144 
	}
}

8145 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


8146 
le
 
	gCl
::
	$t_dige_auth
(cڡ *
uame
,

8147 cڡ *
sswd
) {

8148 
i_
->
	`t_dige_auth
(
uame
, 
sswd
);

8149 
	}
}

8152 
le
 
	gCl
::
	$t_kp_ive
(
bo
 

{ 
i_
->
	`t_kp_ive
(); 
	}
}

8153 
le
 
	gCl
::
	$t_flow_loti
(
bo
 

) {

8154 
i_
->
	`t_flow_loti
(

);

8155 
	}
}

8157 
le
 
	gCl
::
	$t_u_code
(
bo
 

{ 
i_
->
	`t_u_code
(); 
	}
}

8159 
le
 
	gCl
::
	$t_comess
(
bo
 

{ 
i_
->
	`t_comess
(); 
	}
}

8161 
le
 
	gCl
::
	$t_decomess
(
bo
 

{ 
i_
->
	`t_decomess
(); 
	}
}

8163 
le
 
	gCl
::
	$t_r
(cڡ *
tf
) {

8164 
i_
->
	`t_r
(
tf
);

8165 
	}
}

8167 
le
 
	gCl
::
	$t_oxy
(cڡ *
ho
, 
pt
) {

8168 
i_
->
	`t_oxy
(
ho
, 
pt
);

8169 
	}
}

8170 
le
 
	gCl
::
	$t_oxy_basic_auth
(cڡ *
uame
,

8171 cڡ *
sswd
) {

8172 
i_
->
	`t_oxy_basic_auth
(
uame
, 
sswd
);

8173 
	}
}

8174 
le
 
	gCl
::
	$t_oxy_br_tok_auth
(cڡ *
tok
) {

8175 
i_
->
	`t_oxy_br_tok_auth
(
tok
);

8176 
	}
}

8177 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


8178 
le
 
	gCl
::
	$t_oxy_dige_auth
(cڡ *
uame
,

8179 cڡ *
sswd
) {

8180 
i_
->
	`t_oxy_dige_auth
(
uame
, 
sswd
);

8181 
	}
}

8184 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


8185 
le
 
	gCl
::
	$ab_rv_ifi_vifiti
(
bo
 
abd
) {

8186 
i_
->
	`ab_rv_ifi_vifiti
(
abd
);

8187 
	}
}

8190 
le
 
	gCl
::
	$t_logg
(
Logg
 
logg
{ 
i_
->
	`t_logg
ogg); 
	}
}

8192 #ifde
CPPHTTPLIB_OPENSSL_SUPPORT


8193 
le
 
	gCl
::
	$t___th
(cڡ *
__fe_th
,

8194 cڡ *
__d_th
) {

8195 
i_
->
	`t___th
(
__fe_th
, 
__d_th
);

8196 
	}
}

8198 
le
 
	gCl
::
	$t___e
(
X509_STORE
 *
__e
) {

8199 i(
is_s_
) {

8200 
ic_
<
SSLCl
 &>(*
i_
).
	`t___e
(
__e
);

8202 
i_
->
	`t___e
(
__e
);

8204 
	}
}

8206 
le
 
	gCl
::
	$g_ݒs_vify_su
() const {

8207 i(
is_s_
) {

8208  
ic_
<
SSLCl
 &>(*
i_
).
	`g_ݒs_vify_su
();

8211 
	}
}

8213 
le
 
SSL_CTX
 *
	gCl
::
	$s_cڋxt
() const {

8214 i(
is_s_
{  
ic_
<
SSLCl
 &>(*
i_
).
	`s_cڋxt
(); }

8215  
nuαr
;

8216 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/httpserver.h

1 #ide
HTTP_SERVER_H


2 
	#HTTP_SERVER_H


	)

3 
	~"hp.h
"

5 
	~<rg
>

7 
	gHpSv
 : 
ive
 
hp
::
Sv


9 
HpSv
(
bo
 
is_log
 = 
l
);

11 
bo
 
t_ro_th
(
d
::
rg
 cڡ& 
u
, std::rg cڡ& 
d
);

13 
	gHpSv
 &
g
(cڡ 
d
::
rg
 &
n
, 
hp
::
Sv
::
Hdr
 
hdr
);

14 
	gHpSv
 &
po
(cڡ 
d
::
rg
 &
n
, 
hp
::
Sv
::
Hdr
 
hdr
);

15 
	gHpSv
 &
put
(cڡ 
d
::
rg
 &
n
, 
hp
::
Sv
::
Hdr
 
hdr
);

18 
bo
 
run
(cڡ *
ho
, 
pt
);

19 
	give
:

20 
d
::
rg
 
log
(cڡ 
hp
::
Reque
 &
q
, cڡ hp::
Reڣ
 &
s
);

21 
	gd
::
rg
 
dump_hds
(cڡ 
hp
::
Hds
 &
hds
);

22 
	give
:

23 
bo
 
is_log_
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/userhandler.h

1 #ide
USER_HANDLER_H


2 
	#USER_HANDLER_H


	)

3 
	~"hdr.h
"

5 
	gUrHdr
 : 
public
 
Hdr


7 
fo
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

8 
v
(cڡ 
hp
::
Reque
 &
q
, hp::
Reڣ
 &
s
);

	@/root/BZ_AUTOTEST/BZ20-RRU/app/inc/bz_config.h

12 #ide
_BZ_CONFIG__H_


13 
	#_BZ_CONFIG__H_


	)

14 
	~<bz__h.h
>

16 
BzIn_t
 
B20In
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/inc/command.h

1 #ide
_COMMAND_H_


2 
	#_COMMAND_H_


	)

3 #ifde
__lulus


6 
	~<dt.h
>

8 
t32_t
 
RegiCommd
(cڡ * 
cmd
, cڡ * 
hp
, *
hdr
);

9 
t32_t
 
WaFCommd
();

10 
ShowCommds
();

12 #ifde
__lulus


	@/root/BZ_AUTOTEST/BZ20-RRU/app/inc/fft.h

1 #ide
FFT_H


2 
	#FFT_H


	)

4 
	~<vy
>

5 
	~<comex
>

7 
	gd
::
	tcomex
<> 
	tComex
;

8 
	gd
::
	tvy
<
	tComex
> 
	tCAay
;

10 
f
(
CAay
& 
x
);

	@/root/BZ_AUTOTEST/BZ20-RRU/app/inc/talise.h

1 #ide
TALISE_H


2 
	#TALISE_H


	)

4 
	~<bz_tys.h
>

5 
	~<bz_ls_tys.h
>

6 
	~<bz_agc_tys.h
>

7 
	~<bz_dio_tys.h
>

9 
	~<rg
>

10 
	~<cdt
>

11 
	~<memy
>

12 
	~<vy
>

14 
	gd
::
	tvy
<> 
	tDaAay
;

15 
	sTi


17 
Ti
();

18 ~
Ti
();

20 
Ti
(Ti cڡ&
de
;

21 
	mTi
& 
	mݔ
 = (
Ti
 cڡ&
de
;

23 
usg
 
	mShdP
 = 
d
::
shed_r
<
Ti
>;

24 
usg
 
	mWkP
 = 
d
::
wk_r
<
Ti
>;

26 
	md
::
rg
 
dev_me
();

27 
	md
::
rg
 
rx_chl
();

28 
	md
::
rg
 
tx_chl
();

29 
	md
::
rg
 
ox_chl
();

30 
	md
::
rg
 
chl__mode
();

31 
ut32_t
 
rx_bd_width_hz
();

32 
ut32_t
 
tx_bd_width_hz
();

33 
ut32_t
 
ox_bd_width_hz
();

34 
ut32_t
 
rx_iq__khz
();

35 
ut32_t
 
tx_iq__khz
();

36 
ut32_t
 
ox_iq__khz
();

38 
t_dev_me
(
d
::
rg
 cڡ& 
me
);

39 
t_rx_chl
(
d
::
rg
 cڡ& 
chl
);

40 
t_tx_chl
(
d
::
rg
 cڡ& 
chl
);

41 
t_ox_chl
(
d
::
rg
 cڡ& 
chl
);

42 
t_chl_r_mode
(
d
::
rg
 cڡ& 
mode
);

43 
t_rx_bd_width_hz
(
ut32_t
 
bd_width
);

44 
t_tx_bd_width_hz
(
ut32_t
 
bd_width
);

45 
t_ox_bd_width_hz
(
ut32_t
 
bd_width
);

46 
t_rx_iq__khz
(
ut32_t
 
iq_
);

47 
t_tx_iq__khz
(
ut32_t
 
iq_
);

48 
t_ox_iq__khz
(
ut32_t
 
iq_
);

50 
day
(
ut32_t
 
ms
);

52 
bo
 
t_devi_id
(
devi_id
);

53 
ch_
(
devi_id
);

54 
ch_
({ ch_(
dev_id_
); }

55 
bo
 
_ock
();

56 
bo
 
_devi
();

57 
bo
 
ls
(
ut32_t
 
bm
);

58 
bo
 
rm_devi
();

60 
t_204b_sysc
();

61 
d_204b_sysc
();

62 
bo
 
jesd204b_e
();

64 
ad_l
();

66 
bo
 
wre_g
(
ut16_t
 
addr
, 
ut32_t
 
da
);

67 
bo
 
wre_g
(
ut16_t
 
addr
, 
ut32_t
 
da
,

68 
ut8_t
 
d_b
, ut8_
t_b
);

69 
bo
 
ad_g
(
ut16_t
 
addr
, 
ut32_t
 &
da
);

70 
bo
 
ad_mem
(
ut32_t
 
addr
, ut32_&
da
);

72 
bo
 
t_l_equcy
(
BzRfPName_t
 
me
, 
ut64_t
 
eq
);

73 
bo
 
l_equcy
(
BzRfPName_t
 
me
, 
ut64_t
 &
eq
);

75 
t_tx_chl
(
BzTxChls_t
 
chl
{ 
	mtx_chl_
 = channel; }

76 
bo
 
t_tx_pow
(
t32_t
 
eq1_khz
, i32_
eq2_khz
,

77 
ut32_t
 
ga1
, ut32_
ga2
);

78 
bo
 
t_tx_ga
(
ut32_t
 
ga_dex
);

79 
bo
 
tx_ga
(
ut32_t
 &
ga_dex
);

80 
bo
 
t_tx__ei
(
ut32_t
 
tx_li_t
,

81 
ut32_t
 
tx_pow_thshd
, 
bo
 
ab
 = 
ue
);

82 
g_tx__ei
(
ut32_t
 &
tx_li_t
,

83 
ut32_t
 &
tx_pow_thshd
, 
bo
 &
ab
);

84 
bo
 
nd_tx_da
(
d
::
rg
 cڡ& 
fame
);

85 
_tx_da
();

87 
bo
 
check_tx_da
(
ut32_t
 
vue
);

89 
t_rx_chl
(
BzRxChls_t
 
chl
{ 
	mrx_chl_
 = channel; }

90 
bo
 
t_rx_ga
(
ut32_t
 
ga_dex
);

91 
	md
::
rg
 
cv_rx_da
(
ut32_t
 
pots
, ut32_
chls
);

92 
	md
::
rg
 
g_rx_chl
();

94 
cv_rx_da
(
ut32_t
 
pots
, ut32_
chls
, 
DaAay
 & 
x
,

95 
DaAay
 & 
rx1_i
, DaAay & 
rx1_q
, DaAay & 
rx1_f
,

96 
DaAay
 & 
rx2_i
, DaAay & 
rx2_q
, DaAay & 
rx2_f
);

98 
bo
 
t_rx_ga_cڌ_mode
(bo 
is_imode
 = 
l
);

99 
bo
 
t_rx_ga__p
(
decSp
 = 1, 
cSp
 = 1);

100 
bo
 
t_gio_d
(bo 
is_out
 = 
ue
);

101 
bo
 
rx1_ga
(bo 
add
 = 
ue
);

102 
bo
 
rx2_ga
(bo 
add
 = 
ue
);

104 
bo
 
t_x_ga
(
BzObsRxChls_t
 
chl
, 
ut32_t
 
ga_dex
);

105 
	md
::
rg
 
cv_x_da
(
ut32_t
 
pots
);

106 * 
g_rx_da
({  
	mrx_da
; }

108 
t_ls_chls
(
d
::
rg
 cڡ& 
chls
);

109 
bo
 
run_ls
(
ut32_t
 
masks
);

110 
ut32_t
 
ls_r_code
();

111 
	md
::
rg
 
ls_r_xt
(
ut32_t
 
r_code
);

113 
bo
 
tup_rx_agc
(
BzAgcCfg_t
 *
cfg
);

115 
bo
 
dio_
();

116 
bo
 
dio_off
();

118 
uput_
();

119 
tx1_li_ab
(
bo
 

);

120 
tx2_li_ab
(
bo
 

);

121 
igg_out
(
bo
 

);

122 
a_pow
(
bo
 

);

123 
t_debug
({ 
	mis_debug_
 = 
ue
; }

124 
t32_t
 
rx_ga_dex
();

125 
	md
::
rg
 
ga_mode
({  
ga_mode_
; }

127 
bo
 
t_204b_syef
(bo 

);

128 
bo
 
t_dds_off
();

130 
bo
 
wre_ga_g
(
offt
, 
ut32_t
 
vue
);

131 
bo
 
ad_ga_g
(
offt
, 
ut32_t
& 
vue
);

133 
bo
 
rx_ir_ab
();

135 
bo
 
tx1_ab
(bo 

);

136 
bo
 
tx2_ab
(bo 

);

137 
bo
 
rx1_ab
(bo 

);

138 
bo
 
rx2_ab
(bo 

);

139 
bo
 
x1_ab
(bo 

);

140 
bo
 
x2_ab
(bo 

);

141 
	mive
:

142 
d
::
rg
 
g_fh
(d::rg cڡ& 
fame
);

143 
	md
::
rg
 
g_rxfame
(
ut32_t
 
pots
, 
bo
 
is_fu
 = 
ue
);

144 
	md
::
rg
 
g_xfame
(
ut32_t
 
pots
, 
bo
 
is_fu
 = 
ue
);

145 
bo
 
ve_da_fe
(
d
::
rg
 cڡ& 
fame
, 
ut32_t
 
pots
);

146 
	md
::
rg
 
ve_hex_da
(
ut32_t
 
pots
);

147 
	md
::
rg
 
ve_dec_da
(
ut32_t
 
pots
);

148 
BzIn_t
* 
dev_cfig
();

149 
t_cv_rx_da
(
ut32_t
 
pots
, ut32_
chls
);

150 
d_cv_rx_da
();

152 
bo
 
ݒ_hdwe
();

153 
bo
 
t_devi
();

154 
bo
 
g_bo_us
();

155 
bo
 
ld_fmwe
();

156 
bo
 
wa_fmwe_ady
();

157 
bo
 
ld_cfig
();

158 
bo
 
wre_ofe
();

159 
bo
 
wa_ofe_de
();

160 
bo
 
t_rf_eq
();

161 
bo
 
t_aux_eq
();

162 
bo
 
wa_ls_lock_de
();

163 
bo
 
run_ls
();

164 
bo
 
wa_ls_de
();

165 
bo
 
jesd204b_cfig
();

166 
bo
 
wa_jes204b_cfig_de
();

167 
bo
 
ab_ackg_ls
();

168 
bo
 
ab_syef_toame
();

169 
	mive
:

170 
BzDevi_t
 
devi_
{};

171 
BzTxPaPreCfg_t
 
	mcfg
{};

172 
BzTxChls_t
 
	mtx_chl_
;

173 
BzRxChls_t
 
	mrx_chl_
;

174 
BzRadioCMode
 
	mmode_
 = 
BZ_PIN_MODE
;

175 
ut32_t
 
	mdev_id_
;

176 
BzIn_t
 
	mdev1_cfig_
;

177 
BzIn_t
 
	mdev2_cfig_
;

178 
ut64_t
 
	mrf_eq
;

179 
ut64_t
 
	maux_eq
;

180 
	md
::
rg
 
ga_mode_
;

181 
t32_t
 
	mrx1_ga_dex_
;

182 
t32_t
 
	mrx2_ga_dex_
;

183 
	maxi_fe_
;

184 
	mmem_fe_
;

185 *
	mtx_da
;

186 *
	mrx_da
;

187 
bo
 
	mis_debug_
 = 
ue
;

	@/root/BZ_AUTOTEST/BZ20-RRU/app/src/command/command.c

1 
	~<commd.h
>

3 
	~<dio.h
>

4 
	~<dlib.h
>

5 
	~<rg.h
>

7 
	~<adle/adle.h
>

8 
	~<adle/hiy.h
>

10 
	#COMMAND_MAX_SIZE
 300

	)

11 
	#VARLISTMAX
 10

	)

12 
	#CMD_PROMPT_STR
 "BZRU->"

	)

16 (*
	tCommdHdr
)(,,,,,,,,,);

17 
	sCommd


19 cڡ *
cmd
;

20 cڡ *
hp
;

21 
CommdHdr
 
hdr
;

22 }
	tCommd
;

24 
Commd
 
commds
[
COMMAND_MAX_SIZE
] = { 0 
	}
};

26 
	$FdCommd
(* 
r
, 
Commd
 ** 
pCmd
)

28 if(0 =
r
 || 0 =
pCmd
)

31 
i
;

32 
i
 = 0; i < 
COMMAND_MAX_SIZE
; i++)

34 if0 =
commds
[
i
].
hdr
)

37 
nS
 = 
	`
((cڡ *)
r
);

38 
n
 = 
	`
(
commds
[
i
].
cmd
);

40 if(0 =
	`memcmp
(
commds
[
i
].
cmd
, (cڡ *)
r
, (
n
 > 
nS
) ?en :enStr))

42 *
pCmd
 = &
commds
[
i
];

47 
	}
}

50 
	$ExecuCommd
(
Commd
 *
pCmd
,

51 
ut32_t
 
p1
, ut32_
p2
, ut32_
p3
, ut32_
p4
, ut32_
p5
,

52 
ut32_t
 
p6
, ut32_
p7
, ut32_
p8
, ut32_
p9
, ut32_
p10
)

54 if(0 =
pCmd
 || 0 =pCmd->
hdr
)

56 
	`tf
("\r\nExecuteCmdararror");

59  (
pCmd
->
hdr
)(
p1
, 
p2
,
p3
,
p4
,
p5
,
p6
,
p7
,
p8
,
p9
,
p10
);

60 
	}
}

62 
	$PCommd
(*
cmdSg
)

64 
Commd
 *
pCmd
 = 0;

65 *
p
 = 0,*
cmd
 = 0;

66 
ut32_t
 
vLi
[
VARLISTMAX
] = { 0 };

67 
ut32_t
 
i
 = 0;

69 
	`add_hiy
 (
cmdSg
);

70 if((('/' =
cmdSg
[0]) && ('/' == cmdString[1]))

71 || ('@' =
cmdSg
[0])

72 || ('#' =
cmdSg
[0]))

74 
	`tf
("\r\nAnnotating code!");

75 
	`tf
("\r\n"
CMD_PROMPT_STR
);

76 
	`fush
(
dout
);

80 
p
 = 
	`ok
((*)
cmdSg
," ");

81 if(0 !
p
)

83 
cmd
 = 
p
;

84 
p
)

86 
p
 = 
	`ok
(0," ");

87 if(0 =
p
)

89 if(
i
 < 
VARLISTMAX
)

91 i((('/' =
p
[0]) && ('/' ==p[1]))

92 ||('@' =
p
[0])

93 ||('#' =
p
[0]))

97 if(
p
[0] == '0' &&[1] == 'x')

99 
p
 += 2;

100 
vLi
[
i
++] = 
	`oul
(
p
,0,16);

102 if(
p
[0] == 'c')

104 
p
++;

105 
vLi
[
i
++] = 
	`of
(
p
);

109 
vLi
[
i
++] = 
	`oul
(
p
,0,10);

119 if(
	`FdCommd
(
cmd
, &
pCmd
))

120 
	`ExecuCommd
(
pCmd
, 
vLi
[0], varList[1], varList[2], varList[3], varList[4], varList[5], varList[6], varList[7], varList[8], varList[9]);

122 
	`tf
("\r\nUnknown command \r\n");

124 
	}
}

126 
t32_t
 
	$RegiCommd
(cڡ * 
cmd
, cڡ * 
hp
, *
hdr
)

128 if(!
cmd
 || !
hp
 || !
hdr
)

130 
	`tf
("%s: invidam\n", 
__func__
);

134 
ut32_t
 
i
;

136 
i
 = 0; i < 
COMMAND_MAX_SIZE
; i++)

138 if(!
commds
[
i
].
hdr
)

140 
commds
[
i
].
cmd
 = cmd;

141 
commds
[
i
].
hp
 = help;

142 
commds
[
i
].
hdr
 = handler;

147 if(
i
 =
COMMAND_MAX_SIZE
)

149 
	`tf
("%s: imax size=%u\n", 
__func__
, 
i
);

154 
	}
}

156 
ut8_t
 
	grunag
 = 1;

158 
	$ExCommd
()

160 
runag
 = 0;

161 
	}
}

164 
t32_t
 
	$WaFCommd
()

166 
vue
;

167 
ut8_t
 
n
 = 0;

168 
ut8_t
 
curs
 = 0;

169 
	`RegiCommd
("hp", "showhige", 
ShowCommds
);

170 
	`RegiCommd
("ex", "exhogm", 
ExCommd
);

171 
	`_bd_key
('\t', 
_
);

172 
	`ShowCommds
();

173 
runag
)

175 *
le_ad
 = 
	`adle
(
CMD_PROMPT_STR
);

176 if(!
le_ad
)

178 
	`PCommd
(
le_ad
);

179 
	`
(
le_ad
);

182 
	}
}

184 
	$ShowCommds
()

186 
ut32_t
 
i
;

187 
i
 = 0; i < 
COMMAND_MAX_SIZE
; i++)

189 if(
commds
[
i
].
hdr
)

190 
	`tf
("%-10s: %s\n", 
commds
[
i
].
cmd
, commds[i].
hp
);

192 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/app/src/talise/bz_config.c

10 
	~"bz_cfig.h
"

12 
st16_t
 
	gbzTxFCfs
[40] = {185,307,-238,-43,163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,

14 
st16_t
 
	gbzRxFCfs
[36] = {163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,471,-1155,-366,

16 
st16_t
 
	gbzObxFCfs
[36] = {163,87,-242,-50,293,13,-353,46,410,-124,-463,225,506,-350,-536,503,545,-685,-526,901,471,-1155,-366,

19 
BzIn_t
 
	gB20In
 =

21 .
mode
 =

23 .
tddMode
=1,

24 .
	gdpdMode
=0,

27 .
	grx
 =

29 .
rxProfe
 =

31 .
rxF
 =

33 .
ga_dB
 = -6,

34 .
	gnumFCfs
 = 72,

35 .
	gcfs
 = &
bzRxFCfs
[0],

37 .
	grxFByss
 = 1,

38 .
	grxFDecimi
 = 1,

39 .
	grhb1Decimi
 = 2,

40 .
	grxOuutRe_kHz
 = 245760,

41 .
	grfBdwidth_Hz
 = 200000000,

42 .
	grxBbf3dBCr_kHz
 = 220000,

44 .
	grxGaCl
 =

46 .
rxgaMode
 = 
BZ_MGC
,

47 .
	grxmgcMode
 = 
BZ_MGC
,

48 .
	grx1GaIndex
 = 127,

49 .
	grx2GaIndex
 = 127,

50 .
	grx1MaxGaIndex
 = 127,

51 .
	grx1MGaIndex
 = 0,

52 .
	grx2MaxGaIndex
 = 127,

53 .
	grx2MGaIndex
 = 0

55 .
	grxGaClPInfo
 =

57 .
cSp
 = 1,

58 .
	gdecSp
 = 1,

59 .
	grx1GaClPInfo
 =

61 .
rxGaIncP
 = 
BZ_GPIO_08
,

62 .
	grxGaDecP
 = 
BZ_GPIO_09
,

63 .
	grxGaIncPFunc
 = 
BZ_SEL_1
,

64 .
	grxGaDecPFunc
 = 
BZ_SEL_1
,

66 .
	grx2GaClPInfo
 =

68 .
rxGaIncP
 = 
BZ_GPIO_10
,

69 .
	grxGaDecP
 = 
BZ_GPIO_11
,

70 .
	grxGaIncPFunc
 = 
BZ_SEL_1
,

71 .
	grxGaDecPFunc
 = 
BZ_SEL_1
,

75 .
	grxSlirPInfo
 =

78 .
EbSlir
 = 
BZ_RXSLICER_EN
,

79 .
	grx1SlirPInfo
 =

81 .
rx1SlirP_0
 = 
BZ_GPIO_07
,

82 .
	grx1SlirP_1
 = 
BZ_GPIO_08
,

83 .
	grx1SlirP_2
 = 
BZ_GPIO_09
,

85 .
	grx2SlirPInfo
 =

87 .
rx2SlirP_0
 = 
BZ_GPIO_10
,

88 .
	grx2SlirP_1
 = 
BZ_GPIO_11
,

89 .
	grx2SlirP_2
 = 
BZ_GPIO_12
,

91 .
	grxSlirPFunc
 = 
BZ_SEL_3
,

93 .
	grxChls
 = 
BZ_RXOFF


97 .
	gtx
 =

99 .
txProfe
 =

101 .
txF
 =

103 .
ga_dB
 = 0,

104 .
	gnumFCfs
 = 80,

105 .
	gcfs
 = &
bzTxFCfs
[0],

107 .
	gtxFByss
 = 1,

108 .
	gtxFIpީi
 = 1,

109 .
	gthb1Ipީi
 = 2,

110 .
	gthb2Ipީi
 = 2,

111 .
	gthb3Ipީi
 = 1,

112 .
	gtxIutRe_kHz
 = 491520,

113 .
	grfBdwidth_Hz
 = 400000000,

114 .
	gtxBbf3dBCr_kHz
 = 220000,

116 .
	gtxChls
 = 
BZ_TX1TX2
,

117 .
	gtxGaCl
 =

119 .
txgaMode
 = 
BZ_MGC
,

120 .
	gtxmgcMode
 = 
BZ_APIMODE
,

121 .
	gtx1GaIndex
 = 40,

122 .
	gtx2GaIndex
 = 40,

123 .
	gtx1MaxGaIndex
 = 63,

124 .
	gtx1MGaIndex
 = 0,

125 .
	gtx2MaxGaIndex
 = 63,

126 .
	gtx2MGaIndex
 = 0

131 .
	gobsRx
 =

133 .
xProfe
 =

135 .
rxF
 =

137 .
ga_dB
 = 6,

138 .
	gnumFCfs
 = 72,

139 .
	gcfs
 = &
bzObxFCfs
[0],

141 .
	gxFByss
 = 1,

142 .
	gxFDecimi
 = 1,

143 .
	gxOuutRe_kHz
 = 491520,

144 .
	grfBdwidth_Hz
 = 450000000,

145 .
	grxBbf3dBCr_kHz
 = 495000,

147 .
	gxGaCl
 =

149 .
xgaMode
 = 
BZ_MGC
,

150 .
	gxmgcMode
 = 
BZ_APIMODE
,

151 .
	gx1GaIndex
 = 127,

152 .
	gx2GaIndex
 = 127,

153 .
	gx1MaxGaIndex
 = 127,

154 .
	gx1MGaIndex
 = 0,

155 .
	gx2MaxGaIndex
 = 127,

156 .
	gx2MGaIndex
 = 0

158 .
	gobsRxChlsEb
 = 
BZ_ORX1ORX2
,

162 .
	gocks
 =

164 .
deviClock_kHz
 = 122880,

165 .
	gr_equcy_Hz
 = 2400000,

166 .
	grfPUExLo
 = 0,

167 .
	grfPPhaSyncMode
 = 
BZ_RFPLLMCS_NOSYNC


171 .
	gjesd204Stgs
 =

173 .
rdesClk
 = 
SERDES_CLK_10G
,

176 .
	gtxCfig
 =

178 .
lid
 = 0x0a418820,

179 .
	gsubCss
 = 1,

180 .
	gcf
 = 0,

181 .
	gcs
 = 0,

182 .
	gf
 = 2,

183 .
	gk
 = 32,

184 .
	gl
 = 4,

185 .
	gn
 = 16,

186 .
	gm
 = 4,

187 .
	gٮ
 = 16,

188 .
	gs
 = 1,

189 .
	ghd
 = 0x1,

190 .
	grxCeIruMask
 = 0xFFFD,

191 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

192 .
	gs
 = 0x0,

193 .
	gabLkTe
 = 0x0,

195 .
	grxFtuDib
 = 0x10,

198 .
	grxCfig
 =

200 .
lid
 = 0x0a418820,

201 .
	gsubCss
 = 1,

202 .
	gcf
 = 0,

203 .
	gcs
 = 0,

204 .
	gf
 = 4,

205 .
	gk
 = 32,

206 .
	gl
 = 2,

207 .
	gn
 = 16,

208 .
	gm
 = 4,

209 .
	gٮ
 = 16,

210 .
	gs
 = 1,

211 .
	ghd
 = 0x1,

212 .
	gtxIsDay
 = 0xc,

216 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

217 .
	gs
 = 0x0,

218 .
	gceIruMask
 = 0xd,

219 .
	gbs
 = 0x0,

221 .
	gabLkTe
 = 0x1,

223 .
	grxFtuDib
 = 0x10,

226 .
	gxCfig
 =

228 .
lid
 = 0x0a418820,

229 .
	gsubCss
 = 1,

230 .
	gcf
 = 0,

231 .
	gcs
 = 0,

232 .
	gf
 = 2,

233 .
	gk
 = 32,

234 .
	gl
 = 2,

235 .
	gn
 = 16,

236 .
	gm
 = 4,

237 .
	gٮ
 = 16,

238 .
	gs
 = 1,

239 .
	ghd
 = 0x1,

240 .
	gtxIsDay
 = 0xc,

244 .
	grxIsAdnMiscDas12c
 = 0x0F000080,

245 .
	gs
 = 0x0,

246 .
	gceIruMask
 = 0xd,

247 .
	gbs
 = 0x0,

249 .
	gabLkTe
 = 0x0,

251 .
	grxFtuDib
 = 0x10,

	@/root/BZ_AUTOTEST/BZ20-RRU/app/src/talise/plaxi.h

1 #ide
PLAXI_H


2 
	#PLAXI_H


	)

4 
	#PLAXI_IOC_MAGIC
 'b'

	)

6 
	#PLAXI_CHIP_SEL
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 15, )

7 
	#PLAXI_SET_LANPA_PWR
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 14, )

8 
	#PLAXI_SET_TRIGGER_OUT
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 13, )

9 
	#PLAXI_FPGA_VERSION
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 12, )

10 
	#PLAXI_READ_204B_STATE
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 11, )

11 
	#PLAXI_READ_IOPAD_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 10, )

12 
	#PLAXI_WRITE_IOPAD_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 9, )

13 
	#PLAXI_READ_IO_DIR_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 8, )

14 
	#PLAXI_WRITE_IO_DIR_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 7, )

15 
	#PLAXI_READ_204B_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 6, )

16 
	#PLAXI_WRITE_204B_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 5, )

17 
	#PLAXI_READ_TX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 4, )

18 
	#PLAXI_WRITE_TX_DATA_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 3, )

19 
	#PLAXI_READ_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 2, )

20 
	#PLAXI_WRITE_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 1, )

21 

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz20.h

1 #ide
BZ20_H


2 
	#BZ20_H


	)

4 
	sbz20_commd


6 
	mlow_addr
;

7 
	mhigh_addr
;

8 
	mda
;

9 }
	tbz20_commd
;

11 
	#BZ20_IOC_MAGIC
 'b'

	)

13 
	#BZ20_PIN_RESET
 
	`_IO
(
BZ20_IOC_MAGIC
, 1)

	)

14 
	#BZ20_WRITE_REG
 
	`_IOW
(
BZ20_IOC_MAGIC
, 2, )

	)

15 
	#BZ20_READ_REG
 
	`_IOR
(
BZ20_IOC_MAGIC
, 3, )

	)

16 
	#BZ20_TX1_ENABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 4)

	)

17 
	#BZ20_TX1_DISABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 5)

	)

18 
	#BZ20_TX2_ENABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 6)

	)

19 
	#BZ20_TX2_DISABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 7)

	)

20 
	#BZ20_RX1_ENABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 8)

	)

21 
	#BZ20_RX1_DISABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 9)

	)

22 
	#BZ20_RX2_ENABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 10)

	)

23 
	#BZ20_RX2_DISABLE
 
	`_IO
(
BZ20_IOC_MAGIC
, 11)

	)

24 
	#BZ20_INTERRUPT_ON
 
	`_IO
(
BZ20_IOC_MAGIC
, 12)

	)

25 
	#BZ20_TX1_CALI_ON
 
	`_IO
(
BZ20_IOC_MAGIC
, 13)

	)

26 
	#BZ20_TX1_CALI_OFF
 
	`_IO
(
BZ20_IOC_MAGIC
, 14)

	)

27 
	#BZ20_TX2_CALI_ON
 
	`_IO
(
BZ20_IOC_MAGIC
, 15)

	)

28 
	#BZ20_TX2_CALI_OFF
 
	`_IO
(
BZ20_IOC_MAGIC
, 16)

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_agc.h

11 #ide
_BZ_AGC_H_


12 
	#_BZ_AGC_H_


	)

14 
	~"bz_agc_tys.h
"

15 
	~"bz_tys.h
"

24 
ut32_t
 
BZ_tupRxAgc
(
BzDevi_t
 *
hw_iv
, 
BzAgcCfg_t
 *
rxAgcCl
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_agc_types.h

11 #ide
_BZ_AGC_TYPES_H_


12 
	#_BZ_AGC_TYPES_H_


	)

13 
	~"bz_da_tys.h
"

21 
ut8_t
 
	mdEbMsumt
;

22 
ut8_t
 
	mdAackMode
;

23 
ut8_t
 
	mdMsumtDuti
;

24 
ut16_t
 
	mdImmdOvNum
;

25 
ut16_t
 
	mdPiOvNum
;

26 
ut16_t
 
	mdUndNum
;

27 
ut16_t
 
	mdLowTsh
;

28 
ut16_t
 
	mdHighTsh
;

29 
ut8_t
 
	mdGaSpAack
;

30 
ut8_t
 
	mdGaSpRecovy
;

32 
ut8_t
 
	mhb2EbMsumt
;

33 
ut8_t
 
	mhb2MsumtDuti
;

34 
ut8_t
 
	mhb2RecovyMode
;

35 
ut8_t
 
	mhb2AackMode
;

36 
ut16_t
 
	mhb2OvThsh
;

37 
ut16_t
 
	mhb2UndRgeHighThsh
;

38 
ut16_t
 
	mhb2UndRgeMidThsh
;

39 
ut16_t
 
	mhb2UndRgeLowThsh
;

40 
ut16_t
 
	mhb2OvldThshC
;

41 
ut16_t
 
	mhb2UndRgeHighThshC
;

42 
ut16_t
 
	mhb2UndRgeMidThshC
;

43 
ut16_t
 
	mhb2UndRgeLowThshC
;

44 
ut16_t
 
	mhb2PiExededC
;

45 
ut16_t
 
	mhb2PiUndExededC
;

46 
ut16_t
 
	mhb2ImmdExededC
;

47 
ut16_t
 
	mhb2ImmdUndHigC
;

48 
ut16_t
 
	mhb2ImmdUndLowC
;

49 
ut16_t
 
	mhb2ImmdUndMidC
;

50 
ut8_t
 
	mhb2GaSpHighRecovy
;

51 
ut8_t
 
	mhb2GaSpLowRecovy
;

52 
ut8_t
 
	mhb2GaSpMidRecovy
;

53 
ut8_t
 
	mhb2GaSpAack
;

54 } 
	tBzAgcPk_t
;

62 
ut8_t
 
	mpowEbMsumt
;

63 
ut8_t
 
	mpowInMux
;

64 
ut8_t
 
	mpowMsumtDuti
;

65 
ut16_t
 
	mpowAackHigSp
;

66 
ut16_t
 
	mpowAackLowSp
;

67 
ut16_t
 
	mpowRecovyHigSp
;

68 
ut16_t
 
	mpowRecovyLowSp
;

69 
ut16_t
 
	mpowOvHigThsh
;

70 
ut16_t
 
	mpowOvLowThsh
;

71 
ut16_t
 
	mpowUndHigThsh
;

72 
ut16_t
 
	mpowUndLowThsh
;

73 } 
	tBzAgcPow_t
;

81 
ut8_t
 
	magcClkDiv
;

82 
ut8_t
 
	magcPkWaCou
;

83 
ut32_t
 
	magcGaUpdeCou
;

84 
ut8_t
 
	magcThshPvtGa
;

85 
ut8_t
 
	magcPkThshGaCڌMode
;

87 
BzAgcPow_t
 
	magcPow
;

88 
BzAgcPk_t
 
	magcPk
;

90 } 
	tBzAgcCfg_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_cals.h

11 #ide
_BZ_CALS_H_


12 
	#_BZ_CALS_H_


	)

14 
	~"bz_ls_tys.h
"

15 
	~"bz_tys.h
"

26 
ut32_t
 
BZ_runInCs
(
BzDevi_t
 *
hw_iv
,ut32_
CMask
);

36 
ut32_t
 
BZ_waInCsDe
(
BzDevi_t
 *
hw_iv
,ut32_
timeout
);

46 
ut32_t
 
BZ_gInCsStus
(
BzDevi_t
 *
hw_iv
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_cals_types.h

10 #ide
_BZ_CALS_TYPES_H_


11 
	#_BZ_CALS_TYPES_H_


	)

14 
	mADC_TUNER
 = 0x00000001,

15 
	mSAR_CAL
 = 0x00000002,

16 
	mTX_DAC
 = 0x00000004,

17 
	mTX_BB_FILTER
 = 0x00000008,

18 
	mTIA_3DB_CORNER
 = 0x00000010,

19 
	mTIA_LPF_3DB_CORNER
 = 0x00000020,

20 
	mDC_OFFSET
 = 0x00000040,

21 
	mRX_QEC_INIT
 = 0x00000080,

22 
	mORX_QEC_INIT
 = 0x00000100,

23 
	mLOOPBACK_RX_LO_DELAY
 = 0x00000200,

24 
	mLOOPBACK_RX_QEC_INIT
 = 0x00000400,

25 
	mPATH_DELAY
 = 0x00000800,

26 
	mTX_LO_LEAKAGE_INTERNAL
 = 0x00001000,

27 
	mTX_LO_LEAKAGE_EXTERNAL
 = 0x00002000,

28 
	mTX_QEC_INIT
 = 0x00004000

29 } 
	tBzInCibtis_t
;

33 
	mTRACK_NONE
 = 0x00000000,

34 
	mTRACK_RX1_QEC
 = 0x00000001,

35 
	mTRACK_RX2_QEC
 = 0x00000002,

36 
	mTRACK_ORX1_QEC
 = 0x00000004,

37 
	mTRACK_ORX2_QEC
 = 0x00000008,

38 
	mTRACK_TX1_LOL
 = 0x00000010,

39 
	mTRACK_TX2_LOL
 = 0x00000020,

40 
	mTRACK_TX1_QEC
 = 0x00000040,

41 
	mTRACK_TX2_QEC
 = 0x00000080,

42 
	mTRACK_RX1_HD2
 = 0x00000100,

43 
	mTRACK_RX2_HD2
 = 0x00000200,

44 
	mTRACK_ALL
 = 0x000003FF

45 } 
	tBzTckgCibtis_t
;

54 
	mRX1_DC_OFFSET_ERROR
 = 0x10000040,

55 
	mRX2_DC_OFFSET_ERROR
 = 0x11000040,

56 
	mRX1_QEC_INIT_ERROR
 = 0x12000080,

57 
	mRX2_QEC_INIT_ERROR
 = 0x13000080,

58 
	mTX1_LO_LEAKAGE_INTERNAL_ERROR
 = 0x20001000,

59 
	mTX2_LO_LEAKAGE_INTERNAL_ERROR
 = 0x21001000,

60 
	mTX1_LO_LEAKAGE_EXTERNAL_ERROR
 = 0x22002000,

61 
	mTX2_LO_LEAKAGE_EXTERNAL_ERROR
 = 0x23002000,

62 
	mTX1_QEC_INIT_ERROR
 = 0x24004000,

63 
	mTX2_QEC_INIT_ERROR
 = 0x25004000,

64 
	mBZ_BBPLL_LOCK_ERROR
 = 0x33000000,

65 
	mBZ_RFPLL_LOCK_ERROR
 = 0x31000000,

66 
	mBZ_AUXPLL_LOCK_ERROR
 = 0x32800000,

67 
	mBZ_CALI_STATS_OK
 = 0x50000000

68 } 
	tBzCE_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_config_types.h

11 #ide
_BZ_CONFIG_TYPES_H_


12 
	#_BZ_CONFIG_TYPES_H_


	)

13 
	~"bz_da_tys.h
"

14 
	~"bz_rx_tys.h
"

15 
	~"bz_tx_tys.h
"

16 
	~"bz_jesd204b_tys.h
"

20 
	mBZ_STATE_POWERONRESET
 = 0x00,

21 
	mBZ_STATE_INITIALIZED
 = 0x01,

22 
	mBZ_STATE_RISCVLOADED
 = 0x02,

23 
	mBZ_STATE_CALS_RUN
 = 0x04,

24 
	mBZ_STATE_RADIOON
 = 0x08

25 } 
	tBzSs_t
;

30 
	mBZ_RFPLLMCS_NOSYNC
 = 0x0,

31 
	mBZ_RFPLLMCS_INIT_AND_SYNC
 = 0x1,

32 
	mBZ_RFPLLMCS_INIT_AND_1TRACK
 = 0x2,

33 
	mBZ_RFPLLMCS_INIT_AND_CONTTRACK
 = 0x3

34 } 
	tBzRfPMcs_t
;

40 
st16_t
 
	mga_dB
;

41 
ut32_t
 
	mnumFCfs
;

42 
st16_t
 *
	mcfs
;

43 } 
	tBzF_t
;

51 
BzF_t
 
	mtxF
;

52 
ut8_t
 
	mtxFByss
;

53 
ut8_t
 
	mtxFIpީi
;

54 
ut8_t
 
	mthb1Ipީi
;

55 
ut8_t
 
	mthb2Ipީi
;

56 
ut8_t
 
	mthb3Ipީi
;

57 
ut32_t
 
	mtxIutRe_kHz
;

58 
ut32_t
 
	mimySigBdwidth_Hz
;

59 
ut32_t
 
	mrfBdwidth_Hz
;

60 
ut32_t
 
	mtxBbf3dBCr_kHz
;

61 } 
	tBzTxProfe_t
;

68 
BzF_t
 
	mrxF
;

69 
ut8_t
 
	mrxFByss
;

70 
ut8_t
 
	mrxFDecimi
;

71 
ut8_t
 
	mrhb1Decimi
;

72 
ut32_t
 
	mrxOuutRe_kHz
;

73 
ut32_t
 
	mrfBdwidth_Hz
;

74 
ut32_t
 
	mrxBbf3dBCr_kHz
;

75 } 
	tBzRxProfe_t
;

82 
BzF_t
 
	mrxF
;

83 
ut8_t
 
	mxFByss
;

84 
ut8_t
 
	mxFDecimi
;

85 
ut32_t
 
	mxOuutRe_kHz
;

86 
ut32_t
 
	mrfBdwidth_Hz
;

87 
ut32_t
 
	mrxBbf3dBCr_kHz
;

88 } 
	tBzORxProfe_t
;

94 
ut32_t
 
	mdeviClock_kHz
;

95 
ut32_t
 
	mr_equcy_Hz
;

96 
ut8_t
 
	mrfPUExLo
;

97 
BzRfPMcs_t
 
	mrfPPhaSyncMode
;

98 } 
	tBzDigClocks_t
;

105 
BzGaMode_t
 
	mxgaMode
;

106 
BzClWay
 
	mxmgcMode
;

107 
ut8_t
 
	mx1GaIndex
;

108 
ut8_t
 
	mx2GaIndex
;

109 
ut8_t
 
	mx1MaxGaIndex
;

110 
ut8_t
 
	mx1MGaIndex
;

111 
ut8_t
 
	mx2MaxGaIndex
;

112 
ut8_t
 
	mx2MGaIndex
;

113 } 
	tBzORxGaCڌ_t
;

121 
BzGaMode_t
 
	mtxgaMode
;

122 
BzClWay
 
	mtxmgcMode
;

123 
ut8_t
 
	mtx1GaIndex
;

124 
ut8_t
 
	mtx2GaIndex
;

125 
ut8_t
 
	mtx1MaxGaIndex
;

126 
ut8_t
 
	mtx1MGaIndex
;

127 
ut8_t
 
	mtx2MaxGaIndex
;

128 
ut8_t
 
	mtx2MGaIndex
;

129 } 
	tBzTxGaCڌ_t
;

136 
BzORxProfe_t
 
	mxProfe
;

137 
BzORxGaCڌ_t
 
	mxGaCl
;

138 
BzObsRxChls_t
 
	mobsRxChlsEb
;

139 } 
	tBzObsRxStgs_t
;

145 
BzTxProfe_t
 
	mtxProfe
;

146 
BzTxChls_t
 
	mtxChls
;

147 
BzTxGaCڌ_t
 
	mtxGaCl
;

148 } 
	tBzTxStgs_t
;

154 
BzGaMode_t
 
	mrxgaMode
;

155 
BzClWay
 
	mrxmgcMode
;

156 
ut8_t
 
	mrx1GaIndex
;

157 
ut8_t
 
	mrx2GaIndex
;

158 
ut8_t
 
	mrx1MaxGaIndex
;

159 
ut8_t
 
	mrx1MGaIndex
;

160 
ut8_t
 
	mrx2MaxGaIndex
;

161 
ut8_t
 
	mrx2MGaIndex
;

162 } 
	tBzRxGaCڌ_t
;

168 
BzRxProfe_t
 
	mrxProfe
;

169 
BzRxGaCڌ_t
 
	mrxGaCl
;

170 
BzRxGaClP_t
 
	mrxGaClPInfo
;

171 
BzRxSlirP_t
 
	mrxSlirPInfo
;

172 
BzRxChls_t
 
	mrxChls
;

173 } 
	tBzRxStgs_t
;

177 
ut32_t
 
	mtddMode
;

178 
ut32_t
 
	mdpdMode
;

180 }
	tBzModeStg_t
;

184 
BzModeStg_t
 
	mmode
;

185 
BzRxStgs_t
 
	mrx
;

186 
BzTxStgs_t
 
	mtx
;

187 
BzObsRxStgs_t
 
	mobsRx
;

188 
BzDigClocks_t
 
	mocks
;

189 
BzJesdStgs_t
 
	mjesd204Stgs
;

190 } 
	tBzIn_t
;

192 
BzIn_t
 
BzIn
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_data_types.h

11 #ide
__B20_DATA_TYPES_H__


12 
	#__B20_DATA_TYPES_H__


	)

14 
	~<rg.h
>

15 
	~<dt.h
>

23 
	tut8_t
;

24 
	tst8_t
;

25 
	tut16_t
;

26 
	tst16_t
;

27 
	tut32_t
;

28 
	tst32_t
;

30 
	#BIT
(
n
(1<<))

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_error.h

12 #ide
__BZ_ERROR_H__


13 
	#__BZ_ERROR_H__


	)

15 
	~"bz_r_tys.h
"

16 
	~"bz_tys.h
"

27 
BzRecovyAis_t
 
BZ_ApiEHdr
(
BzDevi_t
 *
hw_iv
, 
BzEHdls_t
 
rHdl
, 
ut32_t
 
dE
, BzRecovyAis_
tV
, BzRecovyAis_
cAi
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_error_types.h

13 #ide
BZ_ERROR_TYPES_H_


14 
	#BZ_ERROR_TYPES_H_


	)

20 
	mBZ_ERR_OK
 = 0x0,

21 
	mBZ_ERR_INV_NULL_INIT_PARAM
 = 0x1,

22 
	mBZ_ERR_DEVICE_INIT_NULL_PARAM
 = 0x2,

23 
	mBZ_ERR_VERTXPFILE_TXINPUTRATE
 = 0x3,

24 
	mBZ_ERR_VERTXPFILE_RFBAND
 = 0x4,

25 
	mBZ_ERR_VERTXPFILE_THB1
 = 0x5,

26 
	mBZ_ERR_VERTXPFILE_THB2
 = 0x6,

27 
	mBZ_ERR_VERTXPFILE_THB3
 = 0x7,

28 
	mBZ_ERR_VERTXPFILE_TXFIR
 = 0x8,

29 
	mBZ_ERR_VERTXPFILE_TXFIR1
 = 0x9,

30 
	mBZ_ERR_VERTRXPFILE_RXINPUTRATE
 = 0xA,

31 
	mBZ_ERR_VERXPFILE_RFBAND
 = 0xB,

32 
	mBZ_ERR_VERRXPFILE_THB1
 = 0xC,

33 
	mBZ_ERR_VERRXPFILE_RXFIR1
 = 0xD,

34 
	mBZ_ERR_VERTORXPFILE_RXINPUTRATE
 = 0xE,

35 
	mBZ_ERR_VEORXPFILE_RFBAND
 = 0xF,

36 
	mBZ_ERR_VERORXPFILE_FIR
 = 0x10,

37 
	mBZ_ERR_VERORXPFILE_FIR1
 = 0x11,

38 
	mBZ_ERR_CLOCK_RFPLL_PHASE
 = 0x12,

39 
	mBZ_ERR_TXRXORX_CHANNLE
 = 0x13,

40 
	mBZ_ERR_TXRXORX_PRFILE_VALID
 = 0x14,

41 
	mBZ_ERR_TX1_MAX_GAIN_VALID
 = 0x15,

42 
	mBZ_ERR_TX2_MAX_GAIN_VALID
 = 0x16,

43 
	mBZ_ERR_RX_GAINPIN_CTRL_VALID
 = 0x17,

44 
	mBZ_ERR_RX1_MAX_GAIN_VALID
 = 0x18,

45 
	mBZ_ERR_RX2_MAX_GAIN_VALID
 = 0x19,

46 
	mBZ_ERR_ORX1_MAX_GAIN_VALID
 = 0x1A,

47 
	mBZ_ERR_ORX2_MAX_GAIN_VALID
 = 0x1B,

48 
	mBZ_ERR_GPIO_NUM_VALID
 = 0x1C,

49 
	mBZ_ERR_GPIO_MONITOR_PARAM_VALID
 = 0x1D

50 }
	tBzE_t
;

56 
	mBZ_ERRHDL_HAL_INIT
 = 0x0,

57 
	mBZ_ERRHDL_HAL_AGC
 = 0x1,

58 
	mBZ_ERRHDL_HAL_JES204B
 = 0x2,

59 
	mBZ_ERRHDL_HAL_OTP
 = 0x3,

60 
	mBZ_ERRHDL_HAL_RADIO
 = 0x4,

61 
	mBZ_ERRHDL_HAL_RISCV
 = 0x5,

62 
	mBZ_ERRHDL_HAL_RX
 = 0x6,

63 
	mBZ_ERRHDL_HAL_TX
 = 0x7,

64 
	mBZ_ERRHDL_HAL_GPIO
 = 0x8,

65 
	mBZ_ERRHDL_INITCALS
 = 0x9,

66 } 
	tBzEHdls_t
;

74 
	mBZ_NO_ACTION
 = 0x0,

75 
	mBZ_ERR_INIT_PLAT
 = 0x1,

76 
	mBZ_ERR_RESET_RISCV
 = 0x2,

77 
	mBZ_ERR_INIT_CALS
 = 0x3,

78 
	mBZ_ERR_RESET_SPI
 = 0x4,

79 
	mBZ_ERR_RESET_GPIO
 = 0x5,

80 
	mBZ_ERR_CHECK_PARAM
 = 0x6,

81 }
	tBzRecovyAis_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_gpio.h

11 #ide
BZ_GPIO_H_


12 
	#BZ_GPIO_H_


	)

14 
	~"bz_gpio_tys.h
"

15 
	~"bz_tys.h
"

27 
ut32_t
 
BZ_tGpioVue
(
BzDevi_t
 *
hw_iv
, 
BzGpioPS_t
 
gpioNum
, ut32_
Vue
);

38 
ut32_t
 
BZ_gGpioVue
(
BzDevi_t
 *
hw_iv
, 
BzGpioPS_t
 
gpioNum
, ut32_*
vue
);

49 
ut32_t
 
BZ_tGpioDei
(
BzDevi_t
 *
hw_iv
, 
BzGpioD_t
 
gpioOutEn
, 
BzGpioPS_t
 
gpioNum
);

60 
ut32_t
 
BZ_gGpioDei
(
BzDevi_t
 *
hw_iv
, 
BzGpioD_t
 *
gpioOutEn
, 
BzGpioPS_t
 
gpioNum
);

71 
ut32_t
 
BZ_tGpioSourCl
(
BzDevi_t
 *
hw_iv
, 
BzGpioClMode_t
 
gpioCl
, 
BzGpioPS_t
 
gpioNum
);

82 
ut32_t
 
BZ_gGpioSourCl
(
BzDevi_t
 *
hw_iv
, 
BzGpioClMode_t
 *
gpioCl
, 
BzGpioPS_t
 
gpioNum
);

94 
ut32_t
 
BZ_tGpioFuncS
(
BzDevi_t
 *
hw_iv
, 
BzGpioPFunc_t
 
gpioFunc
, 
BzGpioPS_t
 
gpioNum
);

105 
ut32_t
 
BZ_gGpioFuncS
(
BzDevi_t
 *
hw_iv
, 
BzGpioPFunc_t
 *
gpioFunc
, 
BzGpioPS_t
 
gpioNum
);

116 
ut32_t
 
BZ_tGpio3v3Oe
(
BzDevi_t
 *
hw_iv
, ut32_
gpio3v3OutEn
, 
BzGpioPS_t
 
gpioNum
);

125 
ut32_t
 
BZ_gGpio3v3Oe
(
BzDevi_t
 *
hw_iv
, ut32_*
gpio3v3OutEn
);

136 
ut32_t
 
BZ_tGpio3v3Ie
(
BzDevi_t
 *
hw_iv
, ut32_
gpio3v3InEn
, 
BzGpioPS_t
 
gpioNum
);

145 
ut32_t
 
BZ_gGpio3v3Ie
(
BzDevi_t
 *
hw_iv
, ut32_*
gpio3v3InEn
);

175 
ut32_t
 
BZ_tupAuxDacs
(
BzDevi_t
 *
hw_iv
,
BzGpioPS_t
 
Gpio3V3Num
);

186 
ut32_t
 
BZ_wreAuxDac
(
BzDevi_t
 *
hw_iv
,
BzGpioPS_t
 
Gpio3V3Num
,
ut16_t
 
auxDacCode
);

211 
ut32_t
 
BZ_tAuxAdc
(
BzDevi_t
 *
hw_iv
,
BzAuxAdcCfig_t
 *
auxAdcCfig
);

231 
ut32_t
 
BZ_adAuxAdc
(
BzDevi_t
 *
hw_iv
,
BzAuxAdcResu_t
 *
auxAdcCfig
);

252 
ut32_t
 
BZ_tGpioMڙOut
(
BzDevi_t
 *
hw_iv
,ut32_
mڙIndex
,ut32_
mڙ_a
,
BzGpioMڙPosS_t
 
mڙ_pos_l_ty
);

267 
ut32_t
 
BZ_gGpioMڙOut
(
BzDevi_t
 *
hw_iv
,ut32_*
mڙIndex
,ut32_t* 
mڙE
);

275 
ut32_t
 
BZ_gGpIStus
(
BzDevi_t
 *
hw_iv
,
BzGpIMask_t
 *
gpIStus
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_gpio_types.h

10 #ide
BZ_GPIO_TYPES_H_


11 
	#BZ_GPIO_TYPES_H_


	)

12 
	~"bz_da_tys.h
"

18 
	mBZ_GPIO_00
 = 0x0,

19 
	mBZ_GPIO_01
 = 0x1,

20 
	mBZ_GPIO_02
 = 0x2,

21 
	mBZ_GPIO_03
 = 0x3,

22 
	mBZ_GPIO_04
 = 0x4,

23 
	mBZ_GPIO_05
 = 0x5,

24 
	mBZ_GPIO_06
 = 0x6,

25 
	mBZ_GPIO_07
 = 0x7,

26 
	mBZ_GPIO_08
 = 0x8,

27 
	mBZ_GPIO_09
 = 0x9,

28 
	mBZ_GPIO_10
 = 0xa,

29 
	mBZ_GPIO_11
 = 0xb,

30 
	mBZ_GPIO_12
 = 0xc,

31 
	mBZ_GPIO_13
 = 0xd,

32 
	mBZ_GPIO_14
 = 0xe,

33 
	mBZ_GPIO_15
 = 0xf,

34 
	mBZ_GPIO_16
 = 0x10,

35 
	mBZ_GPIO_17
 = 0x11,

36 
	mBZ_GPIO_18
 = 0x12,

37 
	mBZ_GPIO_INVALID
 = 0xff

38 } 
	tBzGpioPS_t
;

42 
	mBZ_SEL_0
 = 0x0,

43 
	mBZ_SEL_1
 = 0x1,

44 
	mBZ_SEL_2
 = 0x2,

45 
	mBZ_SEL_3
 = 0x3,

46 
	mBZ_SEL_4
 = 0x4,

47 
	mBZ_SEL_5
 = 0x5,

48 
	mBZ_SEL_6
 = 0x6,

49 
	mBZ_SEL_7
 = 0x7,

50 } 
	tBzGpioPFunc_t
;

54 
	mBZ_RISCV_CTRL
 = 0x0,

55 
	mBZ_SPI_CTRL
 = 0x1

57 }
	tBzGpioClMode_t
;

61 
	mBZ_GPIO_DIR_IN
 = 0x0,

62 
	mBZ_GPIO_DIR_OUT
 = 0x1

64 }
	tBzGpioD_t
;

71 
	mBZ_AUXDACVREF_1V
 = 0x0,

72 
	mBZ_AUXDACVREF_1P5V
 = 0x1,

73 
	mBZ_AUXDACVREF_2V
 = 0x2,

74 
	mBZ_AUXDACVREF_2P5V
 = 0x3

75 } 
	tBzAuxDacVf_t
;

82 
	mBZ_AUXDACRES_12BIT
 = 0x0,

83 
	mBZ_AUXDACRES_11BIT
 = 0x1,

84 
	mBZ_AUXDACRES_10BIT
 = 0x2,

85 } 
	tBzAuxDacResuti_t
;

92 
ut16_t
 
	mauxDacEbs
;

93 
BzAuxDacVf_t
 
	mauxDacVf
[10];

94 
BzAuxDacResuti_t
 
	mauxDacResuti
[10];

95 
ut16_t
 
	mauxDacVues
[12];

96 } 
	tBzAuxDac_t
;

103 
	mBZ_GP_MASK_WATCHDOG_TIMEOUT
 = 0x80000000,

104 
	mBZ_GP_MASK_PA_PROTECTION_TX1_ERROR
 = 0x40000000,

105 
	mBZ_GP_MASK_PA_PROTECTION_TX2_ERROR
 = 0x20000000,

106 
	mBZ_GP_MASK_CALIBRATION_ERROR
 = 0x10000000,

107 
	mBZ_GP_MASK_FORCE_INTERRUPT
 = 0x08000000,

108 
	mBZ_GP_MASK_JESD_DEFRMER_IRQ
 = 0x04000000,

109 
	mBZ_GP_MASK_BB_SYNTH_UNLOCK
 = 0x02000000,

110 
	mBZ_GP_MASK_AUX_SYNTH_UNLOCK
 = 0x01000000,

111 
	mBZ_GP_MASK_RF_SYNTH_UNLOCK
 = 0x00800000

112 }
	tBzGpIMask_t
;

119 
	mBZ_AUXADC_CH0
 = 0x0,

120 
	mBZ_AUXADC_CH1
 = 0x1,

121 
	mBZ_AUXADC_CH2
 = 0x2,

122 
	mBZ_AUXADC_CH3
 = 0x3

123 } 
	tBzAuxAdcChls_t
;

130 
	mBZ_AUXADC_NONPIN_MODE
 = 0x0,

131 
	mBZ_AUXADC_PIN_MODE
 = 0x1

132 } 
	tBzAuxAdcModes_t
;

139 
BzAuxAdcChls_t
 
	mauxAdcChlS
;

140 
BzAuxAdcModes_t
 
	mauxAdcMode
;

141 
ut32_t
 
	mnumSames
;

142 
ut32_t
 
	mmgPiod_us
;

143 
ut32_t
 
	mauxadcGpioS
;

144 } 
	tBzAuxAdcCfig_t
;

151 
ut32_t
 
	mauxAdcCodeAvg
;

152 
ut32_t
 
	mcomeIndit
;

153 } 
	tBzAuxAdcResu_t
;

162 
	mBZ_GPIO_MONITOR_POS_SEL_D0
 = 0x0,

163 
	mBZ_GPIO_MONITOR_POS_SEL_D1
 = 0x1,

164 
	mBZ_GPIO_MONITOR_POS_SEL_D2
 = 0x2,

165 
	mBZ_GPIO_MONITOR_POS_SEL_D3
 = 0x3

166 } 
	tBzGpioMڙPosS_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_hal.h

1 #ide
__BZ_HAL_H__


2 
	#__BZ_HAL_H__


	)

3 
	~<dio.h
>

5 
	~"bz__h_tys.h
"

7 #ide
BZHAL_Prtf


8 
	#BZHAL_Prtf
 
tf


	)

11 
BzHHd
* 
	tbzHHd
;

13 
bzHE
 
BZHAL_SpiOn
(
bzHDevId
 
devid
, 
bzHHd
 *
hd
);

14 
bzHE
 
BZHAL_SpiClo
(
bzHHd
 
hd
);

15 
bzHE
 
BZHAL_SpiWreReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
 
da
);

16 
bzHE
 
BZHAL_SpiRdReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
* 
da
);

18 
bzHE
 
BZHAL_IruOn
(
bzHHd
 
hd
);

20 
bzHE
 
BZHAL_TX1CiOn
(
bzHHd
 
hd
);

21 
bzHE
 
BZHAL_TX1CiOff
(
bzHHd
 
hd
);

23 
bzHE
 
BZHAL_TX2CiOn
(
bzHHd
 
hd
);

24 
bzHE
 
BZHAL_TX2CiOff
(
bzHHd
 
hd
);

26 
bzHE
 
BZHAL_SLogLev
(
bzHHd
 
hd
, 
ut16_t
 
hLogLev
);

27 
bzHE
 
BZHAL_WreToLog
(
bzHHd
 
hd
, 
bzLogLev_t
 
logLev
, 
ut32_t
 
rCode
, cڡ *
commt
);

29 
BZHAL_MDay
(
ut32_t
 
mcs
);

30 
BZHAL_UDay
(
ut32_t
 
ucs
);

32 
bzHE
 
BZHAL_Memy
(* 
d
,*
c
, 
ut32_t
 
n
);

34 
bzHE
 
BZHAL_Tx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

35 
bzHE
 
BZHAL_Tx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

36 
bzHE
 
BZHAL_Rx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

37 
bzHE
 
BZHAL_Rx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

38 
bzHE
 
BZHAL_ORx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

39 
bzHE
 
BZHAL_ORx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_init.h

11 #ide
__BZ_INIT_H__


12 
	#__BZ_INIT_H__


	)

14 
	~"bz__tys.h
"

15 
	~"bz_tys.h
"

27 
ut32_t
 
BZ_ݒHw
(
BzDevi_t
 *
hw_iv
,ut32_
DeviId
);

37 
ut32_t
 
BZ_oHw
(
BzDevi_t
 *
hw_iv
);

47 
ut32_t
 
BZ_tDevi
(
BzDevi_t
 *
hw_iv
);

57 
ut32_t
 
BZ_ogmF
(
BzDevi_t
 *
hw_iv
,
BzF_t
 *
fr
,
FS
);

67 
ut32_t
 
BZ_lize
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
);

76 
ut32_t
 
BZ_abTckgCs
(
BzDevi_t
 *
hw_iv
,ut32_
abMask
);

85 
ut32_t
 
BZ_gApiVsi
(ut32_
ApiV
);

95 
ut32_t
 
BZ_gDeviRev
(ut32_
DevV
);

105 
ut32_t
 
BZ_gProduId
(ut32_
ProId
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_init_types.h

11 #ide
_BZ_INIT_TYPES_H__


12 
	#_BZ_INIT_TYPES_H__


	)

13 
	~"bz_tys.h
"

14 
	~"bz_cfig_tys.h
"

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_jesd204b.h

12 #ide
_BZ_JESD204B_H_


13 
	#_BZ_JESD204B_H_


	)

15 
	~"bz_jesd204b_tys.h
"

16 
	~"bz_tys.h
"

26 
ut32_t
 
BZ_wreJes204bCfig
(
BzDevi_t
 *
iv
,
BzIn_t
 *
In
);

36 
ut32_t
 
BZ_waJes204bCfigDe
(
BzDevi_t
 *
hw_iv
, ut32_
timeout
);

46 
ut32_t
 
BZ_Jes204bSyefCڌ
(
BzDevi_t
 *
iv
, 
BzJes204bSyefCڌMode
 
Mode
);

55 
ut32_t
 
BZ_Prbs7Check
(
BzDevi_t
 *
hw_iv
,ut32_
LeId
);

66 
ut32_t
 
BZ_iGJesdDebugDa
(
BzDevi_t
 *
hw_iv
, ut32_
addr
, ut32_
me_pot
, ut32_
cou
,ut32_
me_
);

76 
ut32_t
 
BZ_abFmLk
(
BzDevi_t
 *
hw_iv
,ut32_
amS
,ut32_
ab
);

86 
ut32_t
 
BZ_abDeamLk
(
BzDevi_t
 *
hw_iv
,ut32_
deamS
,ut32_
ab
);

96 
ut32_t
 
BZ_gSyncStus
(
BzDevi_t
 * 
hw_iv
,ut32_*
TyStus
);

106 
ut32_t
 
BZ_abSysRefToFm
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_jesd204b_types.h

11 #ide
_BZ_JESD204B_TYPE_H_


12 
	#_BZ_JESD204B_TYPE_H_


	)

13 
	~"bz_da_tys.h
"

16 
	#CLK_FOR_JESD204B_62500k
 (62500)

	)

17 
	#CLK_FOR_JESD204B_125000k
 (125000)

	)

18 
	#CLK_FOR_JESD204B_250000k
 (250000)

	)

19 
	#CLK_FOR_JESD204B_500000k
 (500000)

	)

21 
	#JESD204B_REP_RATE_1
 (1)

	)

22 
	#JESD204B_REP_RATE_2
 (2)

	)

23 
	#JESD204B_REP_RATE_4
 (4)

	)

24 
	#JESD204B_REP_RATE_8
 (8)

	)

26 
	#JESD204B_LANE_NUM_1
 (1)

	)

27 
	#JESD204B_LANE_NUM_2
 (2)

	)

28 
	#JESD204B_LANE_NUM_4
 (4)

	)

31 
	sbaizeTXCfig


33 
ut32_t
 
	mlid
;

34 
ut32_t
 
	msubCss
;

35 
ut32_t
 
	mcf
;

36 
ut32_t
 
	mcs
;

37 
ut32_t
 
	mf
;

38 
ut32_t
 
	mk
;

39 
ut32_t
 
	ml
;

40 
ut32_t
 
	mn
;

41 
ut32_t
 
	mm
;

42 
ut32_t
 
	mٮ
;

43 
ut32_t
 
	ms
;

44 
ut32_t
 
	mhd
;

45 
ut32_t
 
	mrxCeIruMask
;

46 
ut32_t
 
	mrxIsAdnMiscDas12c
;

47 
ut32_t
 
	ms
;

48 
ut32_t
 
	mabLkTe
;

49 
ut32_t
 
	mrxFtuDib
;

50 } 
	tBzTxCfig_t
;

54 
ut32_t
 
	mlid
;

55 
ut32_t
 
	msubCss
;

56 
ut32_t
 
	mcf
;

57 
ut32_t
 
	mcs
;

58 
ut32_t
 
	mf
;

59 
ut32_t
 
	mk
;

60 
ut32_t
 
	ml
;

61 
ut32_t
 
	mn
;

62 
ut32_t
 
	mm
;

63 
ut32_t
 
	mٮ
;

64 
ut32_t
 
	ms
;

65 
ut32_t
 
	mhd
;

66 
ut32_t
 
	mtxIsDay
;

67 
ut32_t
 
	mrxIsAdnMiscDas12c
;

68 
ut32_t
 
	ms
;

69 
ut32_t
 
	mceIruMask
;

70 
ut32_t
 
	mbs
;

71 
ut32_t
 
	mabLkTe
;

72 
ut32_t
 
	mrxFtuDib
;

73 } 
	tBzRxOrXCfig_t
;

78 
ut32_t
 
	mrdesClk
;

79 
BzTxCfig_t
 
	mtxCfig
;

80 
BzRxOrXCfig_t
 
	mrxCfig
;

81 
BzRxOrXCfig_t
 
	mxCfig
;

82 }
	tBzJesdStgs_t
;

86 
	mBZ_FRAMER_A
 = 0,

87 
	mBZ_FRAMER_B
,

88 
	mBZ_FRAMER_A_AND_B


89 } 
	tBzFmS_t
;

93 
	mBZ_DEFRAMER
 = 0,

94 } 
	tBzDeamS_t
;

97 
	#JES204B_LINK_MODE_0
 (0)

	)

98 
	#JES204B_LINK_MODE_1
 (1)

	)

99 
	#JES204B_LINK_MODE_2
 (2)

	)

100 
	#JES204B_LINK_MODE_4
 (4)

	)

104 
	#CLK_TX_RX_62_5M
 (61440)

	)

105 
	#CLK_TX_RX_125M
 (122880)

	)

106 
	#CLK_TX_RX_250M
 (245760)

	)

107 
	#CLK_TX_RX_500M
 (491520)

	)

111 
	#CLK_CHARACTER_125M
 (125)

	)

112 
	#CLK_CHARACTER_250M
 (250)

	)

116 
	#SERDES_CLK_10G
 (10)

	)

117 
	#SERDES_CLK_5G
 (5)

	)

120 
	#JES204B_REP_RATE_1
 (1)

	)

121 
	#JES204B_REP_RATE_2
 (2)

	)

122 
	#JES204B_REP_RATE_4
 (4)

	)

123 
	#JES204B_REP_RATE_8
 (8)

	)

125 
	#JES204B_LANE_1
 (1)

	)

126 
	#JES204B_LANE_2
 (2)

	)

127 
	#JES204B_LANE_4
 (4)

	)

128 
	#JES204B_LANE_8
 (8)

	)

130 
	#JESD_DEFRAMER_ADDR
 0x25006050

	)

131 
	#JESD_FRAMER_A_ADDR
 0x25007050

	)

132 
	#JESD_FRAMER_B_ADDR
 0x25008050

	)

136 
	mBZ_JES204B_SYSREF_ON
 = 0x1,

137 
	mBZ_JES204B_SYSREF_OFF
 = 0x2

138 } 
	tBzJes204bSyefCڌMode
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_otp.h

11 #ide
BZ_OTP_H__


12 
	#BZ_OTP_H__


	)

14 
	~"bz_p_tys.h
"

15 
	~"bz_tys.h
"

28 
ut32_t
 
BZ_ORd
(
BzDevi_t
 *
hw_iv
, ut32_
OAddr
, ut32_*
Da
);

39 
ut32_t
 
BZ_OWre
(
BzDevi_t
 *
hw_iv
, ut32_
OAddr
, ut32_
Da
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_otp_types.h

11 #ide
__BZ_OTP_TYPES_H__


12 
	#__BZ_OTP_TYPES_H__


	)

14 
	#BZ_REG_OTPIN_CMD_ADDR
 0x208

	)

15 
	#BZ_REG_OTPIN_DATA_ADDR
 0x209

	)

17 
	#BZ_REG_OTPOUT_DATA_ADDR
 0x44c

	)

18 
	#BZ_REG_OTPOUT_STA_ADDR
 0x44d

	)

22 
	mBZ_PAS_DIS
 = 0x0,

23 
	mBZ_PAS_EN
 = 0x1

24 }
	tBZ_OTP_PAS_EN
;

28 
	mBZ_TEST_ROW_INVALID
 = 0x0,

29 
	mBZ_TEST_ROW_VALID
 = 0x1

30 }
	tBZ_OTP_PTR_VLD
;

34 
	mBZ_CELL_INVALID
 = 0x0,

35 
	mBZ_CELL_VALID
 = 0x1

36 }
	tBZ_OTP_PAS_VLD
;

40 
	mCMD_INVALID
 = 0x0,

41 
	mCMD_VALID
 = 0x1

42 }
	tBZ_OTP_CMD_VLD
;

46 
	mBZ_DEEP_STANDBY_MODE
 = 0x0,

47 
	mBZ_STANDBY_MODE
 = 0x1,

48 
	mBZ_READ_MODE
 = 0x2,

49 
	mBZ_PROG_MODE
 = 0x3,

50 
	mBZ_INIT_MARGIN_READ_MODE
 = 0x4,

51 
	mBZ_PGM_MARGIN_READ_MODE
 = 0x5,

52 }
	tBZ_OTP_CMD
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_plat_hal.h

12 #ide
__BZ_PLAT_HAL_H__


13 
	#__BZ_PLAT_HAL_H__


	)

15 
	~"bz__h_tys.h
"

16 
	~"bz_tys.h
"

18 #ide
BZHAL_Prtf


19 
	~<dio.h
>

20 
	#BZHAL_Prtf
 
tf


	)

29 
	#DBG_LEVEL_ALL
 0x00

	)

30 
	#DBG_LEVEL_OFF
 
DBG_LEVEL_ALL


	)

31 
	#DBG_LEVEL_WARNING
 0x01

	)

32 
	#DBG_LEVEL_SERIOUS
 0x02

	)

33 
	#DBG_LEVEL_SEVERE
 0x03

	)

34 
	#DBG_MASK_LEVEL
 0x03

	)

37 
	#DEBUG_VERSION
 1

	)

39 #ifde
DEBUG_VERSION


40 
	#B20_DBG_TYPES_ON
 
B20_DBG_ON


	)

41 
	#B20_DBG_MIN_LEVEL
 
DBG_LEVEL_OFF


	)

43 
	#B20_DEBUGF
(
debug
, 
mesge
) do { \

45 (((
debug
& 
DBG_MASK_LEVEL
>
B20_DBG_MIN_LEVEL
)) { \

46 
	`BZHAL_Prtf
(
mesge
); \

48 } 0)

	)

51 
	#B20_DEBUGF
(
debug
, 
mesge
)

	)

54 
	#IF_ERR_RETURN
(
a
if !
BZ_NO_ACTION
{ 
	`BZHAL_Prtf
("SPI CONF ERROR\n"); ; }

	)

64 
bzHE
 
BZ_iOn
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
DeviId
);

73 
bzHE
 
BZ_iClo
(
BzDevi_t
 *
hw_iv
);

83 
bzHE
 
BZ_iRdReg
(
BzDevi_t
 *
hw_iv
, 
ut16_t
 
addr
, 
ut32_t
 *
da
);

93 
bzHE
 
BZ_iWreReg
(
BzDevi_t
 *
hw_iv
, 
ut16_t
 
addr
,
ut32_t
 
da
);

103 
bzHE
 
BZ_iRdFld
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
,
ut32_t
 *
fldV
,
ut8_t
 
dB
,ut8_
B
);

113 
bzHE
 
BZ_iWreFld
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
,
ut32_t
 
fldV
,
ut8_t
 
dB
,ut8_
B
);

123 
bzHE
 
BZ_mday
(
ut32_t
 
mday_time
);

133 
bzHE
 
BZ_WreToLog
(
BzDevi_t
 *
hw_iv
,
bzLogLev_t
 
logv
,
ut32_t
 
rCode
,cڡ *
commt
);

135 
bzHE
 
BZ_Memt
(* 
Addr
,
ut32_t
 
Da
,ut32_
n
);

137 
bzHE
 
BZ_Memy
(* 
c
,*
d
,
ut32_t
 
n
);

146 
bzHE
 
BZ_Tx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

156 
bzHE
 
BZ_Tx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

165 
bzHE
 
BZ_Rx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

174 
bzHE
 
BZ_Rx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

183 
bzHE
 
BZ_ORx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

193 
bzHE
 
BZ_ORx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_plat_hal_types.h

11 #ide
__BZ_PLAT_HAL_TYPES_H__


12 
	#__BZ_PLAT_HAL_TYPES_H__


	)

13 
	~"bz_tys.h
"

14 
	~"bz_r_tys.h
"

17 
	mBZHAL_OK
 = 0x0,

18 
	mBZHAL_SPI_FAIL
 = 0x1,

19 
	mBZHAL_GPIO_FAIL
 = 0x2,

20 
	mBZHAL_INV_AGC_CLK_PARM_FAIL
 = 0x3,

21 
	mBZHAL_INV_AGC_RX_GAIN_UPDATE_TIME_PARM_FAIL
,

23 } 
	tbzHE
;

28 
	mBZHAL_LOG_NONE
 = 0x0,

29 
	mBZHAL_LOG_MSG
 = 0x1,

30 
	mBZHAL_LOG_WARN
 = 0x2,

31 
	mBZHAL_LOG_ERR
 = 0x4,

32 
	mBZHAL_LOG_SPI
 = 0x8,

33 
	mBZHAL_LOG_ALL
 = 0xF

34 } 
	tbzLogLev_t
;

37 
	mBZHAL_DEVID0
 = 0x0,

38 
	mBZHAL_DEVID1
 = 0x1,

39 
	mBZHAL_DEVID2
 = 0x2,

40 
	mBZHAL_DEVID3
 = 0x3,

41 
	mBZHAL_DEVID4
 = 0x4,

42 
	mBZHAL_DEVID5
 = 0x5,

43 }
	tbzHDevId
;

46 
	mBZHAL_GPIORXEN0
 = 0x0,

47 
	mBZHAL_GPIORXEN1
 = 0x1,

48 
	mBZHAL_GPIOTXEN0
 = 0x2,

49 
	mBZHAL_GPIOTXEN1
 = 0x3,

50 
	mBZHAL_GPIOINT
 = 0x4,

51 } 
	tbzHGpio
;

55 
	mBZHAL_CHANNEL_DISABLE
 = 0x0,

56 
	mBZHAL_CHANNEL_ENABLE
 = 0x01

57 } 
	tBzHChlEbMode
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_radio.h

11 #ide
__BZ_RADIOCTRL_H__


12 
	#__BZ_RADIOCTRL_H__


	)

14 
	~"bz_dio_tys.h
"

15 
	~"bz_tys.h
"

16 
	~"bz_rx_tys.h
"

17 
	~"bz_tx_tys.h
"

29 
ut32_t
 
BZ_tRadioClSpiMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
,
BzObsRxChls_t
 
OrxChl
,
BzTxChls_t
 
txChl
);

41 
ut32_t
 
BZ_gRadioClSpiMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 *
rxChl
,
BzObsRxChls_t
 *
OrxChl
,
BzTxChls_t
 *
txChl
);

52 
ut32_t
 
BZ_tRadioClPMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
,
BzObsRxChls_t
 
OrxChl
,
BzTxChls_t
 
txChl
);

64 
ut32_t
 
BZ_gRadioClPMode
(
BzDevi_t
 *
hw_iv
,ut32_t* 
ChEb
);

74 
ut32_t
 
BZ_tPFqucy
(
BzDevi_t
 *
hw_iv
,ut32_
me
,
ut64_t
 
lLoFq_Hz
);

84 
ut32_t
 
BZ_gPFqucy
(
BzDevi_t
 *
hw_iv
,ut32_
me
,
ut64_t
 *
lLoFq_Hz
);

93 
ut32_t
 
BZ_waPsLockDe
(
BzDevi_t
 *
hw_iv
, ut32_
timeout
);

102 
ut32_t
 
BZ_dioOn
(
BzDevi_t
 * 
hw_iv
, 
BzRadioCMode
 
Mode
);

112 
ut32_t
 
BZ_dioOff
(
BzDevi_t
 *
hw_iv
,
BzRadioCMode
 
Mode
);

121 
ut32_t
 
BZ_gRadioS
(
BzDevi_t
 *
devi
);

130 
ut32_t
 
BZ_tDaGDcOff
(
BzDevi_t
 *
hw_iv
, 
BzTxChls_t
 
txChl
);

140 
ut32_t
 
BZ_tPTemtuTckEb
(
BzDevi_t
 *
hw_iv
,ut32_
ab
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_radio_types.h

11 #ide
__BZ_RADIO_TYPES_H__


12 
	#__BZ_RADIO_TYPES_H__


	)

17 
	mBZ_PIN_MODE
 = 0x1,

18 
	mBZ_SPI_MODE
 = 0x2

19 } 
	tBzRadioCMode
;

24 
	mBZ_OFF_Mask
 = 0x0,

25 
	mBZ_BIT1_Mask
 = 0x1,

26 
	mBZ_BIT0_Mask
 = 0x2,

27 
	mBZ_BIT0BIT1_Mask
 = 0x3

28 }
	tBzBIT0BIT1Mask_t
;

34 
	mBZ_CLK_PLL
 = 0x0,

35 
	mBZ_RF_PLL
 = 0x1,

36 
	mBZ_AUX_PLL
 = 0x2

37 } 
	tBzRfPName_t
;

44 
	mRFPLLMASK
 = 0x80,

45 
	mBBPLLMASK
 = 0x100,

46 
	mAUXPLLMASK
 = 0x200,

47 
	mTX0ENMASK
 = 0x400,

48 
	mTX1ENMASK
 = 0x800,

49 
	mRX0ENMASK
 = 0x1000,

50 
	mRX1ENMASK
 = 0x2000,

51 
	mORX0ENMASK
 = 0x4000,

52 
	mORX1ENMASK
 = 0x8000

53 } 
	tBzChnStus_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_reg_ana.h

10 #ide
__BZ_REG_ANA_H__


11 
	#__BZ_REG_ANA_H__


	)

14 
	#REG_AUXADC0
 (0x00)

	)

15 
	#REG_CTADC0
 (0x01)

	)

16 
	#REG_CTADC1
 (0x02)

	)

17 
	#REG_CTADC2
 (0x03)

	)

18 
	#REG_CTADC3
 (0x04)

	)

19 
	#REG_CTADC4
 (0x05)

	)

20 
	#REG_CTADC5
 (0x06)

	)

21 
	#REG_CTADC6
 (0x07)

	)

22 
	#REG_CTADC7
 (0x08)

	)

23 
	#REG_MISC_TOP0
 (0x09)

	)

24 
	#REG_MISC_TOP1
 (0x0A)

	)

25 
	#REG_MISC_TOP2
 (0x0B)

	)

26 
	#REG_MISC_TOP3
 (0x0C)

	)

27 
	#REG_MISC_TOP4
 (0x0D)

	)

28 
	#REG_AUXPLL_LO
 (0x0E)

	)

29 
	#REG_BBPLL0
 (0x0F)

	)

30 
	#REG_BBPLL1
 (0x10)

	)

31 
	#REG_BBPLL2
 (0x11)

	)

32 
	#REG_BBPLL3
 (0x12)

	)

33 
	#REG_BBPLL4
 (0x13)

	)

34 
	#REG_BBPLL5
 (0x14)

	)

35 
	#REG_BBPLL6
 (0x15)

	)

36 
	#REG_RFPLL0
 (0x16)

	)

37 
	#REG_RFPLL1
 (0x17)

	)

38 
	#REG_RFPLL2
 (0x18)

	)

39 
	#REG_RFPLL3
 (0x19)

	)

40 
	#REG_RFPLL4
 (0x1A)

	)

41 
	#REG_RFPLL5
 (0x1B)

	)

42 
	#REG_RFPLL6
 (0x1C)

	)

43 
	#REG_RFPLL7
 (0x1D)

	)

44 
	#REG_RFPLL8
 (0x1E)

	)

45 
	#REG_RFPLL9
 (0x1F)

	)

46 
	#REG_RFPLL10
 (0x20)

	)

47 
	#REG_RFPLL11
 (0x21)

	)

48 
	#REG_AUXPLL0
 (0x22)

	)

49 
	#REG_AUXPLL1
 (0x23)

	)

50 
	#REG_AUXPLL2
 (0x24)

	)

51 
	#REG_AUXPLL3
 (0x25)

	)

52 
	#REG_AUXPLL4
 (0x26)

	)

53 
	#REG_AUXPLL5
 (0x27)

	)

54 
	#REG_AUXPLL6
 (0x28)

	)

55 
	#REG_AUXPLL7
 (0x29)

	)

56 
	#REG_AUXPLL8
 (0x2A)

	)

57 
	#REG_AUXPLL9
 (0x2B)

	)

58 
	#REG_AUXPLL10
 (0x2C)

	)

59 
	#REG_AUXPLL11
 (0x2D)

	)

60 
	#REG_SAR0
 (0x2E)

	)

61 
	#REG_SAR1
 (0x2F)

	)

62 
	#REG_SAR2
 (0x30)

	)

63 
	#REG_SAR3
 (0x31)

	)

64 
	#REG_SAR4
 (0x32)

	)

65 
	#REG_SAR5
 (0x33)

	)

66 
	#REG_SAR6
 (0x34)

	)

67 
	#REG_SAR7
 (0x35)

	)

68 
	#REG_SAR8
 (0x36)

	)

69 
	#REG_SYSREF0
 (0x37)

	)

70 
	#REG_LO0
 (0x38)

	)

71 
	#REG_LO1
 (0x39)

	)

72 
	#REG_LPBK1_0
 (0x3A)

	)

73 
	#REG_LPBK1_1
 (0x3B)

	)

74 
	#REG_LPBK2_0
 (0x3C)

	)

75 
	#REG_LPBK2_1
 (0x3D)

	)

76 
	#REG_RXFE0
 (0x3E)

	)

77 
	#REG_RXFE1
 (0x3F)

	)

78 
	#REG_RXFE2
 (0x40)

	)

79 
	#REG_RXFE3
 (0x41)

	)

80 
	#REG_RXFE4
 (0x42)

	)

81 
	#REG_RXFE5
 (0x43)

	)

82 
	#REG_RXFE6
 (0x44)

	)

83 
	#REG_RXFE7
 (0x45)

	)

84 
	#REG_RXFE8
 (0x46)

	)

85 
	#REG_RXFE9
 (0x47)

	)

86 
	#REG_RXFE10
 (0x48)

	)

87 
	#REG_RXFE11
 (0x49)

	)

88 
	#REG_RXFE12
 (0x4A)

	)

89 
	#REG_RXFE13
 (0x4B)

	)

90 
	#REG_RXFE14
 (0x4C)

	)

91 
	#REG_RXFE15
 (0x4D)

	)

92 
	#REG_BGR0
 (0x4E)

	)

93 
	#REG_TRX0
 (0x4F)

	)

94 
	#REG_PD0
 (0x50)

	)

95 
	#REG_RSTN0
 (0x51)

	)

96 
	#REG_DAC0
 (0x52)

	)

97 
	#REG_DAC1
 (0x53)

	)

98 
	#REG_DAC2
 (0x54)

	)

99 
	#REG_DAC3
 (0x55)

	)

100 
	#REG_DAC4
 (0x56)

	)

101 
	#REG_DAC5
 (0x57)

	)

102 
	#REG_DAC6
 (0x58)

	)

103 
	#REG_DAC7
 (0x59)

	)

104 
	#REG_DAC8
 (0x5A)

	)

105 
	#REG_DAC9
 (0x5B)

	)

106 
	#REG_DAC10
 (0x5C)

	)

107 
	#REG_DAC11
 (0x5D)

	)

108 
	#REG_DAC12
 (0x5E)

	)

109 
	#REG_DAC13
 (0x5F)

	)

110 
	#REG_DAC14
 (0x60)

	)

111 
	#REG_DAC15
 (0x61)

	)

112 
	#REG_DAC16
 (0x62)

	)

113 
	#REG_DAC17
 (0x63)

	)

114 
	#REG_DAC18
 (0x64)

	)

115 
	#REG_DAC19
 (0x65)

	)

116 
	#REG_DAC20
 (0x66)

	)

117 
	#REG_DAC21
 (0x67)

	)

118 
	#REG_DAC22
 (0x68)

	)

119 
	#REG_DAC23
 (0x69)

	)

120 
	#REG_DAC24
 (0x6A)

	)

121 
	#REG_DAC25
 (0x6B)

	)

122 
	#REG_TXFE0
 (0x6C)

	)

123 
	#REG_TXFE1
 (0x6D)

	)

124 
	#REG_TXFE2
 (0x6E)

	)

125 
	#REG_TXFE3
 (0x6F)

	)

126 
	#REG_TXFE4
 (0x70)

	)

127 
	#REG_TXFE5
 (0x71)

	)

128 
	#REG_TXFE6
 (0x72)

	)

129 
	#REG_TXFE7
 (0x73)

	)

130 
	#REG_TXLPF0
 (0x74)

	)

131 
	#REG_TXLPF1
 (0x75)

	)

132 
	#REG_TXLPF2
 (0x76)

	)

133 
	#REG_TXLPF3
 (0x77)

	)

134 
	#REG_TXLPF4
 (0x78)

	)

135 
	#REG_TXLPF5
 (0x79)

	)

136 
	#REG_TXLPF6
 (0x7A)

	)

137 
	#REG_TXLPF7
 (0x7B)

	)

138 
	#REG_TXLPF8
 (0x7C)

	)

139 
	#REG_TXLPF9
 (0x7D)

	)

140 
	#REG_TXLPF10
 (0x7E)

	)

141 
	#REG_TXLPF11
 (0x7F)

	)

142 
	#REG_TXLPF12
 (0x80)

	)

143 
	#REG_RXLPF_0
 (0x81)

	)

144 
	#REG_RXLPF_1
 (0x82)

	)

145 
	#REG_RXLPF_2
 (0x83)

	)

146 
	#REG_RXLPF_4
 (0x84)

	)

147 
	#REG_RXLPF_5
 (0x85)

	)

148 
	#REG_RXLPF_6
 (0x86)

	)

149 
	#REG_SYNC_0
 (0x87)

	)

150 
	#REG_SYNC_1
 (0x88)

	)

151 
	#REG_LVDS_0
 (0x89)

	)

152 
	#REG_LVDS_1
 (0x8A)

	)

153 
	#REG_LVDS_2
 (0x8B)

	)

154 
	#REG_LVDS_3
 (0x8C)

	)

155 
	#REG_LVDS_4
 (0x8D)

	)

156 
	#REG_LVDS_5
 (0x8E)

	)

157 
	#REG_LVDS_6
 (0x8F)

	)

158 
	#REG_LVDS_7
 (0x90)

	)

159 
	#REG_LVDS_8
 (0x91)

	)

160 
	#REG_LVDS_9
 (0x92)

	)

161 
	#REG_LVDS_10
 (0x93)

	)

162 
	#REG_LVDS_11
 (0x94)

	)

163 
	#REG_LVDS_12
 (0x95)

	)

164 
	#REG_LVDS_13
 (0x96)

	)

166 
	#REG_J_PHYTOP_0
 (0x20E)

	)

167 
	#REG_J_SYNCB_0
 (0x20F)

	)

168 
	#REG_J204BTX01
 (0x210)

	)

169 
	#REG_J204BTX02
 (0x211)

	)

170 
	#REG_J204BTX03
 (0x212)

	)

171 
	#REG_J204BTX04
 (0x213)

	)

172 
	#REG_J204BRX00
 (0x214)

	)

173 
	#REG_J204BRX01
 (0x215)

	)

174 
	#REG_J204BRX02
 (0x216)

	)

175 
	#REG_J204BRX03
 (0x217)

	)

176 
	#REG_J204BRX04
 (0x218)

	)

177 
	#REG_J204BRX05
 (0x219)

	)

178 
	#REG_J204BRX06
 (0x21A)

	)

179 
	#REG_J204BRX07
 (0x21B)

	)

180 
	#REG_J204BRX08
 (0x21C)

	)

181 
	#REG_J204BRX09
 (0x21D)

	)

182 
	#REG_J204BRX10
 (0x21E)

	)

183 
	#REG_J204BRX11
 (0x21F)

	)

184 
	#REG_J204BRX12
 (0x220)

	)

185 
	#REG_J204BRX13
 (0x221)

	)

186 
	#REG_J204BRX14
 (0x222)

	)

187 
	#REG_J204BRX15
 (0x223)

	)

188 
	#REG_J204BRX16
 (0x224)

	)

189 
	#REG_J204BRX17
 (0x225)

	)

190 
	#REG_J204BRX18
 (0x226)

	)

191 
	#REG_J204BRX19
 (0x227)

	)

192 
	#REG_J204BRX20
 (0x228)

	)

193 
	#REG_J204BRX21
 (0x229)

	)

194 
	#REG_J204BRX22
 (0x22A)

	)

195 
	#REG_J204BRX23
 (0x22B)

	)

196 
	#REG_J204BRX24
 (0x22C)

	)

197 
	#REG_J204BRX25
 (0x22D)

	)

198 
	#REG_J204BRX26
 (0x22E)

	)

199 
	#REG_J204BRX27
 (0x22F)

	)

201 
	#REGOUT_J204BRX00
 (
REGOUT_OFFSET
 + 0x2B)

	)

202 
	#REGOUT_J204BRX01
 (
REGOUT_OFFSET
 + 0x2C)

	)

203 
	#REGOUT_J204BRX02
 (
REGOUT_OFFSET
 + 0x2D)

	)

204 
	#REGOUT_J204BRX03
 (
REGOUT_OFFSET
 + 0x2E)

	)

205 
	#REGOUT_J204BRX04
 (
REGOUT_OFFSET
 + 0x2F)

	)

206 
	#REGOUT_J204BRX05
 (
REGOUT_OFFSET
 + 0x30)

	)

207 
	#REGOUT_J204BRX06
 (
REGOUT_OFFSET
 + 0x31)

	)

208 
	#REGOUT_J204BRX07
 (
REGOUT_OFFSET
 + 0x32)

	)

209 
	#REGOUT_J204BRX08
 (
REGOUT_OFFSET
 + 0x33)

	)

210 
	#REGOUT_J204BRX09
 (
REGOUT_OFFSET
 + 0x34)

	)

211 
	#REGOUT_J204BRX10
 (
REGOUT_OFFSET
 + 0x35)

	)

212 
	#REGOUT_J204BTX00
 (
REGOUT_OFFSET
 + 0x36)

	)

213 
	#REGOUT_J204BTX01
 (
REGOUT_OFFSET
 + 0x37)

	)

214 
	#REGOUT_J204BTX02
 (
REGOUT_OFFSET
 + 0x38)

	)

215 
	#REGOUT_J204BTX03
 (
REGOUT_OFFSET
 + 0x39)

	)

216 
	#REGOUT_J204BTX04
 (
REGOUT_OFFSET
 + 0x3A)

	)

217 
	#REGOUT_J204BTX05
 (
REGOUT_OFFSET
 + 0x3B)

	)

218 
	#REGOUT_J204BTX06
 (
REGOUT_OFFSET
 + 0x3C)

	)

219 
	#REGOUT_J204BTX07
 (
REGOUT_OFFSET
 + 0x3D)

	)

220 
	#REGOUT_J204BTX08
 (
REGOUT_OFFSET
 + 0x3E)

	)

221 
	#REGOUT_DAC0
 (
REGOUT_OFFSET
 + 0x40)

	)

222 
	#REGOUT_DAC1
 (
REGOUT_OFFSET
 + 0x41)

	)

223 
	#REGOUT_TXLPF0
 (
REGOUT_OFFSET
 + 0x42)

	)

224 
	#REGOUT_CTADC0
 (
REGOUT_OFFSET
 + 0x43)

	)

225 
	#REGOUT_BBPLL0
 (
REGOUT_OFFSET
 + 0x44)

	)

226 
	#REGOUT_BBPLL1
 (
REGOUT_OFFSET
 + 0x45)

	)

227 
	#REGOUT_RFPLL0
 (
REGOUT_OFFSET
 + 0x46)

	)

228 
	#REGOUT_RFPLL1
 (
REGOUT_OFFSET
 + 0x47)

	)

229 
	#REGOUT_AUXPLL0
 (
REGOUT_OFFSET
 + 0x48)

	)

230 
	#REGOUT_AUXPLL1
 (
REGOUT_OFFSET
 + 0x49)

	)

231 
	#REGOUT_SYSREF_0
 (
REGOUT_OFFSET
 + 0x4A)

	)

232 
	#REGOUT_RXFE_0
 (
REGOUT_OFFSET
 + 0x4B)

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_reg_dig.h

10 #ide
__BZ_REG_DIG_H__


11 
	#__BZ_REG_DIG_H__


	)

14 
	#REG_GP_INTERRUPT_MASK
 0XXXXX

	)

15 
	#REG_GP_INTERRUP_ENABLE
 0XXXXX

	)

16 
	#REG_GP_INTERRUP_STATUS
 0XXXXX

	)

18 
	#SRAM_ITCM_ADDR
 0x1000

	)

19 
	#SRAM_DTCM_ADDR
 0x1001

	)

21 
	#SRAM_DTCM_1_ADDR
 0x1002

	)

22 
	#SRAM_DTCM_2_ADDR
 0x1003

	)

23 
	#SRAM_DTCM_3_ADDR
 0x1004

	)

25 
	#BAIZE_ADDR_ARM_COMMAND
 0xxxx

	)

26 
	#BAIZE_ADDR_ARM_EXT_CMD_BYTE_1
 0xxxx

	)

27 
	#BAIZE_ADDR_ARM_CMD_STATUS
 0xxxx

	)

30 
	#REG_IP_SRAM_CTRL
 (0x97)

	)

31 
	#REG_IP_CHKSUM
 (0x98)

	)

32 
	#REG_IP_SRAM_ACC_ADDR
 (0x99)

	)

33 
	#REG_IP_SRAM_ACC_WDATA
 (0x9A)

	)

34 
	#REG_PC_BASE_ADDR
 (0x9B)

	)

35 
	#REG_PC_COUNT
 (0x9C)

	)

36 
	#REG_EXT_INTR_CLR
 (0x9D)

	)

37 
	#REG_EXT_INTR_ENA
 (0x9E)

	)

38 
	#REG_CALI_FFT_0
 (0xA0)

	)

39 
	#REG_CALI_FFT_1
 (0xA1)

	)

40 
	#REG_CALI_DG_0
 (0xA2)

	)

41 
	#REG_CALI_DG_1
 (0xA3)

	)

42 
	#REG_CALI_DG_2
 (0xA4)

	)

43 
	#REG_CALI_DG_3
 (0xA5)

	)

44 
	#REG_CALI_DM_0
 (0xA6)

	)

45 
	#REG_CALI_DM_1
 (0xA7)

	)

46 
	#REG_CALI_CORR_0
 (0xA8)

	)

47 
	#REG_CALI_RXIQ0_CTRL_0
 (0xA9)

	)

48 
	#REG_CALI_RXIQ1_CTRL_0
 (0xAA)

	)

49 
	#REG_CALI_ORXIQ0_CTRL_0
 (0xAB)

	)

50 
	#REG_CALI_TXIQ0_CTRL_0
 (0xAC)

	)

51 
	#REG_CALI_TXIQ1_CTRL_0
 (0xAD)

	)

52 
	#REG_CALI_RXFLT_CTRL_0
 (0xAE)

	)

53 
	#REG_CALI_TXFLT_CTRL_0
 (0xAF)

	)

54 
	#REG_CALI_ORXFLT_CTRL_0
 (0xB0)

	)

55 
	#REG_CALI_DDC_0
 (0xB1)

	)

56 
	#REG_CALI_DDC_1
 (0xB2)

	)

57 
	#REG_CALI_DDC_2
 (0xB3)

	)

58 
	#REG_CALI_DDC_3
 (0xB4)

	)

59 
	#REG_CALI_DDC_4
 (0xB5)

	)

60 
	#REG_CALI_DDC_5
 (0xB6)

	)

61 
	#REG_CALI_DDC_6
 (0xB7)

	)

62 
	#REG_CALI_DDC_7
 (0xB8)

	)

63 
	#REG_CALI_CTRL_0
 (0xB9)

	)

64 
	#REG_GPIO_CTRL_0
 (0xBA)

	)

65 
	#REG_GPIO_CTRL_1
 (0xBB)

	)

66 
	#REG_CALI_OP_0
 (0xBC)

	)

67 
	#REG_CLK_SWAP_0
 (0xBD)

	)

68 
	#REG_ENA_EXT_0
 (0xBE)

	)

69 
	#REG_LINK_DELAY_0
 (0xBF)

	)

70 
	#REG_LINK_DELAY_1
 (0xC0)

	)

71 
	#REG_PEAKDET_0
 (0xC1)

	)

72 
	#REG_AUXADC_0
 (0xC2)

	)

73 
	#REG_AUXADC_1
 (0xC3)

	)

74 
	#REG_AUXADC_2
 (0xC4)

	)

75 
	#REG_AUXDA_0
 (0xC5)

	)

76 
	#REG_AUXDA_1
 (0xC6)

	)

77 
	#REG_AUXDA_2
 (0xC7)

	)

78 
	#REG_AUXDA_3
 (0xC8)

	)

79 
	#REG_GC_00
 (0xC9)

	)

80 
	#REG_GC_01
 (0xCA)

	)

81 
	#REG_GC_02
 (0xCB)

	)

82 
	#REG_GC_03
 (0xCC)

	)

83 
	#REG_GC_04
 (0xCD)

	)

84 
	#REG_GC_05
 (0xCE)

	)

85 
	#REG_GC_06
 (0xCF)

	)

86 
	#REG_GC_07
 (0xD0)

	)

87 
	#REG_GC_08
 (0xD1)

	)

88 
	#REG_GC_09
 (0xD2)

	)

89 
	#REG_GC_10
 (0xD3)

	)

90 
	#REG_GC_11
 (0xD4)

	)

91 
	#REG_GC_12
 (0xD5)

	)

92 
	#REG_GC_13
 (0xD6)

	)

93 
	#REG_GC_14
 (0xD7)

	)

94 
	#REG_GC_15
 (0xD8)

	)

95 
	#REG_GC_16
 (0xD9)

	)

96 
	#REG_GC_17
 (0xDA)

	)

97 
	#REG_GC_18
 (0xDB)

	)

98 
	#REG_GC_19
 (0xDC)

	)

99 
	#REG_GC_20
 (0xDD)

	)

100 
	#REG_GC_21
 (0xDE)

	)

101 
	#REG_GC_22
 (0xDF)

	)

102 
	#REG_GC_23
 (0xE0)

	)

103 
	#REG_GC_24
 (0xE1)

	)

104 
	#REG_GC_25
 (0xE2)

	)

105 
	#REG_GC_26
 (0xE3)

	)

106 
	#REG_GC_27
 (0xE4)

	)

107 
	#REG_GC_28
 (0xE5)

	)

108 
	#REG_GC_29
 (0xE6)

	)

109 
	#REG_GC_30
 (0xE7)

	)

110 
	#REG_GC_31
 (0xE8)

	)

111 
	#REG_GC_32
 (0xE9)

	)

112 
	#REG_GC_33
 (0xEA)

	)

113 
	#REG_GC_34
 (0xEB)

	)

114 
	#REG_GC_35
 (0xEC)

	)

115 
	#REG_GC_36
 (0xED)

	)

116 
	#REG_GC_37
 (0xEE)

	)

117 
	#REG_GC_38
 (0xEF)

	)

118 
	#REG_GC_39
 (0xF0)

	)

119 
	#REG_GC_40
 (0xF1)

	)

120 
	#REG_GC_41
 (0xF2)

	)

121 
	#REG_GC_42
 (0xF3)

	)

122 
	#REG_GC_43
 (0xF4)

	)

123 
	#REG_GC_44
 (0xF5)

	)

124 
	#REG_GC_45
 (0xF6)

	)

125 
	#REG_GC_46
 (0xF7)

	)

126 
	#REG_GC_47
 (0xF8)

	)

127 
	#REG_GC_48
 (0xF9)

	)

128 
	#REG_GC_49
 (0xFA)

	)

129 
	#REG_GC_50
 (0xFB)

	)

130 
	#REG_RSV
 (0xFC)

	)

131 
	#REG_RSV_1
 (0xFD)

	)

132 
	#REG_RSV_2
 (0xFE)

	)

133 
	#REG_RSV_3
 (0xFF)

	)

134 
	#REG_CALI_RXIQ0_00
 (0x100)

	)

135 
	#REG_CALI_RXIQ0_01
 (0x101)

	)

136 
	#REG_CALI_RXIQ0_02
 (0x102)

	)

137 
	#REG_CALI_RXIQ0_03
 (0x103)

	)

138 
	#REG_CALI_RXIQ0_04
 (0x104)

	)

139 
	#REG_CALI_RXIQ0_05
 (0x105)

	)

140 
	#REG_CALI_RXIQ0_06
 (0x106)

	)

141 
	#REG_CALI_RXIQ0_07
 (0x107)

	)

142 
	#REG_CALI_RXIQ0_08
 (0x108)

	)

143 
	#REG_CALI_RXIQ0_09
 (0x109)

	)

144 
	#REG_CALI_RXIQ0_10
 (0x10A)

	)

145 
	#REG_CALI_RXIQ0_11
 (0x10B)

	)

146 
	#REG_CALI_RXIQ0_12
 (0x10C)

	)

147 
	#REG_CALI_RXIQ0_13
 (0x10D)

	)

148 
	#REG_CALI_RXIQ0_14
 (0x10E)

	)

149 
	#REG_CALI_RXIQ0_15
 (0x10F)

	)

150 
	#REG_CALI_RXIQ0_16
 (0x110)

	)

151 
	#REG_CALI_RXIQ0_17
 (0x111)

	)

152 
	#REG_CALI_RXIQ0_18
 (0x112)

	)

153 
	#REG_CALI_RXIQ0_19
 (0x113)

	)

154 
	#REG_CALI_RXIQ0_20
 (0x114)

	)

155 
	#REG_CALI_RXIQ0_21
 (0x115)

	)

156 
	#REG_CALI_RXIQ0_22
 (0x116)

	)

157 
	#REG_CALI_RXIQ0_23
 (0x117)

	)

158 
	#REG_CALI_RXIQ0_24
 (0x118)

	)

159 
	#REG_CALI_RXIQ0_25
 (0x119)

	)

160 
	#REG_CALI_RXIQ0_26
 (0x11A)

	)

161 
	#REG_CALI_RXIQ0_27
 (0x11B)

	)

162 
	#REG_CALI_RXIQ0_28
 (0x11C)

	)

163 
	#REG_CALI_RXIQ0_29
 (0x11D)

	)

164 
	#REG_CALI_RXIQ0_30
 (0x11E)

	)

165 
	#REG_CALI_RXIQ0_31
 (0x11F)

	)

166 
	#REG_CALI_RXIQ0_32
 (0x120)

	)

167 
	#REG_CALI_RXIQ0_33
 (0x121)

	)

168 
	#REG_CALI_RXIQ1_00
 (0x122)

	)

169 
	#REG_CALI_RXIQ1_01
 (0x123)

	)

170 
	#REG_CALI_RXIQ1_02
 (0x124)

	)

171 
	#REG_CALI_RXIQ1_03
 (0x125)

	)

172 
	#REG_CALI_RXIQ1_04
 (0x126)

	)

173 
	#REG_CALI_RXIQ1_05
 (0x127)

	)

174 
	#REG_CALI_RXIQ1_06
 (0x128)

	)

175 
	#REG_CALI_RXIQ1_07
 (0x129)

	)

176 
	#REG_CALI_RXIQ1_08
 (0x12A)

	)

177 
	#REG_CALI_RXIQ1_09
 (0x12B)

	)

178 
	#REG_CALI_RXIQ1_10
 (0x12C)

	)

179 
	#REG_CALI_RXIQ1_11
 (0x12D)

	)

180 
	#REG_CALI_RXIQ1_12
 (0x12E)

	)

181 
	#REG_CALI_RXIQ1_13
 (0x12F)

	)

182 
	#REG_CALI_RXIQ1_14
 (0x130)

	)

183 
	#REG_CALI_RXIQ1_15
 (0x131)

	)

184 
	#REG_CALI_RXIQ1_16
 (0x132)

	)

185 
	#REG_CALI_RXIQ1_17
 (0x133)

	)

186 
	#REG_CALI_RXIQ1_18
 (0x134)

	)

187 
	#REG_CALI_RXIQ1_19
 (0x135)

	)

188 
	#REG_CALI_RXIQ1_20
 (0x136)

	)

189 
	#REG_CALI_RXIQ1_21
 (0x137)

	)

190 
	#REG_CALI_RXIQ1_22
 (0x138)

	)

191 
	#REG_CALI_RXIQ1_23
 (0x139)

	)

192 
	#REG_CALI_RXIQ1_24
 (0x13A)

	)

193 
	#REG_CALI_RXIQ1_25
 (0x13B)

	)

194 
	#REG_CALI_RXIQ1_26
 (0x13C)

	)

195 
	#REG_CALI_RXIQ1_27
 (0x13D)

	)

196 
	#REG_CALI_RXIQ1_28
 (0x13E)

	)

197 
	#REG_CALI_RXIQ1_29
 (0x13F)

	)

198 
	#REG_CALI_RXIQ1_30
 (0x140)

	)

199 
	#REG_CALI_RXIQ1_31
 (0x141)

	)

200 
	#REG_CALI_RXIQ1_32
 (0x142)

	)

201 
	#REG_CALI_RXIQ1_33
 (0x143)

	)

202 
	#REG_CALI_ORXIQ_00
 (0x144)

	)

203 
	#REG_CALI_ORXIQ_01
 (0x145)

	)

204 
	#REG_CALI_ORXIQ_02
 (0x146)

	)

205 
	#REG_CALI_ORXIQ_03
 (0x147)

	)

206 
	#REG_CALI_ORXIQ_04
 (0x148)

	)

207 
	#REG_CALI_ORXIQ_05
 (0x149)

	)

208 
	#REG_CALI_ORXIQ_06
 (0x14A)

	)

209 
	#REG_CALI_ORXIQ_07
 (0x14B)

	)

210 
	#REG_CALI_ORXIQ_08
 (0x14C)

	)

211 
	#REG_CALI_ORXIQ_09
 (0x14D)

	)

212 
	#REG_CALI_ORXIQ_10
 (0x14E)

	)

213 
	#REG_CALI_ORXIQ_11
 (0x14F)

	)

214 
	#REG_CALI_ORXIQ_12
 (0x150)

	)

215 
	#REG_CALI_ORXIQ_13
 (0x151)

	)

216 
	#REG_CALI_ORXIQ_14
 (0x152)

	)

217 
	#REG_CALI_ORXIQ_15
 (0x153)

	)

218 
	#REG_CALI_ORXIQ_16
 (0x154)

	)

219 
	#REG_CALI_ORXIQ_17
 (0x155)

	)

220 
	#REG_CALI_ORXIQ_18
 (0x156)

	)

221 
	#REG_CALI_ORXIQ_19
 (0x157)

	)

222 
	#REG_CALI_ORXIQ_20
 (0x158)

	)

223 
	#REG_CALI_ORXIQ_21
 (0x159)

	)

224 
	#REG_CALI_ORXIQ_22
 (0x15A)

	)

225 
	#REG_CALI_ORXIQ_23
 (0x15B)

	)

226 
	#REG_CALI_ORXIQ_24
 (0x15C)

	)

227 
	#REG_CALI_ORXIQ_25
 (0x15D)

	)

228 
	#REG_CALI_ORXIQ_26
 (0x15E)

	)

229 
	#REG_CALI_ORXIQ_27
 (0x15F)

	)

230 
	#REG_CALI_ORXIQ_28
 (0x160)

	)

231 
	#REG_CALI_ORXIQ_29
 (0x161)

	)

232 
	#REG_CALI_ORXIQ_30
 (0x162)

	)

233 
	#REG_CALI_ORXIQ_31
 (0x163)

	)

234 
	#REG_CALI_ORXIQ_32
 (0x164)

	)

235 
	#REG_CALI_ORXIQ_33
 (0x165)

	)

236 
	#REG_CALI_TXIQ0_0
 (0x166)

	)

237 
	#REG_CALI_TXIQ0_1
 (0x167)

	)

238 
	#REG_CALI_TXIQ0_2
 (0x168)

	)

239 
	#REG_CALI_TXIQ0_3
 (0x169)

	)

240 
	#REG_CALI_TXIQ0_4
 (0x16A)

	)

241 
	#REG_CALI_TXIQ0_5
 (0x16B)

	)

242 
	#REG_CALI_TXIQ0_6
 (0x16C)

	)

243 
	#REG_CALI_TXIQ0_7
 (0x16D)

	)

244 
	#REG_CALI_TXIQ0_8
 (0x16E)

	)

245 
	#REG_CALI_TXIQ0_9
 (0x16F)

	)

246 
	#REG_CALI_TXIQ0_10
 (0x170)

	)

247 
	#REG_CALI_TXIQ0_11
 (0x171)

	)

248 
	#REG_CALI_TXIQ0_12
 (0x172)

	)

249 
	#REG_CALI_TXIQ0_13
 (0x173)

	)

250 
	#REG_CALI_TXIQ0_14
 (0x174)

	)

251 
	#REG_CALI_TXIQ0_15
 (0x175)

	)

252 
	#REG_CALI_TXIQ0_16
 (0x176)

	)

253 
	#REG_CALI_TXIQ0_17
 (0x177)

	)

254 
	#REG_CALI_TXIQ0_18
 (0x178)

	)

255 
	#REG_CALI_TXIQ0_19
 (0x179)

	)

256 
	#REG_CALI_TXIQ0_20
 (0x17A)

	)

257 
	#REG_CALI_TXIQ0_21
 (0x17B)

	)

258 
	#REG_CALI_TXIQ0_22
 (0x17C)

	)

259 
	#REG_CALI_TXIQ0_23
 (0x17D)

	)

260 
	#REG_CALI_TXIQ0_24
 (0x17E)

	)

261 
	#REG_CALI_TXIQ0_25
 (0x17F)

	)

262 
	#REG_CALI_TXIQ0_26
 (0x180)

	)

263 
	#REG_CALI_TXIQ0_27
 (0x181)

	)

264 
	#REG_CALI_TXIQ0_28
 (0x182)

	)

265 
	#REG_CALI_TXIQ0_29
 (0x183)

	)

266 
	#REG_CALI_TXIQ0_30
 (0x184)

	)

267 
	#REG_CALI_TXIQ0_31
 (0x185)

	)

268 
	#REG_CALI_TXIQ0_32
 (0x186)

	)

269 
	#REG_CALI_TXIQ0_33
 (0x187)

	)

270 
	#REG_CALI_TXIQ1_0
 (0x188)

	)

271 
	#REG_CALI_TXIQ1_1
 (0x189)

	)

272 
	#REG_CALI_TXIQ1_2
 (0x18A)

	)

273 
	#REG_CALI_TXIQ1_3
 (0x18B)

	)

274 
	#REG_CALI_TXIQ1_4
 (0x18C)

	)

275 
	#REG_CALI_TXIQ1_5
 (0x18D)

	)

276 
	#REG_CALI_TXIQ1_6
 (0x18E)

	)

277 
	#REG_CALI_TXIQ1_7
 (0x18F)

	)

278 
	#REG_CALI_TXIQ1_8
 (0x190)

	)

279 
	#REG_CALI_TXIQ1_9
 (0x191)

	)

280 
	#REG_CALI_TXIQ1_10
 (0x192)

	)

281 
	#REG_CALI_TXIQ1_11
 (0x193)

	)

282 
	#REG_CALI_TXIQ1_12
 (0x194)

	)

283 
	#REG_CALI_TXIQ1_13
 (0x195)

	)

284 
	#REG_CALI_TXIQ1_14
 (0x196)

	)

285 
	#REG_CALI_TXIQ1_15
 (0x197)

	)

286 
	#REG_CALI_TXIQ1_16
 (0x198)

	)

287 
	#REG_CALI_TXIQ1_17
 (0x199)

	)

288 
	#REG_CALI_TXIQ1_18
 (0x19A)

	)

289 
	#REG_CALI_TXIQ1_19
 (0x19B)

	)

290 
	#REG_CALI_TXIQ1_20
 (0x19C)

	)

291 
	#REG_CALI_TXIQ1_21
 (0x19D)

	)

292 
	#REG_CALI_TXIQ1_22
 (0x19E)

	)

293 
	#REG_CALI_TXIQ1_23
 (0x19F)

	)

294 
	#REG_CALI_TXIQ1_24
 (0x1A0)

	)

295 
	#REG_CALI_TXIQ1_25
 (0x1A1)

	)

296 
	#REG_CALI_TXIQ1_26
 (0x1A2)

	)

297 
	#REG_CALI_TXIQ1_27
 (0x1A3)

	)

298 
	#REG_CALI_TXIQ1_28
 (0x1A4)

	)

299 
	#REG_CALI_TXIQ1_29
 (0x1A5)

	)

300 
	#REG_CALI_TXIQ1_30
 (0x1A6)

	)

301 
	#REG_CALI_TXIQ1_31
 (0x1A7)

	)

302 
	#REG_CALI_TXIQ1_32
 (0x1A8)

	)

303 
	#REG_CALI_TXIQ1_33
 (0x1A9)

	)

304 
	#REG_CALI_RXFLT_0
 (0x1AA)

	)

305 
	#REG_CALI_RXFLT_1
 (0x1AB)

	)

306 
	#REG_CALI_RXFLT_2
 (0x1AC)

	)

307 
	#REG_CALI_RXFLT_3
 (0x1AD)

	)

308 
	#REG_CALI_RXFLT_4
 (0x1AE)

	)

309 
	#REG_CALI_RXFLT_5
 (0x1AF)

	)

310 
	#REG_CALI_RXFLT_6
 (0x1B0)

	)

311 
	#REG_CALI_RXFLT_7
 (0x1B1)

	)

312 
	#REG_CALI_RXFLT_8
 (0x1B2)

	)

313 
	#REG_CALI_RXFLT_9
 (0x1B3)

	)

314 
	#REG_CALI_RXFLT_10
 (0x1B4)

	)

315 
	#REG_CALI_RXFLT_11
 (0x1B5)

	)

316 
	#REG_CALI_RXFLT_12
 (0x1B6)

	)

317 
	#REG_CALI_RXFLT_13
 (0x1B7)

	)

318 
	#REG_CALI_RXFLT_14
 (0x1B8)

	)

319 
	#REG_CALI_RXFLT_15
 (0x1B9)

	)

320 
	#REG_CALI_RXFLT_16
 (0x1BA)

	)

321 
	#REG_CALI_RXFLT_17
 (0x1BB)

	)

322 
	#REG_DATA_ADJ_0
 (0x1BC)

	)

323 
	#REG_DATA_ADJ_1
 (0x1BD)

	)

324 
	#REG_DATA_ADJ_2
 (0x1BE)

	)

325 
	#REG_DATA_ADJ_3
 (0x1BF)

	)

326 
	#REG_DATA_ADJ_4
 (0x1C0)

	)

327 
	#REG_DATA_ADJ_5
 (0x1C1)

	)

328 
	#REG_DATA_ADJ_6
 (0x1C2)

	)

329 
	#REG_DATA_ADJ_7
 (0x1C3)

	)

330 
	#REG_DATA_ADJ_8
 (0x1C4)

	)

331 
	#REG_DATA_ADJ_9
 (0x1C5)

	)

332 
	#REG_CLK_SWAP_1
 (0x1C6)

	)

333 
	#REG_CH_ENA
 (0x1C7)

	)

334 
	#REG_CALI_OP_1
 (0x1C8)

	)

335 
	#REG_CALI_OP_2
 (0x1C9)

	)

338 
	#REG_CALI_RXFLT_18
 (0x1EE)

	)

339 
	#REG_CALI_RXFLT_19
 (0x1EE)

	)

340 
	#REG_CALI_RXFLT_20
 (0x1EE)

	)

341 
	#REG_CALI_RXFLT_21
 (0x1EE)

	)

342 
	#REG_CALI_RXFLT_22
 (0x1EE)

	)

343 
	#REG_CALI_RXFLT_23
 (0x1EE)

	)

344 
	#REG_CALI_RXFLT_24
 (0x1EE)

	)

345 
	#REG_CALI_RXFLT_25
 (0x1EE)

	)

346 
	#REG_CALI_RXFLT_26
 (0x1EE)

	)

347 
	#REG_CALI_RXFLT_27
 (0x1EE)

	)

348 
	#REG_CALI_RXFLT_28
 (0x1EE)

	)

349 
	#REG_CALI_RXFLT_29
 (0x1EE)

	)

350 
	#REG_CALI_RXFLT_30
 (0x1EE)

	)

351 
	#REG_CALI_RXFLT_31
 (0x1EE)

	)

352 
	#REG_CALI_RXFLT_32
 (0x1CA)

	)

353 
	#REG_CALI_RXFLT_33
 (0x1CB)

	)

354 
	#REG_CALI_RXFLT_34
 (0x1CC)

	)

355 
	#REG_CALI_RXFLT_35
 (0x1CD)

	)

356 
	#REG_LVDS_CTRL_0
 (0x1EE)

	)

359 
	#REG_CALI_TXFLT_0
 (0x1CE)

	)

360 
	#REG_CALI_TXFLT_1
 (0x1CF)

	)

361 
	#REG_CALI_TXFLT_2
 (0x1D0)

	)

362 
	#REG_CALI_TXFLT_3
 (0x1D1)

	)

363 
	#REG_CALI_TXFLT_4
 (0x1D2)

	)

364 
	#REG_CALI_TXFLT_5
 (0x1D3)

	)

365 
	#REG_CALI_TXFLT_6
 (0x1D4)

	)

366 
	#REG_CALI_TXFLT_7
 (0x1D5)

	)

367 
	#REG_CALI_TXFLT_8
 (0x1D6)

	)

368 
	#REG_CALI_TXFLT_9
 (0x1D7)

	)

369 
	#REG_CALI_TXFLT_10
 (0x1D8)

	)

370 
	#REG_CALI_TXFLT_11
 (0x1D9)

	)

371 
	#REG_CALI_TXFLT_12
 (0x1DA)

	)

372 
	#REG_CALI_TXFLT_13
 (0x1DB)

	)

373 
	#REG_CALI_TXFLT_14
 (0x1DC)

	)

374 
	#REG_CALI_TXFLT_15
 (0x1DD)

	)

375 
	#REG_CALI_TXFLT_16
 (0x1DE)

	)

376 
	#REG_CALI_TXFLT_17
 (0x1DF)

	)

377 
	#REG_CALI_TXFLT_18
 (0x1E0)

	)

378 
	#REG_CALI_TXFLT_19
 (0x1E1)

	)

379 
	#REG_BIT_DELAY_0
 (0x1E2)

	)

380 
	#REG_BIT_DELAY_1
 (0x1E3)

	)

381 
	#REG_BIT_DELAY_2
 (0x1E4)

	)

382 
	#REG_BIT_DELAY_3
 (0x1E5)

	)

383 
	#REG_BIT_DELAY_4
 (0x1E6)

	)

384 
	#REG_BIT_DELAY_5
 (0x1E7)

	)

385 
	#REG_BIT_DELAY_6
 (0x1E8)

	)

386 
	#REG_BIT_DELAY_7
 (0x1E9)

	)

387 
	#REG_BIT_DELAY_8
 (0x1EA)

	)

388 
	#REG_BIT_DELAY_9
 (0x1EB)

	)

389 
	#REG_BIT_DELAY_10
 (0x1EC)

	)

390 
	#REG_BIT_DELAY_11
 (0x1ED)

	)

391 
	#REG_CALI_ORXFLT_0
 (0x1F6)

	)

392 
	#REG_CALI_ORXFLT_1
 (0x1F7)

	)

393 
	#REG_CALI_ORXFLT_2
 (0x1F8)

	)

394 
	#REG_CALI_ORXFLT_3
 (0x1F9)

	)

395 
	#REG_CALI_ORXFLT_4
 (0x1FA)

	)

396 
	#REG_CALI_ORXFLT_5
 (0x1FB)

	)

397 
	#REG_CALI_ORXFLT_6
 (0x1FC)

	)

398 
	#REG_CALI_ORXFLT_7
 (0x1FD)

	)

399 
	#REG_CALI_ORXFLT_8
 (0x1FE)

	)

400 
	#REG_CALI_ORXFLT_9
 (0x1FF)

	)

401 
	#REG_CALI_ORXFLT_10
 (0x200)

	)

402 
	#REG_CALI_ORXFLT_11
 (0x201)

	)

403 
	#REG_CALI_ORXFLT_12
 (0x202)

	)

404 
	#REG_CALI_ORXFLT_13
 (0x203)

	)

405 
	#REG_CALI_ORXFLT_14
 (0x204)

	)

406 
	#REG_CALI_ORXFLT_15
 (0x205)

	)

407 
	#REG_CALI_ORXFLT_16
 (0x206)

	)

408 
	#REG_CALI_ORXFLT_17
 (0x207)

	)

409 
	#REG_OTPIN_CMD_ADDR
 (0x208)

	)

410 
	#REG_OTPIN_DATA_ADDR
 (0x209)

	)

411 
	#REG_J_RSTB_0
 (0x20A)

	)

412 
	#REG_J_SEL_4
 (0x20B)

	)

413 
	#REG_J_SEL_0
 (0x230)

	)

414 
	#REG_J_SEL_1
 (0x231)

	)

415 
	#REG_J_SEL_2
 (0x232)

	)

416 
	#REG_J_SEL_3
 (0x233)

	)

417 
	#REG_GPIO_MODE_0
 (0x234)

	)

418 
	#REG_GPIO_MODE_1
 (0x235)

	)

419 
	#REG_GPIO_MODE_2
 (0x236)

	)

420 
	#REG_GAIN_ADJ_0
 (0x237)

	)

421 
	#REG_GPIO_CTRL_2
 (0x238)

	)

422 
	#REG_GPIO_CTRL_3
 (0x239)

	)

423 
	#REG_GPIO_CTRL_4
 (0x23A)

	)

425 
	#REGOUT_OFFSET
 (0x400)

	)

426 
	#REGOUT_IP_STATUS
 (
REGOUT_OFFSET
 + 0x00)

	)

427 
	#REGOUT_SRAM_PTR
 (
REGOUT_OFFSET
 + 0x01)

	)

428 
	#SRAM_WR_CHECKSUM
 (
REGOUT_OFFSET
 + 0x02)

	)

429 
	#SRAM_READ_DATA
 (
REGOUT_OFFSET
 + 0x03)

	)

430 
	#REGOUT_CALI_FFT_0
 (
REGOUT_OFFSET
 + 0x04)

	)

431 
	#REGOUT_CALI_FFT_1
 (
REGOUT_OFFSET
 + 0x05)

	)

432 
	#REGOUT_CALI_FFT_2
 (
REGOUT_OFFSET
 + 0x06)

	)

433 
	#REGOUT_CALI_FFT_3
 (
REGOUT_OFFSET
 + 0x07)

	)

434 
	#REGOUT_CALI_FFT_4
 (
REGOUT_OFFSET
 + 0x08)

	)

435 
	#REGOUT_CALI_FFT_5
 (
REGOUT_OFFSET
 + 0x09)

	)

436 
	#REGOUT_CALI_CORR_0
 (
REGOUT_OFFSET
 + 0x0A)

	)

437 
	#REGOUT_CALI_DDC_0
 (
REGOUT_OFFSET
 + 0x0B)

	)

438 
	#REGOUT_CALI_DDC_1
 (
REGOUT_OFFSET
 + 0x0C)

	)

439 
	#REGOUT_CALI_DDC_2
 (
REGOUT_OFFSET
 + 0x0D)

	)

440 
	#REGOUT_CALI_DDC_3
 (
REGOUT_OFFSET
 + 0x0E)

	)

441 
	#REGOUT_CALI_DDC_4
 (
REGOUT_OFFSET
 + 0x0F)

	)

442 
	#REGOUT_CALI_DDC_5
 (
REGOUT_OFFSET
 + 0x10)

	)

443 
	#REGOUT_CALI_DONE_0
 (
REGOUT_OFFSET
 + 0x11)

	)

444 
	#REGOUT_PEAKDET_0
 (
REGOUT_OFFSET
 + 0x12)

	)

445 
	#REGOUT_AUXADC_0
 (
REGOUT_OFFSET
 + 0x13)

	)

446 
	#REGOUT_GC_0
 (
REGOUT_OFFSET
 + 0x14)

	)

447 
	#REGOUT_GC_1
 (
REGOUT_OFFSET
 + 0x15)

	)

448 
	#REGOUT_GC_2
 (
REGOUT_OFFSET
 + 0x16)

	)

449 
	#REGOUT_GC_3
 (
REGOUT_OFFSET
 + 0x17)

	)

450 
	#REGOUT_GC_4
 (
REGOUT_OFFSET
 + 0x18)

	)

451 
	#REGOUT_GC_5
 (
REGOUT_OFFSET
 + 0x19)

	)

452 
	#REGOUT_GC_6
 (
REGOUT_OFFSET
 + 0x1A)

	)

453 
	#REGOUT_GC_7
 (
REGOUT_OFFSET
 + 0x1B)

	)

454 
	#REGOUT_GC_8
 (
REGOUT_OFFSET
 + 0x1C)

	)

455 
	#REGOUT_GC_9
 (
REGOUT_OFFSET
 + 0x1D)

	)

456 
	#REGOUT_GC_10
 (
REGOUT_OFFSET
 + 0x1E)

	)

457 
	#REGOUT_GC_11
 (
REGOUT_OFFSET
 + 0x1F)

	)

458 
	#REGOUT_GC_12
 (
REGOUT_OFFSET
 + 0x20)

	)

459 
	#REGOUT_GC_13
 (
REGOUT_OFFSET
 + 0x21)

	)

460 
	#REGOUT_GC_14
 (
REGOUT_OFFSET
 + 0x22)

	)

461 
	#REGOUT_GC_15
 (
REGOUT_OFFSET
 + 0x23)

	)

462 
	#REGOUT_GC_16
 (
REGOUT_OFFSET
 + 0x24)

	)

463 
	#REGOUT_GC_17
 (
REGOUT_OFFSET
 + 0x25)

	)

464 
	#REGOUT_GC_18
 (
REGOUT_OFFSET
 + 0x26)

	)

465 
	#REGOUT_GC_19
 (
REGOUT_OFFSET
 + 0x27)

	)

466 
	#REGOUT_GC_20
 (
REGOUT_OFFSET
 + 0x28)

	)

467 
	#REGOUT_GC_21
 (
REGOUT_OFFSET
 + 0x29)

	)

468 
	#REGOUT_GC_22
 (
REGOUT_OFFSET
 + 0x2A)

	)

469 
	#REG_OTPOUT_DATA_ADDR
 (
REGOUT_OFFSET
 + 0x4C)

	)

470 
	#REG_OTPOUT_STA_ADDR
 (
REGOUT_OFFSET
 + 0x4D)

	)

471 
	#REGOUT_CALI_DDCA_0
 (
REGOUT_OFFSET
 + 0x4E)

	)

472 
	#REGOUT_CALI_DDCA_1
 (
REGOUT_OFFSET
 + 0x4F)

	)

473 
	#REGOUT_CALI_DDCA_2
 (
REGOUT_OFFSET
 + 0x50)

	)

474 
	#REGOUT_CALI_DDCA_3
 (
REGOUT_OFFSET
 + 0x51)

	)

475 
	#REGOUT_CALI_DDCA_4
 (
REGOUT_OFFSET
 + 0x52)

	)

476 
	#REGOUT_CALI_DDCA_5
 (
REGOUT_OFFSET
 + 0x53)

	)

477 
	#REGOUT_PRBS_ERR_0
 (
REGOUT_OFFSET
 + 0x54)

	)

478 
	#REGOUT_DAC2
 (
REGOUT_OFFSET
 + 0x55)

	)

479 
	#REGOUT_DAC3
 (
REGOUT_OFFSET
 + 0x56)

	)

480 
	#REGOUT_DAC4
 (
REGOUT_OFFSET
 + 0x57)

	)

481 
	#REGOUT_EXT_INTR_STATUS
 (
REGOUT_OFFSET
 + 0x58)

	)

482 
	#REGOUT_J204BRX11
 (
REGOUT_OFFSET
 + 0x59)

	)

483 
	#REGOUT_J204BRX12
 (
REGOUT_OFFSET
 + 0x5A)

	)

484 
	#REGOUT_J204BRX13
 (
REGOUT_OFFSET
 + 0x5B)

	)

485 
	#REGOUT_J204BRX14
 (
REGOUT_OFFSET
 + 0x5C)

	)

486 
	#REGOUT_J204BRX15
 (
REGOUT_OFFSET
 + 0x5D)

	)

487 
	#REGOUT_J204BRX16
 (
REGOUT_OFFSET
 + 0x5E)

	)

488 
	#REGOUT_J204BRX17
 (
REGOUT_OFFSET
 + 0x5F)

	)

489 
	#REGOUT_J204BRX18
 (
REGOUT_OFFSET
 + 0x60)

	)

491 
	#REG_RX0_GAIN_SRAM
(
num
(0x800 +um)

	)

492 
	#REG_RX1_GAIN_SRAM
(
num
(0x880 +um)

	)

493 
	#REG_ORX0_GAIN_SRAM
(
num
(0x900 +um)

	)

494 
	#REG_ORX1_GAIN_SRAM
(
num
(0x980 +um)

	)

495 
	#REG_TX0_ANA_GAIN_SRAM
(
num
(0xA00 +um)

	)

496 
	#REG_TX1_ANA_GAIN_SRAM
(
num
(0xA80 +um)

	)

497 
	#REG_TX0_DIG_GAIN_SRAM
(
num
(0xB00 +um)

	)

498 
	#REG_TX1_DIG_GAIN_SRAM
(
num
(0xB80 +um)

	)

499 
	#REG_RX0_DC_SRAM
(
num
(0xC00 +um)

	)

500 
	#REG_RX1_DC_SRAM
(
num
(0xC80 +um)

	)

501 
	#REG_ORX0_DC_SRAM
(
num
(0xD00 +um)

	)

502 
	#REG_ORX1_DC_SRAM
(
num
(0xD80 +um)

	)

504 
	#REG_TX_GAINTB_0
 
	`REG_TX0_ANA_GAIN_SRAM
(0)

	)

505 
	#REG_TX_GAINTB_1
 
	`REG_TX0_ANA_GAIN_SRAM
(1)

	)

506 
	#REG_TX_GAINTB_2
 
	`REG_TX0_ANA_GAIN_SRAM
(2)

	)

507 
	#REG_TX_GAINTB_3
 
	`REG_TX0_ANA_GAIN_SRAM
(3)

	)

508 
	#REG_TX_GAINTB_4
 
	`REG_TX0_ANA_GAIN_SRAM
(4)

	)

509 
	#REG_TX_GAINTB_5
 
	`REG_TX0_ANA_GAIN_SRAM
(5)

	)

510 
	#REG_TX_GAINTB_6
 
	`REG_TX0_ANA_GAIN_SRAM
(6)

	)

511 
	#REG_TX_GAINTB_7
 
	`REG_TX0_ANA_GAIN_SRAM
(7)

	)

512 
	#REG_TX_GAINTB_8
 
	`REG_TX0_ANA_GAIN_SRAM
(8)

	)

513 
	#REG_TX_GAINTB_9
 
	`REG_TX0_ANA_GAIN_SRAM
(9)

	)

514 
	#REG_TX_GAINTB_10
 
	`REG_TX0_ANA_GAIN_SRAM
(10)

	)

515 
	#REG_TX_GAINTB_11
 
	`REG_TX0_ANA_GAIN_SRAM
(11)

	)

516 
	#REG_TX_GAINTB_12
 
	`REG_TX0_ANA_GAIN_SRAM
(12)

	)

517 
	#REG_TX_GAINTB_13
 
	`REG_TX0_ANA_GAIN_SRAM
(13)

	)

518 
	#REG_TX_GAINTB_14
 
	`REG_TX0_ANA_GAIN_SRAM
(14)

	)

519 
	#REG_TX_GAINTB_15
 
	`REG_TX0_ANA_GAIN_SRAM
(15)

	)

520 
	#REG_TX_GAINTB_16
 
	`REG_TX0_ANA_GAIN_SRAM
(16)

	)

521 
	#REG_TX_GAINTB_17
 
	`REG_TX0_ANA_GAIN_SRAM
(17)

	)

522 
	#REG_TX_GAINTB_18
 
	`REG_TX0_ANA_GAIN_SRAM
(18)

	)

523 
	#REG_TX_GAINTB_19
 
	`REG_TX0_ANA_GAIN_SRAM
(19)

	)

524 
	#REG_TX_GAINTB_20
 
	`REG_TX0_ANA_GAIN_SRAM
(20)

	)

525 
	#REG_TX_GAINTB_21
 
	`REG_TX0_ANA_GAIN_SRAM
(21)

	)

526 
	#REG_TX_GAINTB_22
 
	`REG_TX0_ANA_GAIN_SRAM
(22)

	)

527 
	#REG_TX_GAINTB_23
 
	`REG_TX0_ANA_GAIN_SRAM
(23)

	)

528 
	#REG_TX_GAINTB_24
 
	`REG_TX0_ANA_GAIN_SRAM
(24)

	)

529 
	#REG_TX_GAINTB_25
 
	`REG_TX0_ANA_GAIN_SRAM
(25)

	)

530 
	#REG_TX_GAINTB_26
 
	`REG_TX0_ANA_GAIN_SRAM
(26)

	)

531 
	#REG_TX_GAINTB_27
 
	`REG_TX0_ANA_GAIN_SRAM
(27)

	)

532 
	#REG_TX_GAINTB_28
 
	`REG_TX0_ANA_GAIN_SRAM
(28)

	)

533 
	#REG_TX_GAINTB_29
 
	`REG_TX0_ANA_GAIN_SRAM
(29)

	)

534 
	#REG_TX_GAINTB_30
 
	`REG_TX0_ANA_GAIN_SRAM
(30)

	)

535 
	#REG_TX_GAINTB_31
 
	`REG_TX0_ANA_GAIN_SRAM
(31)

	)

537 
	#TX_DGAINTB_0
 
	`REG_TX0_DIG_GAIN_SRAM
(0)

	)

538 
	#TX_DGAINTB_1
 
	`REG_TX0_DIG_GAIN_SRAM
(1)

	)

539 
	#TX_DGAINTB_2
 
	`REG_TX0_DIG_GAIN_SRAM
(2)

	)

540 
	#TX_DGAINTB_3
 
	`REG_TX0_DIG_GAIN_SRAM
(3)

	)

541 
	#TX_DGAINTB_4
 
	`REG_TX0_DIG_GAIN_SRAM
(4)

	)

542 
	#TX_DGAINTB_5
 
	`REG_TX0_DIG_GAIN_SRAM
(5)

	)

543 
	#TX_DGAINTB_6
 
	`REG_TX0_DIG_GAIN_SRAM
(6)

	)

544 
	#TX_DGAINTB_7
 
	`REG_TX0_DIG_GAIN_SRAM
(7)

	)

545 
	#TX_DGAINTB_8
 
	`REG_TX0_DIG_GAIN_SRAM
(8)

	)

546 
	#TX_DGAINTB_9
 
	`REG_TX0_DIG_GAIN_SRAM
(9)

	)

547 
	#TX_DGAINTB_10
 
	`REG_TX0_DIG_GAIN_SRAM
(10)

	)

548 
	#TX_DGAINTB_11
 
	`REG_TX0_DIG_GAIN_SRAM
(11)

	)

549 
	#TX_DGAINTB_12
 
	`REG_TX0_DIG_GAIN_SRAM
(12)

	)

550 
	#TX_DGAINTB_13
 
	`REG_TX0_DIG_GAIN_SRAM
(13)

	)

551 
	#TX_DGAINTB_14
 
	`REG_TX0_DIG_GAIN_SRAM
(14)

	)

552 
	#TX_DGAINTB_15
 
	`REG_TX0_DIG_GAIN_SRAM
(15)

	)

553 
	#TX_DGAINTB_16
 
	`REG_TX0_DIG_GAIN_SRAM
(16)

	)

554 
	#TX_DGAINTB_17
 
	`REG_TX0_DIG_GAIN_SRAM
(17)

	)

555 
	#TX_DGAINTB_18
 
	`REG_TX0_DIG_GAIN_SRAM
(18)

	)

556 
	#TX_DGAINTB_19
 
	`REG_TX0_DIG_GAIN_SRAM
(19)

	)

557 
	#TX_DGAINTB_20
 
	`REG_TX0_DIG_GAIN_SRAM
(20)

	)

558 
	#TX_DGAINTB_21
 
	`REG_TX0_DIG_GAIN_SRAM
(21)

	)

559 
	#TX_DGAINTB_22
 
	`REG_TX0_DIG_GAIN_SRAM
(22)

	)

560 
	#TX_DGAINTB_23
 
	`REG_TX0_DIG_GAIN_SRAM
(23)

	)

561 
	#TX_DGAINTB_24
 
	`REG_TX0_DIG_GAIN_SRAM
(24)

	)

562 
	#TX_DGAINTB_25
 
	`REG_TX0_DIG_GAIN_SRAM
(25)

	)

563 
	#TX_DGAINTB_26
 
	`REG_TX0_DIG_GAIN_SRAM
(26)

	)

564 
	#TX_DGAINTB_27
 
	`REG_TX0_DIG_GAIN_SRAM
(27)

	)

565 
	#TX_DGAINTB_28
 
	`REG_TX0_DIG_GAIN_SRAM
(28)

	)

566 
	#TX_DGAINTB_29
 
	`REG_TX0_DIG_GAIN_SRAM
(29)

	)

567 
	#TX_DGAINTB_30
 
	`REG_TX0_DIG_GAIN_SRAM
(30)

	)

568 
	#TX_DGAINTB_31
 
	`REG_TX0_DIG_GAIN_SRAM
(31)

	)

570 
	#REG_RX_GAINTB_0
 
	`REG_RX0_GAIN_SRAM
(0)

	)

571 
	#REG_RX_GAINTB_1
 
	`REG_RX0_GAIN_SRAM
(1)

	)

572 
	#REG_RX_GAINTB_2
 
	`REG_RX0_GAIN_SRAM
(2)

	)

573 
	#REG_RX_GAINTB_3
 
	`REG_RX0_GAIN_SRAM
(3)

	)

574 
	#REG_RX_GAINTB_4
 
	`REG_RX0_GAIN_SRAM
(4)

	)

575 
	#REG_RX_GAINTB_5
 
	`REG_RX0_GAIN_SRAM
(5)

	)

576 
	#REG_RX_GAINTB_6
 
	`REG_RX0_GAIN_SRAM
(6)

	)

577 
	#REG_RX_GAINTB_7
 
	`REG_RX0_GAIN_SRAM
(7)

	)

578 
	#REG_RX_GAINTB_8
 
	`REG_RX0_GAIN_SRAM
(8)

	)

579 
	#REG_RX_GAINTB_9
 
	`REG_RX0_GAIN_SRAM
(9)

	)

580 
	#REG_RX_GAINTB_10
 
	`REG_RX0_GAIN_SRAM
(10)

	)

581 
	#REG_RX_GAINTB_11
 
	`REG_RX0_GAIN_SRAM
(11)

	)

582 
	#REG_RX_GAINTB_12
 
	`REG_RX0_GAIN_SRAM
(12)

	)

583 
	#REG_RX_GAINTB_13
 
	`REG_RX0_GAIN_SRAM
(13)

	)

584 
	#REG_RX_GAINTB_14
 
	`REG_RX0_GAIN_SRAM
(14)

	)

585 
	#REG_RX_GAINTB_15
 
	`REG_RX0_GAIN_SRAM
(15)

	)

586 
	#REG_RX_GAINTB_16
 
	`REG_RX0_GAIN_SRAM
(16)

	)

587 
	#REG_RX_GAINTB_17
 
	`REG_RX0_GAIN_SRAM
(17)

	)

588 
	#REG_RX_GAINTB_18
 
	`REG_RX0_GAIN_SRAM
(18)

	)

589 
	#REG_RX_GAINTB_19
 
	`REG_RX0_GAIN_SRAM
(19)

	)

590 
	#REG_RX_GAINTB_20
 
	`REG_RX0_GAIN_SRAM
(20)

	)

591 
	#REG_RX_GAINTB_21
 
	`REG_RX0_GAIN_SRAM
(21)

	)

592 
	#REG_RX_GAINTB_22
 
	`REG_RX0_GAIN_SRAM
(22)

	)

593 
	#REG_RX_GAINTB_23
 
	`REG_RX0_GAIN_SRAM
(23)

	)

594 
	#REG_RX_GAINTB_24
 
	`REG_RX0_GAIN_SRAM
(24)

	)

595 
	#REG_RX_GAINTB_25
 
	`REG_RX0_GAIN_SRAM
(25)

	)

596 
	#REG_RX_GAINTB_26
 
	`REG_RX0_GAIN_SRAM
(26)

	)

597 
	#REG_RX_GAINTB_27
 
	`REG_RX0_GAIN_SRAM
(27)

	)

598 
	#REG_RX_GAINTB_28
 
	`REG_RX0_GAIN_SRAM
(28)

	)

599 
	#REG_RX_GAINTB_29
 
	`REG_RX0_GAIN_SRAM
(29)

	)

600 
	#REG_RX_GAINTB_30
 
	`REG_RX0_GAIN_SRAM
(30)

	)

601 
	#REG_RX_GAINTB_31
 
	`REG_RX0_GAIN_SRAM
(31)

	)

602 
	#REG_RX_GAINTB_32
 
	`REG_RX0_GAIN_SRAM
(32)

	)

603 
	#REG_RX_GAINTB_33
 
	`REG_RX0_GAIN_SRAM
(33)

	)

604 
	#REG_RX_GAINTB_34
 
	`REG_RX0_GAIN_SRAM
(34)

	)

605 
	#REG_RX_GAINTB_35
 
	`REG_RX0_GAIN_SRAM
(35)

	)

606 
	#REG_RX_GAINTB_36
 
	`REG_RX0_GAIN_SRAM
(36)

	)

607 
	#REG_RX_GAINTB_37
 
	`REG_RX0_GAIN_SRAM
(37)

	)

608 
	#REG_RX_GAINTB_38
 
	`REG_RX0_GAIN_SRAM
(38)

	)

609 
	#REG_RX_GAINTB_39
 
	`REG_RX0_GAIN_SRAM
(39)

	)

610 
	#REG_RX_GAINTB_40
 
	`REG_RX0_GAIN_SRAM
(40)

	)

611 
	#REG_RX_GAINTB_41
 
	`REG_RX0_GAIN_SRAM
(41)

	)

612 
	#REG_RX_GAINTB_42
 
	`REG_RX0_GAIN_SRAM
(42)

	)

613 
	#REG_RX_GAINTB_43
 
	`REG_RX0_GAIN_SRAM
(43)

	)

614 
	#REG_RX_GAINTB_44
 
	`REG_RX0_GAIN_SRAM
(44)

	)

615 
	#REG_RX_GAINTB_45
 
	`REG_RX0_GAIN_SRAM
(45)

	)

616 
	#REG_RX_GAINTB_46
 
	`REG_RX0_GAIN_SRAM
(46)

	)

617 
	#REG_RX_GAINTB_47
 
	`REG_RX0_GAIN_SRAM
(47)

	)

618 
	#REG_RX_GAINTB_48
 
	`REG_RX0_GAIN_SRAM
(48)

	)

619 
	#REG_RX_GAINTB_49
 
	`REG_RX0_GAIN_SRAM
(49)

	)

620 
	#REG_RX_GAINTB_50
 
	`REG_RX0_GAIN_SRAM
(50)

	)

621 
	#REG_RX_GAINTB_51
 
	`REG_RX0_GAIN_SRAM
(51)

	)

622 
	#REG_RX_GAINTB_52
 
	`REG_RX0_GAIN_SRAM
(52)

	)

623 
	#REG_RX_GAINTB_53
 
	`REG_RX0_GAIN_SRAM
(53)

	)

624 
	#REG_RX_GAINTB_54
 
	`REG_RX0_GAIN_SRAM
(54)

	)

625 
	#REG_RX_GAINTB_55
 
	`REG_RX0_GAIN_SRAM
(55)

	)

626 
	#REG_RX_GAINTB_56
 
	`REG_RX0_GAIN_SRAM
(56)

	)

627 
	#REG_RX_GAINTB_57
 
	`REG_RX0_GAIN_SRAM
(57)

	)

628 
	#REG_RX_GAINTB_58
 
	`REG_RX0_GAIN_SRAM
(58)

	)

629 
	#REG_RX_GAINTB_59
 
	`REG_RX0_GAIN_SRAM
(59)

	)

630 
	#REG_RX_GAINTB_60
 
	`REG_RX0_GAIN_SRAM
(60)

	)

631 
	#REG_RX_GAINTB_61
 
	`REG_RX0_GAIN_SRAM
(61)

	)

632 
	#REG_RX_GAINTB_62
 
	`REG_RX0_GAIN_SRAM
(62)

	)

633 
	#REG_RX_GAINTB_63
 
	`REG_RX0_GAIN_SRAM
(63)

	)

634 
	#REG_RX_GAINTB_64
 
	`REG_RX0_GAIN_SRAM
(64)

	)

635 
	#REG_RX_GAINTB_65
 
	`REG_RX0_GAIN_SRAM
(65)

	)

636 
	#REG_RX_GAINTB_66
 
	`REG_RX0_GAIN_SRAM
(66)

	)

637 
	#REG_RX_GAINTB_67
 
	`REG_RX0_GAIN_SRAM
(67)

	)

638 
	#REG_RX_GAINTB_68
 
	`REG_RX0_GAIN_SRAM
(68)

	)

639 
	#REG_RX_GAINTB_69
 
	`REG_RX0_GAIN_SRAM
(69)

	)

640 
	#REG_RX_GAINTB_70
 
	`REG_RX0_GAIN_SRAM
(70)

	)

641 
	#REG_RX_GAINTB_71
 
	`REG_RX0_GAIN_SRAM
(71)

	)

642 
	#REG_RX_GAINTB_72
 
	`REG_RX0_GAIN_SRAM
(72)

	)

643 
	#REG_RX_GAINTB_73
 
	`REG_RX0_GAIN_SRAM
(73)

	)

644 
	#REG_RX_GAINTB_74
 
	`REG_RX0_GAIN_SRAM
(74)

	)

645 
	#REG_RX_GAINTB_75
 
	`REG_RX0_GAIN_SRAM
(75)

	)

646 
	#REG_RX_GAINTB_76
 
	`REG_RX0_GAIN_SRAM
(76)

	)

647 
	#REG_RX_GAINTB_77
 
	`REG_RX0_GAIN_SRAM
(77)

	)

648 
	#REG_RX_GAINTB_78
 
	`REG_RX0_GAIN_SRAM
(78)

	)

649 
	#REG_RX_GAINTB_79
 
	`REG_RX0_GAIN_SRAM
(79)

	)

650 
	#REG_RX_GAINTB_80
 
	`REG_RX0_GAIN_SRAM
(80)

	)

651 
	#REG_RX_GAINTB_81
 
	`REG_RX0_GAIN_SRAM
(81)

	)

652 
	#REG_RX_GAINTB_82
 
	`REG_RX0_GAIN_SRAM
(82)

	)

653 
	#REG_RX_GAINTB_83
 
	`REG_RX0_GAIN_SRAM
(83)

	)

654 
	#REG_RX_GAINTB_84
 
	`REG_RX0_GAIN_SRAM
(84)

	)

655 
	#REG_RX_GAINTB_85
 
	`REG_RX0_GAIN_SRAM
(85)

	)

656 
	#REG_RX_GAINTB_86
 
	`REG_RX0_GAIN_SRAM
(86)

	)

657 
	#REG_RX_GAINTB_87
 
	`REG_RX0_GAIN_SRAM
(87)

	)

658 
	#REG_RX_GAINTB_88
 
	`REG_RX0_GAIN_SRAM
(88)

	)

659 
	#REG_RX_GAINTB_89
 
	`REG_RX0_GAIN_SRAM
(89)

	)

660 
	#REG_RX_GAINTB_90
 
	`REG_RX0_GAIN_SRAM
(90)

	)

661 
	#REG_RX_GAINTB_91
 
	`REG_RX0_GAIN_SRAM
(91)

	)

662 
	#REG_RX_GAINTB_92
 
	`REG_RX0_GAIN_SRAM
(92)

	)

663 
	#REG_RX_GAINTB_93
 
	`REG_RX0_GAIN_SRAM
(93)

	)

664 
	#REG_RX_GAINTB_94
 
	`REG_RX0_GAIN_SRAM
(94)

	)

665 
	#REG_RX_GAINTB_95
 
	`REG_RX0_GAIN_SRAM
(95)

	)

666 
	#REG_RX_GAINTB_96
 
	`REG_RX0_GAIN_SRAM
(96)

	)

667 
	#REG_RX_GAINTB_97
 
	`REG_RX0_GAIN_SRAM
(97)

	)

668 
	#REG_RX_GAINTB_98
 
	`REG_RX0_GAIN_SRAM
(98)

	)

669 
	#REG_RX_GAINTB_99
 
	`REG_RX0_GAIN_SRAM
(99)

	)

670 
	#REG_RX_GAINTB_100
 
	`REG_RX0_GAIN_SRAM
(100)

	)

671 
	#REG_RX_GAINTB_101
 
	`REG_RX0_GAIN_SRAM
(101)

	)

672 
	#REG_RX_GAINTB_102
 
	`REG_RX0_GAIN_SRAM
(102)

	)

673 
	#REG_RX_GAINTB_103
 
	`REG_RX0_GAIN_SRAM
(103)

	)

674 
	#REG_RX_GAINTB_104
 
	`REG_RX0_GAIN_SRAM
(104)

	)

675 
	#REG_RX_GAINTB_105
 
	`REG_RX0_GAIN_SRAM
(105)

	)

676 
	#REG_RX_GAINTB_106
 
	`REG_RX0_GAIN_SRAM
(106)

	)

677 
	#REG_RX_GAINTB_107
 
	`REG_RX0_GAIN_SRAM
(107)

	)

678 
	#REG_RX_GAINTB_108
 
	`REG_RX0_GAIN_SRAM
(108)

	)

679 
	#REG_RX_GAINTB_109
 
	`REG_RX0_GAIN_SRAM
(109)

	)

680 
	#REG_RX_GAINTB_110
 
	`REG_RX0_GAIN_SRAM
(110)

	)

681 
	#REG_RX_GAINTB_111
 
	`REG_RX0_GAIN_SRAM
(111)

	)

682 
	#REG_RX_GAINTB_112
 
	`REG_RX0_GAIN_SRAM
(112)

	)

683 
	#REG_RX_GAINTB_113
 
	`REG_RX0_GAIN_SRAM
(113)

	)

684 
	#REG_RX_GAINTB_114
 
	`REG_RX0_GAIN_SRAM
(114)

	)

685 
	#REG_RX_GAINTB_115
 
	`REG_RX0_GAIN_SRAM
(115)

	)

686 
	#REG_RX_GAINTB_116
 
	`REG_RX0_GAIN_SRAM
(116)

	)

687 
	#REG_RX_GAINTB_117
 
	`REG_RX0_GAIN_SRAM
(117)

	)

688 
	#REG_RX_GAINTB_118
 
	`REG_RX0_GAIN_SRAM
(118)

	)

689 
	#REG_RX_GAINTB_119
 
	`REG_RX0_GAIN_SRAM
(119)

	)

690 
	#REG_RX_GAINTB_120
 
	`REG_RX0_GAIN_SRAM
(120)

	)

691 
	#REG_RX_GAINTB_121
 
	`REG_RX0_GAIN_SRAM
(121)

	)

692 
	#REG_RX_GAINTB_122
 
	`REG_RX0_GAIN_SRAM
(122)

	)

693 
	#REG_RX_GAINTB_123
 
	`REG_RX0_GAIN_SRAM
(123)

	)

694 
	#REG_RX_GAINTB_124
 
	`REG_RX0_GAIN_SRAM
(124)

	)

695 
	#REG_RX_GAINTB_125
 
	`REG_RX0_GAIN_SRAM
(125)

	)

696 
	#REG_RX_GAINTB_126
 
	`REG_RX0_GAIN_SRAM
(126)

	)

697 
	#REG_RX_GAINTB_127
 
	`REG_RX0_GAIN_SRAM
(127)

	)

699 
	#REG_RX0_DC_0
 
	`REG_RX0_DC_SRAM
(0)

	)

700 
	#REG_RX0_DC_1
 
	`REG_RX0_DC_SRAM
(1)

	)

701 
	#REG_RX0_DC_2
 
	`REG_RX0_DC_SRAM
(2)

	)

702 
	#REG_RX0_DC_3
 
	`REG_RX0_DC_SRAM
(3)

	)

703 
	#REG_RX0_DC_4
 
	`REG_RX0_DC_SRAM
(4)

	)

704 
	#REG_RX0_DC_5
 
	`REG_RX0_DC_SRAM
(5)

	)

705 
	#REG_RX0_DC_6
 
	`REG_RX0_DC_SRAM
(6)

	)

706 
	#REG_RX0_DC_7
 
	`REG_RX0_DC_SRAM
(7)

	)

707 
	#REG_RX0_DC_8
 
	`REG_RX0_DC_SRAM
(8)

	)

708 
	#REG_RX0_DC_9
 
	`REG_RX0_DC_SRAM
(9)

	)

709 
	#REG_RX0_DC_10
 
	`REG_RX0_DC_SRAM
(10)

	)

710 
	#REG_RX0_DC_11
 
	`REG_RX0_DC_SRAM
(11)

	)

711 
	#REG_RX0_DC_12
 
	`REG_RX0_DC_SRAM
(12)

	)

712 
	#REG_RX0_DC_13
 
	`REG_RX0_DC_SRAM
(13)

	)

713 
	#REG_RX0_DC_14
 
	`REG_RX0_DC_SRAM
(14)

	)

714 
	#REG_RX0_DC_15
 
	`REG_RX0_DC_SRAM
(15)

	)

715 
	#REG_RX0_DC_16
 
	`REG_RX0_DC_SRAM
(16)

	)

716 
	#REG_RX0_DC_17
 
	`REG_RX0_DC_SRAM
(17)

	)

717 
	#REG_RX0_DC_18
 
	`REG_RX0_DC_SRAM
(18)

	)

718 
	#REG_RX0_DC_19
 
	`REG_RX0_DC_SRAM
(19)

	)

719 
	#REG_RX0_DC_20
 
	`REG_RX0_DC_SRAM
(20)

	)

720 
	#REG_RX0_DC_21
 
	`REG_RX0_DC_SRAM
(21)

	)

721 
	#REG_RX0_DC_22
 
	`REG_RX0_DC_SRAM
(22)

	)

722 
	#REG_RX0_DC_23
 
	`REG_RX0_DC_SRAM
(23)

	)

723 
	#REG_RX0_DC_24
 
	`REG_RX0_DC_SRAM
(24)

	)

724 
	#REG_RX0_DC_25
 
	`REG_RX0_DC_SRAM
(25)

	)

725 
	#REG_RX0_DC_26
 
	`REG_RX0_DC_SRAM
(26)

	)

726 
	#REG_RX0_DC_27
 
	`REG_RX0_DC_SRAM
(27)

	)

727 
	#REG_RX0_DC_28
 
	`REG_RX0_DC_SRAM
(28)

	)

728 
	#REG_RX0_DC_29
 
	`REG_RX0_DC_SRAM
(29)

	)

729 
	#REG_RX0_DC_30
 
	`REG_RX0_DC_SRAM
(30)

	)

730 
	#REG_RX0_DC_31
 
	`REG_RX0_DC_SRAM
(31)

	)

731 
	#REG_RX0_DC_32
 
	`REG_RX0_DC_SRAM
(32)

	)

732 
	#REG_RX0_DC_33
 
	`REG_RX0_DC_SRAM
(33)

	)

733 
	#REG_RX0_DC_34
 
	`REG_RX0_DC_SRAM
(34)

	)

734 
	#REG_RX0_DC_35
 
	`REG_RX0_DC_SRAM
(35)

	)

735 
	#REG_RX0_DC_36
 
	`REG_RX0_DC_SRAM
(36)

	)

736 
	#REG_RX0_DC_37
 
	`REG_RX0_DC_SRAM
(37)

	)

737 
	#REG_RX0_DC_38
 
	`REG_RX0_DC_SRAM
(38)

	)

738 
	#REG_RX0_DC_39
 
	`REG_RX0_DC_SRAM
(39)

	)

739 
	#REG_RX0_DC_40
 
	`REG_RX0_DC_SRAM
(40)

	)

740 
	#REG_RX0_DC_41
 
	`REG_RX0_DC_SRAM
(41)

	)

741 
	#REG_RX0_DC_42
 
	`REG_RX0_DC_SRAM
(42)

	)

742 
	#REG_RX0_DC_43
 
	`REG_RX0_DC_SRAM
(43)

	)

743 
	#REG_RX0_DC_44
 
	`REG_RX0_DC_SRAM
(44)

	)

744 
	#REG_RX0_DC_45
 
	`REG_RX0_DC_SRAM
(45)

	)

745 
	#REG_RX0_DC_46
 
	`REG_RX0_DC_SRAM
(46)

	)

746 
	#REG_RX0_DC_47
 
	`REG_RX0_DC_SRAM
(47)

	)

747 
	#REG_RX0_DC_48
 
	`REG_RX0_DC_SRAM
(48)

	)

748 
	#REG_RX0_DC_49
 
	`REG_RX0_DC_SRAM
(49)

	)

749 
	#REG_RX0_DC_50
 
	`REG_RX0_DC_SRAM
(50)

	)

750 
	#REG_RX0_DC_51
 
	`REG_RX0_DC_SRAM
(51)

	)

751 
	#REG_RX0_DC_52
 
	`REG_RX0_DC_SRAM
(52)

	)

752 
	#REG_RX0_DC_53
 
	`REG_RX0_DC_SRAM
(53)

	)

753 
	#REG_RX0_DC_54
 
	`REG_RX0_DC_SRAM
(54)

	)

754 
	#REG_RX0_DC_55
 
	`REG_RX0_DC_SRAM
(55)

	)

755 
	#REG_RX0_DC_56
 
	`REG_RX0_DC_SRAM
(56)

	)

756 
	#REG_RX0_DC_57
 
	`REG_RX0_DC_SRAM
(57)

	)

757 
	#REG_RX0_DC_58
 
	`REG_RX0_DC_SRAM
(58)

	)

758 
	#REG_RX0_DC_59
 
	`REG_RX0_DC_SRAM
(59)

	)

759 
	#REG_RX0_DC_60
 
	`REG_RX0_DC_SRAM
(60)

	)

760 
	#REG_RX0_DC_61
 
	`REG_RX0_DC_SRAM
(61)

	)

761 
	#REG_RX0_DC_62
 
	`REG_RX0_DC_SRAM
(62)

	)

762 
	#REG_RX0_DC_63
 
	`REG_RX0_DC_SRAM
(63)

	)

763 
	#REG_RX0_DC_64
 
	`REG_RX0_DC_SRAM
(64)

	)

764 
	#REG_RX0_DC_65
 
	`REG_RX0_DC_SRAM
(65)

	)

765 
	#REG_RX0_DC_66
 
	`REG_RX0_DC_SRAM
(66)

	)

766 
	#REG_RX0_DC_67
 
	`REG_RX0_DC_SRAM
(67)

	)

767 
	#REG_RX0_DC_68
 
	`REG_RX0_DC_SRAM
(68)

	)

768 
	#REG_RX0_DC_69
 
	`REG_RX0_DC_SRAM
(69)

	)

769 
	#REG_RX0_DC_70
 
	`REG_RX0_DC_SRAM
(70)

	)

770 
	#REG_RX0_DC_71
 
	`REG_RX0_DC_SRAM
(71)

	)

771 
	#REG_RX0_DC_72
 
	`REG_RX0_DC_SRAM
(72)

	)

772 
	#REG_RX0_DC_73
 
	`REG_RX0_DC_SRAM
(73)

	)

773 
	#REG_RX0_DC_74
 
	`REG_RX0_DC_SRAM
(74)

	)

774 
	#REG_RX0_DC_75
 
	`REG_RX0_DC_SRAM
(75)

	)

775 
	#REG_RX0_DC_76
 
	`REG_RX0_DC_SRAM
(76)

	)

776 
	#REG_RX0_DC_77
 
	`REG_RX0_DC_SRAM
(77)

	)

777 
	#REG_RX0_DC_78
 
	`REG_RX0_DC_SRAM
(78)

	)

778 
	#REG_RX0_DC_79
 
	`REG_RX0_DC_SRAM
(79)

	)

779 
	#REG_RX0_DC_80
 
	`REG_RX0_DC_SRAM
(80)

	)

780 
	#REG_RX0_DC_81
 
	`REG_RX0_DC_SRAM
(81)

	)

781 
	#REG_RX0_DC_82
 
	`REG_RX0_DC_SRAM
(82)

	)

782 
	#REG_RX0_DC_83
 
	`REG_RX0_DC_SRAM
(83)

	)

783 
	#REG_RX0_DC_84
 
	`REG_RX0_DC_SRAM
(84)

	)

784 
	#REG_RX0_DC_85
 
	`REG_RX0_DC_SRAM
(85)

	)

785 
	#REG_RX1_DC_0
 
	`REG_RX1_DC_SRAM
(0)

	)

786 
	#REG_RX1_DC_1
 
	`REG_RX1_DC_SRAM
(1)

	)

787 
	#REG_RX1_DC_2
 
	`REG_RX1_DC_SRAM
(2)

	)

788 
	#REG_RX1_DC_3
 
	`REG_RX1_DC_SRAM
(3)

	)

789 
	#REG_RX1_DC_4
 
	`REG_RX1_DC_SRAM
(4)

	)

790 
	#REG_RX1_DC_5
 
	`REG_RX1_DC_SRAM
(5)

	)

791 
	#REG_RX1_DC_6
 
	`REG_RX1_DC_SRAM
(6)

	)

792 
	#REG_RX1_DC_7
 
	`REG_RX1_DC_SRAM
(7)

	)

793 
	#REG_RX1_DC_8
 
	`REG_RX1_DC_SRAM
(8)

	)

794 
	#REG_RX1_DC_9
 
	`REG_RX1_DC_SRAM
(9)

	)

795 
	#REG_RX1_DC_10
 
	`REG_RX1_DC_SRAM
(10)

	)

796 
	#REG_RX1_DC_11
 
	`REG_RX1_DC_SRAM
(11)

	)

797 
	#REG_RX1_DC_12
 
	`REG_RX1_DC_SRAM
(12)

	)

798 
	#REG_RX1_DC_13
 
	`REG_RX1_DC_SRAM
(13)

	)

799 
	#REG_RX1_DC_14
 
	`REG_RX1_DC_SRAM
(14)

	)

800 
	#REG_RX1_DC_15
 
	`REG_RX1_DC_SRAM
(15)

	)

801 
	#REG_RX1_DC_16
 
	`REG_RX1_DC_SRAM
(16)

	)

802 
	#REG_RX1_DC_17
 
	`REG_RX1_DC_SRAM
(17)

	)

803 
	#REG_RX1_DC_18
 
	`REG_RX1_DC_SRAM
(18)

	)

804 
	#REG_RX1_DC_19
 
	`REG_RX1_DC_SRAM
(19)

	)

805 
	#REG_RX1_DC_20
 
	`REG_RX1_DC_SRAM
(20)

	)

806 
	#REG_RX1_DC_21
 
	`REG_RX1_DC_SRAM
(21)

	)

807 
	#REG_RX1_DC_22
 
	`REG_RX1_DC_SRAM
(22)

	)

808 
	#REG_RX1_DC_23
 
	`REG_RX1_DC_SRAM
(23)

	)

809 
	#REG_RX1_DC_24
 
	`REG_RX1_DC_SRAM
(24)

	)

810 
	#REG_RX1_DC_25
 
	`REG_RX1_DC_SRAM
(25)

	)

811 
	#REG_RX1_DC_26
 
	`REG_RX1_DC_SRAM
(26)

	)

812 
	#REG_RX1_DC_27
 
	`REG_RX1_DC_SRAM
(27)

	)

813 
	#REG_RX1_DC_28
 
	`REG_RX1_DC_SRAM
(28)

	)

814 
	#REG_RX1_DC_29
 
	`REG_RX1_DC_SRAM
(29)

	)

815 
	#REG_RX1_DC_30
 
	`REG_RX1_DC_SRAM
(30)

	)

816 
	#REG_RX1_DC_31
 
	`REG_RX1_DC_SRAM
(31)

	)

817 
	#REG_RX1_DC_32
 
	`REG_RX1_DC_SRAM
(32)

	)

818 
	#REG_RX1_DC_33
 
	`REG_RX1_DC_SRAM
(33)

	)

819 
	#REG_RX1_DC_34
 
	`REG_RX1_DC_SRAM
(34)

	)

820 
	#REG_RX1_DC_35
 
	`REG_RX1_DC_SRAM
(35)

	)

821 
	#REG_RX1_DC_36
 
	`REG_RX1_DC_SRAM
(36)

	)

822 
	#REG_RX1_DC_37
 
	`REG_RX1_DC_SRAM
(37)

	)

823 
	#REG_RX1_DC_38
 
	`REG_RX1_DC_SRAM
(38)

	)

824 
	#REG_RX1_DC_39
 
	`REG_RX1_DC_SRAM
(39)

	)

825 
	#REG_RX1_DC_40
 
	`REG_RX1_DC_SRAM
(40)

	)

826 
	#REG_RX1_DC_41
 
	`REG_RX1_DC_SRAM
(41)

	)

827 
	#REG_RX1_DC_42
 
	`REG_RX1_DC_SRAM
(42)

	)

828 
	#REG_RX1_DC_43
 
	`REG_RX1_DC_SRAM
(43)

	)

829 
	#REG_RX1_DC_44
 
	`REG_RX1_DC_SRAM
(44)

	)

830 
	#REG_RX1_DC_45
 
	`REG_RX1_DC_SRAM
(45)

	)

831 
	#REG_RX1_DC_46
 
	`REG_RX1_DC_SRAM
(46)

	)

832 
	#REG_RX1_DC_47
 
	`REG_RX1_DC_SRAM
(47)

	)

833 
	#REG_RX1_DC_48
 
	`REG_RX1_DC_SRAM
(48)

	)

834 
	#REG_RX1_DC_49
 
	`REG_RX1_DC_SRAM
(49)

	)

835 
	#REG_RX1_DC_50
 
	`REG_RX1_DC_SRAM
(50)

	)

836 
	#REG_RX1_DC_51
 
	`REG_RX1_DC_SRAM
(51)

	)

837 
	#REG_RX1_DC_52
 
	`REG_RX1_DC_SRAM
(52)

	)

838 
	#REG_RX1_DC_53
 
	`REG_RX1_DC_SRAM
(53)

	)

839 
	#REG_RX1_DC_54
 
	`REG_RX1_DC_SRAM
(54)

	)

840 
	#REG_RX1_DC_55
 
	`REG_RX1_DC_SRAM
(55)

	)

841 
	#REG_RX1_DC_56
 
	`REG_RX1_DC_SRAM
(56)

	)

842 
	#REG_RX1_DC_57
 
	`REG_RX1_DC_SRAM
(57)

	)

843 
	#REG_RX1_DC_58
 
	`REG_RX1_DC_SRAM
(58)

	)

844 
	#REG_RX1_DC_59
 
	`REG_RX1_DC_SRAM
(59)

	)

845 
	#REG_RX1_DC_60
 
	`REG_RX1_DC_SRAM
(60)

	)

846 
	#REG_RX1_DC_61
 
	`REG_RX1_DC_SRAM
(61)

	)

847 
	#REG_RX1_DC_62
 
	`REG_RX1_DC_SRAM
(62)

	)

848 
	#REG_RX1_DC_63
 
	`REG_RX1_DC_SRAM
(63)

	)

849 
	#REG_RX1_DC_64
 
	`REG_RX1_DC_SRAM
(64)

	)

850 
	#REG_RX1_DC_65
 
	`REG_RX1_DC_SRAM
(65)

	)

851 
	#REG_RX1_DC_66
 
	`REG_RX1_DC_SRAM
(66)

	)

852 
	#REG_RX1_DC_67
 
	`REG_RX1_DC_SRAM
(67)

	)

853 
	#REG_RX1_DC_68
 
	`REG_RX1_DC_SRAM
(68)

	)

854 
	#REG_RX1_DC_69
 
	`REG_RX1_DC_SRAM
(69)

	)

855 
	#REG_RX1_DC_70
 
	`REG_RX1_DC_SRAM
(70)

	)

856 
	#REG_RX1_DC_71
 
	`REG_RX1_DC_SRAM
(71)

	)

857 
	#REG_RX1_DC_72
 
	`REG_RX1_DC_SRAM
(72)

	)

858 
	#REG_RX1_DC_73
 
	`REG_RX1_DC_SRAM
(73)

	)

859 
	#REG_RX1_DC_74
 
	`REG_RX1_DC_SRAM
(74)

	)

860 
	#REG_RX1_DC_75
 
	`REG_RX1_DC_SRAM
(75)

	)

861 
	#REG_RX1_DC_76
 
	`REG_RX1_DC_SRAM
(76)

	)

862 
	#REG_RX1_DC_77
 
	`REG_RX1_DC_SRAM
(77)

	)

863 
	#REG_RX1_DC_78
 
	`REG_RX1_DC_SRAM
(78)

	)

864 
	#REG_RX1_DC_79
 
	`REG_RX1_DC_SRAM
(79)

	)

865 
	#REG_RX1_DC_80
 
	`REG_RX1_DC_SRAM
(80)

	)

866 
	#REG_RX1_DC_81
 
	`REG_RX1_DC_SRAM
(81)

	)

867 
	#REG_RX1_DC_82
 
	`REG_RX1_DC_SRAM
(82)

	)

868 
	#REG_RX1_DC_83
 
	`REG_RX1_DC_SRAM
(83)

	)

869 
	#REG_RX1_DC_84
 
	`REG_RX1_DC_SRAM
(84)

	)

870 
	#REG_RX1_DC_85
 
	`REG_RX1_DC_SRAM
(85)

	)

871 
	#REG_ORX0_DC_0
 
	`REG_ORX0_DC_SRAM
(0)

	)

872 
	#REG_ORX0_DC_1
 
	`REG_ORX0_DC_SRAM
(1)

	)

873 
	#REG_ORX0_DC_2
 
	`REG_ORX0_DC_SRAM
(2)

	)

874 
	#REG_ORX0_DC_3
 
	`REG_ORX0_DC_SRAM
(3)

	)

875 
	#REG_ORX0_DC_4
 
	`REG_ORX0_DC_SRAM
(4)

	)

876 
	#REG_ORX0_DC_5
 
	`REG_ORX0_DC_SRAM
(5)

	)

877 
	#REG_ORX0_DC_6
 
	`REG_ORX0_DC_SRAM
(6)

	)

878 
	#REG_ORX0_DC_7
 
	`REG_ORX0_DC_SRAM
(7)

	)

879 
	#REG_ORX0_DC_8
 
	`REG_ORX0_DC_SRAM
(8)

	)

880 
	#REG_ORX0_DC_9
 
	`REG_ORX0_DC_SRAM
(9)

	)

881 
	#REG_ORX0_DC_10
 
	`REG_ORX0_DC_SRAM
(10)

	)

882 
	#REG_ORX0_DC_11
 
	`REG_ORX0_DC_SRAM
(11)

	)

883 
	#REG_ORX0_DC_12
 
	`REG_ORX0_DC_SRAM
(12)

	)

884 
	#REG_ORX0_DC_13
 
	`REG_ORX0_DC_SRAM
(13)

	)

885 
	#REG_ORX0_DC_14
 
	`REG_ORX0_DC_SRAM
(14)

	)

886 
	#REG_ORX0_DC_15
 
	`REG_ORX0_DC_SRAM
(15)

	)

887 
	#REG_ORX0_DC_16
 
	`REG_ORX0_DC_SRAM
(16)

	)

888 
	#REG_ORX0_DC_17
 
	`REG_ORX0_DC_SRAM
(17)

	)

889 
	#REG_ORX0_DC_18
 
	`REG_ORX0_DC_SRAM
(18)

	)

890 
	#REG_ORX0_DC_19
 
	`REG_ORX0_DC_SRAM
(19)

	)

891 
	#REG_ORX0_DC_20
 
	`REG_ORX0_DC_SRAM
(20)

	)

892 
	#REG_ORX0_DC_21
 
	`REG_ORX0_DC_SRAM
(21)

	)

893 
	#REG_ORX0_DC_22
 
	`REG_ORX0_DC_SRAM
(22)

	)

894 
	#REG_ORX0_DC_23
 
	`REG_ORX0_DC_SRAM
(23)

	)

895 
	#REG_ORX0_DC_24
 
	`REG_ORX0_DC_SRAM
(24)

	)

896 
	#REG_ORX0_DC_25
 
	`REG_ORX0_DC_SRAM
(25)

	)

897 
	#REG_ORX0_DC_26
 
	`REG_ORX0_DC_SRAM
(26)

	)

898 
	#REG_ORX0_DC_27
 
	`REG_ORX0_DC_SRAM
(27)

	)

899 
	#REG_ORX0_DC_28
 
	`REG_ORX0_DC_SRAM
(28)

	)

900 
	#REG_ORX0_DC_29
 
	`REG_ORX0_DC_SRAM
(29)

	)

901 
	#REG_ORX0_DC_30
 
	`REG_ORX0_DC_SRAM
(30)

	)

902 
	#REG_ORX0_DC_31
 
	`REG_ORX0_DC_SRAM
(31)

	)

903 
	#REG_ORX0_DC_32
 
	`REG_ORX0_DC_SRAM
(32)

	)

904 
	#REG_ORX0_DC_33
 
	`REG_ORX0_DC_SRAM
(33)

	)

905 
	#REG_ORX0_DC_34
 
	`REG_ORX0_DC_SRAM
(34)

	)

906 
	#REG_ORX0_DC_35
 
	`REG_ORX0_DC_SRAM
(35)

	)

907 
	#REG_ORX0_DC_36
 
	`REG_ORX0_DC_SRAM
(36)

	)

908 
	#REG_ORX0_DC_37
 
	`REG_ORX0_DC_SRAM
(37)

	)

909 
	#REG_ORX0_DC_38
 
	`REG_ORX0_DC_SRAM
(38)

	)

910 
	#REG_ORX0_DC_39
 
	`REG_ORX0_DC_SRAM
(39)

	)

911 
	#REG_ORX0_DC_40
 
	`REG_ORX0_DC_SRAM
(40)

	)

912 
	#REG_ORX0_DC_41
 
	`REG_ORX0_DC_SRAM
(41)

	)

913 
	#REG_ORX0_DC_42
 
	`REG_ORX0_DC_SRAM
(42)

	)

914 
	#REG_ORX0_DC_43
 
	`REG_ORX0_DC_SRAM
(43)

	)

915 
	#REG_ORX0_DC_44
 
	`REG_ORX0_DC_SRAM
(44)

	)

916 
	#REG_ORX0_DC_45
 
	`REG_ORX0_DC_SRAM
(45)

	)

917 
	#REG_ORX0_DC_46
 
	`REG_ORX0_DC_SRAM
(46)

	)

918 
	#REG_ORX0_DC_47
 
	`REG_ORX0_DC_SRAM
(47)

	)

919 
	#REG_ORX0_DC_48
 
	`REG_ORX0_DC_SRAM
(48)

	)

920 
	#REG_ORX0_DC_49
 
	`REG_ORX0_DC_SRAM
(49)

	)

921 
	#REG_ORX0_DC_50
 
	`REG_ORX0_DC_SRAM
(50)

	)

922 
	#REG_ORX0_DC_51
 
	`REG_ORX0_DC_SRAM
(51)

	)

923 
	#REG_ORX0_DC_52
 
	`REG_ORX0_DC_SRAM
(52)

	)

924 
	#REG_ORX0_DC_53
 
	`REG_ORX0_DC_SRAM
(53)

	)

925 
	#REG_ORX0_DC_54
 
	`REG_ORX0_DC_SRAM
(54)

	)

926 
	#REG_ORX0_DC_55
 
	`REG_ORX0_DC_SRAM
(55)

	)

927 
	#REG_ORX0_DC_56
 
	`REG_ORX0_DC_SRAM
(56)

	)

928 
	#REG_ORX0_DC_57
 
	`REG_ORX0_DC_SRAM
(57)

	)

929 
	#REG_ORX0_DC_58
 
	`REG_ORX0_DC_SRAM
(58)

	)

930 
	#REG_ORX0_DC_59
 
	`REG_ORX0_DC_SRAM
(59)

	)

931 
	#REG_ORX0_DC_60
 
	`REG_ORX0_DC_SRAM
(60)

	)

932 
	#REG_ORX0_DC_61
 
	`REG_ORX0_DC_SRAM
(61)

	)

933 
	#REG_ORX0_DC_62
 
	`REG_ORX0_DC_SRAM
(62)

	)

934 
	#REG_ORX0_DC_63
 
	`REG_ORX0_DC_SRAM
(63)

	)

935 
	#REG_ORX0_DC_64
 
	`REG_ORX0_DC_SRAM
(64)

	)

936 
	#REG_ORX0_DC_65
 
	`REG_ORX0_DC_SRAM
(65)

	)

937 
	#REG_ORX0_DC_66
 
	`REG_ORX0_DC_SRAM
(66)

	)

938 
	#REG_ORX0_DC_67
 
	`REG_ORX0_DC_SRAM
(67)

	)

939 
	#REG_ORX0_DC_68
 
	`REG_ORX0_DC_SRAM
(68)

	)

940 
	#REG_ORX0_DC_69
 
	`REG_ORX0_DC_SRAM
(69)

	)

941 
	#REG_ORX0_DC_70
 
	`REG_ORX0_DC_SRAM
(70)

	)

942 
	#REG_ORX0_DC_71
 
	`REG_ORX0_DC_SRAM
(71)

	)

943 
	#REG_ORX0_DC_72
 
	`REG_ORX0_DC_SRAM
(72)

	)

944 
	#REG_ORX0_DC_73
 
	`REG_ORX0_DC_SRAM
(73)

	)

945 
	#REG_ORX0_DC_74
 
	`REG_ORX0_DC_SRAM
(74)

	)

946 
	#REG_ORX0_DC_75
 
	`REG_ORX0_DC_SRAM
(75)

	)

947 
	#REG_ORX0_DC_76
 
	`REG_ORX0_DC_SRAM
(76)

	)

948 
	#REG_ORX0_DC_77
 
	`REG_ORX0_DC_SRAM
(77)

	)

949 
	#REG_ORX0_DC_78
 
	`REG_ORX0_DC_SRAM
(78)

	)

950 
	#REG_ORX0_DC_79
 
	`REG_ORX0_DC_SRAM
(79)

	)

951 
	#REG_ORX0_DC_80
 
	`REG_ORX0_DC_SRAM
(80)

	)

952 
	#REG_ORX0_DC_81
 
	`REG_ORX0_DC_SRAM
(81)

	)

953 
	#REG_ORX0_DC_82
 
	`REG_ORX0_DC_SRAM
(82)

	)

954 
	#REG_ORX0_DC_83
 
	`REG_ORX0_DC_SRAM
(83)

	)

955 
	#REG_ORX0_DC_84
 
	`REG_ORX0_DC_SRAM
(84)

	)

956 
	#REG_ORX0_DC_85
 
	`REG_ORX0_DC_SRAM
(85)

	)

957 
	#REG_ORX1_DC_0
 
	`REG_ORX1_DC_SRAM
(0)

	)

958 
	#REG_ORX1_DC_1
 
	`REG_ORX1_DC_SRAM
(1)

	)

959 
	#REG_ORX1_DC_2
 
	`REG_ORX1_DC_SRAM
(2)

	)

960 
	#REG_ORX1_DC_3
 
	`REG_ORX1_DC_SRAM
(3)

	)

961 
	#REG_ORX1_DC_4
 
	`REG_ORX1_DC_SRAM
(4)

	)

962 
	#REG_ORX1_DC_5
 
	`REG_ORX1_DC_SRAM
(5)

	)

963 
	#REG_ORX1_DC_6
 
	`REG_ORX1_DC_SRAM
(6)

	)

964 
	#REG_ORX1_DC_7
 
	`REG_ORX1_DC_SRAM
(7)

	)

965 
	#REG_ORX1_DC_8
 
	`REG_ORX1_DC_SRAM
(8)

	)

966 
	#REG_ORX1_DC_9
 
	`REG_ORX1_DC_SRAM
(9)

	)

967 
	#REG_ORX1_DC_10
 
	`REG_ORX1_DC_SRAM
(10)

	)

968 
	#REG_ORX1_DC_11
 
	`REG_ORX1_DC_SRAM
(11)

	)

969 
	#REG_ORX1_DC_12
 
	`REG_ORX1_DC_SRAM
(12)

	)

970 
	#REG_ORX1_DC_13
 
	`REG_ORX1_DC_SRAM
(13)

	)

971 
	#REG_ORX1_DC_14
 
	`REG_ORX1_DC_SRAM
(14)

	)

972 
	#REG_ORX1_DC_15
 
	`REG_ORX1_DC_SRAM
(15)

	)

973 
	#REG_ORX1_DC_16
 
	`REG_ORX1_DC_SRAM
(16)

	)

974 
	#REG_ORX1_DC_17
 
	`REG_ORX1_DC_SRAM
(17)

	)

975 
	#REG_ORX1_DC_18
 
	`REG_ORX1_DC_SRAM
(18)

	)

976 
	#REG_ORX1_DC_19
 
	`REG_ORX1_DC_SRAM
(19)

	)

977 
	#REG_ORX1_DC_20
 
	`REG_ORX1_DC_SRAM
(20)

	)

978 
	#REG_ORX1_DC_21
 
	`REG_ORX1_DC_SRAM
(21)

	)

979 
	#REG_ORX1_DC_22
 
	`REG_ORX1_DC_SRAM
(22)

	)

980 
	#REG_ORX1_DC_23
 
	`REG_ORX1_DC_SRAM
(23)

	)

981 
	#REG_ORX1_DC_24
 
	`REG_ORX1_DC_SRAM
(24)

	)

982 
	#REG_ORX1_DC_25
 
	`REG_ORX1_DC_SRAM
(25)

	)

983 
	#REG_ORX1_DC_26
 
	`REG_ORX1_DC_SRAM
(26)

	)

984 
	#REG_ORX1_DC_27
 
	`REG_ORX1_DC_SRAM
(27)

	)

985 
	#REG_ORX1_DC_28
 
	`REG_ORX1_DC_SRAM
(28)

	)

986 
	#REG_ORX1_DC_29
 
	`REG_ORX1_DC_SRAM
(29)

	)

987 
	#REG_ORX1_DC_30
 
	`REG_ORX1_DC_SRAM
(30)

	)

988 
	#REG_ORX1_DC_31
 
	`REG_ORX1_DC_SRAM
(31)

	)

989 
	#REG_ORX1_DC_32
 
	`REG_ORX1_DC_SRAM
(32)

	)

990 
	#REG_ORX1_DC_33
 
	`REG_ORX1_DC_SRAM
(33)

	)

991 
	#REG_ORX1_DC_34
 
	`REG_ORX1_DC_SRAM
(34)

	)

992 
	#REG_ORX1_DC_35
 
	`REG_ORX1_DC_SRAM
(35)

	)

993 
	#REG_ORX1_DC_36
 
	`REG_ORX1_DC_SRAM
(36)

	)

994 
	#REG_ORX1_DC_37
 
	`REG_ORX1_DC_SRAM
(37)

	)

995 
	#REG_ORX1_DC_38
 
	`REG_ORX1_DC_SRAM
(38)

	)

996 
	#REG_ORX1_DC_39
 
	`REG_ORX1_DC_SRAM
(39)

	)

997 
	#REG_ORX1_DC_40
 
	`REG_ORX1_DC_SRAM
(40)

	)

998 
	#REG_ORX1_DC_41
 
	`REG_ORX1_DC_SRAM
(41)

	)

999 
	#REG_ORX1_DC_42
 
	`REG_ORX1_DC_SRAM
(42)

	)

1000 
	#REG_ORX1_DC_43
 
	`REG_ORX1_DC_SRAM
(43)

	)

1001 
	#REG_ORX1_DC_44
 
	`REG_ORX1_DC_SRAM
(44)

	)

1002 
	#REG_ORX1_DC_45
 
	`REG_ORX1_DC_SRAM
(45)

	)

1003 
	#REG_ORX1_DC_46
 
	`REG_ORX1_DC_SRAM
(46)

	)

1004 
	#REG_ORX1_DC_47
 
	`REG_ORX1_DC_SRAM
(47)

	)

1005 
	#REG_ORX1_DC_48
 
	`REG_ORX1_DC_SRAM
(48)

	)

1006 
	#REG_ORX1_DC_49
 
	`REG_ORX1_DC_SRAM
(49)

	)

1007 
	#REG_ORX1_DC_50
 
	`REG_ORX1_DC_SRAM
(50)

	)

1008 
	#REG_ORX1_DC_51
 
	`REG_ORX1_DC_SRAM
(51)

	)

1009 
	#REG_ORX1_DC_52
 
	`REG_ORX1_DC_SRAM
(52)

	)

1010 
	#REG_ORX1_DC_53
 
	`REG_ORX1_DC_SRAM
(53)

	)

1011 
	#REG_ORX1_DC_54
 
	`REG_ORX1_DC_SRAM
(54)

	)

1012 
	#REG_ORX1_DC_55
 
	`REG_ORX1_DC_SRAM
(55)

	)

1013 
	#REG_ORX1_DC_56
 
	`REG_ORX1_DC_SRAM
(56)

	)

1014 
	#REG_ORX1_DC_57
 
	`REG_ORX1_DC_SRAM
(57)

	)

1015 
	#REG_ORX1_DC_58
 
	`REG_ORX1_DC_SRAM
(58)

	)

1016 
	#REG_ORX1_DC_59
 
	`REG_ORX1_DC_SRAM
(59)

	)

1017 
	#REG_ORX1_DC_60
 
	`REG_ORX1_DC_SRAM
(60)

	)

1018 
	#REG_ORX1_DC_61
 
	`REG_ORX1_DC_SRAM
(61)

	)

1019 
	#REG_ORX1_DC_62
 
	`REG_ORX1_DC_SRAM
(62)

	)

1020 
	#REG_ORX1_DC_63
 
	`REG_ORX1_DC_SRAM
(63)

	)

1021 
	#REG_ORX1_DC_64
 
	`REG_ORX1_DC_SRAM
(64)

	)

1022 
	#REG_ORX1_DC_65
 
	`REG_ORX1_DC_SRAM
(65)

	)

1023 
	#REG_ORX1_DC_66
 
	`REG_ORX1_DC_SRAM
(66)

	)

1024 
	#REG_ORX1_DC_67
 
	`REG_ORX1_DC_SRAM
(67)

	)

1025 
	#REG_ORX1_DC_68
 
	`REG_ORX1_DC_SRAM
(68)

	)

1026 
	#REG_ORX1_DC_69
 
	`REG_ORX1_DC_SRAM
(69)

	)

1027 
	#REG_ORX1_DC_70
 
	`REG_ORX1_DC_SRAM
(70)

	)

1028 
	#REG_ORX1_DC_71
 
	`REG_ORX1_DC_SRAM
(71)

	)

1029 
	#REG_ORX1_DC_72
 
	`REG_ORX1_DC_SRAM
(72)

	)

1030 
	#REG_ORX1_DC_73
 
	`REG_ORX1_DC_SRAM
(73)

	)

1031 
	#REG_ORX1_DC_74
 
	`REG_ORX1_DC_SRAM
(74)

	)

1032 
	#REG_ORX1_DC_75
 
	`REG_ORX1_DC_SRAM
(75)

	)

1033 
	#REG_ORX1_DC_76
 
	`REG_ORX1_DC_SRAM
(76)

	)

1034 
	#REG_ORX1_DC_77
 
	`REG_ORX1_DC_SRAM
(77)

	)

1035 
	#REG_ORX1_DC_78
 
	`REG_ORX1_DC_SRAM
(78)

	)

1036 
	#REG_ORX1_DC_79
 
	`REG_ORX1_DC_SRAM
(79)

	)

1037 
	#REG_ORX1_DC_80
 
	`REG_ORX1_DC_SRAM
(80)

	)

1038 
	#REG_ORX1_DC_81
 
	`REG_ORX1_DC_SRAM
(81)

	)

1039 
	#REG_ORX1_DC_82
 
	`REG_ORX1_DC_SRAM
(82)

	)

1040 
	#REG_ORX1_DC_83
 
	`REG_ORX1_DC_SRAM
(83)

	)

1041 
	#REG_ORX1_DC_84
 
	`REG_ORX1_DC_SRAM
(84)

	)

1042 
	#REG_ORX1_DC_85
 
	`REG_ORX1_DC_SRAM
(85)

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_riscv.h

11 #ide
__BZ_RISCV_H__


12 
	#__BZ_RISCV_H__


	)

14 
	~"bz_riscv_tys.h
"

15 
	~"bz_tys.h
"

25 
ut32_t
 
BZ_iRetCh
(
BzDevi_t
 *
hw_iv
,
ut8_t
 
ReTy
);

34 
ut32_t
 
BZ_ldFmwe
(
BzDevi_t
 *
hw_iv
);

45 
ut32_t
 
BZ_wreFmwe
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
, ut32_
da
);

54 
ut32_t
 
BZ_iWreMem
(
BzDevi_t
 *
hw_iv
,ut32_
addr
,ut32_
da
);

63 
ut32_t
 
BZ_iRdMem
(
BzDevi_t
 *
hw_iv
,ut32_
addr
,ut32_*
gda
);

72 
ut32_t
 
BZ_wreRiscvProfe
(
BzDevi_t
 *
iv
,
BzIn_t
 *
In
);

82 
ut32_t
 
BZ_adRiscvProfe
(
BzDevi_t
 *
iv
,
BzIn_t
 *
In
);

90 
ut32_t
 
BZ_GRiscvTEvt
(
BzDevi_t
 *
hw_iv
);

100 
ut8_t
 * 
BZ_iGRiscvLog
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
addr
);

109 
ut32_t
 
BZ_abRiscvLog
(
BzDevi_t
 *
hw_iv
,ut32_
debug
);

119 
ut32_t
 
BZ_iGRiscvPc
(
BzDevi_t
 *
hw_iv
,ut32_
addr
,ut32_
pc_t
);

129 
ut32_t
 
bz_iIru
(
BzDevi_t
 *
hw_iv
,ut32_
wreDa
);

139 
ut32_t
 
BZ_iWaCmdCfm
(
BzDevi_t
 *
hw_iv
);

147 
ut32_t
 
BZ_iGCmdStus
(
BzDevi_t
 *
hw_iv
);

156 
ut32_t
 
BZ_ndRiscvCmd
(
BzDevi_t
 *
iv
,*
UrDa
, 
Commd
);

165 
ut32_t
 
BZ_gBoStus
(
BzDevi_t
 *
hw_iv
);

174 
ut32_t
 
BZ_waFmweRdy
(
BzDevi_t
 *
hw_iv
, ut32_
timeout
);

183 
ut32_t
 
BZ_waProfeDe
(
BzDevi_t
 *
hw_iv
, ut32_
timeout
);

193 
ut32_t
 
BZ_rStus
(
BzDevi_t
 *
hw_iv
);

201 
ut32_t
 
BZ_gSdkVsi
(
BzDevi_t
 *
hw_iv
);

210 
ut32_t
 
bz_gFmweVsi
(
BzDevi_t
 *
hw_iv
);

220 
ut32_t
 
BZ_gRiscvLog
(
BzDevi_t
 *
hw_iv
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_riscv_types.h

10 #ide
__BZ_RISCV_TYPES_H__


11 
	#__BZ_RISCV_TYPES_H__


	)

13 
	~"bz_da_tys.h
"

15 
	#TX_PROFILE_VALID
 0x01

	)

16 
	#RX_PROFILE_VALID
 0x02

	)

17 
	#ORX_PROFILE_VALID
 0x04

	)

19 
	#BZ_ABORT_OPCODE
 0x0

	)

20 
	#BZ_RUNN_INIT_OPCODE
 0x1

	)

21 
	#BZ_RADIO_ON_OPCODE
 0x2

	)

22 
	#BZ_WRITE_MEM_OPCODE
 0x3

	)

23 
	#BZ_READ_MEM_OPCODE
 0x4

	)

24 
	#BZ_SET_OPCODE
 0x5

	)

25 
	#BZ_GET_OPCODE
 0x6

	)

26 
	#BZ_GET_MEMORY_DATA
 0x7

	)

30 
	#PHY_INIT_CALI_INIT
 0x11

	)

31 
	#RFPLL_FREQ_CALI_INIT
 0x22

	)

32 
	#ENABLE_SYSREF_INIT
 0x33

	)

33 
	#ENABLE_DBG_PRINT2SPI
 0x34

	)

34 
	#HI_MSG_TO_JESD204B_MSGID
 0x36

	)

35 
	#RESET_DEVICE_MSGID
 0x37

	)

36 
	#HI_MSG_ENABLE_LOG_MSGID
 0x38

	)

37 
	#HI_SET_GPIO_VALUE
 0x3A

	)

38 
	#HI_GET_GPIO_VALUE
 0x3B

	)

39 
	#HI_ENABLE_SLICER
 0x3C

	)

40 
	#HI_ENABLE_PLLTC_TRACK
 0x3D

	)

41 
	#HI_ENABLE_FRAMER_A
 0x3E

	)

42 
	#HI_ENABLE_FRAMER_B
 0x3F

	)

43 
	#HI_ENABLE_DFRAMER
 0x40

	)

44 
	#HI_GET_DACPOWER
 0x41

	)

45 
	#HI_GET_ORXDACPOWER
 0x42

	)

47 
	#RECV_CMD_CONFIRM
 
REG_RSV


	)

48 
	#SEND_CMD_TYPE
 
REG_RSV_1


	)

49 
	#SEND_CMD_DATA
 
REG_RSV_2


	)

50 
	#DOCMD_STATUS
 
REG_RSV_3


	)

52 
	#DBG_PRINT_BUF_SIZE_MAX
 256

	)

54 
	#DOWNLOAD_ITCM_ADDR
 (0x1000)

	)

55 
	#DOWNLOAD_ITCM_SIZE
 (64*1024)

	)

56 
	#DOWNLOAD_DTCM_ADDR
 (0x1001)

	)

57 
	#DOWNLOAD_DTCM_SIZE
 (64*1024)

	)

58 
	#DOWNLOAD_MEM_ADDR
 (0x1003)

	)

59 
	#DOWNLOAD_MEM_SIZE
 (64*1024)

	)

61 
	#HI_STATUS_SUCCESS
 0x88

	)

63 
	#HI_STATUS_SUCCESS_BIT
 0

	)

64 
	#HI_STATUS_INVALID_DATA_BIT
 1

	)

65 
	#HI_STATUS_FIRMWARE_READY_BIT
 2

	)

66 
	#RFPLL_CALI_DONE_BIT
 3

	)

67 
	#PHY_INIT_CALI_DONE_BIT
 4

	)

68 
	#PHY_INIT_PROFILE_DONE_BIT
 5

	)

69 
	#DBG_2SPI_DONE_BIT
 6

	)

70 
	#JESD204B_DONE_BIT
 7

	)

71 
	#GPIO_GET_VALUE_DONE_BIT
 8

	)

73 
	#WDT_ERROR_BIT
 31

	)

74 
	#PAPROTECT_ERROR_BIT
 30

	)

75 
	#PAPROTECT_ERROR_CH_BIT
 29

	)

77 
	#MAGIC
 0xa5

	)

79 
	#RESET_BY_ISR
 0x0

	)

80 
	#RESET_BY_RESET
 0x1

	)

82 
	#IOCTL_WRITE_CMD
 (0x1)

	)

83 
	#IOCTL_READ_CMD
 (0x2)

	)

84 
	#BZ_ADDR_DATA_REGION
 0x10030000

	)

85 
	#BZ_ADDR_FW_VERSION
 0x10032000

	)

87 
	#BZ_ADDR_CALISTA_ADDR
 0x1003f010

	)

89 
	#HI_MSG_TO_PROFILE_MSGID
 0x1

	)

90 
	#HI_MSG_TO_PROFILE_MSGLEN
 68

	)

91 
	#PROFILE_MSG_ADDR
 
BZ_ADDR_DATA_REGION


	)

93 
	#HI_MSG_TO_RFFRQ_MSGID
 0x2

	)

94 
	#HI_MSG_TO_RFFRQ_MSGLEN
 0x8

	)

95 
	#RFFRQ_MSG_ADDR
 (
PROFILE_MSG_ADDR
+
HI_MSG_TO_PROFILE_MSGLEN
)

96 

	)

97 
	#HI_MSG_TO_AUXFRQ_MSGID
 0x6

	)

98 
	#HI_MSG_AUXFRQ_MSGLEN
 0x8

	)

99 
	#AUXFRQ_MSG_ADDR
 (
RFFRQ_MSG_ADDR
+
HI_MSG_TO_RFFRQ_MSGLEN
)

100 

	)

101 
	#HI_MSG_TO_READFIRDY_MSGID
 0x3

	)

102 
	#HI_MSG_TO_READFIRDY_MSGLEN
 20

	)

104 
	#HI_MSG_TO_FILTER_MSGID
 0x4

	)

105 
	#HI_MSG_TO_FILTER_GAINDB_NUMFIR_LEN
 8

	)

106 
	#HI_MSG_TO_TXFILTER_COEFS_LEN
 80

	)

107 
	#HI_MSG_TO_RX_ORX_FILTER_COEFS_LEN
 72

	)

108 
	#HI_MSG_TO_TXFILTER_MSGLEN
 (
HI_MSG_TO_FILTER_GAINDB_NUMFIR_LEN
+
HI_MSG_TO_TXFILTER_COEFS_LEN
*2)

	)

109 
	#HI_MSG_TO_RX_ORXFILTER_MSGLEN
 (
HI_MSG_TO_FILTER_GAINDB_NUMFIR_LEN
+
HI_MSG_TO_RX_ORX_FILTER_COEFS_LEN
*2)

	)

110 
	#FILTER_MSG_ADDR
 (
AUXFRQ_MSG_ADDR
+
HI_MSG_AUXFRQ_MSGLEN
)

111 
	#HI_MSG_TO_TXFILTER_TOATL_MSGLEN
 (
HI_MSG_TO_TXFILTER_MSGLEN
+(
HI_MSG_TO_RX_ORXFILTER_MSGLEN
*2))

	)

114 
	#HI_MSG_TO_CALSTATUS_MSGID
 0x5

	)

115 
	#HI_MSG_TO_CALSTATUS_MSGLEN
 72

	)

118 
	#HI_MSG_TO_J204B_MSGID
 0x7

	)

119 
	#HI_MSG_TO_J204B_MSGLEN
 256

	)

120 
	#J204B_MSG_ADDR
 (
FILTER_MSG_ADDR
+
HI_MSG_TO_TXFILTER_TOATL_MSGLEN
)

121 

	)

123 
	#CALIBRITION_SRAM_ADDR
 (0x10039788)

	)

124 
	#CALIBRITION_SRAM_LEN
 (2050)

	)

125 
	#CALI_EVENTID_CNT
 (14)

126 

	)

127 
	#WIAT_TIMEOUT
 0xFFFFFFFF

	)

131 
	mBZ_TX_FILTER
 = 0x0,

132 
	mBZ_RX_FILTER
 = 0x1,

133 
	mBZ_ORX_FILTER
 = 0x2

134 }
	tBzFrTy
;

136 
	#GPIO_NUM
 19

	)

138 
	#REG_BIT
(
NUM

	)
NUM

139 
	#SOFT_RESETB
 
	`REG_BIT
(0)

	)

140 
	#BOOT_RDY
 
	`REG_BIT
(6)

	)

142 
	s__TxDa
{

143 
ut32_t
 
	mvue
;

144 
ut32_t
 
	maddr
;

145 
ut32_t
 
	mlo
;

146 }
	tBzTxDa
;

148 
	sCmdTxTy
{

149 
ut32_t
 
	mCmd
;

150 
BzTxDa
 
	mTxDa
;

151 }
	tBzCmdTx
;

153 
	s__RxDa
{

154 
ut32_t
 
	mvue
;

155 
ut32_t
 
	maddr
;

156 
ut32_t
 
	mlo
;

157 }
	tBzRxDa
;

159 
	sCmdRxTy
{

160 
ut32_t
 
	mCmd
;

161 
BzRxDa
 
	mRxDa
;

162 }
	tBzCmdRx
;

163 
	s_BzMsg
{

164 
ut32_t
 
	maddr
;

165 
ut16_t
 
	mLth
;

166 
ut16_t
 
	mId
;

167 
ut32_t
 
	mofft
;

168 
ut8_t
 
	mda
[(
CALIBRITION_SRAM_LEN
*4)];

169 }
	tBzMsg
;

171 
	sBzMemMsg
{

172 
ut32_t
 
	mCmd
;

173 
BzMsg
 
	mMsg
;

174 }
	tBzMem
;

176 
	sCfigAgcInfo
{

177 
	mgrx_k_div
;

178 
	mgtx_k_div
;

179 
	mgrx_ga__mode
;

180 
	mgrx_ga_evt
;

181 
	mgrx_agc_mode
;

182 
	mgrx_ga_wa_t
;

183 
	mgrx_ga_upde_t
;

184 
	mgrx_mgc_i_dex
;

185 
	mgrx_mgc_gpiodec_
;

186 
	mgrx_mgc_gpioc_
;

187 
	mgrx_mgc_mode
;

188 
	mgx_ga__mode
;

189 
	mgx_ga_evt
;

190 
	mgx_agc_mode
;

191 
	mgx_ga_wa_t
;

192 
	mgx_ga_upde_t
;

193 
	mgx_mgc_i_dex
;

194 
	mgx_mgc_gpiodec_
;

195 
	mgx_mgc_gpioc_
;

196 
	mgx_mgc_mode
;

197 
	mgtx_ga__mode
;

198 
	mgtx_ga_evt
;

199 
	mgtx_agc_mode
;

200 
	mgtx_ga_wa_t
;

201 
	mgtx_ga_upde_t
;

202 
	mgtx_mgc_i_dex
;

203 
	mgrx_d_ck_mode
;

204 
	mgrx_d_t
;

205 
	mgrx_d_dibd
;

206 
	mgrx_d_ck_
;

207 
	mgrx_d_covy_
;

208 
	mgrx_d_immd_ov_num
;

209 
	mgrx_d_ri_ov_num
;

210 
	mgrx_d_und_num
;

211 
	mgrx_hpd_t
;

212 
	mgrx_hpd_dibd
;

213 
	mgrx_hpd_covy_mode
;

214 
	mgrx_hpd_ck_mode
;

215 
	mgrx_hpd_ck_
;

216 
	mgrx_hpd_covy_hig_
;

217 
	mgrx_hpd_covy_low_
;

218 
	mgrx_hpd_covy_mid_
;

219 
	mgrx_hpd_ov_th
;

220 
	mgrx_hpd_und_hig_th
;

221 
	mgrx_hpd_und_low_th
;

222 
	mgrx_hpd_und_mid_th
;

223 
	mgrx_hpd_ov_num
;

224 
	mgrx_hpd_und_hig_num
;

225 
	mgrx_hpd_und_low_num
;

226 
	mgrx_hpd_und_mid_num
;

227 
	mgrx_hpd_ri_ov_num
;

228 
	mgrx_hpd_ri_und_num
;

229 
	mgrx_hpd_immd_ov_num
;

230 
	mgrx_hpd_immd_und_hig_num
;

231 
	mgrx_hpd_immd_und_low_num
;

232 
	mgrx_hpd_immd_und_mid_num
;

233 
	mgrx_pmd_t
;

234 
	mgrx_pmd_dibd
;

235 
	mgrx__mux
;

236 
	mgrx_pmd_ck_hig_
;

237 
	mgrx_pmd_ck_low_
;

238 
	mgrx_pmd_covy_hig_
;

239 
	mgrx_pmd_covy_low_
;

240 
	mgrx_pmd_ov_hig_th
;

241 
	mgrx_pmd_ov_low_th
;

242 
	mgrx_pmd_und_hig_th
;

243 
	mgrx_pmd_und_low_th
;

244 
	mgx_d_ck_mode
;

245 
	mgx_d_t
;

246 
	mgx_d_dibd
;

247 
	mgx_d_ck_
;

248 
	mgx_d_covy_
;

249 
	mgx_d_immd_ov_num
;

250 
	mgx_d_ri_ov_num
;

251 
	mgx_d_und_num
;

252 
	mgx_hpd_t
;

253 
	mgx_hpd_dibd
;

254 
	mgx_hpd_covy_mode
;

255 
	mgx_hpd_ck_mode
;

256 
	mgx_hpd_ck_
;

257 
	mgx_hpd_covy_hig_
;

258 
	mgx_hpd_covy_low_
;

259 
	mgx_hpd_covy_mid_
;

260 
	mgx_hpd_ov_th
;

261 
	mgx_hpd_und_hig_th
;

262 
	mgx_hpd_und_low_th
;

263 
	mgx_hpd_und_mid_th
;

264 
	mgx_hpd_ov_num
;

265 
	mgx_hpd_und_hig_num
;

266 
	mgx_hpd_und_low_num
;

267 
	mgx_hpd_und_mid_num
;

268 
	mgx_hpd_ri_ov_num
;

269 
	mgx_hpd_ri_und_num
;

270 
	mgx_hpd_immd_ov_num
;

271 
	mgx_hpd_immd_und_hig_num
;

272 
	mgx_hpd_immd_und_low_num
;

273 
	mgx_hpd_immd_und_mid_num
;

274 
	mgx_pmd_t
;

275 
	mgx_pmd_dibd
;

276 
	mgx__mux
;

277 
	mgx_pmd_ck_hig_
;

278 
	mgx_pmd_ck_low_
;

279 
	mgx_pmd_covy_hig_
;

280 
	mgx_pmd_covy_low_
;

281 
	mgx_pmd_ov_hig_th
;

282 
	mgx_pmd_ov_low_th
;

283 
	mgx_pmd_und_hig_th
;

284 
	mgx_pmd_und_low_th
;

285 
	mgtx_hpd_t
;

286 
	mgtx_hpd_dibd
;

287 
	mgtx_hpd_covy_mode
;

288 
	mgtx_hpd_ck_mode
;

289 
	mgtx_hpd_ck_
;

290 
	mgtx_hpd_covy_hig_
;

291 
	mgtx_hpd_covy_low_
;

292 
	mgtx_hpd_covy_mid_
;

293 
	mgtx_hpd_ov_th
;

294 
	mgtx_hpd_und_hig_th
;

295 
	mgtx_hpd_und_low_th
;

296 
	mgtx_hpd_und_mid_th
;

297 
	mgtx_hpd_ov_num
;

298 
	mgtx_hpd_und_hig_num
;

299 
	mgtx_hpd_und_low_num
;

300 
	mgtx_hpd_und_mid_num
;

301 
	mgtx_hpd_ri_ov_num
;

302 
	mgtx_hpd_ri_und_num
;

303 
	mgtx_hpd_immd_ov_num
;

304 
	mgtx_hpd_immd_und_hig_num
;

305 
	mgtx_hpd_immd_und_low_num
;

306 
	mgtx_hpd_immd_und_mid_num
;

307 
	mgtx_pmd_t
;

308 
	mgtx_pmd_dibd
;

309 
	mgtx__mux
;

310 
	mgtx_pmd_ck_hig_
;

311 
	mgtx_pmd_ck_low_
;

312 
	mgtx_pmd_covy_hig_
;

313 
	mgtx_pmd_covy_low_
;

314 
	mgtx_pmd_ov_hig_th
;

315 
	mgtx_pmd_ov_low_th
;

316 
	mgtx_pmd_und_hig_th
;

317 
	mgtx_pmd_und_low_th
;

318 
	mrx0_x0_dc_ext
;

319 
	mrx1_x1_dc_ext
;

320 
	mrx0_ga_ext
;

321 
	mrx1_ga_ext
;

322 
	mx0_ga_ext
;

323 
	mx1_ga_ext
;

324 
	mtx0_ga_ext
;

325 
	mtx1_ga_ext
;

326 
	md_t_ext
;

327 
	md_rx_tch_ext
;

328 
	md_tx_tch_ext
;

329 
	mtx0_ext_dex
;

330 
	mtx1_ext_dex
;

331 }
	tBzCfigAgcInfo
;

333 
	sCfigJesd204b
{

334 
	mtx_jrxlk_mode
;

335 
	mtx_k_put_tx
;

336 
	mtx__da_
;

337 
	mtx_k_cha_rx
;

338 
	mtx_rdes_k
;

339 
	mtx_p_
;

340 
	mtx_
;

341 
	mrx_jtx0lk_mode
;

342 
	mrx_k_ouut_rx
;

343 
	mrx__da_
;

344 
	mrx_k_cha_tx
;

345 
	mrx_rdes_k
;

346 
	mrx_p_
;

347 
	mrx_
;

348 
	mx_jrxlk_mode
;

349 
	mx_k_ouut_x
;

350 
	mx__da_
;

351 
	mx_k_cha_tx
;

352 
	mx_rdes_k
;

353 
	mx_p_
;

354 
	mx_
;

355 }
	tBzCfigJesd204b
;

357 
	sDaTy
{

358 
ut32_t
 
	mCmdTy
;

360 
BzCmdTx
 
	mTx
;

361 
BzCmdRx
 
	mRx
;

362 
BzMem
 
	mMmsg
;

363 
BzCfigAgcInfo
 
	mCfigAgcInfo
;

364 
BzCfigJesd204b
 
	mCfigJ204bInfo
;

365 }
	mu
;

366 }
	tBzDa
;

369 
	sfmwe_hdr
 {

370 
ut32_t
 
	mcmAddrOfft
;

371 
ut32_t
 
	mcmAddr
;

372 
ut32_t
 
	mcmL
;

373 
ut32_t
 
	mcmBlockSize
;

374 
ut32_t
 
	mdtcmAddrOfft
;

375 
ut32_t
 
	mdtcmAddr
;

376 
ut32_t
 
	mdtcmL
;

377 
ut32_t
 
	mdtcmBlockSize
;

380 
	sfmwe_B20
 {

381 
fmwe_hdr
 
	mhdr
;

382 
ut8_t
 *
	mfw_dccm
;

383 
ut8_t
 *
	mfw_iccm
;

386 
	#ELOG_LEN
 1024

	)

388 
	sog_id
{

389 
	mid
;

390 
	mvid
;

391 
	mda
;

394 
	sog_s
 {

395 
	mt
;

396 
	mdex
;

397 
	mn
;

398 
og_id
 
	me_id
[
ELOG_LEN
];

401 
	sbud_fo
{

402 
	mtٮ_svn_vsi
;

403 
	mdriv_fo
[64];

404 
	mcut_svn_vsi
[64];

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_rx.h

12 #ide
__BZ_RX_H__


13 
	#__BZ_RX_H__


	)

15 
	~"bz_rx_tys.h
"

16 
	~"bz_tys.h
"

27 
ut32_t
 
BZ_tRxMuGa
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
ut8_t
 
gaIndex
);

38 
ut32_t
 
BZ_gRxGa
(
BzDevi_t
 *
hw_iv
,
BzRxChls_t
 
rxChl
, ut32_*
rxGaIndex
);

49 
ut32_t
 
BZ_tRxGaClP
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
BzRxGaClP_t
 *
rxGaClP
);

60 
ut32_t
 
BZ_tRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
,
BzClWay
 
Way
);

71 
ut32_t
 
BZ_gRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 *
mode
,
BzClWay
 *
Way
);

82 
ut32_t
 
BZ_ogmObsRxGaTab
(
BzDevi_t
 *
hw_iv
, 
ut8_t
 
numGaIndexesInTab
, 
BzObsRxChls_t
 
xChl
);

93 
ut32_t
 
BZ_tObsRxMuGa
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxCh
, 
ut8_t
 
gaIndex
);

103 
ut32_t
 
BZ_tObsRxGaClP
(
BzDevi_t
 *
hw_iv
, 
BzObsRxChls_t
 
xChl
, 
BzRxGaClP_t
 *
rxGaClP
);

114 
ut32_t
 
BZ_tObsRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
,
BzClWay
 
Way
);

125 
ut32_t
 
BZ_gObsRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 *
mode
,
BzClWay
 *
Way
);

137 
ut32_t
 
BZ_gObsRxGa
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxChl
, ut32_*
obsRxGaIndex
);

148 
ut32_t
 
BZ_tRxSlirEb
(
BzDevi_t
 *
hw_iv
,
BzRxChls_t
 
rxChl
,
BzRxSlirP_t
 *
rxSlrP
);

159 
ut32_t
 
BZ_tORxPFuni
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxChl
);

170 
ut32_t
 
BZ_gRxDecPow
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
st16_t
 *
rxDecPow_dBFS
);

180 
ut32_t
 
BZ_gORxDecPow
(
BzDevi_t
 *
hw_iv
, 
BzObsRxChls_t
 
xChl
, 
st16_t
 *
rxDecPow_dBFS
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_rx_types.h

11 #ide
_BZ_RX_TYPES_H_


12 
	#_BZ_RX_TYPES_H_


	)

14 
	~"bz_da_tys.h
"

15 
	~"bz_gpio_tys.h
"

18 
	#ANA_RXGAIN_TABLE_LEN
 128

	)

19 
	#REG_ERR_VALUE
 0xFFFFFFFF

	)

21 
	#MAX_RXORXGAIN_TABLE_INDEX
 127

	)

22 
	#MIN_RXORXGAIN_TABLE_INDEX
 0

	)

27 
	mBZ_RXOFF
 = 0x00,

28 
	mBZ_RX1
 = 0x01,

29 
	mBZ_RX2
 = 0x02,

30 
	mBZ_RX1RX2
 = 0x03

31 } 
	tBzRxChls_t
;

34 
	mBZ_ORXOFF
 = 0x00,

35 
	mBZ_ORX1
 = 0x01,

36 
	mBZ_ORX2
 = 0x02,

37 
	mBZ_ORX1ORX2
 = 0x03

38 } 
	tBzObsRxChls_t
;

44 
	mBZ_MGC
 = 0x00,

45 
	mBZ_AGC
 = 0x01,

46 } 
	tBzGaMode_t
;

51 
	mBZ_APIMODE
 = 0x00,

52 
	mBZ_GPIOMODE
 = 0x01,

53 }
	tBzClWay
;

58 
	mBZ_RXSLICER_DIS
 = 0x00,

59 
	mBZ_RXSLICER_EN
 = 0x01,

60 }
	tBzSlirEn
;

66 
	mA
;

67 
ut32_t
 
	mgVue
;

68 } 
	tBzRXPPAGaAS_t
;

75 
ut8_t
 
	mrx1MGaIndex
;

76 
ut8_t
 
	mrx1MaxGaIndex
;

77 
ut8_t
 
	mrx2MGaIndex
;

78 
ut8_t
 
	mrx2MaxGaIndex
;

79 
ut8_t
 
	mx1MGaIndex
;

80 
ut8_t
 
	mx1MaxGaIndex
;

81 
ut8_t
 
	mx2MGaIndex
;

82 
ut8_t
 
	mx2MaxGaIndex
;

83 
ut8_t
 
	mtx1MGaIndex
;

84 
ut8_t
 
	mtx1MaxGaIndex
;

85 
ut8_t
 
	mtx2MGaIndex
;

86 
ut8_t
 
	mtx2MaxGaIndex
;

87 } 
	tBzGaIndex_t
;

94 
BzGpioPS_t
 
	mrxGaIncP
;

95 
BzGpioPS_t
 
	mrxGaDecP
;

96 
BzGpioPFunc_t
 
	mrxGaIncPFunc
;

97 
BzGpioPFunc_t
 
	mrxGaDecPFunc
;

98 } 
	tBzRxGaClPInfo_t
;

106 
ut8_t
 
	mcSp
;

107 
ut8_t
 
	mdecSp
;

108 
BzRxGaClPInfo_t
 
	mrx1GaClPInfo
;

109 
BzRxGaClPInfo_t
 
	mrx2GaClPInfo
;

110 } 
	tBzRxGaClP_t
;

118 
BzGpioPS_t
 
	mrx1SlirP_0
;

119 
BzGpioPS_t
 
	mrx1SlirP_1
;

120 
BzGpioPS_t
 
	mrx1SlirP_2
;

121 } 
	tBzRx1SlirP_t
;

128 
BzGpioPS_t
 
	mrx2SlirP_0
;

129 
BzGpioPS_t
 
	mrx2SlirP_1
;

130 
BzGpioPS_t
 
	mrx2SlirP_2
;

131 } 
	tBzRx2SlirP_t
;

138 
BzSlirEn
 
	mEbSlir
;

139 
BzRx1SlirP_t
 
	mrx1SlirPInfo
;

140 
BzRx2SlirP_t
 
	mrx2SlirPInfo
;

141 
BzGpioPFunc_t
 
	mrxSlirPFunc
;

142 } 
	tBzRxSlirP_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_tx.h

12 #ide
__BZ_TX_H__


13 
	#__BZ_TX_H__


	)

15 
	~"bz_tx_tys.h
"

16 
	~"bz_tys.h
"

27 
ut32_t
 
BZ_tTxMuGa
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
txChl
, 
ut8_t
 
gaIndex
);

37 
ut32_t
 
BZ_tTxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
);

48 
ut32_t
 
BZ_gTxGa
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
TxChl
, ut32_*
TxGaIndex
);

58 
ut32_t
 
BZ_tPaPreiCfg
(
BzDevi_t
 *
hw_iv
,
BzTxPaPreCfg_t
 *
txPaPreCfg
);

67 
ut32_t
 
BZ_gPaPreEFgs
(
BzDevi_t
 *
hw_iv
, ut32_*
rFgs
);

77 
ut32_t
 
BZ_rPaPreEFgs
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
txChl
);

88 
ut32_t
 
BZ_tDDsFqCfig
(
BzDevi_t
 *
hw_iv
, 
BzTxChls_t
 
txChl
, 
BzTxDdsTeTeCfg_t
 
txDDSTe
, 
BzTxDdsACfg_t
 
txDDSA
);

96 
ut32_t
 
BZ_tDdsOff
(
BzDevi_t
 *
hw_iv
);

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_tx_types.h

11 #ide
_BZ_TX_TYPES_H_


12 
	#_BZ_TX_TYPES_H_


	)

13 
	~"bz_da_tys.h
"

16 
	#ANA_TXGAIN_TABLE_LEN
 33

	)

17 
	#REG_ERR_VALUE
 0xFFFFFFFF

	)

19 
	#MAX_TXGAIN_TABLE_INDEX
 63

	)

20 
	#MIN_TXGAIN_TABLE_INDEX
 0

	)

27 
	mBZ_TXOFF
 = 0x0,

28 
	mBZ_TX1
 = 0x1,

29 
	mBZ_TX2
 = 0x2,

30 
	mBZ_TX1TX2
 = 0x3

31 } 
	tBzTxChls_t
;

38 
	mLO_LOP
 = 0x0,

39 
	mTX_OUTP
 = 0x1

40 }
	tBzTxDcOut
;

46 
	mBZ_DDS_SINGLE_TONE
 = 0x0,

47 
	mBZ_DDS_DOUBLE_TONE
 = 0x1

48 } 
	tBzDdsTe_t
;

54 
	mBZ_LOW_GAIN_MODE
 = 0x0,

55 
	mBZ_HIGH_GAIN_MODE
 = 0x1

56 } 
	tBzTXPPAGaMode_t
;

63 
st32_t
 
	mA
;

64 
ut32_t
 
	mgVue
;

65 } 
	tBzTXPPAGaAS_t
;

71 
	mtxTe1Fq_kHz
;

72 
	mtxTe2Fq_kHz
;

73 } 
	tBzTxDdsTeTeCfg_t
;

79 
	mTX_THB1_BYPASS
 = 0x4,

80 
	mTX_FIRANDTHB3_BYPASS
 = 0x9,

81 
	mTX_FIR_BYPASS
 = 0x8

82 }
	tBzTxFCfg_t
;

89 
ut32_t
 
	mtxTe0A
;

90 
ut32_t
 
	mtxTe1A
;

91 
ut32_t
 
	mtxTe2A
;

92 
ut32_t
 
	mtxTe3A
;

93 } 
	tBzTxDdsACfg_t
;

100 
ut32_t
 
	mTxCiC
;

101 
ut32_t
 
	mTxPowThshd
;

102 
ut32_t
 
	mEb
;

103 }
	tBzTxPaPreCfg_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_types.h

11 #ide
__BZ_TYPES_H__


12 
	#__BZ_TYPES_H__


	)

13 
	~"bz_da_tys.h
"

14 
	~"bz_cfig_tys.h
"

21 
BzSs_t
 
	mdevS
;

22 
BzDigClocks_t
 
	mocks
;

23 
BzGaIndex_t
 
	mgaIndexes
;

24 
ut8_t
 
	msutChls
;

25 
ut8_t
 
	mofesVid
;

26 
ut32_t
 
	mrSour
;

27 
ut32_t
 
	mrCode
;

28 
ut32_t
 
	mudGpiݚs
;

29 
ut16_t
 
	mudGpio3p3ps
;

30 
ut8_t
 
	mrxFmNp
;

31 
ut8_t
 
	mxFmNp
;

32 
ut32_t
 
	mrxOuutRe_kHz
;

33 
ut32_t
 
	mtxIutRe_kHz
;

34 
ut8_t
 
	mrxDuBdEbd
;

35 
ut32_t
 
	mrxBdwidth_Hz
;

36 
ut32_t
 
	mtxBdwidth_Hz
;

37 
ut32_t
 
	mxBdwidth_Hz
;

38 }
	tbzInfo_t
;

39 
	sbz_ps_s


41 
	mfmweComp
[32];

42 
ut32_t
 
	mfmweCutSvnvsi
;

43 
	mfmweBudTime
[32];

44 
ut32_t
 
	mfmweRdy
;

45 }
	tbz_ps
;

52 *
	mdevHInfo
;

53 
bzInfo_t
 
	mBzS
;

54 
bz_ps
 
	mps
;

55 
ut32_t
 
	mcutCMask
;

56 
ut32_t
 
	mr_de
;

57 
ut32_t
 
	ml_de
;

58 
ut32_t
 
	mofe_de
;

59 
ut32_t
 
	mj204b_de
;

60 
ut32_t
 
	mgpio_g_vue_de
;

61 
ut32_t
 
	mwaTimeout
;

62 
ut32_t
 
	mdbg_de
;

63 
ut32_t
 
	mlogLev
;

64 }
	tBzDevi_t
;

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/firmware.h

1 
	gfw_code
[]={

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/plaxi.h

1 #ide
PLAXI_H


2 
	#PLAXI_H


	)

4 
	#PLAXI_IOC_MAGIC
 'b'

	)

6 
	#PLAXI_CHIP_SEL
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 15, )

7 
	#PLAXI_SET_LANPA_PWR
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 14, )

8 
	#PLAXI_SET_TRIGGER_OUT
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 13, )

9 
	#PLAXI_FPGA_VERSION
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 12, )

10 
	#PLAXI_READ_204B_STATE
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 11, )

11 
	#PLAXI_READ_IOPAD_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 10, )

12 
	#PLAXI_WRITE_IOPAD_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 9, )

13 
	#PLAXI_READ_IO_DIR_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 8, )

14 
	#PLAXI_WRITE_IO_DIR_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 7, )

15 
	#PLAXI_READ_204B_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 6, )

16 
	#PLAXI_WRITE_204B_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 5, )

17 
	#PLAXI_READ_TX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 4, )

18 
	#PLAXI_WRITE_TX_DATA_PARAM
 
	`_IOW
(
PLAXI_IOC_MAGIC
, 3, )

19 
	#PLAXI_READ_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 2, )

20 
	#PLAXI_WRITE_RX_DATA_PARAM
 
	`_IOR
(
PLAXI_IOC_MAGIC
, 1, )

21 

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/svn_version.h

1 
	#TOTAL_SVN_VERSION
 0

	)

2 
	#COMPILER
 "wld"

	)

3 
	#CURRENT_SVN_VERSION
 ""

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_agc.c

10 
	~"bz_agc.h
"

11 
	~"bz_r.h
"

12 
	~"bz_g_dig.h
"

13 
	~"bz_g_a.h
"

14 
	~"bz__h.h
"

16 
ut32_t
 
	$BZ_tupRxAgc
(
BzDevi_t
 *
hw_iv
, 
BzAgcCfg_t
 *
rxAgcCl
)

18 
BzRecovyAis_t
 
bzRA
 = 
BZ_NO_ACTION
;

19 
bzHE
 
hE
 = 
BZHAL_OK
;

20 
ut32_t
 
agcRegi
 = 0;

24 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_50
,0x0,3,2);

25 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

26 
	`IF_ERR_RETURN
(
bzRA
);

29 i(
rxAgcCl
 =
NULL
)

31 
	`B20_DEBUGF
(
DBG_LEVEL_SERIOUS
,"Error:rxAgcCtrlarameter is NULL\n");

32  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_AGC
,
hE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

36 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_00
, 
rxAgcCl
->
agcClkDiv
, 1, 0);

37 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

38 
	`IF_ERR_RETURN
(
bzRA
);

41 
agcRegi
 = (
rxAgcCl
->
agcThshPvtGa
<<0)|xAgcCl->
agcPkThshGaCڌMode
<<1);

42 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_01
, 
agcRegi
,2,1);

43 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

44 
	`IF_ERR_RETURN
(
bzRA
);

47 i(
rxAgcCl
->
agcPkWaCou
 > 0x0F)

49 
	`B20_DEBUGF
(
DBG_LEVEL_SERIOUS
,"Error:rxAgcCtrlarametergcPeakWaitCounterxceeded\n");

50  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_AGC
,
hE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

55 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_01
,
rxAgcCl
->
agcPkWaCou
,7,4);

56 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_AGC
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

57 
	`IF_ERR_RETURN
(
bzRA
);

59 if(
rxAgcCl
->
agcGaUpdeCou
>0x7FFF)

61 
	`B20_DEBUGF
(
DBG_LEVEL_SERIOUS
,"Error:rxAgcCtrlarametergcGainUpdateCounterxceeded\n");

62  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_AGC
,
hE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

66 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_01
, 
rxAgcCl
->
agcGaUpdeCou
,22,8);

67 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

68 
	`IF_ERR_RETURN
(
bzRA
);

72 if(
rxAgcCl
->
agcPk
.
dEbMsumt
){

75 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE3
, 
rxAgcCl
->
agcPk
.
dHighTsh
,9,4);

76 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

77 
	`IF_ERR_RETURN
(
bzRA
);

79 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE3
, 
rxAgcCl
->
agcPk
.
dLowTsh
,15,10);

80 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

81 
	`IF_ERR_RETURN
(
bzRA
);

83 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE11
, 
rxAgcCl
->
agcPk
.
dHighTsh
,9,4);

84 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

85 
	`IF_ERR_RETURN
(
bzRA
);

87 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE11
, 
rxAgcCl
->
agcPk
.
dLowTsh
,15,10);

88 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

89 
	`IF_ERR_RETURN
(
bzRA
);

91 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_07
, 0x0,8,8);

92 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

93 
	`IF_ERR_RETURN
(
bzRA
);

95 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_07
, 
rxAgcCl
->
agcPk
.
dAackMode
,0,0);

96 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

97 
	`IF_ERR_RETURN
(
bzRA
);

99 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_07
, 
rxAgcCl
->
agcPk
.
dMsumtDuti
,7,4);

100 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

101 
	`IF_ERR_RETURN
(
bzRA
);

103 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_07
, 
rxAgcCl
->
agcPk
.
dGaSpAack
,15,12);

104 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

105 
	`IF_ERR_RETURN
(
bzRA
);

107 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_07
, 
rxAgcCl
->
agcPk
.
dGaSpRecovy
,19,16);

108 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

109 
	`IF_ERR_RETURN
(
bzRA
);

111 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_08
, 
rxAgcCl
->
agcPk
.
dImmdOvNum
,9,0);

112 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

113 
	`IF_ERR_RETURN
(
bzRA
);

115 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_08
, 
rxAgcCl
->
agcPk
.
dPiOvNum
,19,10);

116 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

117 
	`IF_ERR_RETURN
(
bzRA
);

119 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_08
, 
rxAgcCl
->
agcPk
.
dUndNum
,29,20);

120 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

121 
	`IF_ERR_RETURN
(
bzRA
);

123 if(
rxAgcCl
->
agcPk
.
hb2EbMsumt
){

125 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_09
, 0x0,4,4);

126 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

127 
	`IF_ERR_RETURN
(
bzRA
);

129 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_09
, 
rxAgcCl
->
agcPk
.
hb2MsumtDuti
,3,0);

130 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

131 
	`IF_ERR_RETURN
(
bzRA
);

133 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_09
, 
rxAgcCl
->
agcPk
.
hb2RecovyMode
,5,5);

134 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

135 
	`IF_ERR_RETURN
(
bzRA
);

137 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_09
, 
rxAgcCl
->
agcPk
.
hb2AackMode
,6,6);

138 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

139 
	`IF_ERR_RETURN
(
bzRA
);

141 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_10
, 
rxAgcCl
->
agcPk
.
hb2GaSpHighRecovy
,7,4);

142 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

143 
	`IF_ERR_RETURN
(
bzRA
);

145 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_10
, 
rxAgcCl
->
agcPk
.
hb2GaSpLowRecovy
,11,8);

146 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

147 
	`IF_ERR_RETURN
(
bzRA
);

149 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_10
, 
rxAgcCl
->
agcPk
.
hb2GaSpMidRecovy
,15,12);

150 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

151 
	`IF_ERR_RETURN
(
bzRA
);

153 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_10
, 
rxAgcCl
->
agcPk
.
hb2GaSpAack
,3,0);

154 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

155 
	`IF_ERR_RETURN
(
bzRA
);

157 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_11
, 
rxAgcCl
->
agcPk
.
hb2OvThsh
,13,0);

158 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

159 
	`IF_ERR_RETURN
(
bzRA
);

161 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_11
, 
rxAgcCl
->
agcPk
.
hb2UndRgeHighThsh
,29,16);

162 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

163 
	`IF_ERR_RETURN
(
bzRA
);

165 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_12
, 
rxAgcCl
->
agcPk
.
hb2UndRgeLowThsh
,13,0);

166 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

167 
	`IF_ERR_RETURN
(
bzRA
);

169 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_12
, 
rxAgcCl
->
agcPk
.
hb2UndRgeMidThsh
,29,16);

170 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

171 
	`IF_ERR_RETURN
(
bzRA
);

173 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_13
, 
rxAgcCl
->
agcPk
.
hb2OvldThshC
,9,0);

174 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

175 
	`IF_ERR_RETURN
(
bzRA
);

177 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_13
, 
rxAgcCl
->
agcPk
.
hb2UndRgeHighThshC
,25,16);

178 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

179 
	`IF_ERR_RETURN
(
bzRA
);

181 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_14
, 
rxAgcCl
->
agcPk
.
hb2UndRgeLowThshC
,9,0);

182 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

183 
	`IF_ERR_RETURN
(
bzRA
);

185 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_14
, 
rxAgcCl
->
agcPk
.
hb2UndRgeMidThshC
,25,16);

186 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

187 
	`IF_ERR_RETURN
(
bzRA
);

189 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_15
, 
rxAgcCl
->
agcPk
.
hb2PiExededC
,9,0);

190 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

191 
	`IF_ERR_RETURN
(
bzRA
);

193 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_15
, 
rxAgcCl
->
agcPk
.
hb2PiUndExededC
,25,16);

194 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

195 
	`IF_ERR_RETURN
(
bzRA
);

197 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_16
, 
rxAgcCl
->
agcPk
.
hb2ImmdExededC
,9,0);

198 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

199 
	`IF_ERR_RETURN
(
bzRA
);

201 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_16
, 
rxAgcCl
->
agcPk
.
hb2ImmdUndHigC
,25,16);

202 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

203 
	`IF_ERR_RETURN
(
bzRA
);

205 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_17
, 
rxAgcCl
->
agcPk
.
hb2ImmdUndLowC
,9,0);

206 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

207 
	`IF_ERR_RETURN
(
bzRA
);

209 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_17
, 
rxAgcCl
->
agcPk
.
hb2ImmdUndMidC
,25,16);

210 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

211 
	`IF_ERR_RETURN
(
bzRA
);

214 if(
rxAgcCl
->
agcPow
.
powEbMsumt
){

216 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_18
, 0,4,4);

217 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

218 
	`IF_ERR_RETURN
(
bzRA
);

220 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_18
, 
rxAgcCl
->
agcPow
.
powInMux
,9,8);

221 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

222 
	`IF_ERR_RETURN
(
bzRA
);

224 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_18
, 
rxAgcCl
->
agcPow
.
powMsumtDuti
,3,0);

225 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

226 
	`IF_ERR_RETURN
(
bzRA
);

228 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_19
, 
rxAgcCl
->
agcPow
.
powAackHigSp
,3,0);

229 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

230 
	`IF_ERR_RETURN
(
bzRA
);

232 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_19
, 
rxAgcCl
->
agcPow
.
powAackLowSp
,7,4);

233 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

234 
	`IF_ERR_RETURN
(
bzRA
);

236 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_19
, 
rxAgcCl
->
agcPow
.
powRecovyHigSp
,11,8);

237 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

238 
	`IF_ERR_RETURN
(
bzRA
);

240 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_19
, 
rxAgcCl
->
agcPow
.
powRecovyLowSp
,15,12);

241 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

242 
	`IF_ERR_RETURN
(
bzRA
);

244 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_20
, 
rxAgcCl
->
agcPow
.
powOvHigThsh
,13,0);

245 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

246 
	`IF_ERR_RETURN
(
bzRA
);

248 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_20
, 
rxAgcCl
->
agcPow
.
powOvLowThsh
,29,16);

249 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

250 
	`IF_ERR_RETURN
(
bzRA
);

252 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_21
, 
rxAgcCl
->
agcPow
.
powUndHigThsh
,13,0);

253 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

254 
	`IF_ERR_RETURN
(
bzRA
);

256 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_21
, 
rxAgcCl
->
agcPow
.
powUndLowThsh
,29,16);

257 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

258 
	`IF_ERR_RETURN
(
bzRA
);

262 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_01
,0x1,0,0);

263 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
, 
BZ_ERRHDL_HAL_AGC
, 
hE
, bzRA, 
BZ_ERR_RESET_SPI
);

264 
	`IF_ERR_RETURN
(
bzRA
);

265  (
ut32_t
)
bzRA
;

266 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_cals.c

10 
	~"bz_ls.h
"

11 
	~"bz_r.h
"

12 
	~"bz_riscv.h
"

13 
	~"bz__h.h
"

17 
ut32_t
 
	$BZ_runInCs
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
CMask
)

19 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

20 
BzDa
 
DaInfo
;

21 
BzCmdTx
 *
pMsg
;

23 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

24 
pMsg
=&
DaInfo
.
u
.
Tx
;

25 
DaInfo
.
CmdTy
=0xff;

26 
pMsg
->
Cmd
=
BZ_RUNN_INIT_OPCODE
;

27 
pMsg
->
TxDa
.
vue
=
CMask
;

28 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

29 
	`IF_ERR_RETURN
(
bzRA
);

31 
hw_iv
->
cutCMask
 = 
CMask
;

32  (
ut32_t
)
bzRA
;

33 
	}
}

34 
ut32_t
 
	$BZ_waInCsDe
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
timeout
)

36 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

37 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

40 
uiTry
 > 0){

41 
	`BZ_mday
(
timeout
);

42 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

43 
	`IF_ERR_RETURN
(
bzRA
);

44 if(
hw_iv
->
l_de
==1){

45 
	`BZ_rStus
(
hw_iv
);

46 
hw_iv
->
l_de
=0;

49 
uiTry
--;

51 
	`tf
("y = %d\n",
WIAT_TIMEOUT
 - 
uiTry
);

52 if(
uiTry
 <= 0){

53 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

56  (
ut32_t
)
bzRA
;

57 
	}
}

59 cڡ * 
	$bz_gInCsEMsg
(
ut32_t
 
rSrc
, ut32_
rCode
)

61 i(
rSrc
 =
BZ_ERRHDL_INITCALS
)

63 
rCode
)

65 
RX1_DC_OFFSET_ERROR
:  "RX1_DC_OFFSET Error Status ";

66 
RX2_DC_OFFSET_ERROR
:  "RX2 DC OFFSET Error Status";

67 
RX1_QEC_INIT_ERROR
:  "RX1 QEC INIT Error Status";

68 
RX2_QEC_INIT_ERROR
:  "RX2 QEC INIT Error Status";

69 
TX1_LO_LEAKAGE_INTERNAL_ERROR
:  "TX1 LO LEAKAGE INTERNAL Error Status";

70 
TX2_LO_LEAKAGE_INTERNAL_ERROR
:  "TX2 LO LEAKAGE INTERNAL Error Status";

71 
TX1_LO_LEAKAGE_EXTERNAL_ERROR
:  "TX1 LO LEAKAGE EXTERNAL Error Status";

72 
TX2_LO_LEAKAGE_EXTERNAL_ERROR
:  "TX2 LO LEAKAGE EXTERNAL Error Status";

73 
TX1_QEC_INIT_ERROR
:  "TX1 QEC INIT Error Status";

74 
TX2_QEC_INIT_ERROR
:  "TX2 QEC INIT Error Status";

75 
BZ_BBPLL_LOCK_ERROR
:  "BB PLL Calibration Error Status";

76 
BZ_RFPLL_LOCK_ERROR
:  "RF PLL Calibration Error Status";

77 
BZ_AUXPLL_LOCK_ERROR
:  "AUX PLL Calibration Error Status";

78 
BZ_CALI_STATS_OK
:  "BZ Calibration Status Ok";

84 
	}
}

86 
ut32_t
 
	$BZ_gInCsStus
(
BzDevi_t
 *
hw_iv
)

88 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

89 
BzDa
 
DaInfo
;

90 
BzMem
 *
pMsg
 = 
NULL
;

91 
og_s
 *
og
 = 
NULL
;

92 
wCaLiEId
;

93 
ut32_t
 
i
,
ogC
, 
isSdCiId
;

94 
ut32_t
 
szCaLiEvtId
[
CALI_EVENTID_CNT
]={0x50, 0x10, 0x11, 0x12, 0x13, 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x30, 0x31, 0x32};

96 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

97 
DaInfo
.
CmdTy
=0xff;

99 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

100 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_CALSTATUS_MSGID
;

101 
pMsg
->
Msg
.
Lth
=
CALIBRITION_SRAM_LEN
;

102 
pMsg
->
Msg
.
addr
=
CALIBRITION_SRAM_ADDR
;

104 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

105 if(
bzRA
!=
BZ_NO_ACTION
){

106  
BZ_ERR_CHECK_PARAM
;

109 
og
 = (
og_s
 *)(
pMsg
->
Msg
.
da
);

110 
isSdCiId
 = 0;

111 
wCaLiEId
 = 
og
->
dex
 - 1, 
ogC
 = 0; !
isSdCiId
;ewCaLiEId--,logCnt++)

113 i(
wCaLiEId
 >
og
->
n
)

115 
wCaLiEId
 = 
og
->
n
 - 1;

118 
i
 = 0; i < 
CALI_EVENTID_CNT
; i++)

120 i(
og
->
e_id
[
wCaLiEId
].
id
 =
szCaLiEvtId
[
i
])

122 
	`BZHAL_Prtf
("Cibti Resus:%s\n",
	`bz_gInCsEMsg
(
BZ_ERRHDL_INITCALS
, ((
og
->
e_id
[
wCaLiEId
].
id
<<24)|log->e_id[wCaLiEId].
da
 & 0xffff))));

123 
isSdCiId
 = 1;

128 i(
ogC
 > 1024)

134  
bzRA
;

135 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_error.c

12 
	~"bz_r.h
"

13 
	~"bz__h.h
"

16 cڡ * 
	$bz_gEMesge
(
ut32_t
 
rSrc
, ut32_
rCode
)

18 
rSrc
){

19 
BZ_ERRHDL_HAL_INIT
:

20 if(
rCode
==
BZHAL_OK
){

26 
BZ_ERRHDL_HAL_AGC
:

27 if(
rCode
==
BZHAL_OK
){

33 
BZ_ERRHDL_HAL_JES204B
:

34 if(
rCode
==
BZHAL_OK
){

40 
BZ_ERRHDL_HAL_OTP
:

41 if(
rCode
==
BZHAL_OK
){

47 
BZ_ERRHDL_HAL_RADIO
:

48 if(
rCode
==
BZHAL_OK
){

54 
BZ_ERRHDL_HAL_RISCV
:

55 if(
rCode
==
BZHAL_OK
){

61 
BZ_ERRHDL_HAL_RX
:

62 if(
rCode
==
BZHAL_OK
){

68 
BZ_ERRHDL_HAL_TX
:

69 if(
rCode
==
BZHAL_OK
){

75 
BZ_ERRHDL_HAL_GPIO
:

76 if(
rCode
==
BZHAL_OK
){

85  
NULL
;

86 
	}
}

88 
BzRecovyAis_t
 
	$BZ_ApiEHdr
(
BzDevi_t
 *
hw_iv
, 
BzEHdls_t
 
rHdl
,
ut32_t
 
dE
, 
BzRecovyAis_t
 
tV
,BzRecovyAis_
cAi
)

90 if(
dE
!=
BZ_ERR_OK
){

91 
rHdl
)

93 
BZ_ERRHDL_HAL_INIT
:

95 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_INIT
, detErr));

96 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_INIT
;

97  
cAi
;

99 
BZ_ERRHDL_HAL_AGC
:

100 
	`BZ_WreToLog
(
hw_iv
,
BZHAL_LOG_ERR
,
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_AGC
,detErr));

101 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_AGC
;

103 
BZ_ERRHDL_HAL_JES204B
:

104 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_JES204B
, detErr));

105 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_JES204B
;

107 
BZ_ERRHDL_HAL_OTP
:

108 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_OTP
, detErr));

109 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

111 
BZ_ERRHDL_HAL_RADIO
:

112 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_RADIO
, detErr));

113 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

115 
BZ_ERRHDL_HAL_RISCV
:

116 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_RISCV
, detErr));

117 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

119 
BZ_ERRHDL_HAL_RX
:

120 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_RX
, detErr));

121 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

123 
BZ_ERRHDL_HAL_TX
:

124 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_TX
, detErr));

125 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

127 
BZ_ERRHDL_HAL_GPIO
:

128 
	`BZ_WreToLog
(
hw_iv
, 
BZHAL_LOG_ERR
, 
dE
,
	`bz_gEMesge
(
BZ_ERRHDL_HAL_GPIO
, detErr));

129 
hw_iv
->
BzS
.
rSour
 = 
BZ_ERRHDL_HAL_OTP
;

135 
hw_iv
->
BzS
.
rCode
 = 
dE
;

136  
tV
;

137 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_gpio.c

10 
	~"bz_gpio.h
"

11 
	~"bz_r.h
"

12 
	~"bz__h.h
"

13 
	~"bz_g_dig.h
"

14 
	~"bz_g_a.h
"

15 
	~"bz_riscv_tys.h
"

16 
	~"bz_riscv.h
"

17 
	~"bz_tx.h
"

23 
ut32_t
 
	$BZ_tGpioVue
(
BzDevi_t
 *
hw_iv
, 
BzGpioPS_t
 
gpioNum
, 
ut32_t
 
vue
)

25 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

26 
BzDa
 
DaInfo
;

28 if((
gpioNum
 < 
BZ_GPIO_00
)||(gpioNum > 
BZ_GPIO_09
))

30  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

31 
BZ_ERR_GPIO_NUM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

35 
	`BZ_tGpioSourCl
(
hw_iv
, 0, 
gpioNum
);

36 
	`IF_ERR_RETURN
(
bzRA
);

39 
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_5
, 
gpioNum
);

40 
	`IF_ERR_RETURN
(
bzRA
);

42 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

43 
DaInfo
.
CmdTy
=0xff;

44 
DaInfo
.
u
.
Tx
.
Cmd
=
BZ_SET_OPCODE
;

45 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=
HI_SET_GPIO_VALUE
|(vue<<31|
gpioNum
<<16);

46 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

47 
	`IF_ERR_RETURN
(
bzRA
);

49  (
ut32_t
)
bzRA
;

50 
	}
}

52 
ut32_t
 
	$BZ_waGGpioVueDe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
timeout
)

54 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

55 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

58 
uiTry
 > 0){

59 
	`BZ_mday
(
timeout
);

60 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

61 
	`IF_ERR_RETURN
(
bzRA
);

62 if(
hw_iv
->
gpio_g_vue_de
==1){

63 
	`BZ_rStus
(
hw_iv
);

64 
hw_iv
->
gpio_g_vue_de
=0;

67 
uiTry
--;

69 if(
uiTry
 <= 0){

70 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

73  (
ut32_t
)
bzRA
;

74 
	}
}

79 
ut32_t
 
	$BZ_gGpioVue
(
BzDevi_t
 *
hw_iv
, 
BzGpioPS_t
 
gpioNum
, 
ut32_t
 *
vue
)

81 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

82 
BzDa
 
DaInfo
;

84 if((
gpioNum
 < 
BZ_GPIO_00
)||(gpioNum > 
BZ_GPIO_09
))

86  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

87 
BZ_ERR_GPIO_NUM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

91 
	`BZ_tGpioSourCl
(
hw_iv
, 0, 
gpioNum
);

92 
	`IF_ERR_RETURN
(
bzRA
);

95 
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_5
, 
gpioNum
);

96 
	`IF_ERR_RETURN
(
bzRA
);

98 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

99 
DaInfo
.
CmdTy
=0xff;

100 
DaInfo
.
u
.
Tx
.
Cmd
=
BZ_SET_OPCODE
;

101 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=
HI_GET_GPIO_VALUE
|
gpioNum
<<16;

102 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

103 
	`IF_ERR_RETURN
(
bzRA
);

105 
bzRA
=
	`BZ_waGGpioVueDe
(
hw_iv
, 100);

106 
	`IF_ERR_RETURN
(
bzRA
);

108 
bzRA
=
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_0
,
vue
,31,31);

109 
	`IF_ERR_RETURN
(
bzRA
);

111  (
ut32_t
)
bzRA
;

112 
	}
}

117 
ut32_t
 
	$BZ_tGpioDei
(
BzDevi_t
 *
hw_iv
, 
BzGpioD_t
 
gpioOutEn
, 
BzGpioPS_t
 
gpioNum
)

119 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

120 
bzHE
 
hus
=
BZHAL_OK
;

121 
ut32_t
 
GpioM_RegB
;

123 if((
gpioNum
 >
BZ_GPIO_00
)&&(gpioNum <
BZ_GPIO_09
))

125 
GpioM_RegB
=
gpioNum
;

127 if((
gpioNum
 >
BZ_GPIO_10
)&&(gpioNum <
BZ_GPIO_16
))

129 
GpioM_RegB
=
gpioNum
 + 
BZ_GPIO_10
;

133  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

134 
BZ_ERR_GPIO_NUM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

138 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_0
,
gpioOutEn
,
GpioM_RegB
,GpioMap_RegBit);

139 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

140 
	`IF_ERR_RETURN
(
bzRA
);

142  (
ut32_t
)
bzRA
;

143 
	}
}

145 
ut32_t
 
	$BZ_gGpioDei
(
BzDevi_t
 *
hw_iv
, 
BzGpioD_t
 *
gpioOutEn
, 
BzGpioPS_t
 
gpioNum
)

147 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

148 
bzHE
 
hus
=
BZHAL_OK
;

149 
ut32_t
 
GpioM_RegB
;

151 if((
gpioNum
 >
BZ_GPIO_00
)&&(gpioNum <
BZ_GPIO_09
))

153 
GpioM_RegB
=
gpioNum
;

155 if((
gpioNum
 >
BZ_GPIO_10
)&&(gpioNum <
BZ_GPIO_16
))

157 
GpioM_RegB
=
gpioNum
 + 
BZ_GPIO_10
;

161  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

162 
BZ_ERR_GPIO_NUM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

166 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_0
,(
ut32_t
*)
gpioOutEn
,
GpioM_RegB
,GpioMap_RegBit);

167 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

168 
	`IF_ERR_RETURN
(
bzRA
);

170  (
ut32_t
)
bzRA
;

171 
	}
}

176 
ut32_t
 
	$BZ_tGpioSourCl
(
BzDevi_t
 *
hw_iv
, 
BzGpioClMode_t
 
gpioClMode
, 
BzGpioPS_t
 
gpioNum
)

178 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

179 
bzHE
 
hus
=
BZHAL_OK
;

180 
ut32_t
 
GpioM_RegB
;

182 if((
gpioNum
 >
BZ_GPIO_00
)&&(gpioNum <
BZ_GPIO_09
))

184 
GpioM_RegB
=(
gpioNum
+10);

187 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_0
,(
ut32_t
)
gpioClMode
,
GpioM_RegB
,GpioMap_RegBit);

188 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

189 
	`IF_ERR_RETURN
(
bzRA
);

190 }if((
gpioNum
 >
BZ_GPIO_10
)&&(gpioNum <
BZ_GPIO_16
)){

193  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

194 
BZ_ERR_GPIO_NUM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

197  (
ut32_t
)
bzRA
;

198 
	}
}

200 
ut32_t
 
	$BZ_gGpioSourCl
(
BzDevi_t
 *
hw_iv
, 
BzGpioClMode_t
 *
gpioClMode
, 
BzGpioPS_t
 
gpioNum
)

202 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

203 
bzHE
 
hus
=
BZHAL_OK
;

204 
ut32_t
 
GpioM_RegB
;

205 
GpioM_RegB
=(
gpioNum
+10);

207 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_0
,(
ut32_t
*)
gpioClMode
,
GpioM_RegB
,GpioMap_RegBit);

208 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

209 
	`IF_ERR_RETURN
(
bzRA
);

211  (
ut32_t
)
bzRA
;

212 
	}
}

217 
ut32_t
 
	$BZ_tGpioFuncS
(
BzDevi_t
 *
hw_iv
, 
BzGpioPFunc_t
 
gpioFuncS
, 
BzGpioPS_t
 
gpioNum
)

219 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

220 
bzHE
 
hus
=
BZHAL_OK
;

222 
gpioNum
){

223 
BZ_GPIO_00
:

224 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,2,0);

226 
BZ_GPIO_01
:

227 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,5,3);

229 
BZ_GPIO_02
:

230 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,8,6);

232 
BZ_GPIO_03
:

233 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,11,9);

235 
BZ_GPIO_04
:

236 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,14,12);

238 
BZ_GPIO_05
:

239 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,17,15);

241 
BZ_GPIO_06
:

242 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,20,18);

244 
BZ_GPIO_07
:

245 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,23,21);

247 
BZ_GPIO_08
:

248 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,26,24);

250 
BZ_GPIO_09
:

251 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
)
gpioFuncS
,29,27);

253 
BZ_GPIO_10
:

254 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,2,0);

256 
BZ_GPIO_11
:

257 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,5,3);

259 
BZ_GPIO_12
:

260 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,8,6);

262 
BZ_GPIO_13
:

263 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,11,9);

265 
BZ_GPIO_14
:

266 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,14,12);

268 
BZ_GPIO_15
:

269 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,17,15);

271 
BZ_GPIO_16
:

272 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
)
gpioFuncS
,20,18);

278 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

279 
	`IF_ERR_RETURN
(
bzRA
);

281  (
ut32_t
)
bzRA
;

282 
	}
}

284 
ut32_t
 
	$BZ_gGpioFuncS
(
BzDevi_t
 *
hw_iv
, 
BzGpioPFunc_t
 *
gpioFuncS
, 
BzGpioPS_t
 
gpioNum
)

286 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

287 
bzHE
 
hus
=
BZHAL_OK
;

289 
gpioNum
){

290 
BZ_GPIO_00
:

291 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,2,0);

293 
BZ_GPIO_01
:

294 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,5,3);

296 
BZ_GPIO_02
:

297 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,8,6);

299 
BZ_GPIO_03
:

300 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,11,9);

302 
BZ_GPIO_04
:

303 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,14,12);

305 
BZ_GPIO_05
:

306 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,17,15);

308 
BZ_GPIO_06
:

309 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,20,18);

311 
BZ_GPIO_07
:

312 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,23,21);

314 
BZ_GPIO_08
:

315 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,26,24);

317 
BZ_GPIO_09
:

318 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_1
,(
ut32_t
*)
gpioFuncS
,29,27);

320 
BZ_GPIO_10
:

321 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,2,0);

323 
BZ_GPIO_11
:

324 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,5,3);

326 
BZ_GPIO_12
:

327 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,8,6);

329 
BZ_GPIO_13
:

330 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,11,9);

332 
BZ_GPIO_14
:

333 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,14,12);

335 
BZ_GPIO_15
:

336 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,17,15);

338 
BZ_GPIO_16
:

339 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_CTRL_2
,(
ut32_t
*)
gpioFuncS
,20,18);

344 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

345 
	`IF_ERR_RETURN
(
bzRA
);

347  (
ut32_t
)
bzRA
;

348 
	}
}

350 
ut32_t
 
	$BZ_tGpio3v3Oe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
gpio3v3OutEn
, 
BzGpioPS_t
 
gpioNum
)

352 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

353 
bzHE
 
hus
=
BZHAL_OK
;

355 
ut32_t
 
GpioM5_0
=0;

356 
ut32_t
 
GpioM11_6
=16;

359 if(
gpioNum
>=6){

360 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_MISC_TOP2
,
gpio3v3OutEn
,
GpioM5_0
+
gpioNum
,GpioMap5_0+gpioNum);

361 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

362 
	`IF_ERR_RETURN
(
bzRA
);

365 if(
gpioNum
<6){

366 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_MISC_TOP4
,
gpio3v3OutEn
,
GpioM11_6
+
gpioNum
,GpioMap11_6+gpioNum);

367 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

368 
	`IF_ERR_RETURN
(
bzRA
);

371  (
ut32_t
)
bzRA
;

372 
	}
}

374 
ut32_t
 
	$BZ_gGpio3v3Oe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 *
gpio3v3OutEn
)

376 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

377 
bzHE
 
hus
=
BZHAL_OK
;

379 
ut32_t
 
Gpio5_0Mask
=0;

380 
ut32_t
 
Gpio11_6Mask
=0;

384 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_MISC_TOP2
,&
Gpio5_0Mask
,5,0);

385 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

386 
	`IF_ERR_RETURN
(
bzRA
);

389 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_MISC_TOP4
,&
Gpio11_6Mask
,21,16);

390 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

391 
	`IF_ERR_RETURN
(
bzRA
);

393 *
gpio3v3OutEn
=(
Gpio5_0Mask
|
Gpio11_6Mask
<<6);

394  (
ut32_t
)
bzRA
;

395 
	}
}

397 
ut32_t
 
	$BZ_tGpio3v3Ie
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
gpio3v3InEn
, 
BzGpioPS_t
 
gpioNum
)

399 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

400 
bzHE
 
hus
=
BZHAL_OK
;

401 
ut32_t
 
GpioM5_0
=0;

402 
ut32_t
 
GpioM11_6
=24;

405 if(
gpioNum
>=6){

406 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_MISC_TOP2
,
gpio3v3InEn
,
GpioM5_0
+
gpioNum
,GpioMap5_0+gpioNum);

407 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

408 
	`IF_ERR_RETURN
(
bzRA
);

411 if(
gpioNum
<6){

412 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_MISC_TOP4
,
gpio3v3InEn
,
GpioM11_6
+
gpioNum
,GpioMap11_6+gpioNum);

413 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

414 
	`IF_ERR_RETURN
(
bzRA
);

416  (
ut32_t
)
bzRA
;

417 
	}
}

419 
ut32_t
 
	$BZ_gGpIStus
(
BzDevi_t
 *
hw_iv
,
BzGpIMask_t
 *
gpIStus
)

421 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

422 
bzHE
 
hus
=
BZHAL_OK
;

424 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
DOCMD_STATUS
,(
ut32_t
 *)
gpIStus
);

425 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

426 
	`IF_ERR_RETURN
(
bzRA
);

428  (
ut32_t
)
bzRA
;

429 
	}
}

430 
ut32_t
 
	$BZ_gTemtu
(
BzDevi_t
 *
hw_iv
,
ut32_t
* 
mtuDegc
)

432 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

434  (
ut32_t
)
bzRA
;

435 
	}
}

437 
ut32_t
 
	$BZ_gGpio3v3Ie
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 *
gpio3v3InEn
)

439 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

440 
bzHE
 
hus
=
BZHAL_OK
;

442 
ut32_t
 
Gpio5_0Mask
=0;

443 
ut32_t
 
Gpio11_6Mask
=0;

447 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_MISC_TOP2
,&
Gpio5_0Mask
,13,8);

448 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

449 
	`IF_ERR_RETURN
(
bzRA
);

452 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_MISC_TOP4
,&
Gpio11_6Mask
,29,24);

453 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

454 
	`IF_ERR_RETURN
(
bzRA
);

456 *
gpio3v3InEn
=(
Gpio5_0Mask
|
Gpio11_6Mask
<<6);

457  (
ut32_t
)
bzRA
;

459 
	}
}

461 
ut32_t
 
	$BZ_tupAuxDacs
(
BzDevi_t
 *
hw_iv
,
BzGpioPS_t
 
Gpio3V3Num
)

463 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

464 
bzHE
 
hus
=
BZHAL_OK
;

466 
ut32_t
 
auxDacCnf
 = 0x00;

467 
ut32_t
 
auxDacGPIOCnf
 = 0x00;

468 
ut32_t
 
auxDacPowCnf
 = 0x00;

469 
ut32_t
 
auxDacModeCnf
 = 0x00;

471 if(
Gpio3V3Num
<=5)

475 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP4
,&
auxDacGPIOCnf
);

476 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

477 
	`IF_ERR_RETURN
(
bzRA
);

480 
auxDacGPIOCnf
&=~
	`BIT
(
Gpio3V3Num
+24);

482 
auxDacGPIOCnf
&=~
	`BIT
(
Gpio3V3Num
+16);

484 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP2
,&
auxDacPowCnf
);

485 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

486 
	`IF_ERR_RETURN
(
bzRA
);

489 
auxDacPowCnf
&=~
	`BIT
(25);

491 
auxDacPowCnf
&=~
	`BIT
(
Gpio3V3Num
+16);

493 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP3
,&
auxDacModeCnf
);

494 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

495 
	`IF_ERR_RETURN
(
bzRA
);

498 
auxDacModeCnf
|=(
BZ_AUXDACVREF_1P5V
<<(
Gpio3V3Num
*2));

500 
auxDacModeCnf
 &=~
	`BIT
(
Gpio3V3Num
+16);

502 
auxDacModeCnf
 |=
	`BIT
(
Gpio3V3Num
+22);

504 if(
Gpio3V3Num
<5)

506 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP4
,
auxDacGPIOCnf
);

507 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

508 
	`IF_ERR_RETURN
(
bzRA
);

510 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP2
,
auxDacPowCnf
);

511 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

512 
	`IF_ERR_RETURN
(
bzRA
);

515 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP3
,
auxDacModeCnf
);

516 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

517 
	`IF_ERR_RETURN
(
bzRA
);

520 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP4
,&
auxDacCnf
);

521 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

522 
	`IF_ERR_RETURN
(
bzRA
);

524 
auxDacCnf
|=(
BZ_AUXDACVREF_1P5V
);

525 
auxDacCnf
&=~
	`BIT
(12);

526 
auxDacCnf
|=
	`BIT
(5);

527 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP4
,
auxDacCnf
);

528 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

529 
	`IF_ERR_RETURN
(
bzRA
);

535 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP2
,&
auxDacGPIOCnf
);

536 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

537 
	`IF_ERR_RETURN
(
bzRA
);

539 
auxDacGPIOCnf
&=~
	`BIT
(
Gpio3V3Num
+2);

541 
auxDacGPIOCnf
&=~
	`BIT
(
Gpio3V3Num
-6);

543 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP0
,&
auxDacPowCnf
);

544 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

545 
	`IF_ERR_RETURN
(
bzRA
);

547 
auxDacPowCnf
&=~
	`BIT
(9);

549 
auxDacPowCnf
&=~
	`BIT
(
Gpio3V3Num
-6);

551 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP1
,&
auxDacModeCnf
);

552 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

553 
	`IF_ERR_RETURN
(
bzRA
);

555 
auxDacModeCnf
|=(
BZ_AUXDACVREF_1P5V
<<((
Gpio3V3Num
*2)+4));

557 
auxDacModeCnf
 &=~
	`BIT
(
Gpio3V3Num
-6);

559 
auxDacModeCnf
 |=
	`BIT
(
Gpio3V3Num
);

561 if(
Gpio3V3Num
<11)

563 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP2
,
auxDacGPIOCnf
);

564 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

565 
	`IF_ERR_RETURN
(
bzRA
);

567 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP0
,
auxDacPowCnf
);

568 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

569 
	`IF_ERR_RETURN
(
bzRA
);

572 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP1
,
auxDacModeCnf
);

573 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

574 
	`IF_ERR_RETURN
(
bzRA
);

578 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP2
,&
auxDacGPIOCnf
);

579 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

580 
	`IF_ERR_RETURN
(
bzRA
);

583 
auxDacGPIOCnf
&=~
	`BIT
(13);

585 
auxDacGPIOCnf
&=~
	`BIT
(5);

586 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP2
,
auxDacGPIOCnf
);

587 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

588 
	`IF_ERR_RETURN
(
bzRA
);

590 
hus
 = 
	`BZ_iRdReg
(
hw_iv
,
REG_MISC_TOP1
,&
auxDacModeCnf
);

591 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

592 
	`IF_ERR_RETURN
(
bzRA
);

595 
auxDacModeCnf
|=(
BZ_AUXDACVREF_1P5V
<<16);

597 
auxDacModeCnf
 &=~
	`BIT
(20);

599 
auxDacModeCnf
 |=
	`BIT
(21);

601 
auxDacModeCnf
 &=~
	`BIT
(28);

602 
hus
 = 
	`BZ_iWreReg
(
hw_iv
,
REG_MISC_TOP1
,
auxDacModeCnf
);

603 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

604 
	`IF_ERR_RETURN
(
bzRA
);

609  (
ut32_t
)
bzRA
;

610 
	}
}

611 
ut32_t
 
	$BZ_wreAuxDac
(
BzDevi_t
 *
hw_iv
,
BzGpioPS_t
 
Gpio3V3Num
,
ut16_t
 
auxDacCode
)

613 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

614 
bzHE
 
hus
=
BZHAL_OK
;

616 
Gpio3V3Num
){

617 
BZ_GPIO_00
:

618 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_2
,
auxDacCode
,9,0);

619 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

620 
	`IF_ERR_RETURN
(
bzRA
);

622 
BZ_GPIO_01
:

623 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_2
,
auxDacCode
,19,10);

624 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

625 
	`IF_ERR_RETURN
(
bzRA
);

627 
BZ_GPIO_02
:

628 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_2
,
auxDacCode
,29,20);

629 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

630 
	`IF_ERR_RETURN
(
bzRA
);

632 
BZ_GPIO_03
:

633 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_3
,
auxDacCode
,9,0);

634 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

635 
	`IF_ERR_RETURN
(
bzRA
);

636 
BZ_GPIO_04
:

637 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_3
,
auxDacCode
,19,10);

638 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

639 
	`IF_ERR_RETURN
(
bzRA
);

640 
BZ_GPIO_05
:

641 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_3
,
auxDacCode
,29,20);

642 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

643 
	`IF_ERR_RETURN
(
bzRA
);

645 
BZ_GPIO_06
:

646 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_0
,
auxDacCode
,9,0);

647 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

648 
	`IF_ERR_RETURN
(
bzRA
);

649 
BZ_GPIO_07
:

650 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_0
,
auxDacCode
,19,10);

651 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

652 
	`IF_ERR_RETURN
(
bzRA
);

653 
BZ_GPIO_08
:

654 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_0
,
auxDacCode
,29,20);

655 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

656 
	`IF_ERR_RETURN
(
bzRA
);

658 
BZ_GPIO_09
:

659 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_1
,
auxDacCode
,9,0);

660 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

661 
	`IF_ERR_RETURN
(
bzRA
);

662 
BZ_GPIO_10
:

663 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_1
,
auxDacCode
,19,10);

664 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

665 
	`IF_ERR_RETURN
(
bzRA
);

666 
BZ_GPIO_11
:

667 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXDA_1
,
auxDacCode
,29,20);

668 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

669 
	`IF_ERR_RETURN
(
bzRA
);

675  (
ut32_t
)
bzRA
;

676 
	}
}

684 
ut32_t
 
	$BZ_tGpioFunFMڙPosSD0
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
mڙ_a
)

686 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

687 
i
 = 0;

689 
i
 = 0; i < 
BZ_GPIO_08
; i++)

691 if(
mڙ_a
&(1<<
i
))

693 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 1, 
i
);

694 
	`IF_ERR_RETURN
(
bzRA
);

695 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 1, 
i
);

696 
	`IF_ERR_RETURN
(
bzRA
);

697 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, 
i
);

698 
	`IF_ERR_RETURN
(
bzRA
);

702  (
ut32_t
)
bzRA
;

703 
	}
}

706 
ut32_t
 
	$BZ_tGpioFunFMڙPosSD1
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
mڙ_a
)

708 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

709 
i
 = 0;

711 
i
 = 0; i < 
BZ_GPIO_08
; i++)

713 if(
mڙ_a
&(1<<
i
))

715 if(
i
 <
BZ_GPIO_03
)

717 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 1, 
i
);

718 
	`IF_ERR_RETURN
(
bzRA
);

719 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 1, 
i
);

720 
	`IF_ERR_RETURN
(
bzRA
);

721 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, 
i
);

722 
	`IF_ERR_RETURN
(
bzRA
);

726 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 1, (
i
+
BZ_GPIO_08
));

727 
	`IF_ERR_RETURN
(
bzRA
);

728 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 1, (
i
+
BZ_GPIO_08
));

729 
	`IF_ERR_RETURN
(
bzRA
);

730 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, (
i
+
BZ_GPIO_08
));

731 
	`IF_ERR_RETURN
(
bzRA
);

736  (
ut32_t
)
bzRA
;

737 
	}
}

740 
ut32_t
 
	$BZ_tGpioFunFMڙPosSD2
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
mڙ_a
)

742 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

743 
i
 = 0;

745 
i
 = 0; i < 
BZ_GPIO_08
; i++)

747 if(
mڙ_a
&(1<<
i
))

749 if(
i
 <
BZ_GPIO_03
)

751 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 1, (
i
+
BZ_GPIO_08
));

752 
	`IF_ERR_RETURN
(
bzRA
);

753 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 1, (
i
+
BZ_GPIO_08
));

754 
	`IF_ERR_RETURN
(
bzRA
);

755 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, (
i
+
BZ_GPIO_08
));

756 
	`IF_ERR_RETURN
(
bzRA
);

760 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 1, 
i
);

761 
	`IF_ERR_RETURN
(
bzRA
);

762 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 1, 
i
);

763 
	`IF_ERR_RETURN
(
bzRA
);

764 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, 
i
);

765 
	`IF_ERR_RETURN
(
bzRA
);

770  (
ut32_t
)
bzRA
;

771 
	}
}

774 
ut32_t
 
	$BZ_tGpioFunFMڙPosSD3
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
mڙ_a
)

776 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

777 
i
 = 0;

779 
i
 = 0; i < 
BZ_GPIO_08
; i++)

781 if(
mڙ_a
&(1<<
i
))

783 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 
BZ_SPI_CTRL
, (
i
+
BZ_GPIO_08
));

784 
	`IF_ERR_RETURN
(
bzRA
);

785 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 
BZ_SPI_CTRL
, (
i
+
BZ_GPIO_08
));

786 
	`IF_ERR_RETURN
(
bzRA
);

787 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_7
, (
i
+
BZ_GPIO_08
));

788 
	`IF_ERR_RETURN
(
bzRA
);

792  (
ut32_t
)
bzRA
;

793 
	}
}

795 
ut32_t
 
	$BZ_tGpioMڙOut
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
mڙIndex
,ut32_
mڙ_a
,
BzGpioMڙPosS_t
 
mڙ_pos_l_ty
)

797 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

798 
bzHE
 
hus
=
BZHAL_OK
;

800 
mڙ_pos_l_ty
)

802 
BZ_GPIO_MONITOR_POS_SEL_D0
:

804 
bzRA
=
	`BZ_tGpioFunFMڙPosSD0
(
hw_iv
, 
mڙ_a
);

805 
	`IF_ERR_RETURN
(
bzRA
);

807 
BZ_GPIO_MONITOR_POS_SEL_D1
:

809 
bzRA
=
	`BZ_tGpioFunFMڙPosSD1
(
hw_iv
, 
mڙ_a
);

810 
	`IF_ERR_RETURN
(
bzRA
);

812 
BZ_GPIO_MONITOR_POS_SEL_D2
:

814 
bzRA
=
	`BZ_tGpioFunFMڙPosSD2
(
hw_iv
, 
mڙ_a
);

815 
	`IF_ERR_RETURN
(
bzRA
);

817 
BZ_GPIO_MONITOR_POS_SEL_D3
:

819 
bzRA
=
	`BZ_tGpioFunFMڙPosSD3
(
hw_iv
, 
mڙ_a
);

820 
	`IF_ERR_RETURN
(
bzRA
);

823  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,

824 
BZ_ERR_GPIO_MONITOR_PARAM_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

829 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_MODE_2
,
mڙ_pos_l_ty
,9,8);

830 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

831 
	`IF_ERR_RETURN
(
bzRA
);

834 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_MODE_2
,
mڙ_a
,7,0);

835 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

836 
	`IF_ERR_RETURN
(
bzRA
);

839 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GPIO_MODE_2
,
mڙIndex
,15,12);

840 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

841 
	`IF_ERR_RETURN
(
bzRA
);

843  (
ut32_t
)
bzRA
;

844 
	}
}

845 
ut32_t
 
	$BZ_gGpioMڙOut
(
BzDevi_t
 *
hw_iv
,
ut32_t
 *
mڙIndex
,ut32_t* 
mڙE
)

847 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

848 
bzHE
 
hus
=
BZHAL_OK
;

851 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_MODE_2
,
mڙE
,7,0);

852 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

853 
	`IF_ERR_RETURN
(
bzRA
);

856 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GPIO_MODE_2
,
mڙIndex
,15,12);

857 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

858 
	`IF_ERR_RETURN
(
bzRA
);

860  (
ut32_t
)
bzRA
;

861 
	}
}

863 
ut32_t
 
	$BZ_tAuxAdc
(
BzDevi_t
 *
hw_iv
,
BzAuxAdcCfig_t
 *
auxAdcCfig
)

865 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

866 
bzHE
 
hus
=
BZHAL_OK
;

868 cڡ 
ut16_t
 
MIN_AUXADC_SAMPLES
 = 1;

869 cڡ 
ut16_t
 
MAX_AUXADC_SAMPLES
 = 1000;

870 cڡ 
ut16_t
 
MIN_AUXADC_SAMPLING_PERIOD_US
 = 1;

871 cڡ 
ut16_t
 
MAX_AUXADC_SAMPLING_PERIOD_US
 = 10;

874 i(
auxAdcCfig
 =
NULL
)

876  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

877 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

881 if((
auxAdcCfig
->
auxAdcChlS
 !
BZ_AUXADC_CH0
) &&

882 (
auxAdcCfig
->
auxAdcChlS
 !
BZ_AUXADC_CH1
) &&

883 (
auxAdcCfig
->
auxAdcChlS
 !
BZ_AUXADC_CH2
) &&

884 (
auxAdcCfig
->
auxAdcChlS
 !
BZ_AUXADC_CH3
))

886  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

887 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

891 if((
auxAdcCfig
->
auxAdcMode
 !
BZ_AUXADC_NONPIN_MODE
) &&

892 (
auxAdcCfig
->
auxAdcMode
 !
BZ_AUXADC_PIN_MODE
))

894  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

895 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

899 if((
auxAdcCfig
->
numSames
 < 
MIN_AUXADC_SAMPLES
) ||

900 (
auxAdcCfig
->
numSames
 > 
MAX_AUXADC_SAMPLES
))

902  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

903 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

907 if((
auxAdcCfig
->
auxAdcMode
 =
BZ_AUXADC_NONPIN_MODE
) &&

908 (
auxAdcCfig
->
mgPiod_us
 < 
MIN_AUXADC_SAMPLING_PERIOD_US
) &&

909 (
auxAdcCfig
->
mgPiod_us
 > 
MAX_AUXADC_SAMPLING_PERIOD_US
))

911  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

912 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

916 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_0
,
auxAdcCfig
->
auxAdcMode
,0,0);

917 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

918 
	`IF_ERR_RETURN
(
bzRA
);

921 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,0x03,18,16);

922 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

923 
	`IF_ERR_RETURN
(
bzRA
);

926 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,
auxAdcCfig
->
numSames
,9,0);

927 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

928 
	`IF_ERR_RETURN
(
bzRA
);

931 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,0x03,26,24);

932 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

933 
	`IF_ERR_RETURN
(
bzRA
);

936 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,0x11003000,26,24);

937 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

938 
	`IF_ERR_RETURN
(
bzRA
);

941 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,
auxAdcCfig
->
auxAdcChlS
,3,0);

942 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

943 
	`IF_ERR_RETURN
(
bzRA
);

946 if(
auxAdcCfig
->
auxAdcMode
 =
BZ_AUXADC_NONPIN_MODE
)

949 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,
auxAdcCfig
->
mgPiod_us
,13,12);

950 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

951 
	`IF_ERR_RETURN
(
bzRA
);

954 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_0
,1,4,4);

955 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

956 
	`IF_ERR_RETURN
(
bzRA
);

957 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_0
,0,4,4);

958 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

959 
	`IF_ERR_RETURN
(
bzRA
);

963 
	`BZ_tGpioSourCl
(
hw_iv
,1,
auxAdcCfig
->
auxadcGpioS
);

964 
	`BZ_tGpioDei
(
hw_iv
,0,
auxAdcCfig
->
auxadcGpioS
);

965 
	`BZ_tGpioFuncS
(
hw_iv
,
BZ_SEL_6
,
auxAdcCfig
->
auxadcGpioS
);

967 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_AUXADC_1
,
auxAdcCfig
->
auxadcGpioS
,23,20);

968 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

969 
	`IF_ERR_RETURN
(
bzRA
);

971  (
ut32_t
)
bzRA
;

972 
	}
}

974 
ut32_t
 
	$BZ_adAuxAdc
(
BzDevi_t
 *
hw_iv
,
BzAuxAdcResu_t
 *
auxAdcCfig
)

976 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

977 
bzHE
 
hus
=
BZHAL_OK
;

978 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

981 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REGOUT_AUXADC_0
,&
auxAdcCfig
->
comeIndit
,16,16);

982 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

983 
	`IF_ERR_RETURN
(
bzRA
);

984 if(
auxAdcCfig
->
comeIndit
){

987 
uiTry
--;

988 }
uiTry
 > 0);

990 if(
uiTry
<=0)

992 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

993  (
ut32_t
)
bzRA
;

996 
hus
 = 
	`BZ_iRdFld
(
hw_iv
,
REGOUT_AUXADC_0
,&
auxAdcCfig
->
auxAdcCodeAvg
,15,0);

997 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_GPIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

998 
	`IF_ERR_RETURN
(
bzRA
);

1000  (
ut32_t
)
bzRA
;

1001 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_hal.c

1 
	~"bz_h.h
"

2 
	~"bz20.h
"

3 
	~"axi.h
"

5 
	~<rg.h
>

6 
	~<dlib.h
>

8 
	~<unid.h
>

9 
	~<f.h
>

10 
	~<sys/iol.h
>

12 
	sBzHHd
{

13 
bzHDevId
 
	mdevid
;

14 
	mi_fe
;

15 
	maxi_fe
;

16 }
	tBzHHd
;

18 
	#BZ20_NAME0
 "/dev/bz20i0"

	)

19 
	#BZ20_NAME1
 "/dev/bz20i1"

	)

20 
	#PLAXI_NAME
 "/dev/axi"

	)

22 
bzHE
 
	$BZHAL_SpiOn
(
bzHDevId
 
devid
, 
bzHHd
 *
hd
)

24 
BzHHd
 *
bzHSpi
 = (BzHHd *)
	`mloc
((BzHalHandle));

26 if(!
bzHSpi
)

27  
BZHAL_SPI_FAIL
;

29 
bzHSpi
->
devid
 = devid;

30 if(
bzHSpi
->
devid
 =
BZHAL_DEVID0
)

31 
bzHSpi
->
i_fe
 = 
	`ݒ
(
BZ20_NAME0
, 
O_RDWR
);

32 if(
bzHSpi
->
devid
 =
BZHAL_DEVID1
)

33 
bzHSpi
->
i_fe
 = 
	`ݒ
(
BZ20_NAME1
, 
O_RDWR
);

35 
	`
(
bzHSpi
);

36  
BZHAL_SPI_FAIL
;

38 
	`iol
(
bzHSpi
->
i_fe
, 
BZ20_PIN_RESET
);

39 
bzHSpi
->
axi_fe
 = 
	`ݒ
(
PLAXI_NAME
, 
O_RDWR
);

41 if(
bzHSpi
->
axi_fe
 < 0)

42 
	`tf
("%s(%d),ݒ %\n", 
__FUNCTION__
, 
__LINE__
, 
PLAXI_NAME
);

46 
ut32_t
 
vue
;

47 
	`iol
(
bzHSpi
->
axi_fe
, 
PLAXI_READ_IO_DIR_PARAM
, &
vue
);

48 
vue
 |= 0x60;

49 
	`iol
(
bzHSpi
->
axi_fe
, 
PLAXI_WRITE_IO_DIR_PARAM
, &
vue
);

52 *
hd
 = 
bzHSpi
;

53  
BZHAL_OK
;

54 
	}
}

56 
bzHE
 
	$BZHAL_SpiClo
(
bzHHd
 
hd
)

58 if(!
hd
)

59  
BZHAL_SPI_FAIL
;

61 
	`o
(
hd
->
i_fe
);

62 
	`o
(
hd
->
axi_fe
);

63 
	`
(
hd
);

65  
BZHAL_OK
;

66 
	}
}

68 
bzHE
 
	$BZHAL_SpiWreReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
 
da
)

70 
bz20_commd
 
commd
;

71 
commd
.
low_addr
 = 
addr
;

72 
commd
.
da
 = data;

73 
	`iol
(
hd
->
i_fe
, 
BZ20_WRITE_REG
, &
commd
);

75  
BZHAL_OK
;

76 
	}
}

78 
bzHE
 
	$BZHAL_SpiRdReg
(
bzHHd
 
hd
, 
ut16_t
 
addr
, 
ut32_t
* 
da
)

80 
bz20_commd
 
commd
;

81 
commd
.
low_addr
 = 
addr
;

82 
commd
.
da
 = 0;

83 
	`iol
(
hd
->
i_fe
, 
BZ20_READ_REG
, &
commd
);

84 *
da
 = 
commd
.data;

86  
BZHAL_OK
;

87 
	}
}

89 
bzHE
 
	$BZHAL_IruOn
(
bzHHd
 
hd
)

91 
	`iol
(
hd
->
i_fe
, 
BZ20_INTERRUPT_ON
);

92  
BZHAL_OK
;

93 
	}
}

95 
bzHE
 
	$BZHAL_TX1CiOn
(
bzHHd
 
hd
)

97 
	`iol
(
hd
->
i_fe
, 
BZ20_TX1_CALI_ON
);

98  
BZHAL_OK
;

99 
	}
}

100 
bzHE
 
	$BZHAL_TX1CiOff
(
bzHHd
 
hd
)

102 
	`iol
(
hd
->
i_fe
, 
BZ20_TX1_CALI_OFF
);

103  
BZHAL_OK
;

104 
	}
}

106 
bzHE
 
	$BZHAL_TX2CiOn
(
bzHHd
 
hd
)

108 
	`iol
(
hd
->
i_fe
, 
BZ20_TX2_CALI_ON
);

109  
BZHAL_OK
;

110 
	}
}

112 
bzHE
 
	$BZHAL_TX2CiOff
(
bzHHd
 
hd
)

114 
	`iol
(
hd
->
i_fe
, 
BZ20_TX2_CALI_OFF
);

115  
BZHAL_OK
;

116 
	}
}

118 
	$BZHAL_MDay
(
ut32_t
 
mcs
)

120 
	`up
(
mcs
 * 1000);

121 
	}
}

123 
	$BZHAL_UDay
(
ut32_t
 
ucs
)

125 
	`up
(1000);

126 
	}
}

128 
bzHE
 
	$BZHAL_SLogLev
(
bzHHd
 
hd
, 
ut16_t
 
hLogLev
)

130  
BZHAL_OK
;

131 
	}
}

133 
bzHE
 
	$BZHAL_WreToLog
(
bzHHd
 
hd
, 
bzLogLev_t
 
logLev
,

134 
ut32_t
 
rCode
, cڡ *
commt
)

136  
BZHAL_OK
;

137 
	}
}

139 
bzHE
 
	$BZHAL_Memy
(* 
d
,*
c
, 
ut32_t
 
n
)

141 
	`memy
(
d
, 
c
, 
n
);

142  
BZHAL_OK
;

143 
	}
}

145 
bzHE
 
	$BZHAL_Tx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

147 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

148 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

150 
	`iol
(
hd
->
i_fe
, 
BZ20_TX1_ENABLE
);

151  
BZHAL_OK
;

153 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

155 
	`iol
(
hd
->
i_fe
, 
BZ20_TX1_DISABLE
);

156  
BZHAL_OK
;

158  
BZHAL_GPIO_FAIL
;

159 
	}
}

161 
bzHE
 
	$BZHAL_Tx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

163 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

164 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

166 
	`iol
(
hd
->
i_fe
, 
BZ20_TX2_ENABLE
);

167  
BZHAL_OK
;

169 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

171 
	`iol
(
hd
->
i_fe
, 
BZ20_TX2_DISABLE
);

172  
BZHAL_OK
;

174  
BZHAL_GPIO_FAIL
;

175 
	}
}

177 
bzHE
 
	$BZHAL_Rx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

179 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

180 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

182 
	`iol
(
hd
->
i_fe
, 
BZ20_RX1_ENABLE
);

183  
BZHAL_OK
;

185 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

187 
	`iol
(
hd
->
i_fe
, 
BZ20_RX1_DISABLE
);

188  
BZHAL_OK
;

190  
BZHAL_GPIO_FAIL
;

191 
	}
}

193 
bzHE
 
	$BZHAL_Rx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

195 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

196 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

198 
	`iol
(
hd
->
i_fe
, 
BZ20_RX2_ENABLE
);

199  
BZHAL_OK
;

201 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

203 
	`iol
(
hd
->
i_fe
, 
BZ20_RX2_DISABLE
);

204  
BZHAL_OK
;

206  
BZHAL_GPIO_FAIL
;

207 
	}
}

209 
bzHE
 
	$BZHAL_ORx1EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

211 
ut32_t
 
vue
;

213 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

215 
	`iol
(
hd
->
axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

216 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

218 
vue
 |= (1 << 21);

219 
	`iol
(
hd
->
axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

220  
BZHAL_OK
;

222 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

224 
vue
 &= (~(1 << 21));

225 
	`iol
(
hd
->
axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

226  
BZHAL_OK
;

228  
BZHAL_GPIO_FAIL
;

229 
	}
}

231 
bzHE
 
	$BZHAL_ORx2EbCl
(
bzHHd
 
hd
, 
BzHChlEbMode
 
mode
)

233 
ut32_t
 
vue
;

235 
	`tf
("%s(%d),vu%d\n", 
__FUNCTION__
, 
__LINE__
, 
mode
);

237 
	`iol
(
hd
->
axi_fe
, 
PLAXI_READ_IOPAD_PARAM
, &
vue
);

238 if(
mode
 =
BZHAL_CHANNEL_ENABLE
)

240 
vue
 |= (1 << 22);

241 
	`iol
(
hd
->
axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

242  
BZHAL_OK
;

244 if(
mode
 =
BZHAL_CHANNEL_DISABLE
)

246 
vue
 &= (~(1 << 22));

247 
	`iol
(
hd
->
axi_fe
, 
PLAXI_WRITE_IOPAD_PARAM
, &
vue
);

248  
BZHAL_OK
;

250  
BZHAL_GPIO_FAIL
;

251 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_init.c

10 
	~"bz_.h
"

11 
	~"bz__h.h
"

12 
	~"bz_r.h
"

13 
	~"bz_riscv.h
"

14 
	~"bz_g_dig.h
"

15 
	~"bz_g_a.h
"

16 
	~"bz_rx.h
"

17 
	~"bz_tx.h
"

20 
ut32_t
 
	$BZ_ݒHw
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
DeviId
)

22 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

23 
bzHE
 
hStus
 = 
BZHAL_OK
;

26 
hStus
=
	`BZ_iOn
(
hw_iv
,
DeviId
);

28 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hStus
,bzRA,
BZ_ERR_INIT_PLAT
);

29 
	`IF_ERR_RETURN
(
bzRA
);

31  (
ut32_t
)
bzRA
;

32 
	}
}

33 
ut32_t
 
	$BZ_oHw
(
BzDevi_t
 *
hw_iv
)

35 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

36 
bzHE
 
hStus
 = 
BZHAL_OK
;

38 
hStus
=
	`BZ_iClo
(
hw_iv
);

39 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hStus
,bzRA,
BZ_ERR_INIT_PLAT
);

40 
	`IF_ERR_RETURN
(
bzRA
);

43  (
ut32_t
)
bzRA
;

44 
	}
}

46 
ut32_t
 
	$BZ_tDevi
(
BzDevi_t
 *
hw_iv
)

48 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

49 
bzHE
 
hus

BZHAL_OK
;

56 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL6
,1,15,15);

57 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

58 
	`IF_ERR_RETURN
(
bzRA
);

60 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL6
,0x0F,31,28);

61 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

62 
	`IF_ERR_RETURN
(
bzRA
);

68 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RFPLL10
,0x0F,3,0);

69 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

70 
	`IF_ERR_RETURN
(
bzRA
);

76 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_AUXPLL10
,0x0F,3,0);

77 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

78 
	`IF_ERR_RETURN
(
bzRA
);

81 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL0
,0,15,15);

82 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

83 
	`IF_ERR_RETURN
(
bzRA
);

86 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL0
,1,15,15);

87 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

88 
	`IF_ERR_RETURN
(
bzRA
);

91 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RFPLL0
,0,15,15);

92 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

93 
	`IF_ERR_RETURN
(
bzRA
);

96 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RFPLL0
,1,15,15);

97 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

98 
	`IF_ERR_RETURN
(
bzRA
);

100 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_AUXPLL0
,0,15,15);

101 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

102 
	`IF_ERR_RETURN
(
bzRA
);

105 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_AUXPLL0
,1,15,15);

106 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

107 
	`IF_ERR_RETURN
(
bzRA
);

110 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL4
,0,21,21);

111 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

112 
	`IF_ERR_RETURN
(
bzRA
);

115 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL4
,1,21,21);

116 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

117 
	`IF_ERR_RETURN
(
bzRA
);

120 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL4
,0,20,20);

121 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

122 
	`IF_ERR_RETURN
(
bzRA
);

125 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_BBPLL4
,1,20,20);

126 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

127 
	`IF_ERR_RETURN
(
bzRA
);

129 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RFPLL11
,1,10,10);

130 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

131 
	`IF_ERR_RETURN
(
bzRA
);

133 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_AUXPLL11
,1,10,10);

134 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

135 
	`IF_ERR_RETURN
(
bzRA
);

137 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_SYNC_0
,1,29,29);

138 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

139 
	`IF_ERR_RETURN
(
bzRA
);

142 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_GC_50
,1,8,8);

143 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

144 
	`IF_ERR_RETURN
(
bzRA
);

148 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RXFE0
,1,16,16);

149 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

150 
	`IF_ERR_RETURN
(
bzRA
);

152 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RXFE0
,0,16,16);

153 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

154 
	`IF_ERR_RETURN
(
bzRA
);

158 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RXFE8
,1,16,16);

159 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

160 
	`IF_ERR_RETURN
(
bzRA
);

162 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_RXFE8
,0,16,16);

163 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

164 
	`IF_ERR_RETURN
(
bzRA
);

166 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_GC_50
,0,8,8);

167 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

168 
	`IF_ERR_RETURN
(
bzRA
);

170 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_0
,0,2,2);

171 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

172 
	`IF_ERR_RETURN
(
bzRA
);

174 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_0
,1,2,2);

175 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

176 
	`IF_ERR_RETURN
(
bzRA
);

178  (
ut32_t
)
bzRA
;

179 
	}
}

181 
ut32_t
 
	$bz_vifyRxProfe
(
BzDevi_t
 *
hw_iv
, 
BzRxProfe_t
 *
rxProfe
, 
ut32_t
 *
rxHsDigClk_kHz
)

183 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

185 *
rxHsDigClk_kHz
 = 0;

190 i((
rxProfe
->
rxOuutRe_kHz
 < 61440) ||

191 (
rxProfe
->
rxOuutRe_kHz
 > 245760))

193  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

194 
BZ_ERR_VERTRXPFILE_RXINPUTRATE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

197 i((
rxProfe
->
rfBdwidth_Hz
 < 50000000) ||

198 (
rxProfe
->
rfBdwidth_Hz
 > 200000000))

200  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

201 
BZ_ERR_VERXPFILE_RFBAND
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

204 i((
rxProfe
->
rhb1Decimi
 != 1) &&

205 (
rxProfe
->
rhb1Decimi
 != 2))

207  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

208 
BZ_ERR_VERRXPFILE_THB1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

210 i((
rxProfe
->
rxFDecimi
 != 1) &&

211 (
rxProfe
->
rxFDecimi
 != 2) &&

212 (
rxProfe
->
rxFDecimi
 != 4))

214  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

215 
BZ_ERR_VERRXPFILE_RXFIR1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

218 i((
rxProfe
->
rxF
.
cfs
 =
NULL
) &&

219 (
rxProfe
->
rxFDecimi
 != 1))

221  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

222 
BZ_ERR_VERRXPFILE_RXFIR1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

225 *
rxHsDigClk_kHz
 = ( 
rxProfe
->
rxOuutRe_kHz
 *xProfe->
rxFDecimi
 *

226 
rxProfe
->
rhb1Decimi
);

228  (
ut32_t
)
bzRA
;

229 
	}
}

231 
bzHE
 
	$bz_vifyObsRxofe
(
BzDevi_t
 *
hw_iv
,
BzORxProfe_t
 *
xProfe
, 
ut32_t
 *
xHsDigClk_kHz
)

233 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

234 *
xHsDigClk_kHz
 = 0;

239 i((
xProfe
->
xOuutRe_kHz
 < 245760) ||

240 (
xProfe
->
xOuutRe_kHz
 > 491520))

242  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

243 
BZ_ERR_VERTORXPFILE_RXINPUTRATE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

246 i((
xProfe
->
rfBdwidth_Hz
 < 50000000) ||

247 (
xProfe
->
rfBdwidth_Hz
 > 450000000))

249  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

250 
BZ_ERR_VEORXPFILE_RFBAND
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

253 i((
xProfe
->
xFDecimi
 != 1) &&

254 (
xProfe
->
xFDecimi
 != 2))

256  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

257 
BZ_ERR_VERORXPFILE_FIR
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

260 i((
xProfe
->
rxF
.
cfs
 =
NULL
) &&

261 (
xProfe
->
xFDecimi
 != 1))

263  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

264 
BZ_ERR_VERORXPFILE_FIR1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

267 *
xHsDigClk_kHz
 = (
xProfe
->
xOuutRe_kHz
 * orxProfe->
xFDecimi
);

269  (
ut32_t
)
bzRA
;

270 
	}
}

275 
ut32_t
 
	$bz_vifyTxProfe
(
BzDevi_t
 *
hw_iv
,
BzTxProfe_t
 *
txProfe
,

276 
ut32_t
 *
txHsDigClk_kHz
)

278 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

280 *
txHsDigClk_kHz
 = 0;

285 i((
txProfe
->
txIutRe_kHz
 < 122880) ||

286 (
txProfe
->
txIutRe_kHz
 > 491520))

288  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

289 
BZ_ERR_VERTXPFILE_TXINPUTRATE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

292 i((
txProfe
->
rfBdwidth_Hz
 < 50000000) ||

293 (
txProfe
->
rfBdwidth_Hz
 > 450000000))

295  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

296 
BZ_ERR_VERTXPFILE_RFBAND
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

299 i((
txProfe
->
thb1Ipީi
 != 1) &&

300 (
txProfe
->
thb1Ipީi
 != 2))

302  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

303 
BZ_ERR_VERTXPFILE_THB1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

306 i((
txProfe
->
thb2Ipީi
 != 1) &&

307 (
txProfe
->
thb2Ipީi
 != 2))

309  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

310 
BZ_ERR_VERTXPFILE_THB2
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

313 i((
txProfe
->
thb3Ipީi
 != 1) &&

314 (
txProfe
->
thb3Ipީi
 != 2))

316  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

317 
BZ_ERR_VERTXPFILE_THB3
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

320 i((
txProfe
->
txFIpީi
 != 1) &&

321 (
txProfe
->
txFIpީi
 != 2) &&

322 (
txProfe
->
txFIpީi
 != 4))

324  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

325 
BZ_ERR_VERTXPFILE_TXFIR
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

329 i((
txProfe
->
txF
.
cfs
 =
NULL
) &&

330 (
txProfe
->
txFIpީi
 != 1))

332  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

333 
BZ_ERR_VERTXPFILE_TXFIR1
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

336 *
txHsDigClk_kHz
 = (
txProfe
->
txIutRe_kHz
 *xProfe->
txFIpީi
 *

337 
txProfe
->
thb1Ipީi
 *xProfe->
thb2Ipީi
 *

338 
txProfe
->
thb3Ipީi
);

340  (
ut32_t
)
bzRA
;

341 
	}
}

342 
ut32_t
 
	$BZ_vifyProfes
(
BzDevi_t
 *
hw_iv
, 
BzIn_t
 *

)

344 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

345 
ut32_t
 
rxHsDigClk_kHz
 = 0;

346 
ut32_t
 
xHsDigClk_kHz
 = 0;

347 
ut32_t
 
txHsDigClk_kHz
 = 0;

348 
BzRxProfe_t
 *
rxProfe
 = 
NULL
;

349 
BzTxProfe_t
 *
txProfe
 = 
NULL
;

350 
BzORxProfe_t
 *
xProfe
 = 
NULL
;

352 if(

==
NULL
){

353  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

354 
BZ_ERR_DEVICE_INIT_NULL_PARAM
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

357 
hw_iv
->
BzS
.
gaIndexes
.
tx1MaxGaIndex
 = 

->
tx
.
txGaCl
.tx1MaxGainIndex;

358 
hw_iv
->
BzS
.
gaIndexes
.
tx1MGaIndex
 = 

->
tx
.
txGaCl
.tx1MinGainIndex;

359 
hw_iv
->
BzS
.
gaIndexes
.
tx2MaxGaIndex
 = 

->
tx
.
txGaCl
.tx2MaxGainIndex;

360 
hw_iv
->
BzS
.
gaIndexes
.
tx2MGaIndex
 = 

->
tx
.
txGaCl
.tx2MinGainIndex;

362 
hw_iv
->
BzS
.
gaIndexes
.
rx1MaxGaIndex
 = 

->
rx
.
rxGaCl
.rx1MaxGainIndex;

363 
hw_iv
->
BzS
.
gaIndexes
.
rx1MGaIndex
 = 

->
rx
.
rxGaCl
.rx1MinGainIndex;

364 
hw_iv
->
BzS
.
gaIndexes
.
rx2MaxGaIndex
 = 

->
rx
.
rxGaCl
.rx2MaxGainIndex;

365 
hw_iv
->
BzS
.
gaIndexes
.
rx2MGaIndex
 = 

->
rx
.
rxGaCl
.rx2MinGainIndex;

367 
hw_iv
->
BzS
.
gaIndexes
.
x1MaxGaIndex
 = 

->
obsRx
.
xGaCl
.orx1MaxGainIndex;

368 
hw_iv
->
BzS
.
gaIndexes
.
x1MGaIndex
 = 

->
obsRx
.
xGaCl
.orx1MinGainIndex;

369 
hw_iv
->
BzS
.
gaIndexes
.
x2MaxGaIndex
 = 

->
obsRx
.
xGaCl
.orx2MaxGainIndex;

370 
hw_iv
->
BzS
.
gaIndexes
.
x2MGaIndex
 = 

->
obsRx
.
xGaCl
.orx2MinGainIndex;

372 
hw_iv
->
BzS
.
ofesVid
 = 0;

376 
txProfe
 = &

->
tx
.txProfile;

377 
bzRA
 = 
	`bz_vifyTxProfe
(
hw_iv
, 
txProfe
, &
txHsDigClk_kHz
);

381 
rxProfe
 = &

->
rx
.rxProfile;

382 
bzRA
 = 
	`bz_vifyRxProfe
(
hw_iv
, 
rxProfe
, &
rxHsDigClk_kHz
);

386 
xProfe
 = &

->
obsRx
.orxProfile;

387 
bzRA
 = 
	`bz_vifyObsRxofe
(
hw_iv
, 
xProfe
, &
xHsDigClk_kHz
);

388 
	`IF_ERR_RETURN
(
bzRA
);

390 i((

->
ocks
.
rfPPhaSyncMode
 !
BZ_RFPLLMCS_NOSYNC
)

391 && (

->
ocks
.
rfPPhaSyncMode
 !
BZ_RFPLLMCS_INIT_AND_SYNC
)

392 && (

->
ocks
.
rfPPhaSyncMode
 !
BZ_RFPLLMCS_INIT_AND_1TRACK
)

393 && (

->
ocks
.
rfPPhaSyncMode
 !
BZ_RFPLLMCS_INIT_AND_CONTTRACK
))

395  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_INIT
,

396 
BZ_ERR_CLOCK_RFPLL_PHASE
,
bzRA
,
BZ_ERR_RESET_SPI
);

399 i(
txHsDigClk_kHz
 > 0)

401 
hw_iv
->
BzS
.
ofesVid
|
TX_PROFILE_VALID
;

404 i(
rxHsDigClk_kHz
 > 0)

406 
hw_iv
->
BzS
.
ofesVid
 |
RX_PROFILE_VALID
;

409 i(
xHsDigClk_kHz
 > 0)

411 
hw_iv
->
BzS
.
ofesVid
 |
ORX_PROFILE_VALID
;

414  (
ut32_t
)
bzRA
;

415 
	}
}

418 
ut32_t
 
	$BZ_ogmF
(
BzDevi_t
 *
hw_iv
,
BzF_t
 *
fr
, 
FS
)

420 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

421 
ut32_t
 
i
 = 0,
j
=0, 
cuos
 = 0;

422 
n
;

423 
BzDa
 
DaInfo
 ={0};

424 
BzMem
 *
pMsg
=
NULL
;

426 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

428 
DaInfo
.
CmdTy
=0xff;

429 
pMsg
->
Cmd
=
BZ_WRITE_MEM_OPCODE
;

430 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_FILTER_MSGID
;

432 
i
 = 0; i < 4; i++)

434 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
fr
->
ga_dB
) >> (i * 8)) & 0x000000FF);

436 
i
 = 4; i < 8; i++)

438 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
fr
->
numFCfs
) >> ((i - 4) * 8)) & 0x000000FF);

442 if(
FS
 =
BZ_TX_FILTER
)

444 
pMsg
->
Msg
.
offt
=0;

445 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_TXFILTER_MSGLEN
;

446 
n
 = 
HI_MSG_TO_TXFILTER_COEFS_LEN
;

448 if(
FS
 =
BZ_RX_FILTER
)

450 
pMsg
->
Msg
.
offt
=
HI_MSG_TO_TXFILTER_MSGLEN
;

451 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_RX_ORXFILTER_MSGLEN
;

452 
n
 = 
HI_MSG_TO_RX_ORX_FILTER_COEFS_LEN
;

454 
pMsg
->
Msg
.
offt
=
HI_MSG_TO_TXFILTER_MSGLEN
+
HI_MSG_TO_RX_ORXFILTER_MSGLEN
;

455 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_RX_ORXFILTER_MSGLEN
;

456 
n
 = 
HI_MSG_TO_RX_ORX_FILTER_COEFS_LEN
;

458 
cuos
 = 
i
;

459 
i
 = 0; i < 
n
; i++)

461 
j
 = 0; j < 2; j++)

463 
pMsg
->
Msg
.
da
[
cuos
] = (
ut8_t
)(((
fr
->
cfs
[
i
]>> (
j
 * 8)) & 0x000000FF);

464 
cuos
++;

467 
bzRA
 = 
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

468 
	`IF_ERR_RETURN
(
bzRA
);

470  (
ut32_t
)
bzRA
;

471 
	}
}

473 
ut32_t
 
	$BZ_lize
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
)

475 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

476 
bzHE
 
hus
 = 
BZHAL_OK
;

478 
bzInfo_t
 *
pSInfo
 = &
hw_iv
->
BzS
;

479 
pSInfo
->
devS
=
BZ_STATE_INITIALIZED
;

481 
bzRA
=
	`BZ_vifyProfes
(
hw_iv
,
In
);

482 
	`IF_ERR_RETURN
(
bzRA
);

485 i(
pSInfo
->
ofesVid
 & 
TX_PROFILE_VALID
){

486 i(
In
->
tx
.
txProfe
.
txF
.
numFCfs
 > 0)

488 
bzRA
 =
	`BZ_ogmF
(
hw_iv
,&
In
->
tx
.
txProfe
.
txF
,
BZ_TX_FILTER
);

489 
	`IF_ERR_RETURN
(
bzRA
);

491 
bzRA
 = 
	`BZ_tTxMuGa
(
hw_iv
, 
BZ_TX1
, 
In
->
tx
.
txGaCl
.
tx1GaIndex
);

492 
	`IF_ERR_RETURN
(
bzRA
);

494 
bzRA
 = 
	`BZ_tTxMuGa
(
hw_iv
, 
BZ_TX2
, 
In
->
tx
.
txGaCl
.
tx2GaIndex
);

495 
	`IF_ERR_RETURN
(
bzRA
);

497 
bzRA
=
	`BZ_tTxGaCڌMode
(
hw_iv
,
In
->
tx
.
txGaCl
.
txgaMode
);

498 
	`IF_ERR_RETURN
(
bzRA
);

501 i(
pSInfo
->
ofesVid
 & 
RX_PROFILE_VALID
)

503 i(
In
->
rx
.
rxProfe
.
rxF
.
numFCfs
 > 0)

505 
bzRA
 = 
	`BZ_ogmF
(
hw_iv
,&
In
->
rx
.
rxProfe
.
rxF
,
BZ_RX_FILTER
);

506 
	`IF_ERR_RETURN
(
bzRA
);

508 
bzRA
 =
	`BZ_tRxMuGa
(
hw_iv
, 
BZ_RX1
, 
In
->
rx
.
rxGaCl
.
rx1GaIndex
);

509 
	`IF_ERR_RETURN
(
bzRA
);

511 
bzRA
 = 
	`BZ_tRxMuGa
(
hw_iv
, 
BZ_RX2
, 
In
->
rx
.
rxGaCl
.
rx2GaIndex
);

512 
	`IF_ERR_RETURN
(
bzRA
);

514 
bzRA
=
	`BZ_tRxGaCڌMode
(
hw_iv
,
In
->
rx
.
rxGaCl
.
rxgaMode
,In->rx.rxGaCl.
rxmgcMode
);

515 
	`IF_ERR_RETURN
(
bzRA
);

519 i(
pSInfo
->
ofesVid
 & 
ORX_PROFILE_VALID
)

521 i(
In
->
obsRx
.
xProfe
.
rxF
.
numFCfs
 > 0)

524 
bzRA
 = 
	`BZ_ogmF
(
hw_iv
,&
In
->
obsRx
.
xProfe
.
rxF
,
BZ_ORX_FILTER
);

525 
	`IF_ERR_RETURN
(
bzRA
);

527 
bzRA
 = 
	`BZ_tObsRxMuGa
(
hw_iv
, 
BZ_ORX1
, 
In
->
obsRx
.
xGaCl
.
x1GaIndex
);

528 
	`IF_ERR_RETURN
(
bzRA
);

530 
bzRA
 = 
	`BZ_tObsRxMuGa
(
hw_iv
, 
BZ_ORX2
, 
In
->
obsRx
.
xGaCl
.
x2GaIndex
);

531 
	`IF_ERR_RETURN
(
bzRA
);

533 
bzRA
=
	`BZ_tObsRxGaCڌMode
(
hw_iv
,
In
->
obsRx
.
xGaCl
.
xgaMode
,In->obsRx.xGaCl.
xmgcMode
);

534 
	`IF_ERR_RETURN
(
bzRA
);

537 
pSInfo
->
ocks
.
deviClock_kHz
=
In
->clocks.deviceClock_kHz;

538 
pSInfo
->
sutChls
 = (
In
->
tx
.
txChls
 & 3);

539 
pSInfo
->
sutChls
 |((
In
->
rx
.
rxChls
 & 3) << 2);

540 
pSInfo
->
sutChls
 |((
In
->
obsRx
.
obsRxChlsEb
 & 3) << 4);

541 
pSInfo
->
txIutRe_kHz
 = 
In
->
tx
.
txProfe
.txInputRate_kHz;

543 
pSInfo
->
rxBdwidth_Hz
 = 
In
->
rx
.
rxProfe
.
rfBdwidth_Hz
;

544 
pSInfo
->
txBdwidth_Hz
 = 
In
->
tx
.
txProfe
.
rfBdwidth_Hz
;

545 
pSInfo
->
xBdwidth_Hz
 = 
In
->
obsRx
.
xProfe
.
rfBdwidth_Hz
;

546  (
ut32_t
)
hus
;

547 
	}
}

549 
ut32_t
 
	$BZ_abTckgCs
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
abMask
)

551 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

552  (
ut32_t
)
bzRA
;

553 
	}
}

555 
ut32_t
 
	$BZ_gApiVsi
(
ut32_t
 
ApiV
)

557 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

558  (
ut32_t
)
bzRA
;

559 
	}
}

560 
ut32_t
 
	$BZ_gDeviRev
(
ut32_t
 
DevV
)

562 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

563  (
ut32_t
)
bzRA
;

564 
	}
}

565 
ut32_t
 
	$BZ_gProduId
(
ut32_t
 
ProId
)

567 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

568  (
ut32_t
)
bzRA
;

569 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_jesd204b.c

10 
	~"bz_jesd204b.h
"

11 
	~"bz__h.h
"

12 
	~"bz_riscv.h
"

13 
	~"bz_g_dig.h
"

14 
	~"bz_g_a.h
"

15 
	~"bz_r.h
"

17 
	~<rg.h
>

20 
ut32_t
 
	$BZ_wreJes204bCfig
(
BzDevi_t
 *
iv
,
BzIn_t
 *
In
)

22 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

24 
BzDa
 
DaInfo
;

25 
bzHE
 
hE
=
BZHAL_OK
;

26 
BzMem
 *
pMsg
;

27 
BzJesdStgs_t
 
jesd204Cfig
;

28 
BzJesdStgs_t
 *
pjesd204Cfig
 = &
jesd204Cfig
;

30 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

31 
	`memt
(&
DaInfo
,0,(DataInfo));

33 
DaInfo
.
CmdTy
=0xff;

34 
pMsg
->
Cmd
=
BZ_WRITE_MEM_OPCODE
;

35 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_J204B_MSGID
;

36 
pMsg
->
Msg
.
Lth
=(
BzJesdStgs_t
);

37 
pMsg
->
Msg
.
addr
=
J204B_MSG_ADDR
;

39 if(
CLK_TX_RX_500M
 =
In
->
tx
.
txProfe
.
txIutRe_kHz
)

41 
hE
=
	`BZ_iWreFld
(
iv
,
REG_J_SEL_4
,0x02,3,2);

42 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

43 
	`IF_ERR_RETURN
(
bzRA
);

47 
hE
=
	`BZ_iWreFld
(
iv
,
REG_J_SEL_4
,0x00,3,2);

48 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

49 
	`IF_ERR_RETURN
(
bzRA
);

53 if(
CLK_TX_RX_500M
 =
In
->
obsRx
.
xProfe
.
xOuutRe_kHz
)

55 
hE
=
	`BZ_iWreFld
(
iv
,
REG_J_SEL_4
,0x02,11,10);

56 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

57 
	`IF_ERR_RETURN
(
bzRA
);

61 
hE
=
	`BZ_iWreFld
(
iv
,
REG_J_SEL_4
,0x00,11,10);

62 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

63 
	`IF_ERR_RETURN
(
bzRA
);

66 
pjesd204Cfig
 = (
BzJesdStgs_t
 *)
pMsg
->
Msg
.
da
;

67 
	`memy
(
pjesd204Cfig
, &
In
->
jesd204Stgs
, (
BzJesdStgs_t
));

69 
bzRA
=
	`BZ_ndRiscvCmd
(
iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

70  (
ut32_t
)
bzRA
;

71 
	}
}

73 
ut32_t
 
	$BZ_waJes204bCfigDe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
timeout
)

75 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

76 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

79 
uiTry
 > 0){

80 
	`BZ_mday
(
timeout
);

81 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

82 
	`IF_ERR_RETURN
(
bzRA
);

83 if(
hw_iv
->
j204b_de
==1){

84 
	`BZ_rStus
(
hw_iv
);

85 
hw_iv
->
j204b_de
=0;

88 
uiTry
--;

90 if(
uiTry
 <= 0){

91 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

94  (
ut32_t
)
bzRA
;

95 
	}
}

97 
ut32_t
 
	$BZ_Jes204bSyefCڌ
(
BzDevi_t
 *
iv
, 
BzJes204bSyefCڌMode
 
Mode
)

99 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

100 
bzHE
 
hE
=
BZHAL_OK
;

102 
Mode
)

104 
BZ_JES204B_SYSREF_ON
:

105 
hE
=
	`BZ_iWreFld
(
iv
, 
REG_SYSREF0
,0x00,15,15);

106 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

107 
	`IF_ERR_RETURN
(
bzRA
);

109 
BZ_JES204B_SYSREF_OFF
:

110 
hE
=
	`BZ_iWreFld
(
iv
, 
REG_SYSREF0
,0x01,15,15);

111 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_JES204B
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

112 
	`IF_ERR_RETURN
(
bzRA
);

118  (
ut32_t
)
bzRA
;

119 
	}
}

122 
ut32_t
 
	$BZ_Prbs7Check
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
LeId
)

124 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

125 
bzHE
 
hStus
=
BZHAL_OK
;

126 
ut32_t
 
RxLeRdy
=0;

127 
ut32_t
 
CheckResu
=0;

129 
LeId
)

132 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX00
,&
RxLeRdy
,12,12);

133 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

134 
	`IF_ERR_RETURN
(
bzRA
);

136 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_J204BRX03
,1,8,8);

137 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

138 
	`IF_ERR_RETURN
(
bzRA
);

140 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX00
,&
CheckResu
,14,14);

141 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

142 
	`IF_ERR_RETURN
(
bzRA
);

145 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX00
,&
RxLeRdy
,28,28);

146 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

147 
	`IF_ERR_RETURN
(
bzRA
);

149 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_J204BRX10
,1,8,8);

150 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

151 
	`IF_ERR_RETURN
(
bzRA
);

153 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX00
,&
CheckResu
,30,30);

154 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

155 
	`IF_ERR_RETURN
(
bzRA
);

158 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX01
,&
RxLeRdy
,12,12);

159 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

160 
	`IF_ERR_RETURN
(
bzRA
);

162 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_J204BRX17
,1,8,8);

163 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

164 
	`IF_ERR_RETURN
(
bzRA
);

166 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX01
,&
CheckResu
,14,14);

167 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

168 
	`IF_ERR_RETURN
(
bzRA
);

171 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX01
,&
RxLeRdy
,28,28);

172 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

173 
	`IF_ERR_RETURN
(
bzRA
);

175 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_J204BRX24
,1,8,8);

176 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

177 
	`IF_ERR_RETURN
(
bzRA
);

179 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX01
,&
CheckResu
,30,30);

180 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

181 
	`IF_ERR_RETURN
(
bzRA
);

187 if(
RxLeRdy
!=1){

188 
	`BZHAL_Prtf
("LId %d in Rdy\n",
LeId
);

190 if(
CheckResu
==1){

191 
	`BZHAL_Prtf
("LId %drbs7 check ok\n",
LeId
);

193 
	`BZHAL_Prtf
("LId %drbs7 check Fa\n",
LeId
);

195  (
ut32_t
)
bzRA
;

196 
	}
}

199 
ut32_t
 
	$BZ_iGJesdDebugDa
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
addr
, ut32_
me_pot
, ut32_
cou
,ut32_
me_
)

201 
BzRecovyAis_t
 
bzRA
 = 
BZ_NO_ACTION
;

202 
bzHE
 
hStus
 = 
BZHAL_OK
;

203 
ut32_t
 
debug_da
 = 0;

206 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_EXT_INTR_ENA
,0,18,16);

207 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

208 
	`IF_ERR_RETURN
(
bzRA
);

211 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

212 
	`IF_ERR_RETURN
(
bzRA
);

214 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_0
,1,17,17);

215 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

216 
	`IF_ERR_RETURN
(
bzRA
);

218 if(
me_
==1){

219 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,1,18,17);

220 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

221 
	`IF_ERR_RETURN
(
bzRA
);

223 if(
me_
==2){

224 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,2,18,17);

225 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

226 
	`IF_ERR_RETURN
(
bzRA
);

230 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_PC_BASE_ADDR
,0,31,31);

231 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

232 
	`IF_ERR_RETURN
(
bzRA
);

234 if(
me_pot
 != 32)

235 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
me_pot
,31,27);

238 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,0,31,27);

239 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,1,23,23);

241 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

242 
	`IF_ERR_RETURN
(
bzRA
);

245 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_PC_COUNT
,
cou
);

246 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

247 
	`IF_ERR_RETURN
(
bzRA
);

250 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_PC_BASE_ADDR
,
addr
,28,0);

251 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

252 
	`IF_ERR_RETURN
(
bzRA
);

255 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

256 
	`IF_ERR_RETURN
(
bzRA
);

259 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_PC_BASE_ADDR
,1,31,31);

260 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

261 
	`IF_ERR_RETURN
(
bzRA
);

264 
ut32_t
 
i
;

265 
i
 = 0; i < 
cou
; i += 4)

267 
bzRA
=
	`BZ_iRdMem
(
hw_iv
, 
addr
, &
debug_da
);

268 
	`BZHAL_Prtf
("0x%x=0x%08xx\n", 
addr
, 
debug_da
);

269 
addr
 += 4;

273 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_0
,0,17,17);

274 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

275 
	`IF_ERR_RETURN
(
bzRA
);

277 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_EXT_INTR_ENA
,0x7,18,16);

278 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

279 
	`IF_ERR_RETURN
(
bzRA
);

281  (
ut32_t
)
bzRA
;

282 
	}
}

283 
ut32_t
 
	$BZ_abFmLk
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
amS
,ut32_
ab
)

285 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

286 
BzDa
 
DaInfo
;

287 
BzCmdTx
 *
pMsg
=
NULL
;

289 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

290 
pMsg
=&
DaInfo
.
u
.
Tx
;

291 
DaInfo
.
CmdTy
=0xff;

292 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

295 i((
amS
 !
BZ_FRAMER_A
&& (amS !
BZ_FRAMER_B
&& (amS !
BZ_FRAMER_A_AND_B
))

297  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_JES204B
,

298 
BZ_ERR_VERTORXPFILE_RXINPUTRATE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

301 i((
amS
 =
BZ_FRAMER_A
) ||

302 (
amS
 =
BZ_FRAMER_A_AND_B
))

304 
pMsg
->
TxDa
.
vue
=(
HI_ENABLE_FRAMER_A
|(
ab
<<16));

307 i((
amS
 =
BZ_FRAMER_B
) ||

308 (
amS
 =
BZ_FRAMER_A_AND_B
))

310 
pMsg
->
TxDa
.
vue
=(
HI_ENABLE_FRAMER_B
|(
ab
<<16));

313 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

314 
	`IF_ERR_RETURN
(
bzRA
);

316  (
ut32_t
)
bzRA
;

317 
	}
}

318 
ut32_t
 
	$BZ_abDeamLk
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
deamS
,ut32_
ab
)

320 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

321 
BzDa
 
DaInfo
;

322 
BzCmdTx
 *
pMsg
=
NULL
;

324 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

325 
pMsg
=&
DaInfo
.
u
.
Tx
;

326 
DaInfo
.
CmdTy
=0xff;

327 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

328 
pMsg
->
TxDa
.
vue
=(
HI_ENABLE_DFRAMER
|(
ab
<<16));

330 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

331 
	`IF_ERR_RETURN
(
bzRA
);

333  (
ut32_t
)
bzRA
;

334 
	}
}

336 
ut32_t
 
	$BZ_abSysRefToFm
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
)

338 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

339 
BzDa
 
DaInfo
;

340 
BzCmdTx
 *
pMsg
=
NULL
;

342 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

343 
pMsg
=&
DaInfo
.
u
.
Tx
;

344 
DaInfo
.
CmdTy
=0xff;

345 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

346 
pMsg
->
TxDa
.
vue
=
ENABLE_SYSREF_INIT
;

347 if(
In
->
ocks
.
rfPPhaSyncMode
){

348 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

349 
	`IF_ERR_RETURN
(
bzRA
);

351  (
ut32_t
)
bzRA
;

352 
	}
}

353 
ut32_t
 
	$BZ_gSyncStus
(
BzDevi_t
 * 
hw_iv
,
ut32_t
 *
TyStus
)

356 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

357 
BzDa
 
DaInfo
;

358 
BzMem
 *
pMsg
 = 
NULL
;

359 
og_s
 *
og
 = 
NULL
;

361 
ut32_t
 
ogC
=0;

362 
ut32_t
 
addr
=0;

363 
bzHE
 
hStus
 = 
BZHAL_OK
;

364 
ut32_t
 
DeFmStus
=0;

365 
ut32_t
 
FmAStus
=0;

366 
ut32_t
 
FmBStus
=0;

367 
ut32_t
 
RegDa
=0;

369 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

370 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

371 
DaInfo
.
CmdTy
=0xff;

373 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

374 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_CALSTATUS_MSGID
;

375 
pMsg
->
Msg
.
Lth
=(
CALIBRITION_SRAM_LEN
*4);

376 
pMsg
->
Msg
.
addr
=
CALIBRITION_SRAM_ADDR
;

377 *
TyStus
 = 0;

378 
	`BZ_iRdFld
(
hw_iv
,
REGOUT_J204BRX00
,&
RegDa
,31,0);

381 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_EXT_INTR_ENA
,0,19,19);

382 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

383 
	`IF_ERR_RETURN
(
bzRA
);

385 
addr
=(
CALIBRITION_SRAM_ADDR
+12);

386 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

388 if(
bzRA
!=
BZ_NO_ACTION
){

389  
BZ_ERR_CHECK_PARAM
;

392 
og
 = (
og_s
 *)(
pMsg
->
Msg
.
da
);

393 
ogC
=0;elogCnt<1024;elogCnt++)

397 i(
og
->
e_id
[
ogC
].
id
 == 0x82){

398 if((
og
->
e_id
[
ogC
].
da
)==0xA){

399 
DeFmStus
++;

402 i(
og
->
e_id
[
ogC
].
id
 == 0x83){

403 if((
og
->
e_id
[
ogC
].
da
)==0xA){

404 
FmAStus
++;

407 i(
og
->
e_id
[
ogC
].
id
 == 0x84){

408 if((
og
->
e_id
[
ogC
].
da
)==0xA){

409 
FmBStus
++;

414 
bzRA
=
	`BZ_iWreMem
(
hw_iv
,(
addr
+
ogC
*8),0x0);

415 
	`IF_ERR_RETURN
(
bzRA
);

417 if((
DeFmStus
>3)||(0x03 !(
RegDa
&0x03))){

418 *
TyStus
=0x1;

420 if((
FmAStus
>3)||(0x04 !(
RegDa
&0x04))){

421 *
TyStus
|=0x10;

423 if((
FmBStus
>3)||(0x08 !(
RegDa
&0x08))){

424 *
TyStus
|=0x100;

427 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_EXT_INTR_ENA
,1,19,19);

428 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

429 
	`IF_ERR_RETURN
(
bzRA
);

431  
bzRA
;

432 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_otp.c

10 
	~"bz_p.h
"

11 
	~"bz__h.h
"

12 
	~"bz_r.h
"

13 
	~"bz_riscv_tys.h
"

16 
ut32_t
 
	$BZ_ORd
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
OAddr
,ut32_*
Da
)

18 
ut32_t
 
OCmd
=0;

19 
ut32_t
 
us
=0;

20 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

21 
bzHE
 
hStus
 = 
BZHAL_OK
;

22 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

25 
OCmd
|=((
OAddr
&0x3FF)<<8);

33 
OCmd
|=(
CMD_VALID
<<3);

35 
OCmd
|=(
BZ_READ_MODE
<<0);

38 
uiTry
 > 0){

39 
hStus
 = 
	`BZ_iRdReg
(
hw_iv
,
BZ_REG_OTPOUT_STA_ADDR
,&
us
);

40 
bzRA
 = 
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_OTP
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

41 
	`IF_ERR_RETURN
(
bzRA
);

42 if((
us
&0x40)!=0x40){

45 
	`BZHAL_Prtf
("us=%x\n",
us
);

46 
uiTry
--;

48 if(
uiTry
 <= 0){

49 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

51 
hStus
 = 
	`BZ_iWreReg
(
hw_iv
,
BZ_REG_OTPIN_CMD_ADDR
,
OCmd
);

52 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_OTP
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

53 
	`IF_ERR_RETURN
(
bzRA
);

55 
hStus
 = 
	`BZ_iRdReg
(
hw_iv
,
BZ_REG_OTPOUT_DATA_ADDR
,
Da
);

56 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_OTP
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

57 
	`IF_ERR_RETURN
(
bzRA
);

60 
	}
}

61 
ut32_t
 
	$BZ_OWre
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
OAddr
,ut32_
Da
)

63 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

64 
bzHE
 
hStus
 = 
BZHAL_OK
;

65 
ut32_t
 
OCmd
=0;

68 
OCmd
|=((
OAddr
&0x3FF)<<8);

76 
OCmd
|=(
CMD_VALID
<<3);

78 
OCmd
|=(
BZ_PROG_MODE
<<0);

81 
hStus
 = 
	`BZ_iWreReg
(
hw_iv
,
BZ_REG_OTPIN_DATA_ADDR
,
Da
);

82 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_OTP
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

83 
	`IF_ERR_RETURN
(
bzRA
);

85 
hStus
 = 
	`BZ_iWreReg
(
hw_iv
,
BZ_REG_OTPIN_CMD_ADDR
,
OCmd
);

86 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_OTP
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

87 
	`IF_ERR_RETURN
(
bzRA
);

89 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_plat_hal.c

10 
	~"bz__h.h
"

11 
	~"bz_h.h
"

12 
	~<rg.h
>

14 
bzHE
 
	$BZ_iOn
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
DeviId
)

16 
bzHE
 
hStus
 = 
BZHAL_OK
;

17 
bzHHd
 
SpiHd
=
NULL
;

19 
	`BZHAL_SpiOn
(
DeviId
,&
SpiHd
);

20 
hw_iv
->
devHInfo
=(*)
SpiHd
;

21 if(
hw_iv
->
devHInfo
==
NULL
)

23 
	`B20_DEBUGF
(
DBG_LEVEL_SERIOUS
,"hw_priv->devHalInfo is NULL\n");

25  
hStus
;

26 
	}
}

27 
bzHE
 
	$BZ_iClo
(
BzDevi_t
 *
hw_iv
)

29 
bzHE
 
hStus
 = 
BZHAL_OK
;

31 
hStus
 =
	`BZHAL_SpiClo
(
hw_iv
->
devHInfo
);

32  
hStus
;

33 
	}
}

34 
bzHE
 
	$BZ_iRdReg
(
BzDevi_t
 *
hw_iv
, 
ut16_t
 
addr
, 
ut32_t
 *
da
)

36 
bzHE
 
hStus
 = 
BZHAL_OK
;

39 
hStus
=
	`BZHAL_SpiRdReg
(
hw_iv
->
devHInfo
,
addr
, 
da
);

40 
	`BZHAL_UDay
(20);

41  
hStus
;

42 
	}
}

43 
bzHE
 
	$BZ_iWreReg
(
BzDevi_t
 *
hw_iv
, 
ut16_t
 
addr
,
ut32_t
 
da
)

45 
bzHE
 
hStus
 = 
BZHAL_OK
;

48 
hStus
=
	`BZHAL_SpiWreReg
(
hw_iv
->
devHInfo
,
addr
, 
da
);

49  
hStus
;

50 
	}
}

51 
bzHE
 
	$BZ_iRdFld
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
,
ut32_t
 *
fldV
,
ut8_t
 
dB
,ut8_
tB
)

53 
bzHE
 
hStus
 = 
BZHAL_OK
;

54 
ut32_t
 
gda
=0;

55 
ut32_t
 
gmask
=0;

57 
gmask
 = ~((1<<
tB
) -1);

58 
gmask
 &((1<<
dB
) -1)|(1<<endBit);

59 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
addr
,&
gda
);

60 
gda
 &
gmask
;

61 
gda
 >>
tB
;

62 *
fldV
 = 
gda
;

63  
hStus
;

64 
	}
}

65 
bzHE
 
	$BZ_iWreFld
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
,
ut32_t
 
fldV
,
ut8_t
 
dB
,ut8_
tB
)

67 
bzHE
 
hStus
 = 
BZHAL_OK
;

68 
ut32_t
 
gda
=0;

69 
ut32_t
 
gmask
=0;

71 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
addr
,&
gda
);

73 
gmask
 = ~((1<<
tB
) -1);

74 
gmask
 &((1<<
dB
) -1)|(1<<endBit);

75 
gda
 &~
gmask
;

76 
gda
 |(
fldV
 <<
tB
)&
gmask
;

77 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
addr
,
gda
);

78  
hStus
;

79 
	}
}

81 
bzHE
 
	$BZ_mday
(
ut32_t
 
mday_time
)

83 
bzHE
 
hStus
 = 
BZHAL_OK
;

85 
	`BZHAL_MDay
(
mday_time
);

86  
hStus
;

87 
	}
}

89 
bzHE
 
	$BZ_WreToLog
(
BzDevi_t
 *
hw_iv
,
bzLogLev_t
 
logv
,
ut32_t
 
rCode
,cڡ *
commt
)

91 
bzHE
 
hStus
 = 
BZHAL_OK
;

92 
scS
[100];

93 
	`rtf
(
scS
,"OPERATION SPILOG:%d:%s\n",
rCode
,
commt
);

94 
	`B20_DEBUGF
(
DBG_LEVEL_SEVERE
,
scS
);

95 
hStus
=
	`BZHAL_WreToLog
(
hw_iv
->
devHInfo
,
logv
,
rCode
,
commt
);

96  
hStus
;

98 
	}
}

99 
bzHE
 
	$BZ_Memt
(* 
Addr
,
ut32_t
 
Da
,ut32_
n
)

101 
bzHE
 
hStus
 = 
BZHAL_OK
;

103 
	`memt
(
Addr
,
Da
,
n
);

104  
hStus
;

105 
	}
}

106 
bzHE
 
	$BZ_Memy
(* 
d
,*
c
,
ut32_t
 
n
)

108 
bzHE
 
hStus
 = 
BZHAL_OK
;

110 
	`memy
(
d
,
c
,
n
);

111  
hStus
;

113 
	}
}

116 
bzHE
 
	$BZ_Tx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

118 
bzHE
 
hStus
 = 
BZHAL_OK
;

119 
hStus
 = 
	`BZHAL_Tx1EbCl
(
hw_iv
->
devHInfo
, 
mode
);

120  
hStus
;

121 
	}
}

123 
bzHE
 
	$BZ_Tx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

125 
bzHE
 
hStus
 = 
BZHAL_OK
;

126 
hStus
 = 
	`BZHAL_Tx2EbCl
(
hw_iv
->
devHInfo
, 
mode
);

127  
hStus
;

128 
	}
}

130 
bzHE
 
	$BZ_Rx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

132 
bzHE
 
hStus
 = 
BZHAL_OK
;

133 
hStus
 = 
	`BZHAL_Rx1EbCl
(
hw_iv
->
devHInfo
, 
mode
);

134  
hStus
;

135 
	}
}

137 
bzHE
 
	$BZ_Rx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

139 
bzHE
 
hStus
 = 
BZHAL_OK
;

140 
hStus
 = 
	`BZHAL_Rx2EbCl
(
hw_iv
->
devHInfo
, 
mode
);

141  
hStus
;

142 
	}
}

144 
bzHE
 
	$BZ_ORx1EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

146 
bzHE
 
hStus
 = 
BZHAL_OK
;

147 
hStus
 = 
	`BZHAL_ORx1EbCl
(
hw_iv
->
devHInfo
, 
mode
);

148  
hStus
;

149 
	}
}

151 
bzHE
 
	$BZ_ORx2EbCl
(
BzDevi_t
 *
hw_iv
, 
BzHChlEbMode
 
mode
)

153 
bzHE
 
hStus
 = 
BZHAL_OK
;

154 
hStus
 = 
	`BZHAL_ORx2EbCl
(
hw_iv
->
devHInfo
, 
mode
);

155  
hStus
;

156 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_radio.c

11 
	~"bz_dio.h
"

12 
	~"bz_g_a.h
"

13 
	~"bz_g_dig.h
"

14 
	~"bz__h.h
"

15 
	~"bz_riscv.h
"

16 
	~"bz_r.h
"

20 
ut32_t
 
	$BZ_tPFqucy
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
me
,
ut64_t
 
lLoFq_Hz
)

22 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

23 
BzDa
 
DaInfo
;

24 
BzMem
 *
pMsg
;

26 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

27 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

28 
DaInfo
.
CmdTy
=0xff;

29 
pMsg
->
Cmd
=
BZ_WRITE_MEM_OPCODE
;

31 if(
me
 =
BZ_RF_PLL
)

33 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_RFFRQ_MSGID
;

35 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_RFFRQ_MSGLEN
;

38 
pMsg
->
Msg
.
da
[0] = (
ut8_t
)(
lLoFq_Hz
 & 0xFF);

39 
pMsg
->
Msg
.
da
[1] = (
ut8_t
)((
lLoFq_Hz
 >> 8) & 0xFF);

40 
pMsg
->
Msg
.
da
[2] = (
ut8_t
)((
lLoFq_Hz
 >> 16) & 0xFF);

41 
pMsg
->
Msg
.
da
[3] = (
ut8_t
)((
lLoFq_Hz
 >> 24) & 0xFF);

42 
pMsg
->
Msg
.
da
[4] = (
ut8_t
)((
lLoFq_Hz
 >> 32) & 0xFF);

43 
pMsg
->
Msg
.
da
[5] = (
ut8_t
)((
lLoFq_Hz
 >> 40) & 0xFF);

44 
pMsg
->
Msg
.
da
[6] = (
ut8_t
)((
lLoFq_Hz
 >> 48) & 0xFF);

45 
pMsg
->
Msg
.
da
[7] = (
ut8_t
)((
lLoFq_Hz
 >> 56) & 0xFF);

47 if(
me
 =
BZ_AUX_PLL
)

49 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_AUXFRQ_MSGID
;

50 
pMsg
->
Msg
.
Lth
=
HI_MSG_AUXFRQ_MSGLEN
;

53 
pMsg
->
Msg
.
da
[0] = (
ut8_t
)(
lLoFq_Hz
 & 0xFF);

54 
pMsg
->
Msg
.
da
[1] = (
ut8_t
)((
lLoFq_Hz
 >> 8) & 0xFF);

55 
pMsg
->
Msg
.
da
[2] = (
ut8_t
)((
lLoFq_Hz
 >> 16) & 0xFF);

56 
pMsg
->
Msg
.
da
[3] = (
ut8_t
)((
lLoFq_Hz
 >> 24) & 0xFF);

57 
pMsg
->
Msg
.
da
[4] = (
ut8_t
)((
lLoFq_Hz
 >> 32) & 0xFF);

58 
pMsg
->
Msg
.
da
[5] = (
ut8_t
)((
lLoFq_Hz
 >> 40) & 0xFF);

59 
pMsg
->
Msg
.
da
[6] = (
ut8_t
)((
lLoFq_Hz
 >> 48) & 0xFF);

60 
pMsg
->
Msg
.
da
[7] = (
ut8_t
)((
lLoFq_Hz
 >> 56) & 0xFF);

63 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

64 
	`IF_ERR_RETURN
(
bzRA
);

66  (
ut32_t
)
bzRA
;

67 
	}
}

69 
ut32_t
 
	$BZ_gPFqucy
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
me
,
ut64_t
 *
lLoFq_Hz
)

71 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

72 
BzDa
 
DaInfo
;

73 
BzMem
 *
pMsg
;

75 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

76 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

77 
DaInfo
.
CmdTy
=0xff;

78 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

79 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_RFFRQ_MSGLEN
;

81 if(
me
 =
BZ_RF_PLL
)

83 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_RFFRQ_MSGID
;

84 
pMsg
->
Msg
.
addr
=
RFFRQ_MSG_ADDR
;

86 if(
me
 =
BZ_AUX_PLL
)

88 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_AUXFRQ_MSGID
;

89 
pMsg
->
Msg
.
addr
=
AUXFRQ_MSG_ADDR
;

91 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

92 
	`IF_ERR_RETURN
(
bzRA
);

97 *
lLoFq_Hz
 = 
pMsg
->
Msg
.
da
[0] & 0xFF;

98 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[1])<<8;

99 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[2])<<16;

100 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[3])<<24;

101 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[4])<<32;

102 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[5])<<40;

103 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[6])<<48;

104 *
lLoFq_Hz
 |((
ut64_t
)
pMsg
->
Msg
.
da
[7])<<56;

106  (
ut32_t
)
bzRA
;

107 
	}
}

109 
ut32_t
 
	$BZ_tRadioClSpiMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
,
BzObsRxChls_t
 
OrxChl
,
BzTxChls_t
 
txChl
)

111 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

112 
bzHE
 
hus
=
BZHAL_OK
;

114 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CH_ENA
,0x0,31,0);

115 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

116 
	`IF_ERR_RETURN
(
bzRA
);

118 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_1
,0x1f,31,24);

119 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

120 
	`IF_ERR_RETURN
(
bzRA
);

122 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_ENA_EXT_0
,0x3f,5,0);

123 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

124 
	`IF_ERR_RETURN
(
bzRA
);

126 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x0, 31, 0);

127 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

128 
	`IF_ERR_RETURN
(
bzRA
);

130 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0, 1, 0);

131 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

132 
	`IF_ERR_RETURN
(
bzRA
);

134 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0, 7, 4);

135 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

136 
	`IF_ERR_RETURN
(
bzRA
);

138 
txChl
)

140 
BZ_TXOFF
:

142 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0xFFF, 11, 0);

143 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

144 
	`IF_ERR_RETURN
(
bzRA
);

146 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0xF, 19, 16);

147 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

148 
	`IF_ERR_RETURN
(
bzRA
);

150 
BZ_TX1
:

152 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x1, 1, 0);

153 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

154 
	`IF_ERR_RETURN
(
bzRA
);

156 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x2, 1, 0);

157 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

158 
	`IF_ERR_RETURN
(
bzRA
);

160 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF0
, 0x0, 8, 8);

161 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

162 
	`IF_ERR_RETURN
(
bzRA
);

164 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF3
, 0x1, 8, 8);

165 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

166 
	`IF_ERR_RETURN
(
bzRA
);

168 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x1, 9, 8);

169 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

170 
	`IF_ERR_RETURN
(
bzRA
);

173 
BZ_TX2
:

175 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x2, 1, 0);

176 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

177 
	`IF_ERR_RETURN
(
bzRA
);

179 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x1, 1, 0);

180 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

181 
	`IF_ERR_RETURN
(
bzRA
);

183 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF0
, 0x1, 8, 8);

184 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

185 
	`IF_ERR_RETURN
(
bzRA
);

187 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF3
, 0x0, 8, 8);

188 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

189 
	`IF_ERR_RETURN
(
bzRA
);

191 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x2, 9, 8);

192 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

193 
	`IF_ERR_RETURN
(
bzRA
);

196 
BZ_TX1TX2
:

197 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x0, 9, 8);

198 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

199 
	`IF_ERR_RETURN
(
bzRA
);

200 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x3, 1, 0);

201 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

202 
	`IF_ERR_RETURN
(
bzRA
);

204 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x0, 1, 0);

205 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

206 
	`IF_ERR_RETURN
(
bzRA
);

208 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF0
, 0x1, 8, 8);

209 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

210 
	`IF_ERR_RETURN
(
bzRA
);

211 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_TXLPF3
, 0x1, 8, 8);

212 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

213 
	`IF_ERR_RETURN
(
bzRA
);

219 
rxChl
)

221 
BZ_RXOFF
:

223 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x3, 13, 12);

224 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

225 
	`IF_ERR_RETURN
(
bzRA
);

227 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE6
, 0x7, 21, 19);

228 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

229 
	`IF_ERR_RETURN
(
bzRA
);

231 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE14
, 0x7, 21, 19);

232 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

233 
	`IF_ERR_RETURN
(
bzRA
);

235 
BZ_RX1
:

237 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x1, 13, 12);

238 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

239 
	`IF_ERR_RETURN
(
bzRA
);

241 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x2, 5, 4);

242 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

243 
	`IF_ERR_RETURN
(
bzRA
);

245 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x2, 5, 4);

246 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

247 
	`IF_ERR_RETURN
(
bzRA
);

248 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE6
, 0x0, 21, 19);

249 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

250 
	`IF_ERR_RETURN
(
bzRA
);

251 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE14
, 0x7, 21, 19);

252 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

253 
	`IF_ERR_RETURN
(
bzRA
);

255 
BZ_RX2
:

257 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x2, 13, 12);

258 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

259 
	`IF_ERR_RETURN
(
bzRA
);

261 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x1, 5, 4);

262 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

263 
	`IF_ERR_RETURN
(
bzRA
);

265 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x1, 5, 4);

266 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

267 
	`IF_ERR_RETURN
(
bzRA
);

268 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE14
, 0x0, 21, 19);

269 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

270 
	`IF_ERR_RETURN
(
bzRA
);

271 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE6
, 0x7, 21, 19);

272 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

273 
	`IF_ERR_RETURN
(
bzRA
);

275 
BZ_RX1RX2
:

277 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x0, 13, 12);

278 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

279 
	`IF_ERR_RETURN
(
bzRA
);

281 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x3, 5, 4);

282 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

283 
	`IF_ERR_RETURN
(
bzRA
);

285 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_SYNC_1
, 0x0, 5,4);

286 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

287 
	`IF_ERR_RETURN
(
bzRA
);

289 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE6
, 0x0, 21, 19);

290 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

291 
	`IF_ERR_RETURN
(
bzRA
);

293 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE14
, 0x0, 21, 19);

294 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

295 
	`IF_ERR_RETURN
(
bzRA
);

301 
OrxChl
){

302 
BZ_ORXOFF
:

304 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x3, 15, 14);

305 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

306 
	`IF_ERR_RETURN
(
bzRA
);

309 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE5
, 0x7, 21, 19);

310 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

311 
	`IF_ERR_RETURN
(
bzRA
);

313 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE13
, 0x7, 21, 19);

314 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

315 
	`IF_ERR_RETURN
(
bzRA
);

317 
BZ_ORX1
:

319 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x1, 15, 14);

320 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

321 
	`IF_ERR_RETURN
(
bzRA
);

324 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE5
, 0, 21, 19);

325 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

326 
	`IF_ERR_RETURN
(
bzRA
);

328 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE13
, 0x7, 21, 19);

329 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

330 
	`IF_ERR_RETURN
(
bzRA
);

332 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x2, 7, 6);

333 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

334 
	`IF_ERR_RETURN
(
bzRA
);

336 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_1
,0x0,15,15);

337 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

338 
	`IF_ERR_RETURN
(
bzRA
);

340 
BZ_ORX2
:

342 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x2, 15, 14);

343 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

344 
	`IF_ERR_RETURN
(
bzRA
);

347 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE5
, 0x7, 21, 19);

348 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

349 
	`IF_ERR_RETURN
(
bzRA
);

351 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE13
, 0, 21, 19);

352 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

353 
	`IF_ERR_RETURN
(
bzRA
);

355 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x1, 7, 6);

356 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

357 
	`IF_ERR_RETURN
(
bzRA
);

359 
hus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_1
,0x1,15,15);

360 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

361 
	`IF_ERR_RETURN
(
bzRA
);

363 
BZ_ORX1ORX2
:

365 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_PD0
, 0x3, 15, 14);

366 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

367 
	`IF_ERR_RETURN
(
bzRA
);

370 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE5
, 0x0, 21, 19);

371 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

372 
	`IF_ERR_RETURN
(
bzRA
);

374 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RXFE13
, 0x0, 21, 19);

375 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

376 
	`IF_ERR_RETURN
(
bzRA
);

378 
hus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_RSTN0
, 0x3, 7, 6);

379 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

380 
	`IF_ERR_RETURN
(
bzRA
);

387  (
ut32_t
)
bzRA
;

388 
	}
}

391 
ut32_t
 
	$BZ_gRadioClSpiMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 *
rxChl
,
BzObsRxChls_t
 *
OrxChl
,
BzTxChls_t
 *
txChl
)

393 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

394 
bzHE
 
hStus
=
BZHAL_OK
;

396 
ut32_t
 
fldV1
 = 0;

397 
ut32_t
 
fldV2
 = 0;

398 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_PD0
,&
fldV1
,9,8);

399 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

400 
	`IF_ERR_RETURN
(
bzRA
);

401 
fldV1
)

403 
BZ_BIT0BIT1_Mask
:

406 *
txChl

BZ_TXOFF
;

408 
BZ_BIT0_Mask
:

411 *
txChl

BZ_TX1
;

413 
BZ_BIT1_Mask
:

416 *
txChl

BZ_TX2
;

418 
BZ_OFF_Mask
:

421 *
txChl

BZ_TX1TX2
;

426 
fldV1
 = 0;

427 
fldV2
 = 0;

428 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_RXFE6
,&
fldV1
,19,19);

429 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

430 
	`IF_ERR_RETURN
(
bzRA
);

432 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_RXFE14
,&
fldV2
,19,19);

433 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

434 
	`IF_ERR_RETURN
(
bzRA
);

436 
fldV_mask
 = ((
fldV1
<<1)|
fldV2
);

437 
fldV_mask
)

439 
BZ_BIT0BIT1_Mask
:

442 *
rxChl
 = 
BZ_RXOFF
;

444 
BZ_BIT0_Mask
:

447 *
rxChl
 = 
BZ_RX1
;

449 
BZ_BIT1_Mask
:

452 *
rxChl
 = 
BZ_RX2
;

454 
BZ_OFF_Mask
:

457 *
rxChl
 = 
BZ_RX1RX2
;

463 
fldV1
 = 0;

464 
fldV2
 = 0;

465 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_RXFE5
,&
fldV1
,19,19);

466 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

467 
	`IF_ERR_RETURN
(
bzRA
);

469 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_RXFE13
,&
fldV2
,19,19);

470 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

471 
	`IF_ERR_RETURN
(
bzRA
);

473 
fldV_mask
 = ((
fldV1
<<1)|
fldV2
);

474 
fldV_mask
){

475 
BZ_BIT0BIT1_Mask
:

478 *
OrxChl
 = 
BZ_ORXOFF
;

480 
BZ_BIT0_Mask
:

483 *
OrxChl
 = 
BZ_ORX1
;

485 
BZ_BIT1_Mask
:

488 *
OrxChl
 = 
BZ_ORX2
;

490 
BZ_OFF_Mask
:

493 *
OrxChl
 = 
BZ_ORX1ORX2
;

498  (
ut32_t
)
bzRA
;

499 
	}
}

500 
ut32_t
 
	$BZ_tRadioClPMode
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
,
BzObsRxChls_t
 
OrxChl
,
BzTxChls_t
 
txChl
)

502 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

503 
bzHE
 
hStus
=
BZHAL_OK
;

505 if((
OrxChl
 !
BZ_RXOFF
&& (
rxChl
 !
BZ_ORXOFF
))

506 
	`IF_ERR_RETURN
(
BZ_ERR_CHECK_PARAM
);

508 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CH_ENA
,0x21802,31,0);

509 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

510 
	`IF_ERR_RETURN
(
bzRA
);

512 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_CLK_SWAP_1
,0xE0,31,24);

513 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

514 
	`IF_ERR_RETURN
(
bzRA
);

525 
hStus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_ENA_EXT_0
,0x0,5,0);

526 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

527 
	`IF_ERR_RETURN
(
bzRA
);

530 
hStus
 = 
	`BZ_Tx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

531 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

532 
	`IF_ERR_RETURN
(
bzRA
);

533 
hStus
 = 
	`BZ_Tx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

534 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

535 
	`IF_ERR_RETURN
(
bzRA
);

536 
hStus
 = 
	`BZ_Rx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

537 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

538 
	`IF_ERR_RETURN
(
bzRA
);

539 
hStus
 = 
	`BZ_Rx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

540 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

541 
	`IF_ERR_RETURN
(
bzRA
);

542 
hStus
 = 
	`BZ_ORx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

543 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

544 
	`IF_ERR_RETURN
(
bzRA
);

545 
hStus
 = 
	`BZ_ORx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

546 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

547 
	`IF_ERR_RETURN
(
bzRA
);

549 
txChl
) {

550 
BZ_TXOFF
:

552 
hStus
 = 
	`BZ_Tx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

553 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

554 
	`IF_ERR_RETURN
(
bzRA
);

555 
hStus
 = 
	`BZ_Tx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

556 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

557 
	`IF_ERR_RETURN
(
bzRA
);

559 
BZ_TX1
:

561 
hStus
 = 
	`BZ_Tx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

562 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

563 
	`IF_ERR_RETURN
(
bzRA
);

565 
BZ_TX2
:

567 
hStus
 = 
	`BZ_Tx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

568 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

569 
	`IF_ERR_RETURN
(
bzRA
);

571 
BZ_TX1TX2
:

573 
hStus
 = 
	`BZ_Tx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

574 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

575 
	`IF_ERR_RETURN
(
bzRA
);

576 
hStus
 = 
	`BZ_Tx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

577 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

578 
	`IF_ERR_RETURN
(
bzRA
);

583 
rxChl
) {

584 
BZ_RXOFF
:

586 
hStus
 = 
	`BZ_Rx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

587 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

588 
	`IF_ERR_RETURN
(
bzRA
);

589 
hStus
 = 
	`BZ_Rx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

590 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

591 
	`IF_ERR_RETURN
(
bzRA
);

593 
BZ_RX1
:

595 
hStus
 = 
	`BZ_Rx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

596 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

597 
	`IF_ERR_RETURN
(
bzRA
);

599 
BZ_RX2
:

601 
hStus
 = 
	`BZ_Rx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

602 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

603 
	`IF_ERR_RETURN
(
bzRA
);

605 
BZ_RX1RX2
:

607 
hStus
 = 
	`BZ_Rx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

608 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

609 
	`IF_ERR_RETURN
(
bzRA
);

610 
hStus
 = 
	`BZ_Rx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

611 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

612 
	`IF_ERR_RETURN
(
bzRA
);

618 
OrxChl
) {

619 
BZ_ORXOFF
:

621 
hStus
 = 
	`BZ_ORx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

622 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

623 
	`IF_ERR_RETURN
(
bzRA
);

624 
hStus
 = 
	`BZ_ORx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_DISABLE
);

625 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

626 
	`IF_ERR_RETURN
(
bzRA
);

628 
BZ_ORX1
:

630 
hStus
 = 
	`BZ_ORx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

631 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

632 
	`IF_ERR_RETURN
(
bzRA
);

634 
BZ_ORX2
:

636 
hStus
 = 
	`BZ_ORx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

637 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

638 
	`IF_ERR_RETURN
(
bzRA
);

640 
BZ_ORX1ORX2
:

642 
hStus
 = 
	`BZ_ORx1EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

643 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

644 
	`IF_ERR_RETURN
(
bzRA
);

645 
hStus
 = 
	`BZ_ORx2EbCl
(
hw_iv
, 
BZHAL_CHANNEL_ENABLE
);

646 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_GPIO
);

647 
	`IF_ERR_RETURN
(
bzRA
);

653  (
ut32_t
)
bzRA
;

654 
	}
}

655 
ut32_t
 
	$BZ_gRadioClPMode
(
BzDevi_t
 *
hw_iv
,
ut32_t
* 
ChEb
)

657 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

658 
bzHE
 
hStus
=
BZHAL_OK
;

661 
hStus
=
	`BZ_iRdFld
(
hw_iv
,
REG_ENA_EXT_0
,
ChEb
,5,0);

662 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RADIO
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

663 
	`IF_ERR_RETURN
(
bzRA
);

665  (
ut32_t
)
bzRA
;

666 
	}
}

667 
ut32_t
 
	$BZ_dioOn
(
BzDevi_t
 * 
hw_iv
, 
BzRadioCMode
 
Mode
)

669 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

670 
ut8_t
 
txChl
 = 0;

671 
ut8_t
 
rxOrxChl
 = 0;

672 
ut8_t
 
rxChl
=0;

674 
txChl

hw_iv
->
BzS
.
sutChls
 &3;

675 
rxChl
(
hw_iv
->
BzS
.
sutChls
 >>2)&3;

676 
rxOrxChl
(
hw_iv
->
BzS
.
sutChls
 >>4)&3;

679 if(
Mode
==
BZ_SPI_MODE
){

680 
bzRA
=
	`BZ_tRadioClSpiMode
(
hw_iv
,
rxChl
,
rxOrxChl
,
txChl
);

681 
	`IF_ERR_RETURN
(
bzRA
);

683 
bzRA
=
	`BZ_tRadioClPMode
(
hw_iv
,
rxChl
,
rxOrxChl
,
txChl
);

684 
	`IF_ERR_RETURN
(
bzRA
);

688 
hw_iv
->
BzS
.
devS
=
BZ_STATE_RADIOON
;

690  (
ut32_t
)
bzRA
;

691 
	}
}

693 
ut32_t
 
	$BZ_dioOff
(
BzDevi_t
 * 
hw_iv
,
BzRadioCMode
 
Mode
)

695 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

698 if(
Mode
==
BZ_SPI_MODE
){

699 
bzRA
=
	`BZ_tRadioClSpiMode
(
hw_iv
,
BZ_RXOFF
,
BZ_ORXOFF
,
BZ_TXOFF
);

700 
	`IF_ERR_RETURN
(
bzRA
);

702 
bzRA
=
	`BZ_tRadioClPMode
(
hw_iv
,
BZ_RXOFF
,
BZ_ORXOFF
,
BZ_TXOFF
);

703 
	`IF_ERR_RETURN
(
bzRA
);

705  (
ut32_t
)
bzRA
;

706 
	}
}

708 
ut32_t
 
	$BZ_waPsLockDe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
timeout
)

710 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

711 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

714 
uiTry
 > 0){

715 
	`BZ_mday
(
timeout
);

716 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

717 
	`IF_ERR_RETURN
(
bzRA
);

719 if(
hw_iv
->
r_de
==1){

720 
	`BZ_rStus
(
hw_iv
);

721 
hw_iv
->
r_de
=0;

724 
uiTry
--;

726 if(
uiTry
 <= 0){

727 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

729  (
ut32_t
)
bzRA
;

730 
	}
}

731 
ut32_t
 
	$BZ_gRadioS
(
BzDevi_t
 *
hw_iv
)

733 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

734 
bzHE
 
hStus
=
BZHAL_OK
;

735 
ut32_t
 
dioStus
 = 0;

737 
hStus
=
	`BZ_iRdReg
(
hw_iv
, 
REGOUT_CALI_DONE_0
,&
dioStus
);

738 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

739 
	`IF_ERR_RETURN
(
bzRA
);

740 
	`BZHAL_Prtf
("|******adioStatus *******|\n");

741 if((
dioStus
&
RFPLLMASK
=0x80)
	`BZHAL_Prtf
("RFPLL LOCKED\n");

742 
	`BZHAL_Prtf
("RFPLL UNLOCKED\n");

743 if((
dioStus
&
BBPLLMASK
=0x100)
	`BZHAL_Prtf
("BBPLL LOCKED\n");

744 
	`BZHAL_Prtf
("BBPLL UNLOCKED\n");

745 if((
dioStus
&
AUXPLLMASK
=0x200)
	`BZHAL_Prtf
("AUXPLL LOCKED\n");

746 
	`BZHAL_Prtf
("AUXPLL UNLOCKED\n");

747 if((
dioStus
&
TX0ENMASK
=0x400)
	`BZHAL_Prtf
("TX1 ENABLE\n");

748 
	`BZHAL_Prtf
("TX1 DISABLE\n");

749 if((
dioStus
&
TX1ENMASK
=0x800)
	`BZHAL_Prtf
("TX2 ENABLE\n");

750 
	`BZHAL_Prtf
("TX2 DISABLE\n");

751 if((
dioStus
&
RX0ENMASK
=0x1000)
	`BZHAL_Prtf
("RX1 ENABLE\n");

752 
	`BZHAL_Prtf
("RX1 DISABLE\n");

753 if((
dioStus
&
RX1ENMASK
=0x2000)
	`BZHAL_Prtf
("RX2 ENABLE\n");

754 
	`BZHAL_Prtf
("RX2 DISABLE\n");

755 if((
dioStus
&
ORX0ENMASK
=0x4000)
	`BZHAL_Prtf
("ORX1 ENABLE\n");

756 
	`BZHAL_Prtf
("ORX1 DISABLE\n");

757 if((
dioStus
&
ORX1ENMASK
=0x8000)
	`BZHAL_Prtf
("ORX2 ENABLE\n");

758 
	`BZHAL_Prtf
("ORX2 DISABLE\n");

759  (
ut32_t
)
bzRA
;

760 
	}
}

762 
ut32_t
 
	$BZ_tPTemtuTckEb
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
ab
){

763 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

764 
BzDa
 
DaInfo
; 
BzCmdTx
 *
pMsg
;

765 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

766 
pMsg
=&
DaInfo
.
u
.
Tx
;

767 
DaInfo
.
CmdTy
=0xff;

768 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

771 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=(
HI_ENABLE_PLLTC_TRACK
|(
ab
<<16));

772 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

773 
	`IF_ERR_RETURN
(
bzRA
);

774  (
ut32_t
)
bzRA
;

776 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_riscv.c

10 
	~"bz_riscv.h
"

11 
	~"fmwe.h
"

12 
	~"bz__h.h
"

13 
	~"bz_g_dig.h
"

14 
	~"bz_r.h
"

15 
	~"svn_vsi.h
"

17 
	~<rg.h
>

19 
ut32_t
 
	$BZ_rStus
(
BzDevi_t
 *
hw_iv
)

21 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

22 
bzHE
 
hStus
 = 
BZHAL_OK
;

24 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
DOCMD_STATUS
,0);

25 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

26 
	`IF_ERR_RETURN
(
bzRA
);

27  
bzRA
;

28 
	}
}

29 
ut32_t
 
	$BZ_wreFmwe
(
BzDevi_t
 *
hw_iv
,
ut16_t
 
addr
, 
ut32_t
 
da
)

31 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

32 
bzHE
 
hStus
 = 
BZHAL_OK
;

34 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
addr
,
da
);

35 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

36 
	`IF_ERR_RETURN
(
bzRA
);

38  (
ut32_t
)
bzRA
;

39 
	}
}

43 
ut32_t
 
	$BZ_iRdMem
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
addr
,ut32_*
gda
)

45 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

46 
bzHE
 
hStus
 = 
BZHAL_OK
;

48 if(
addr
 & 0x20000000){

49 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,0,3,1);

51 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,1,3,1);

55 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_IP_SRAM_ACC_ADDR
,
addr
);

56 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

57 
	`IF_ERR_RETURN
(
bzRA
);

60 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
SRAM_READ_DATA
,
gda
);

61 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

62 
	`IF_ERR_RETURN
(
bzRA
);

64  (
ut32_t
)
bzRA
;

65 
	}
}

67 
ut32_t
 
	$BZ_iWreMem
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
addr
,ut32_
da
)

69 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

70 
bzHE
 
hStus
 = 
BZHAL_OK
;

72 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_IP_SRAM_ACC_WDATA
,
da
);

73 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

74 
	`IF_ERR_RETURN
(
bzRA
);

77 
addr
|=0x80000000;

79 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_IP_SRAM_ACC_ADDR
,
addr
);

80 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

81 
	`IF_ERR_RETURN
(
bzRA
);

83  (
ut32_t
)
bzRA
;

84 
	}
}

85 
ut32_t
 
	$bz_iGRiscvLog
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
addr
,ut32_*
da
)

87 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

88 
bzHE
 
hStus
 = 
BZHAL_OK
;

91 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_IP_SRAM_ACC_ADDR
,
addr
);

92 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

93 
	`IF_ERR_RETURN
(
bzRA
);

96 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
SRAM_READ_DATA
,
da
);

97 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

98 
	`IF_ERR_RETURN
(
bzRA
);

99  (
ut32_t
)
bzRA
;

100 
	}
}

102 
ut32_t
 
	$BZ_iGRiscvPc
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
addr
,ut32_
pc_t
)

104 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

105 
bzHE
 
hStus
 = 
BZHAL_OK
;

106 
ut32_t
 
pc
;

107 
ut32_t
 
debug_m
;

109 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,0xf,31,28);

110 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

111 
	`IF_ERR_RETURN
(
bzRA
);

114 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_PC_COUNT
,
pc_t
);

115 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

116 
	`IF_ERR_RETURN
(
bzRA
);

119 
debug_m
=(
addr
|0x80000000);

120 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_PC_BASE_ADDR
,
debug_m
);

121 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

122 
	`IF_ERR_RETURN
(
bzRA
);

124 
bzRA
=
	`BZ_iRdMem
(
hw_iv
,
addr
,&
pc
);

125 
	`IF_ERR_RETURN
(
bzRA
);

127  (
ut32_t
)
bzRA
;

128 
	}
}

129 
ut32_t
 
	$bz_iIru
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
wreDa
)

131 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

132 
bzHE
 
hStus
 = 
BZHAL_OK
;

135 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,20,20);

136 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

137 
	`IF_ERR_RETURN
(
bzRA
);

139 
	`BZ_mday
(100);

140 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,!
wreDa
,20,20);

141 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

142 
	`IF_ERR_RETURN
(
bzRA
);

145 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,24,24);

146 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

147 
	`IF_ERR_RETURN
(
bzRA
);

149 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,!
wreDa
,24,24);

150 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

151 
	`IF_ERR_RETURN
(
bzRA
);

153  (
ut32_t
)
bzRA
;

154 
	}
}

155 
ut32_t
 
	$BZ_iWaCmdCfm
(
BzDevi_t
 *
hw_iv
)

157 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

158 
bzHE
 
hStus
 = 
BZHAL_OK
;

159 
ut32_t
 
ada
;

160 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

161 
uiTry
 > 0){

162 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
RECV_CMD_CONFIRM
,&
ada
);

163 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

164 
	`IF_ERR_RETURN
(
bzRA
);

165 if(
ada
==
HI_STATUS_SUCCESS
){

168 
uiTry
--;

170 if(
uiTry
 <= 0){

171 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

174  (
ut32_t
)
bzRA
;

175 
	}
}

176 
ut32_t
 
	$bz_gFmweVsi
(
BzDevi_t
 *
hw_iv
)

178 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

179 
BzDa
 
DaInfo
;

180 
BzMem
 *
pMsg
;

182 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

183 
DaInfo
.
CmdTy
=0xff;

185 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

186 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_READFIRDY_MSGID
;

187 
pMsg
->
Msg
.
Lth
=(
bz_ps
);

188 
pMsg
->
Msg
.
addr
=
BZ_ADDR_FW_VERSION
;

189 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

190 
	`IF_ERR_RETURN
(
bzRA
);

192 
	`BZ_Memt
(&
hw_iv
->
ps
,0x0,(
bz_ps
));

193 
	`BZ_Memy
(&
hw_iv
->
ps
,(
bz_ps
*)&
pMsg
->
Msg
.
da
[0],(bz_caps));

195 
	`BZHAL_Prtf
("\n*************Firmware BUILD INFO*************\n"

200 
hw_iv
->
ps
.
fmweComp
, ()hw_iv->ps.
fmweCutSvnvsi
, hw_iv->ps.
fmweBudTime
);

201  (
ut32_t
)
bzRA
;

202 
	}
}

203 
	$bz_lCheckSum
(*
da
,
n
)

205 
acc
;

206 
c
;

207 *
or
;

208 
ucX
=
MAGIC
;

209 
acc
=0;

211 
or
=(*)
da
;

212 
n
>0){

213 
c
=(*
or
^
ucX
);

214 
or
++;

215 
acc
+=
c
;

216 
n
--;

218  
acc
;

219 
	}
}

221 
ut32_t
 
	$bz_downLdFmwe
(
BzDevi_t
 *
hw_iv
, 
ut8_t
 *
da
,
ut32_t
 
size
,
ut16_t
 
addr
)

223 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

224 
bzHE
 
hStus
=
BZHAL_OK
;

225 
ut32_t
 
DL
 = 0;

226 
ut32_t
 
Da
;

228 
DL
 = 0; DL < 
size
 ;DatLen += 4) {

230 
Da
=((
da
[
DL
]<<24)|data[DatLen+1]<<16|data[DatLen+2]<<8|data[DatLen+3]);

231 
bzRA
 = 
	`BZ_wreFmwe
(
hw_iv
,
addr
,
Da
);

232 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

233 
	`IF_ERR_RETURN
(
bzRA
);

235  (
ut32_t
)
bzRA
;

236 
	}
}

237 
ut32_t
 
	$bz_downLdItcmBefe
(
BzDevi_t
 *
hw_iv
,
wreDa
,
dtcmOfft
)

239 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

240 
bzHE
 
hStus
=
BZHAL_OK
;

242 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,0,0);

243 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

244 
	`IF_ERR_RETURN
(
bzRA
);

246 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,4,4);

247 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

248 
	`IF_ERR_RETURN
(
bzRA
);

250  (
ut32_t
)
bzRA
;

251 
	}
}

252 
ut32_t
 
	$bz_downLdDtcmBefe
(
BzDevi_t
 *
hw_iv
,
wreDa
,
dtcmOfft
)

254 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

255 
bzHE
 
hStus
=
BZHAL_OK
;

257 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,0,0);

258 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

259 
	`IF_ERR_RETURN
(
bzRA
);

261 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,4,4);

262 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

263 
	`IF_ERR_RETURN
(
bzRA
);

265 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
dtcmOfft
,3,1);

266 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

267 
	`IF_ERR_RETURN
(
bzRA
);

269 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,!
wreDa
,8,8);

270 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

271 
	`IF_ERR_RETURN
(
bzRA
);

273 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,!
wreDa
,4,4);

274 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

275 
	`IF_ERR_RETURN
(
bzRA
);

277  (
ut32_t
)
bzRA
;

278 
	}
}

279 
ut32_t
 
	$bz_gFmweInfo
(
BzDevi_t
 *
hw_iv
,
fmwe_B20
 *
fw_B20
)

281 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

282 
bzHE
 
hStus
=
BZHAL_OK
;

283 
ut16_t
 
chcksum
=0;

284 
ut32_t
 
vue
=0;

286 
fw_B20
->
hdr
.
cmL
=(
fw_code
[8]<<24|fw_code[9]<<16|fw_code[10]<<8|fw_code[11]);

287 
fw_B20
->
hdr
.
cmAddr
=(
fw_code
[0]<<24|fw_code[1]<<16|fw_code[2]<<8|fw_code[3]);

288 
fw_B20
->
fw_iccm
=&
fw_code
[fw_B20->
hdr
.
cmAddr
];

290 
chcksum
+=
	`bz_lCheckSum
(
fw_B20
->
fw_iccm
,fw_B20->
hdr
.
cmL
);

291 
fw_B20
->
hdr
.
dtcmL
=(
fw_code
[24]<<24|fw_code[25]<<16|fw_code[26]<<8|fw_code[27]);

292 
fw_B20
->
hdr
.
dtcmAddr
=(
fw_code
[16]<<24|fw_code[17]<<16|fw_code[18]<<8|fw_code[19]);

293 
fw_B20
->
fw_dccm
=&
fw_code
[fw_B20->
hdr
.
dtcmAddr
];

294 
chcksum
+=
	`bz_lCheckSum
(
fw_B20
->
fw_dccm
,fw_B20->
hdr
.
dtcmL
);

296 
vue
=(
MAGIC
<<16|
chcksum
);

297 
hStus
=
	`BZ_iWreReg
(
hw_iv
,
REG_IP_CHKSUM
,
vue
);

298 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

299 
	`IF_ERR_RETURN
(
bzRA
);

302 
hStus
=
	`BZ_iWreFld
(
hw_iv
, 
REG_IP_SRAM_CTRL
, 1, 16, 16);

303 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

304 
	`IF_ERR_RETURN
(
bzRA
);

306 
	`BZHAL_Prtf
("ITCM & DTCM %d %d \r\n",()
fw_B20
->
hdr
.
cmL
,()fw_B20->hdr.
dtcmL
);

307 
	`BZHAL_Prtf
("ITCM & DTCM Add %d %d \r\n",()
fw_B20
->
hdr
.
cmAddr
,()fw_B20->hdr.
dtcmAddr
);

309  (
ut32_t
)
bzRA
;

310 
	}
}

311 
ut32_t
 
	$bz_downLdItcm
(
BzDevi_t
 *
hw_iv
,
fmwe_B20
 *
fw_B20
)

313 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

314 
bzHE
 
hStus
=
BZHAL_OK
;

316 
hStus
 = 
	`bz_downLdFmwe
(
hw_iv
,
fw_B20
->
fw_iccm
,fw_B20->
hdr
.
cmL
,
DOWNLOAD_ITCM_ADDR
);

317 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

318 
	`IF_ERR_RETURN
(
bzRA
);

320  (
ut32_t
)
bzRA
;

321 
	}
}

323 
ut32_t
 
	$bz_downLdDtcm
(
BzDevi_t
 *
hw_iv
,
fmwe_B20
 *
fw_B20
)

325 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

327 
bzRA
 = 
	`bz_downLdFmwe
(
hw_iv
,
fw_B20
->
fw_dccm
,fw_B20->
hdr
.
dtcmL
,
DOWNLOAD_DTCM_ADDR
);

328 
	`IF_ERR_RETURN
(
bzRA
);

330  (
ut32_t
)
bzRA
;

331 
	}
}

334 
ut32_t
 
	$bz_downLdA
(
BzDevi_t
 *
hw_iv
,
wreDa
)

336 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

337 
bzHE
 
hStus
=
BZHAL_OK
;

339 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,8,8);

340 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

341 
	`IF_ERR_RETURN
(
bzRA
);

343 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,
wreDa
,12,12);

344 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

345 
	`IF_ERR_RETURN
(
bzRA
);

347 
hStus
=
	`BZ_iRetCh
(
hw_iv
,
RESET_BY_ISR
);

348 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

349 
	`IF_ERR_RETURN
(
bzRA
);

351  (
ut32_t
)
bzRA
;

352 
	}
}

354 
ut32_t
 
	$BZ_ldFmwe
(
BzDevi_t
 *
hw_iv
)

356 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

357 
fmwe_B20
 
fw_B20
;

359 
	`BZ_Memt
(&
fw_B20
,0,(
fmwe_B20
));

360 
bzRA
=
	`bz_gFmweInfo
(
hw_iv
,&
fw_B20
);

361 
	`IF_ERR_RETURN
(
bzRA
);

363 
bzRA
 = 
	`bz_downLdDtcmBefe
(
hw_iv
,1,0);

364 
	`IF_ERR_RETURN
(
bzRA
);

366 
bzRA
 = 
	`bz_downLdItcm
(
hw_iv
,&
fw_B20
);

367 
	`IF_ERR_RETURN
(
bzRA
);

369 
bzRA
 = 
	`bz_downLdDtcmBefe
(
hw_iv
,1,2);

370 
	`IF_ERR_RETURN
(
bzRA
);

372 
bzRA
 = 
	`bz_downLdDtcm
(
hw_iv
,&
fw_B20
);

373 
	`IF_ERR_RETURN
(
bzRA
);

375 
bzRA
 = 
	`bz_downLdA
(
hw_iv
,1);

376 
	`IF_ERR_RETURN
(
bzRA
);

378 
	`BZHAL_Prtf
("FIRMWARE DOWNLOAD SUCCESS\n");

379  (
ut32_t
)
bzRA
;

380 
	}
}

382 
ut32_t
 
	$BZ_wreRiscvMem
(
BzDevi_t
 *
hw_iv
,
ut8_t
 *
da
,
ut32_t
 
addr
,ut32_
size
,ut32_
msgId
,ut32_
offt
)

384 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

385 
ut32_t
 
DL
 = 0;

386 
ut32_t
 
Da
;

388 
msgId
){

389 
HI_MSG_TO_FILTER_MSGID
:

390 
addr
 = 
FILTER_MSG_ADDR
+
offt
;

392 
HI_MSG_TO_PROFILE_MSGID
:

393 
addr
=
PROFILE_MSG_ADDR
;

395 
HI_MSG_TO_RFFRQ_MSGID
:

396 
addr
=
RFFRQ_MSG_ADDR
;

398 
HI_MSG_TO_AUXFRQ_MSGID
:

399 
addr
=
AUXFRQ_MSG_ADDR
;

401 
HI_MSG_TO_J204B_MSGID
:

402 
addr
=
J204B_MSG_ADDR
;

407 
DL
=0;DL<
size
;DatLen+=4){

408 
Da
=((
da
[
DL
])|data[DatLen+1]<<8|data[DatLen+2]<<16|data[DatLen+3]<<24);

409 
bzRA
=
	`BZ_iWreMem
(
hw_iv
,
addr
,
Da
);

410 
	`IF_ERR_RETURN
(
bzRA
);

411 
addr
+=4;

413  (
ut32_t
)
bzRA
;

414 
	}
}

415 
ut32_t
 
	$BZ_adRiscvMem
(
BzDevi_t
 *
hw_iv
,
ut32_t
 *
da
,ut32_
addr
,ut32_
size
)

417 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

418 
dex
;

420 
dex
=0;dex<
size
;index+=4){

421 
bzRA
=
	`BZ_iRdMem
(
hw_iv
,
addr
,
da
);

422 
	`IF_ERR_RETURN
(
bzRA
);

423 
addr
+=4;

424 
da
++;

426  (
ut32_t
)
bzRA
;

427 
	}
}

429 
ut32_t
 
	$BZ_ndRiscvCmd
(
BzDevi_t
 *
iv
,*
UrDa
, 
Commd
)

431 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

432 
bzHE
 
hStus
 = 
BZHAL_OK
;

433 
MemDa
=0;

434 
BzMsg
 *
pMmsg
=
NULL
;

436 
BzDa
 *
DaInfo
 = (BzDa*)
UrDa
;

437 if(
IOCTL_WRITE_CMD
==
Commd
)

439 
DaInfo
->
u
.
Tx
.
Cmd
){

440 
BZ_ABORT_OPCODE
:

441 
BZ_RUNN_INIT_OPCODE
:

442 
BZ_RADIO_ON_OPCODE
:

444 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_TYPE
,
DaInfo
->
u
.
Tx
.
Cmd
);

445 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

446 
	`IF_ERR_RETURN
(
bzRA
);

448 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_DATA
,
DaInfo
->
u
.
Tx
.
TxDa
.
vue
);

449 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

450 
	`IF_ERR_RETURN
(
bzRA
);

451 if(
BZ_RUNN_INIT_OPCODE
 =
DaInfo
->
u
.
Tx
.
Cmd
)

453 
iv
->
cutCMask
 = 
DaInfo
->
u
.
Tx
.
TxDa
.
vue
;

457 
BZ_WRITE_MEM_OPCODE
:

458 
pMmsg
=&
DaInfo
->
u
.
Mmsg
.
Msg
;

459 
MemDa
=(
pMmsg
->
Id
<<16|pMmsg->
Lth
);

460 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_TYPE
,
DaInfo
->
u
.
Mmsg
.
Cmd
);

461 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

462 
	`IF_ERR_RETURN
(
bzRA
);

464 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_DATA
,
MemDa
);

465 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

466 
	`IF_ERR_RETURN
(
bzRA
);

468 
hStus
=
	`BZ_wreRiscvMem
(
iv
,&
pMmsg
->
da
[0],
DOWNLOAD_DTCM_ADDR
,pMmsg->
Lth
,pMmsg->
Id
,pMmsg->
offt
);

469 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

470 
	`IF_ERR_RETURN
(
bzRA
);

472 
BZ_SET_OPCODE
:

473 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_TYPE
,
DaInfo
->
u
.
Tx
.
Cmd
);

474 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

475 
	`IF_ERR_RETURN
(
bzRA
);

477 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_DATA
,
DaInfo
->
u
.
Tx
.
TxDa
.
vue
);

478 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

479 
	`IF_ERR_RETURN
(
bzRA
);

482 
bzRA
=
	`bz_iIru
(
iv
,1);

483 
	`IF_ERR_RETURN
(
bzRA
);

485 
bzRA
=
	`BZ_iWaCmdCfm
(
iv
);

486 
	`IF_ERR_RETURN
(
bzRA
);

488 if(
IOCTL_READ_CMD
 =
Commd
)

490 
DaInfo
->
u
.
Tx
.
Cmd
){

491 
BZ_READ_MEM_OPCODE
:

492 
pMmsg
=&
DaInfo
->
u
.
Mmsg
.
Msg
;

493 
MemDa
=(
pMmsg
->
Id
<<16|pMmsg->
Lth
);

494 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_TYPE
,
DaInfo
->
u
.
Mmsg
.
Cmd
);

495 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

496 
	`IF_ERR_RETURN
(
bzRA
);

498 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_DATA
,
MemDa
);

499 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

500 
	`IF_ERR_RETURN
(
bzRA
);

502 
bzRA
=
	`BZ_adRiscvMem
(
iv
,(
ut32_t
 *)(&
pMmsg
->
da
[0]),pMmsg->
addr
,pMmsg->
Lth
);

503 
	`IF_ERR_RETURN
(
bzRA
);

505 
BZ_GET_OPCODE
:

506 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_TYPE
,
DaInfo
->
u
.
Tx
.
Cmd
);

507 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

508 
	`IF_ERR_RETURN
(
bzRA
);

510 
hStus
=
	`BZ_iWreReg
(
iv
,
SEND_CMD_DATA
,
DaInfo
->
u
.
Rx
.
RxDa
.
vue
);

511 
bzRA
=
	`BZ_ApiEHdr
(
iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

512 
	`IF_ERR_RETURN
(
bzRA
);

514 
BZ_GET_MEMORY_DATA
:

515 
bzRA
=
	`BZ_adRiscvMem
(
iv
,(
ut32_t
 *)((
ut64_t
)
DaInfo
->
u
.
Rx
.
RxDa
.
lo
),DaInfo->u.Rx.RxDa.
addr
,DaInfo->u.Rx.RxDa.
vue
);

516 
	`IF_ERR_RETURN
(
bzRA
);

521 
bzRA
=
	`bz_iIru
(
iv
,1);

522 
	`IF_ERR_RETURN
(
bzRA
);

524 
bzRA
=
	`BZ_iWaCmdCfm
(
iv
);

525 
	`IF_ERR_RETURN
(
bzRA
);

527  (
ut32_t
)
bzRA
;

528 
	}
}

531 
ut32_t
 
	$BZ_wreRiscvProfe
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
)

533 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

534 
ut32_t
 
i
 = 0,
j
=0;

535 
bzInfo_t
 *
pSInfo
;

536 
BzDa
 
DaInfo
;

537 
BzMem
 *
pMsg
;

539 
pSInfo
&
hw_iv
->
BzS
;

540 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

542 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

543 
DaInfo
.
CmdTy
=0xff;

544 
pMsg
->
Cmd
=
BZ_WRITE_MEM_OPCODE
;

545 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_PROFILE_MSGID
;

546 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_PROFILE_MSGLEN
;

547 
i
 = 0; i < 4; i++)

549 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
ocks
.
deviClock_kHz
) >> (i * 8)) & 0x000000FF);

551 
i
 = 4; i < 8; i++)

553 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
ocks
.
r_equcy_Hz
) >> ((i - 4) * 8)) & 0x000000FF);

555 
pMsg
->
Msg
.
da
[8] = ((
In
->
ocks
.
rfPUExLo
 > 0) ? 1 : 0);

557 
pMsg
->
Msg
.
da
[9] = (
In
->
ocks
.
rfPPhaSyncMode
 & 0x03);

558 
pMsg
->
Msg
.
da
[10]=0;

559 
pMsg
->
Msg
.
da
[11]=0;

560 i(
pSInfo
->
ofesVid
 & 
TX_PROFILE_VALID
)

563 
pMsg
->
Msg
.
da
[12] = 
In
->
tx
.
txProfe
.
txFByss
;

564 
pMsg
->
Msg
.
da
[13] = 
In
->
tx
.
txProfe
.
txFIpީi
;

565 
pMsg
->
Msg
.
da
[14] = 
In
->
tx
.
txProfe
.
thb1Ipީi
;

566 
pMsg
->
Msg
.
da
[15] = 
In
->
tx
.
txProfe
.
thb2Ipީi
;

567 
pMsg
->
Msg
.
da
[16] = 
In
->
tx
.
txProfe
.
thb3Ipީi
;

568 
pMsg
->
Msg
.
da
[17]=0;

569 
pMsg
->
Msg
.
da
[18]=0;

570 
pMsg
->
Msg
.
da
[19]=0;

571 
i
 = 20; i < 24; i++)

573 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
tx
.
txProfe
.
txIutRe_kHz
) >> ((i - 20) * 8)) & 0x000000FF);

576 
i
 = 24; i < 28; i++)

578 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
tx
.
txProfe
.
imySigBdwidth_Hz
) >> ((i - 24) * 8)) & 0x000000FF);

581 
i
 = 28; i < 32; i++)

583 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
tx
.
txProfe
.
rfBdwidth_Hz
) >> ((i - 28) * 8)) & 0x000000FF);

585 
i
 = 32; i < 36; i++)

587 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
tx
.
txProfe
.
txBbf3dBCr_kHz
) >> ((i - 32) * 8)) & 0x000000FF);

591 
j
 = 12; j < 36; j++)

593 
pMsg
->
Msg
.
da
[
j
] = 0;

596 i(
pSInfo
->
ofesVid
 & 
RX_PROFILE_VALID
)

599 
pMsg
->
Msg
.
da
[36] = 
In
->
rx
.
rxProfe
.
rxFByss
;

600 
pMsg
->
Msg
.
da
[37] = 
In
->
rx
.
rxProfe
.
rxFDecimi
;

601 
pMsg
->
Msg
.
da
[38] = 
In
->
rx
.
rxProfe
.
rhb1Decimi
;

602 
pMsg
->
Msg
.
da
[39]=0;

604 
i
 = 40; i < 44; i++)

606 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
rx
.
rxProfe
.
rxOuutRe_kHz
) >> ((i - 40) * 8)) & 0x000000FF);

609 
i
 = 44; i < 48; i++)

612 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
rx
.
rxProfe
.
rfBdwidth_Hz
) >> ((i - 44) * 8)) & 0x000000FF);

614 
i
 = 48; i < 52; i++)

616 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
rx
.
rxProfe
.
rxBbf3dBCr_kHz
) >> ((i - 48) * 8)) & 0x000000FF);

622 
j
 = 36; j < 52; j++)

624 
pMsg
->
Msg
.
da
[
j
] = 0;

627 i(
pSInfo
->
ofesVid
 & 
ORX_PROFILE_VALID
)

630 
pMsg
->
Msg
.
da
[52] = 
In
->
obsRx
.
xProfe
.
xFByss
;

631 
pMsg
->
Msg
.
da
[53] = 
In
->
obsRx
.
xProfe
.
xFDecimi
;

632 
pMsg
->
Msg
.
da
[54] = 0;

633 
pMsg
->
Msg
.
da
[55] = 0;

635 
i
 = 56; i < 60; i++)

637 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
obsRx
.
xProfe
.
xOuutRe_kHz
) >> ((i - 56) * 8)) & 0x000000FF);

640 
i
 = 60; i < 64; i++)

643 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
obsRx
.
xProfe
.
rfBdwidth_Hz
) >> ((i - 60) * 8)) & 0x000000FF);

645 
i
 = 64; i < 68; i++)

647 
pMsg
->
Msg
.
da
[
i
] = (
ut8_t
)(((
In
->
obsRx
.
xProfe
.
rxBbf3dBCr_kHz
) >> ((i - 64) * 8)) & 0x000000FF);

653 
j
 = 52; j < 68; j++)

655 
pMsg
->
Msg
.
da
[
j
] = 0;

658 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

659  (
ut32_t
)
bzRA
;

660 
	}
}

662 
ut32_t
 
	$BZ_adRiscvProfe
(
BzDevi_t
 *
hw_iv
,
BzIn_t
 *
In
)

664 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

666 
ut32_t
 
i
 = 0;

667 
bzInfo_t
 *
pSInfo
;

668 
BzDa
 
DaInfo
;

669 
BzMem
 *
pMsg
;

670 
pSInfo
=&
hw_iv
->
BzS
;

672 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

674 
DaInfo
.
CmdTy
=0xff;

675 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

676 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_PROFILE_MSGID
;

677 
pMsg
->
Msg
.
Lth
=
HI_MSG_TO_PROFILE_MSGLEN
;

678 
pMsg
->
Msg
.
addr
=
PROFILE_MSG_ADDR
;

679 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

680 
	`IF_ERR_RETURN
(
bzRA
);

682 
	`BZ_Memt
(
In
, 0, (
BzIn_t
));

683 
i
 = 0; i < 4; i++)

685 
In
->
ocks
.
deviClock_kHz
 |(
pMsg
->
Msg
.
da
[
i
]<<(i * 8));

689 
i
 = 4; i < 8; i++)

691 
In
->
ocks
.
r_equcy_Hz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 4) * 8);

694 
In
->
ocks
.
rfPUExLo
 = 
pMsg
->
Msg
.
da
[8];

695 
In
->
ocks
.
rfPPhaSyncMode
 = (
pMsg
->
Msg
.
da
[9] & 0x03);

700 i(
pSInfo
->
ofesVid
 & 
TX_PROFILE_VALID
)

703 
In
->
tx
.
txProfe
.
txFByss
 = 
pMsg
->
Msg
.
da
[12];

704 
In
->
tx
.
txProfe
.
txFIpީi
 = 
pMsg
->
Msg
.
da
[13];

705 
In
->
tx
.
txProfe
.
thb1Ipީi
 = 
pMsg
->
Msg
.
da
[14];

706 
In
->
tx
.
txProfe
.
thb2Ipީi
 = 
pMsg
->
Msg
.
da
[15];

707 
In
->
tx
.
txProfe
.
thb3Ipީi
 = 
pMsg
->
Msg
.
da
[16];

711 
i
 = 20; i < 24; i++)

713 
In
->
tx
.
txProfe
.
txIutRe_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 20) * 8);

716 
i
 = 24; i < 28; i++)

718 
In
->
tx
.
txProfe
.
imySigBdwidth_Hz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 24) * 8);

721 
i
 = 28; i < 32; i++)

723 
In
->
tx
.
txProfe
.
rfBdwidth_Hz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 28) * 8);

726 
i
 = 32; i < 36; i++)

728 
In
->
tx
.
txProfe
.
txBbf3dBCr_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 32) * 8);

733 i(
pSInfo
->
ofesVid
 & 
RX_PROFILE_VALID
)

736 
In
->
rx
.
rxProfe
.
rxFByss
 = 
pMsg
->
Msg
.
da
[36];

737 
In
->
rx
.
rxProfe
.
rxFDecimi
 = 
pMsg
->
Msg
.
da
[37];

738 
In
->
rx
.
rxProfe
.
rhb1Decimi
 = 
pMsg
->
Msg
.
da
[38];

741 
i
 = 40; i < 44; i++)

743 
In
->
rx
.
rxProfe
.
rxOuutRe_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 40) * 8);

746 
i
 = 44; i < 48; i++)

749 
In
->
rx
.
rxProfe
.
rfBdwidth_Hz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 44) * 8);

752 
i
 = 48; i < 52; i++)

754 
In
->
rx
.
rxProfe
.
rxBbf3dBCr_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 48) * 8);

758 i(
pSInfo
->
ofesVid
 & 
ORX_PROFILE_VALID
)

761 
In
->
obsRx
.
xProfe
.
xFByss
 = 
pMsg
->
Msg
.
da
[52];

762 
In
->
obsRx
.
xProfe
.
xFDecimi
 = 
pMsg
->
Msg
.
da
[53];

766 
i
 = 56; i < 60; i++)

768 
In
->
obsRx
.
xProfe
.
xOuutRe_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 56) * 8);

771 
i
 = 60; i < 64; i++)

774 
In
->
obsRx
.
xProfe
.
rfBdwidth_Hz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 60) * 8);

776 
i
 = 64; i < 68; i++)

778 
In
->
obsRx
.
xProfe
.
rxBbf3dBCr_kHz
 |(
pMsg
->
Msg
.
da
[
i
]) << ((i - 64) * 8);

781  (
ut32_t
)
bzRA
;

782 
	}
}

783 
ut32_t
 
	$BZ_waFmweRdy
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
timeout
)

785 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

786 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

788 
uiTry
 > 0){

789 
	`BZ_mday
(
timeout
);

790 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

791 
	`IF_ERR_RETURN
(
bzRA
);

792 if(
hw_iv
->
ps
.
fmweRdy
==1){

793 
	`BZ_rStus
(
hw_iv
);

794 
hw_iv
->
ps
.
fmweRdy
=0;

797 
uiTry
--;

799 if(
uiTry
 <= 0){

800 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

802  (
ut32_t
)
bzRA
;

803 
	}
}

804 
ut32_t
 
	$BZ_waProfeDe
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 
timeout
)

806 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

807 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

809 
uiTry
 > 0){

810 
	`BZ_mday
(
timeout
);

811 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

812 
	`IF_ERR_RETURN
(
bzRA
);

813 if(
hw_iv
->
ofe_de
==1){

814 
	`BZ_rStus
(
hw_iv
);

815 
hw_iv
->
ofe_de
=0;

818 
uiTry
--;

820 if(
uiTry
 <= 0){

821 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

823  (
ut32_t
)
bzRA
;

824 
	}
}

826 
ut32_t
 
	$BZ_GRiscvTEvt
(
BzDevi_t
 *
hw_iv
)

828 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

829 
BzDa
 
DaInfo
;

830 
BzMem
 *
pMsg
 = 
NULL
;

831 
og_s
 *
og
 = 
NULL
;

832 
wTEvtId
;

833 
ut32_t
 
ogC
;

834 
pMsg
=&
DaInfo
.
u
.
Mmsg
;

835 
DaInfo
.
CmdTy
=0xff;

837 
pMsg
->
Cmd
=
BZ_READ_MEM_OPCODE
;

838 
pMsg
->
Msg
.
Id
=
HI_MSG_TO_CALSTATUS_MSGID
;

839 
pMsg
->
Msg
.
Lth
=
CALIBRITION_SRAM_LEN
;

840 
pMsg
->
Msg
.
addr
=
CALIBRITION_SRAM_ADDR
;

842 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_READ_CMD
);

843 if(
bzRA
!=
BZ_NO_ACTION
){

844  
BZ_ERR_CHECK_PARAM
;

847 
og
 = (
og_s
 *)(
pMsg
->
Msg
.
da
);

848 
wTEvtId
 = 
og
->
dex
 - 1, 
ogC
 = 0;newTraceEventId--;elogCnt++)

850 i(
wTEvtId
 >
og
->
n
)

852 
wTEvtId
 = 
og
->
n
 - 1;

854 
	`BZHAL_Prtf
("TEvtId %d = 0x%x\n",
wTEvtId
,((
og
->
e_id
[wTEvtId].
id
<<24)|log->e_id[wTEvtId].
da
 & 0xffff)));

856  
bzRA
;

857 
	}
}

859 
ut32_t
 
	$BZ_gRiscvLog
(
BzDevi_t
 *
hw_iv
)

861 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

862 
ut32_t
 
DbgDa
=0;

863 
ut32_t
 
DbgAddr
,
ngth
,
dex
=0;

864 
BzDa
 
DaInfo
;

865 
ut8_t
 
debug_t
[
DBG_PRINT_BUF_SIZE_MAX
 + 1];

866 
BzCmdTx
 *
pMsg
=
NULL
;

868 
pMsg
=&
DaInfo
.
u
.
Tx
;

869 
DaInfo
.
CmdTy
=0xff;

870 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

871 
pMsg
->
TxDa
.
vue
=
ENABLE_DBG_PRINT2SPI
;

873 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

874 
	`IF_ERR_RETURN
(
bzRA
);

876 
bzRA
=
	`BZ_iGCmdStus
(
hw_iv
);

877 
	`IF_ERR_RETURN
(
bzRA
);

879 if(
hw_iv
->
dbg_de
==1){

881 
bzRA
=
	`BZ_iRdReg
(
hw_iv
,
SEND_CMD_DATA
,&
DbgAddr
);

882 
	`IF_ERR_RETURN
(
bzRA
);

884 
	`BZ_Memt
(
debug_t
,0,(debug_print));

886 
ngth
=0;ngth<(
DBG_PRINT_BUF_SIZE_MAX
>>2);length++){

887 
bzRA
=
	`bz_iGRiscvLog
(
hw_iv
,
DbgAddr
,&
DbgDa
);

888 
	`IF_ERR_RETURN
(
bzRA
);

889 
	`memy
(
debug_t
+
dex
,&
DbgDa
,4);

890 
DbgAddr
+=4;
dex
+=4;

893 
debug_t
[
DBG_PRINT_BUF_SIZE_MAX
] = '\0';

895 
	`BZHAL_Prtf
("\n[Riscv]:%s\n",
debug_t
);

897 
	`BZ_rStus
(
hw_iv
);

898 
hw_iv
->
dbg_de
=0;

900  (
ut32_t
)
bzRA
;

901 
	}
}

903 
ut32_t
 
	$BZ_abRiscvLog
(
BzDevi_t
 *
hw_iv
,
ut32_t
 
debug
)

905 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

907 
BzDa
 
DaInfo
;

908 
BzCmdTx
 *
pMsg
=
NULL
;

909 
DaInfo
.
CmdTy
=0xff;

910 
pMsg
=&
DaInfo
.
u
.
Tx
;

911 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

912 
pMsg
->
TxDa
.
vue
=(((
debug
 &0xffff)<<16)|(
HI_MSG_ENABLE_LOG_MSGID
));

914 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

915 
	`IF_ERR_RETURN
(
bzRA
);

917  
bzRA
;

918 
	}
}

922 
ut32_t
 
	$BZ_iGCmdStus
(
BzDevi_t
 *
hw_iv
)

924 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

925 
bzHE
 
hStus
 = 
BZHAL_OK
;

926 
ut32_t
 
RDa
;

928 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
DOCMD_STATUS
,&
RDa
);

929 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

930 
	`IF_ERR_RETURN
(
bzRA
);

932 if(
RDa
&
	`BIT
(
HI_STATUS_FIRMWARE_READY_BIT
))

934 
bzRA
=
	`bz_gFmweVsi
(
hw_iv
);

935 
hw_iv
->
ps
.
fmweRdy
=1;

937 if(
RDa
&
	`BIT
(
RFPLL_CALI_DONE_BIT
))

939 
hw_iv
->
r_de
=1;

941 if(
RDa
&
	`BIT
(
PHY_INIT_CALI_DONE_BIT
))

943 
hw_iv
->
l_de
=1;

945 if(
RDa
&
	`BIT
(
PHY_INIT_PROFILE_DONE_BIT
))

947 
hw_iv
->
ofe_de
=1;

949 if(
RDa
&
	`BIT
(
JESD204B_DONE_BIT
))

951 
hw_iv
->
j204b_de
=1;

953 if(
RDa
&
	`BIT
(
DBG_2SPI_DONE_BIT
))

955 
hw_iv
->
dbg_de
=1;

957 if(
RDa
&
	`BIT
(
GPIO_GET_VALUE_DONE_BIT
))

959 
hw_iv
->
gpio_g_vue_de
=1;

962  (
ut32_t
)
bzRA
;

963 
	}
}

965 
ut32_t
 
	$BZ_iRetCh
(
BzDevi_t
 *
hw_iv
,
ut8_t
 
ReTy
)

967 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

969 
bzRA
=
	`bz_iIru
(
hw_iv
,1);

970 
	`IF_ERR_RETURN
(
bzRA
);

971  (
ut32_t
)
bzRA
;

972 
	}
}

973 
ut32_t
 
	$BZ_gBoStus
(
BzDevi_t
 *
hw_iv
)

975 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

976 
bzHE
 
hus
 = 
BZHAL_OK
;

977 
ut32_t
 
gVue
=0;

978 
ut32_t
 
uiTry
 = 
WIAT_TIMEOUT
;

981 
uiTry
 > 0){

982 
hus
=
	`BZ_iRdFld
(
hw_iv
,
REG_IP_SRAM_CTRL
,&
gVue
,
BOOT_RDY
,BOOT_RDY);

983 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

984 
	`IF_ERR_RETURN
(
bzRA
);

985 if(
gVue
==1){

988 
uiTry
--;

990 if(
uiTry
 <= 0){

991 
	`BZHAL_Prtf
("ERROR:%Trytimeout!\n", 
__func__
);

994  (
ut32_t
)
bzRA
;

995 
	}
}

996 
ut32_t
 
	$BZ_gSdkVsi
(
BzDevi_t
 *
hw_iv
)

998 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

999 
bud_fo
 
bud
;

1000 
	`memt
(&
bud
, 0, (
bud_fo
));

1002 
bud
.
tٮ_svn_vsi
=
TOTAL_SVN_VERSION
;

1003 
	`y
(
bud
.
cut_svn_vsi
,
CURRENT_SVN_VERSION
,((build.current_svn_version)-1));

1005 
	`BZHAL_Prtf
("\n************SDK VERSION MSG************\n"

1010 
bud
.
tٮ_svn_vsi
, 
COMPILER
, bud.
cut_svn_vsi
);

1012  
bzRA
;

1013 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_rx.c

11 
	~"bz_rx.h
"

12 
	~"bz_dio.h
"

13 
	~"bz_r.h
"

14 
	~"bz__h.h
"

15 
	~"bz_g_dig.h
"

16 
	~"bz_g_a.h
"

17 
	~"bz_gpio.h
"

18 
	~"bz_riscv.h
"

20 
ut32_t
 
	$bz_tRxGaClP
 (
BzDevi_t
 *
hw_iv
, 
BzRxGaClPInfo_t
 *
rxGaClPInfo
)

22 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

25 
ut32_t
 
gpioOutEn
=0;

28 
ut32_t
 
gpioCl
=1;

30 if((
rxGaClPInfo
->
rxGaIncP
 >
BZ_GPIO_00
)&&xGaClPInfo->rxGaIncP <
BZ_GPIO_09
))

32 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
,
gpioCl
,
rxGaClPInfo
->
rxGaIncP
);

33 
	`IF_ERR_RETURN
(
bzRA
);

36 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
,
gpioOutEn
,
rxGaClPInfo
->
rxGaIncP
);

37 
	`IF_ERR_RETURN
(
bzRA
);

39 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
,
rxGaClPInfo
->
rxGaIncPFunc
,rxGaClPInfo->
rxGaIncP
);

40 
	`IF_ERR_RETURN
(
bzRA
);

42 if((
rxGaClPInfo
->
rxGaIncP
 >
BZ_GPIO_00
)&&xGaClPInfo->rxGaIncP <
BZ_GPIO_09
))

44 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
,
gpioCl
,
rxGaClPInfo
->
rxGaDecP
);

45 
	`IF_ERR_RETURN
(
bzRA
);

48 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
,
gpioOutEn
,
rxGaClPInfo
->
rxGaDecP
);

49 
	`IF_ERR_RETURN
(
bzRA
);

51 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
,
rxGaClPInfo
->
rxGaDecPFunc
,rxGaClPInfo->
rxGaDecP
);

52 
	`IF_ERR_RETURN
(
bzRA
);

54  (
ut32_t
)
bzRA
;

55 
	}
}

56 
ut32_t
 
	$BZ_tRxGaClP
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
BzRxGaClP_t
 *
rxGaClP
)

58 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

59 
bzHE
 
hus
=
BZHAL_OK
;

60 
ut32_t
 
MAX_STEP
 =0x7;

62 
rxChl
){

63 
BZ_RX1
:

64 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx1GaClPInfo
);

65 
	`IF_ERR_RETURN
(
bzRA
);

67 
BZ_RX2
:

68 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx2GaClPInfo
);

69 
	`IF_ERR_RETURN
(
bzRA
);

71 
BZ_RX1RX2
:

72 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx1GaClPInfo
);

73 
	`IF_ERR_RETURN
(
bzRA
);

74 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx2GaClPInfo
);

75 
	`IF_ERR_RETURN
(
bzRA
);

81 if(
rxGaClP
->
decSp
 >
MAX_STEP
)

83  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

84 
BZ_ERR_RX_GAINPIN_CTRL_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

87 if(
rxGaClP
->
cSp
>
MAX_STEP
){

89  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

90 
BZ_ERR_RX_GAINPIN_CTRL_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

94 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_02
,(
rxGaClP
->
decSp
-1),11,8);

95 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_02
,(
rxGaClP
->
cSp
-1),15,12);

96 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

97 
	`IF_ERR_RETURN
(
bzRA
);

99  (
ut32_t
)
bzRA
;

100 
	}
}

103 
ut32_t
 
	$BZ_tRxMuGa
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
ut8_t
 
gaIndex
)

105 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

106 
bzHE
 
hE
=
BZHAL_OK
;

108 i(
rxChl
 =
BZ_RX1
)

110 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
rx1MGaIndex
) ||

111 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
rx1MaxGaIndex
))

113  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

114 
BZ_ERR_RX1_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

117 i(
rxChl
 =
BZ_RX2
)

119 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
rx2MGaIndex
) ||

120 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
rx2MaxGaIndex
))

122  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

123 
BZ_ERR_RX2_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

128  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

129 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

132 i(
rxChl
 =
BZ_RX1
)

134 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_02
,1,24,24);

135 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

136 
	`IF_ERR_RETURN
(
bzRA
);

138 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_02
,
gaIndex
,6,0);

139 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

140 
	`IF_ERR_RETURN
(
bzRA
);

144 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_02
,1,25,25);

145 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

146 
	`IF_ERR_RETURN
(
bzRA
);

148 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_02
,
gaIndex
,23,17);

149 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

150 
	`IF_ERR_RETURN
(
bzRA
);

153  (
ut32_t
)
bzRA
;

154 
	}
}

156 
ut32_t
 
	$BZ_gRxGa
(
BzDevi_t
 *
hw_iv
,
BzRxChls_t
 
rxChl
, 
ut32_t
 *
rxGaIndex
)

158 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

159 
bzHE
 
hE
=
BZHAL_OK
;

161 
rxChl
){

162 
BZ_RX1
:

163 
hE
 = 
	`BZ_iRdFld
(
hw_iv
, 
REGOUT_GC_21
,
rxGaIndex
,6,0);

164 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

165 
	`IF_ERR_RETURN
(
bzRA
);

167 
BZ_RX2
:

168 
hE
 = 
	`BZ_iRdFld
(
hw_iv
, 
REGOUT_GC_21
,
rxGaIndex
,14,8);

169 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

170 
	`IF_ERR_RETURN
(
bzRA
);

173  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

174 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

177  (
ut32_t
)
bzRA
;

178 
	}
}

179 
ut32_t
 
	$BZ_tRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
,
BzClWay
 
Way
)

181 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

182 
bzHE
 
hE
=
BZHAL_OK
;

184 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_01
,
mode
,0,0);

185 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

186 
	`IF_ERR_RETURN
(
bzRA
);

190 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_02
,
Way
,16,16);

191 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

192 
	`IF_ERR_RETURN
(
bzRA
);

194  (
ut32_t
)
bzRA
;

195 
	}
}

196 
ut32_t
 
	$BZ_tObsRxGaClP
(
BzDevi_t
 *
hw_iv
, 
BzObsRxChls_t
 
xChl
, 
BzRxGaClP_t
 *
rxGaClP
)

198 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

199 
bzHE
 
hus
=
BZHAL_OK
;

200 
ut32_t
 
MAX_STEP
 =0x7;

202 
xChl
){

203 
BZ_ORX1
:

204 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx1GaClPInfo
);

205 
	`IF_ERR_RETURN
(
bzRA
);

207 
BZ_ORX2
:

208 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx2GaClPInfo
);

209 
	`IF_ERR_RETURN
(
bzRA
);

211 
BZ_ORX1ORX2
:

212 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx1GaClPInfo
);

213 
	`IF_ERR_RETURN
(
bzRA
);

214 
bzRA
 = 
	`bz_tRxGaClP
(
hw_iv
, &
rxGaClP
->
rx2GaClPInfo
);

215 
	`IF_ERR_RETURN
(
bzRA
);

222 if(
rxGaClP
->
decSp
 >
MAX_STEP
)

224  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

225 
BZ_ERR_RX_GAINPIN_CTRL_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

228 if(
rxGaClP
->
cSp
>
MAX_STEP
){

230  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

231 
BZ_ERR_RX_GAINPIN_CTRL_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

235 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_04
,(
rxGaClP
->
decSp
-1),11,8);

236 
hus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_04
,(
rxGaClP
->
cSp
-1),15,12);

238 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hus
,bzRA,
BZ_ERR_RESET_SPI
);

239 
	`IF_ERR_RETURN
(
bzRA
);

241  (
ut32_t
)
bzRA
;

242 
	}
}

244 
ut32_t
 
	$BZ_tObsRxMuGa
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxCh
, 
ut8_t
 
gaIndex
)

246 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

247 
bzHE
 
hE
=
BZHAL_OK
;

249 
obsRxCh
)

251 
BZ_ORX1
:

252 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
x1MGaIndex
) ||

253 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
x1MaxGaIndex
))

255  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

256 
BZ_ERR_ORX1_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

259 
BZ_ORX2
:

260 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
x2MGaIndex
) ||

261 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
x2MaxGaIndex
))

263  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

264 
BZ_ERR_ORX2_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

271 if(
obsRxCh
 =
BZ_ORX1
)

273 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_04
,1,24,24);

274 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

275 
	`IF_ERR_RETURN
(
bzRA
);

277 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_04
,
gaIndex
,6,0);

278 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

279 
	`IF_ERR_RETURN
(
bzRA
);

282 if(
obsRxCh
 =
BZ_ORX2
)

284 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_04
,1,25,25);

285 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

286 
	`IF_ERR_RETURN
(
bzRA
);

288 
hE
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_04
,
gaIndex
,23,17);

289 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

290 
	`IF_ERR_RETURN
(
bzRA
);

293  (
ut32_t
)
bzRA
;

294 
	}
}

296 
ut32_t
 
	$BZ_gObsRxGa
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxChl
, 
ut32_t
 *
obsRxGaIndex
)

298 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

299 
bzHE
 
hE
=
BZHAL_OK
;

301 
obsRxChl
){

302 
BZ_ORX1
:

303 
hE
 = 
	`BZ_iRdFld
(
hw_iv
,
REGOUT_GC_21
,
obsRxGaIndex
,22,16);

304 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

305 
	`IF_ERR_RETURN
(
bzRA
);

307 
BZ_ORX2
:

308 
hE
 = 
	`BZ_iRdFld
(
hw_iv
,
REGOUT_GC_21
,
obsRxGaIndex
,30,24);

309 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

310 
	`IF_ERR_RETURN
(
bzRA
);

313  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

314 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

316  (
ut32_t
)
bzRA
;

317 
	}
}

318 
ut32_t
 
	$BZ_tObsRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
,
BzClWay
 
Way
)

320 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

321 
bzHE
 
hE
=
BZHAL_OK
;

323 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_03
,
mode
,0,0);

324 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

325 
	`IF_ERR_RETURN
(
bzRA
);

329 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_04
,
Way
,16,16);

330 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

331 
	`IF_ERR_RETURN
(
bzRA
);

333  (
ut32_t
)
bzRA
;

334 
	}
}

336 
ut32_t
 
	$BZ_gObsRxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 *
mode
,
BzClWay
 *
Way
)

338 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

339 
bzHE
 
hE
=
BZHAL_OK
;

341 
hE
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GC_03
,
mode
,0,0);

342 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

343 
	`IF_ERR_RETURN
(
bzRA
);

347 
hE
 = 
	`BZ_iRdFld
(
hw_iv
,
REG_GC_04
,
Way
,16,16);

348 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

349 
	`IF_ERR_RETURN
(
bzRA
);

351  (
ut32_t
)
bzRA
;

352 
	}
}

356 
ut32_t
 
	$BZ_tGpioFunFSlirPosS
(
BzDevi_t
 *
hw_iv
, 
BzGpioPS_t
 
GpioNum
,
BzGpioPFunc_t
 
GpioFunc
)

358 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

360 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 
BZ_SPI_CTRL
,
GpioNum
);

361 
	`IF_ERR_RETURN
(
bzRA
);

363 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
, 
BZ_GPIO_DIR_OUT
,
GpioNum
);

364 
	`IF_ERR_RETURN
(
bzRA
);

366 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
, 
BZ_SEL_3
,
GpioNum
);

367 
	`IF_ERR_RETURN
(
bzRA
);

369  (
ut32_t
)
bzRA
;

370 
	}
}

372 
ut32_t
 
	$BZ_tRxSlirEb
(
BzDevi_t
 *
hw_iv
,
BzRxChls_t
 
rxChl
,
BzRxSlirP_t
 *
rxSlrP
)

374 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

376 
BzDa
 
DaInfo
;

377 
BzCmdTx
 *
pMsg
;

379 
bzHE
 
hE
=
BZHAL_OK
;

381 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

382 
pMsg
=&
DaInfo
.
u
.
Tx
;

384 
DaInfo
.
CmdTy
=0xff;

385 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

387 
rxChl
){

389 
BZ_RX1
:

390 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx1SlirPInfo
.
rx1SlirP_0
,rxSlrP->
rxSlirPFunc
);

391 
	`IF_ERR_RETURN
(
bzRA
);

393 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx1SlirPInfo
.
rx1SlirP_1
,rxSlrP->
rxSlirPFunc
);

394 
	`IF_ERR_RETURN
(
bzRA
);

396 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx1SlirPInfo
.
rx1SlirP_2
,rxSlrP->
rxSlirPFunc
);

397 
	`IF_ERR_RETURN
(
bzRA
);

399 
BZ_RX2
:

400 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx2SlirPInfo
.
rx2SlirP_0
,rxSlrP->
rxSlirPFunc
);

401 
	`IF_ERR_RETURN
(
bzRA
);

403 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx2SlirPInfo
.
rx2SlirP_1
,rxSlrP->
rxSlirPFunc
);

404 
	`IF_ERR_RETURN
(
bzRA
);

406 
bzRA
=
	`BZ_tGpioFunFSlirPosS
(
hw_iv
,
rxSlrP
->
rx2SlirPInfo
.
rx2SlirP_2
,rxSlrP->
rxSlirPFunc
);

407 
	`IF_ERR_RETURN
(
bzRA
);

413 if(
rxSlrP
->
EbSlir
 =
BZ_RXSLICER_EN
){

416 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=(
HI_ENABLE_SLICER
|(
BZ_RXSLICER_EN
<<16));

417 
	`BZ_iWreFld
(
hw_iv
,
REG_J_SEL_1
,2,17,16);

421 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=(
HI_ENABLE_SLICER
|(
BZ_RXSLICER_DIS
<<16));

422 
	`BZ_iWreFld
(
hw_iv
,
REG_J_SEL_1
,0,17,16);

424 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

425 
	`IF_ERR_RETURN
(
bzRA
);

428 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_00
,0x1,16,16);

429 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

430 
	`IF_ERR_RETURN
(
bzRA
);

432  (
ut32_t
)
bzRA
;

434 
	}
}

435 
ut32_t
 
	$BZ_tORxPFuni
(
BzDevi_t
 *
hw_iv
,
BzObsRxChls_t
 
obsRxChl
)

437 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

439 
obsRxChl
){

440 
BZ_ORX1
:

441 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 
BZ_SPI_CTRL
, 
BZ_GPIO_05
);

442 
	`IF_ERR_RETURN
(
bzRA
);

444 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
,
BZ_GPIO_DIR_IN
, 
BZ_GPIO_05
);

445 
	`IF_ERR_RETURN
(
bzRA
);

447 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
,
BZ_SEL_4
, 
BZ_GPIO_05
);

448 
	`IF_ERR_RETURN
(
bzRA
);

450 
BZ_ORX2
:

451 
bzRA
=
	`BZ_tGpioSourCl
(
hw_iv
, 
BZ_SPI_CTRL
, 
BZ_GPIO_06
);

452 
	`IF_ERR_RETURN
(
bzRA
);

454 
bzRA
=
	`BZ_tGpioDei
(
hw_iv
,
BZ_GPIO_DIR_IN
, 
BZ_GPIO_06
);

455 
	`IF_ERR_RETURN
(
bzRA
);

457 
bzRA
=
	`BZ_tGpioFuncS
(
hw_iv
,
BZ_SEL_4
, 
BZ_GPIO_06
);

458 
	`IF_ERR_RETURN
(
bzRA
);

461  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,

462 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

464  (
ut32_t
)
bzRA
;

465 
	}
}

467 
ut32_t
 
	$BZ_gRxDecPow
(
BzDevi_t
 *
hw_iv
, 
BzRxChls_t
 
rxChl
, 
st16_t
 *
rxDecPow_dBFS
)

469 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

470 
bzHE
 
hStus
=
BZHAL_OK
;

472 
ut32_t
 
rxDecPow
 = 0;

474 
BzDa
 
DaInfo
;

475 
BzCmdTx
 *
pMsg
;

477 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

478 
pMsg
=&
DaInfo
.
u
.
Tx
;

480 
DaInfo
.
CmdTy
=0xff;

481 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

483 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=(
HI_GET_DACPOWER
|(
rxChl
<<16));

485 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

486 
	`IF_ERR_RETURN
(
bzRA
);

488 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
SEND_CMD_DATA
,&
rxDecPow
);

489 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

490 
	`IF_ERR_RETURN
(
bzRA
);

492 *
rxDecPow_dBFS
=(
st16_t
)
rxDecPow
;

493  (
ut32_t
)
bzRA
;

494 
	}
}

495 
ut32_t
 
	$BZ_gORxDecPow
(
BzDevi_t
 *
hw_iv
, 
BzObsRxChls_t
 
xChl
, 
st16_t
 *
xDecPow_dBFS
)

497 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

498 
bzHE
 
hStus
=
BZHAL_OK
;

500 
ut32_t
 
xDecPow
 = 0;

502 
BzDa
 
DaInfo
;

503 
BzCmdTx
 *
pMsg
;

505 
	`BZ_Memt
(&
DaInfo
,0,(
BzDa
));

506 
pMsg
=&
DaInfo
.
u
.
Tx
;

508 
DaInfo
.
CmdTy
=0xff;

509 
pMsg
->
Cmd
=
BZ_SET_OPCODE
;

511 
DaInfo
.
u
.
Tx
.
TxDa
.
vue
=(
HI_GET_ORXDACPOWER
|(
xChl
<<16));

513 
bzRA
=
	`BZ_ndRiscvCmd
(
hw_iv
,(*)&
DaInfo
,
IOCTL_WRITE_CMD
);

514 
	`IF_ERR_RETURN
(
bzRA
);

516 
hStus
=
	`BZ_iRdReg
(
hw_iv
,
SEND_CMD_DATA
,&
xDecPow
);

517 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

518 
	`IF_ERR_RETURN
(
bzRA
);

520 *
xDecPow_dBFS
=(
st32_t
)
xDecPow
;

521  (
ut32_t
)
bzRA
;

522 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_tx.c

10 
	~"bz_tx.h
"

11 
	~"bz_dio.h
"

12 
	~"bz_r.h
"

13 
	~"bz__h.h
"

14 
	~"bz_riscv_tys.h
"

15 
	~"bz_g_dig.h
"

16 
	~"bz_g_a.h
"

18 
ut32_t
 
	$BZ_tTxMuGa
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
TxCh
, 
ut8_t
 
gaIndex
)

20 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

21 
bzHE
 
hE
=
BZHAL_OK
;

23 
TxCh
)

25 
BZ_TX1
:

26 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
tx1MGaIndex
) ||

27 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
tx1MaxGaIndex
))

29  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,

30 
BZ_ERR_ORX1_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

33 
BZ_TX2
:

34 i((
gaIndex
 < 
hw_iv
->
BzS
.
gaIndexes
.
tx2MGaIndex
) ||

35 (
gaIndex
 > 
hw_iv
->
BzS
.
gaIndexes
.
tx2MaxGaIndex
))

37  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,

38 
BZ_ERR_ORX2_MAX_GAIN_VALID
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

45 if(
TxCh
 =
BZ_TX1
)

47 
bzRA
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_06
,1,16,16);

48 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

49 
	`IF_ERR_RETURN
(
bzRA
);

51 
bzRA
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_06
,
gaIndex
,5,0);

52 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

53 
	`IF_ERR_RETURN
(
bzRA
);

56 if(
TxCh
 =
BZ_TX2
)

58 
bzRA
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_06
,1,17,17);

59 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

60 
	`IF_ERR_RETURN
(
bzRA
);

62 
bzRA
 = 
	`BZ_iWreFld
(
hw_iv
, 
REG_GC_06
,
gaIndex
,13,8);

63 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

64 
	`IF_ERR_RETURN
(
bzRA
);

67  (
ut32_t
)
bzRA
;

68 
	}
}

69 
ut32_t
 
	$BZ_tTxGaCڌMode
(
BzDevi_t
 *
hw_iv
, 
BzGaMode_t
 
mode
)

71 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

72 
bzHE
 
hE
=
BZHAL_OK
;

75 
hE
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_05
,
mode
,0,0);

76 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

77 
	`IF_ERR_RETURN
(
bzRA
);

79  (
ut32_t
)
bzRA
;

80 
	}
}

82 
ut32_t
 
	$BZ_gTxGa
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
TxChl
, 
ut32_t
 *
TxGaIndex
)

84 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

85 
bzHE
 
hE
=
BZHAL_OK
;

87 
TxChl
){

88 
BZ_TX1
:

89 
hE
 = 
	`BZ_iRdFld
(
hw_iv
, 
REGOUT_GC_22
,
TxGaIndex
,6,0);

90 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

91 
	`IF_ERR_RETURN
(
bzRA
);

93 
BZ_TX2
:

94 
hE
 = 
	`BZ_iRdFld
(
hw_iv
, 
REGOUT_GC_22
,
TxGaIndex
,14,8);

95 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

96 
	`IF_ERR_RETURN
(
bzRA
);

99  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,

100 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

102  (
ut32_t
)
bzRA
;

103 
	}
}

105 
ut32_t
 
	$BZ_tPaPreiCfg
(
BzDevi_t
 *
hw_iv
,
BzTxPaPreCfg_t
 *
txPaPreCfg
)

107 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

108 
bzHE
 
hStus
=
BZHAL_OK
;

111 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_46
,
txPaPreCfg
->
TxCiC
,31,0);

112 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

113 
	`IF_ERR_RETURN
(
bzRA
);

116 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_48
,
txPaPreCfg
->
TxPowThshd
,31,0);

117 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

118 
	`IF_ERR_RETURN
(
bzRA
);

120 if(
txPaPreCfg
->
Eb
==0x0){

122 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_GC_49
,0x0,30,29);

123 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

124 
	`IF_ERR_RETURN
(
bzRA
);

127 
hStus
 = 
	`BZ_iWreFld
(
hw_iv
,
REG_GC_47
,
txPaPreCfg
->
Eb
,0,0);

128 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RX
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

129 
	`IF_ERR_RETURN
(
bzRA
);

131  (
ut32_t
)
bzRA
;

132 
	}
}

134 
ut32_t
 
	$BZ_gPaPreEFgs
(
BzDevi_t
 *
hw_iv
, 
ut32_t
 *
rFgs
)

136 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

137 
bzHE
 
hStus
=
BZHAL_OK
;

143 
hStus
 = 
	`BZ_iRdFld
(
hw_iv
, 
REG_GC_49
, 
rFgs
,30,29);

144 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

145 
	`IF_ERR_RETURN
(
bzRA
);

147  (
ut32_t
)
bzRA
;

148 
	}
}

150 
ut32_t
 
	$BZ_RevtCˬPaPre
(
BzDevi_t
 *
hw_iv
)

152 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

153 
bzHE
 
hStus
 = 
BZHAL_OK
;

154 
ut32_t
 
rFg
,
dex
;

156 
	`BZ_gPaPreEFgs
(
hw_iv
,&
rFg
);

159 if(
rFg
==0x1){

161 
hStus
 = 
	`BZ_iRdFld
(
hw_iv
, 
REG_GC_49
,&
dex
,6,0);

162 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

163 
	`IF_ERR_RETURN
(
bzRA
);

165 
bzRA
=
	`BZ_tTxMuGa
(
hw_iv
,
BZ_TX1
,
dex
);

166 
	`IF_ERR_RETURN
(
bzRA
);

168 if(
rFg
==0x2){

170 
hStus
 = 
	`BZ_iRdFld
(
hw_iv
, 
REG_GC_49
,&
dex
,14,8);

171 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

172 
	`IF_ERR_RETURN
(
bzRA
);

174 
bzRA
=
	`BZ_tTxMuGa
(
hw_iv
,
BZ_TX2
,
dex
);

175 
	`IF_ERR_RETURN
(
bzRA
);

179 
hStus
=
	`BZ_iWreFld
(
hw_iv
,
REG_GC_49
,0x0,30,29);

180 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_RISCV
,
hStus
,bzRA,
BZ_ERR_RESET_SPI
);

181 
	`IF_ERR_RETURN
(
bzRA
);

183  (
ut32_t
)
bzRA
;

184 
	}
}

186 
ut32_t
 
	$BZ_gTxSamePow
(
BzDevi_t
 *
hw_iv
,
BzTxChls_t
 
txChl
, 
ut16_t
 *
chlPow
)

188 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

190  (
ut32_t
)
bzRA
;

191 
	}
}

195 
ut32_t
 
	$BZ_tDDsFqCfig
(
BzDevi_t
 *
hw_iv
, 
BzTxChls_t
 
txChl
, 
BzTxDdsTeTeCfg_t
 
txDDSTe
, 
BzTxDdsACfg_t
 
txDDSA
)

197 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

198 
bzHE
 
hE
=
BZHAL_OK
;

199 
ut32_t
 
txFByssMode
;

200 
st32_t
 
Fq_wd0
,
Fq_wd1
;

203 

 = 4294967296.0F/245760;

205 
hE
=
	`BZ_iRdFld
(
hw_iv
, 
REG_CALI_TXFLT_CTRL_0
, &
txFByssMode
,3,0);

206 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

207 
	`IF_ERR_RETURN
(
bzRA
);

209 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CLK_SWAP_0
,1,11,11);

210 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

211 
	`IF_ERR_RETURN
(
bzRA
);

213 if(
txFByssMode
 =
TX_FIR_BYPASS
)

215 
Fq_wd0
 = 

*
txDDSTe
.
txTe1Fq_kHz
;

216 
Fq_wd1
 = 

*
txDDSTe
.
txTe2Fq_kHz
;;

218 if(
txFByssMode
 =
TX_FIRANDTHB3_BYPASS
)

220 
Fq_wd0
 = 

/2*
txDDSTe
.
txTe1Fq_kHz
;

221 
Fq_wd1
 = 

/2*
txDDSTe
.
txTe2Fq_kHz
;;

223 if(
txFByssMode
 =
TX_THB1_BYPASS
)

225 
Fq_wd0
 = 

/4*
txDDSTe
.
txTe1Fq_kHz
;

226 
Fq_wd1
 = 

/4*
txDDSTe
.
txTe2Fq_kHz
;

230  (
ut32_t
)
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,

231 
BZ_ERR_TXRXORX_CHANNLE
,
bzRA
,
BZ_ERR_CHECK_PARAM
);

234 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 
txDDSA
.
txTe0A
, 6, 4);

235 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

236 
	`IF_ERR_RETURN
(
bzRA
);

238 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 
txDDSA
.
txTe1A
, 9, 7);

239 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

240 
	`IF_ERR_RETURN
(
bzRA
);

242 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 
txDDSA
.
txTe2A
, 12, 10);

243 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

244 
	`IF_ERR_RETURN
(
bzRA
);

246 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 
txDDSA
.
txTe3A
, 15, 13);

247 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

248 
	`IF_ERR_RETURN
(
bzRA
);

250 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_2
, 
Fq_wd0
, 31, 0);

251 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

252 
	`IF_ERR_RETURN
(
bzRA
);

254 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_3
, 
Fq_wd1
, 31, 0);

255 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

256 
	`IF_ERR_RETURN
(
bzRA
);

258 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_CTRL_0
, 1, 0, 0);

259 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

260 
	`IF_ERR_RETURN
(
bzRA
);

262 
txChl
){

263 
BZ_TX1
:

264 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_CTRL_0
, 0, 4, 4);

265 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

266 
	`IF_ERR_RETURN
(
bzRA
);

268 
BZ_TX2
:

269 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_CTRL_0
, 1, 4, 4);

270 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

271 
	`IF_ERR_RETURN
(
bzRA
);

277 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_OP_0
, 1, 12, 12);

278 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

279 
	`IF_ERR_RETURN
(
bzRA
);

280 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_OP_0
, 0 , 12, 12);

281 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

282 
	`IF_ERR_RETURN
(
bzRA
);

284 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_OP_0
, 0, 1, 1);

285 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

286 
	`IF_ERR_RETURN
(
bzRA
);

288 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_OP_0
, 1, 1, 1);

289 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

290 
	`IF_ERR_RETURN
(
bzRA
);

292 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 1, 1, 0);

293 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

294 
	`IF_ERR_RETURN
(
bzRA
);

296  
bzRA
;

297 
	}
}

299 
ut32_t
 
	$BZ_tDdsOff
(
BzDevi_t
 *
hw_iv
)

301 
BzRecovyAis_t
 
bzRA
=
BZ_NO_ACTION
;

302 
bzHE
 
hE

BZHAL_OK
;

304 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_CTRL_0
, 0x00,0,0);

305 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

306 
	`IF_ERR_RETURN
(
bzRA
);

308 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_OP_0
, 0x00,1,1);

309 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

310 
	`IF_ERR_RETURN
(
bzRA
);

312 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CALI_DG_0
, 0, 1, 0);

313 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

314 
	`IF_ERR_RETURN
(
bzRA
);

316 
hE
=
	`BZ_iWreFld
(
hw_iv
, 
REG_CLK_SWAP_0
,0,11,11);

317 
bzRA
=
	`BZ_ApiEHdr
(
hw_iv
,
BZ_ERRHDL_HAL_TX
,
hE
,bzRA,
BZ_ERR_RESET_SPI
);

318 
	`IF_ERR_RETURN
(
bzRA
);

320  
bzRA
;

321 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/inc/appclock.h

1 #ide
__APP_CLOC_H


2 
	#__APP_CLOC_H


	)

4 
pock_
();

5 
pock_sync
();

6 
pock_rm
();

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/Si5344-RevD-Registers.h

20 #ide
SI5344_REVD_REG_CONFIG_HEADER


21 
	#SI5344_REVD_REG_CONFIG_HEADER


	)

23 
	#SI5344_REVD_REG_CONFIG_NUM_REGS
 465

	)

25 
ut8_t
 
	gPAGE
 = 0x01;

26 
ut8_t
 
	gSPI_SET_ADDRESS_CMD
 = 0x00;

27 
ut8_t
 
	gSPI_WRITE_CMD
 = 0x40;

28 
ut8_t
 
	gSPI_READ_CMD
 = 0x80;

32 
	maddss
;

33 
	mvue
;

35 } 
	tsi5344_vd_gi_t
;

37 
si5344_vd_gi_t
 cڡ 
	gsi5344_vd_gis
[
SI5344_REVD_REG_CONFIG_NUM_REGS
] =

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/ad9528.c

43 
	~<dlib.h
>

44 
	~<dio.h
>

45 
	~<unid.h
>

46 
	~<f.h
>

47 
	~<sys/iol.h
>

49 
	~"ut.h
"

50 
	~"ad9528.h
"

52 
	#AD9528_NAME
 "/dev/ad9528i0"

	)

53 
	gi_fe
;

55 
bo
 
	$ad9528_l2_vid_lib_div
(
div
)

57 i(
div
 < 16 || div > 255)

58  
l
;

60 
div
) {

65  
l
;

68  
ue
;

69 
	}
}

81 
t32_t
 
	$ad9528_i_ad
(
ad9528_dev
 *
dev
,

82 
ut32_t
 
g_addr
,

83 
ut32_t
 *
g_da
)

85 
ad9528_commd
 
commd
;

86 
t
;

88 
commd
.
addr
 = 
g_addr
;

89 
commd
.
da
 = 0;

91 
t
 = 
	`iol
(
i_fe
, 
AD9528_READ_REG
, &
commd
);

92 *
g_da
 = 
commd
.
da
;

93 
	`tf
("%t=%d\n", 
__func__
, 
t
);

96 
	}
}

108 
t32_t
 
	$ad9528_i_wre
(
ad9528_dev
 *
dev
,

109 
ut32_t
 
g_addr
,

110 
ut32_t
 
g_da
)

112 
ad9528_commd
 
commd
;

113 
t
;

115 
commd
.
addr
 = 
g_addr
;

116 
commd
.
da
 = 
g_da
;

118 
	`iol
(
i_fe
, 
AD9528_WRITE_REG
, &
commd
);

120 
t
 = 
	`tf
("%t=%d\n", 
__func__
,et);

122 
	}
}

135 
t32_t
 
	$ad9528_i_ad_n
(
ad9528_dev
 *
dev
,

136 
ut32_t
 
g_addr
,

137 
ut32_t
 *
g_da
)

139 
ad9528_commd
 
commd
;

140 
t
;

142 
commd
.
addr
 = 
g_addr
;

143 
commd
.
da
 = 0;

145 
t
 = 
	`iol
(
i_fe
, 
AD9528_READ_REG_N
, &
commd
);

146 *
g_da
 = 
commd
.
da
;

148  
t
;

149 
	}
}

162 
t32_t
 
	$ad9528_i_wre_n
(
ad9528_dev
 *
dev
,

163 
ut32_t
 
g_addr
,

164 
ut32_t
 
g_da
)

166 
ad9528_commd
 
commd
;

167 
t
;

169 
commd
.
addr
 = 
g_addr
;

170 
commd
.
da
 = 
g_da
;

172 
t
 = 
	`iol
(
i_fe
, 
AD9528_WRITE_REG_N
, &
commd
);

174  
t
;

175 
	}
}

187 
t32_t
 
	$ad9528_pl
(
ad9528_dev
 *
dev
,

188 
ut32_t
 
g_addr
,

189 
ut32_t
 
mask
,

190 
ut32_t
 
da
)

192 
ut32_t
 
g_da
;

193 
ut8_t
 
timeout
 = 100;

194 
t32_t
 
t
;

197 
t
 = 
	`ad9528_i_ad_n
(
dev
,

198 
g_addr
,

199 &
g_da
);

200 i(
t
 < 0)

201  
t
;

202 
	`up
(1000);

203 } ((
g_da
 & 
mask
!
da
&& --
timeout
);

205  
timeout
 ? 0 : -1;

208 
	}
}

217 
t32_t
 
	$ad9528_io_upde
(
ad9528_dev
 *
dev
)

219  
	`ad9528_i_wre_n
(
dev
,

220 
AD9528_IO_UPDATE
,

221 
AD9528_IO_UPDATE_EN
);

222 
	}
}

231 
t32_t
 
	$ad9528_sync
(
ad9528_dev
 *
dev
)

233 
t32_t
 
t
;

235 
t
 = 
	`ad9528_i_wre_n
(
dev
,

236 
AD9528_CHANNEL_SYNC
,

237 
AD9528_CHANNEL_SYNC_SET
);

238 i(
t
 < 0)

239  
t
;

241 
t
 = 
	`ad9528_io_upde
(
dev
);

242 i(
t
 < 0)

243  
t
;

245 
t
 = 
	`ad9528_i_wre_n
(
dev
,

246 
AD9528_CHANNEL_SYNC
,

248 i(
t
 < 0)

249  
t
;

251 
t
 = 
	`ad9528_io_upde
(
dev
);

252 i(
t
 < 0)

253  
t
;

255 i(
	`ad9528_pl
(
dev
, 
AD9528_READBACK
,

256 
AD9528_VCXO_OK
,

257 
AD9528_VCXO_OK
) < 0) {

258 
t
 = -1;

259 
	`tf
("AD9528 VCXO missing!\n");

262 i(
	`ad9528_pl
(
dev
,

263 
AD9528_READBACK
,

264 
AD9528_PLL2_LOCKED
,

265 
AD9528_PLL2_LOCKED
) < 0) {

266 
t
 = -1;

267 
	`tf
("AD9528 PLL2 NOTocked!\n");

270  
t
;

271 
	}
}

280 
t32_t
 
	$ad9528_
(
ad9528__m
 *
_m
)

282 
ut32_t
 
i
;

286 
_m
->
pda
->
i3we
 = 0;

287 
_m
->
pda
->
f_mode
 = 0;

288 
_m
->
pda
->
_
 = 0;

289 
_m
->
pda
->
_diff_rcv_
 = 0;

290 
_m
->
pda
->
_cmos_g_p_
 = 0;

291 
_m
->
pda
->
_r_div
 = 1;

292 
_m
->
pda
->
fb_
 = 0;

293 
_m
->
pda
->
fb_diff_rcv_
 = 0;

294 
_m
->
pda
->
fb_cmos_g_p_
 = 0;

295 
_m
->
pda
->
fb_r_div
 = 1;

296 
_m
->
pda
->
vcxo_eq
 = 0;

297 
_m
->
pda
->
osc__diff_
 = 1;

298 
_m
->
pda
->
osc__cmos_g_p_
 = 0;

299 
_m
->
pda
->
l1_edback_div
 = 1;

300 
_m
->
pda
->
l1_edback_c_vcxo
 = 1;

301 
_m
->
pda
->
l1_chge_pump_cut_nA
 = 5000;

302 
_m
->
pda
->
l1_byss_
 = 0;

303 
_m
->
pda
->
l2_chge_pump_cut_nA
 = 805000;

304 
_m
->
pda
->
l2_eq_doubr_
 = 0;

305 
_m
->
pda
->
l2_r1_div
 = 1;

306 
_m
->
pda
->
l2_vco_div_m1
 = 1;

307 
_m
->
pda
->
l2_ndiv_a_t
 = 1;

308 
_m
->
pda
->
l2_ndiv_b_t
 = 1;

309 
_m
->
pda
->
l2_n2_div
 = 1;

310 
_m
->
pda
->
syef_c
 = 
SYSREF_SRC_INTERNAL
;

311 
_m
->
pda
->
syef_k_div
 = 512;

312 
_m
->
pda
->
e2
 = 
RPOLE2_900_OHM
;

313 
_m
->
pda
->
rzo

RZERO_1850_OHM
;

314 
_m
->
pda
->
e1
 = 
CPOLE1_16_PF
;

315 
_m
->
pda
->
rzo_byss_
 = 0;

317 
i
 = 0; i < 
_m
->
pda
->
num_chls
; i++) {

318 (&
_m
->
pda
->
chls
[
i
])->
chl_num
 = 0;

319 (&
_m
->
pda
->
chls
[
i
])->
sync_igne_
 = 0;

320 (&
_m
->
pda
->
chls
[
i
])->
ouut_dis
 = 0;

321 (&
_m
->
pda
->
chls
[
i
])->
driv_mode
 = 
DRIVER_MODE_LVDS
;

322 (&
_m
->
pda
->
chls
[
i
])->
sigl_sour
 = 
SOURCE_VCO
;

323 (&
_m
->
pda
->
chls
[
i
])->
divid_pha
 = 0;

324 (&
_m
->
pda
->
chls
[
i
])->
chl_divid
 = 1;

328 
	}
}

339 
t32_t
 
	$ad9528_tup
(
ad9528_dev
 **
devi
,

340 
ad9528__m
 
_m
)

342 
ad9528_chl_ec
 *
ch
;

343 
ut32_t
 
aive_mask
 = 0;

344 
ut32_t
 
ignesync_mask
 = 0;

345 
ut32_t
 
vco_eq
;

346 
ut32_t
 
vco_
 = 0;

347 
ut32_t
 
syef_
;

348 
ut32_t
 
__mask
 = 0;

349 
ut32_t
 
g_da
;

350 
t32_t
 
t
;

351 
ut32_t
 
i
;

352 
ut32_t
 
l2_ndiv
, 
l2_ndiv_a_t
, 
l2_ndiv_b_t
;

353 
ad9528_dev
 *
dev
;

355 
dev
 = (
ad9528_dev
 *)
	`mloc
((*dev));

356 i(!
dev
)

359 
dev
->
pda
 = 
_m
.pdata;

361 
i_fe
 = 
	`ݒ
(
AD9528_NAME
, 
O_RDWR
);

362 i(
i_fe
 < 0)

363  
i_fe
;

365 
	`ad9528_t
(
dev
);

367 
t
 = 
	`ad9528_i_wre_n
(
dev
,

368 
AD9528_SERIAL_PORT_CONFIG
,

369 
AD9528_SER_CONF_SOFT_RESET
 |

370 (
dev
->
pda
->
i3we
 ? 0 :

371 
AD9528_SER_CONF_SDO_ACTIVE
));

372 i(
t
 < 0)

373  
t
;

375 
t
 = 
	`ad9528_i_wre_n
(
dev
,

376 
AD9528_SERIAL_PORT_CONFIG_B
,

377 
AD9528_SER_CONF_READ_BUFFERED
);

378 i(
t
 < 0)

379  
t
;

381 
t
 = 
	`ad9528_io_upde
(
dev
);

382 i(
t
 < 0)

383  
t
;

385 
t
 = 
	`ad9528_i_ad_n
(
dev
,

386 
AD9528_CHIP_ID
,

387 &
g_da
);

388 i(
t
 < 0)

389  
t
;

391 i((
g_da
 & 0xFFFFFF!
AD9528_SPI_MAGIC
) {

392 
	`tf
("AD9528 SPI Rd Vify faed (0x%X).\n", 
g_da
);

399 
t
 = 
	`ad9528_i_wre_n
(
dev
,

400 
AD9528_PLL1_REF_A_DIVIDER
,

401 
dev
->
pda
->
_r_div
);

402 i(
t
 < 0)

403  
t
;

405 
t
 = 
	`ad9528_i_wre_n
(
dev
,

406 
AD9528_PLL1_REF_B_DIVIDER
,

407 
dev
->
pda
->
fb_r_div
);

408 i(
t
 < 0)

409  
t
;

411 
t
 = 
	`ad9528_i_wre_n
(
dev
,

412 
AD9528_PLL1_FEEDBACK_DIVIDER
,

413 
dev
->
pda
->
l1_edback_div
);

414 i(
t
 < 0)

415  
t
;

417 
t
 = 
	`ad9528_i_wre_n
(
dev
,

418 
AD9528_PLL1_CHARGE_PUMP_CTRL
,

419 
	`AD_IFE
(
l1_byss_
,

420 
AD9528_PLL1_CHARGE_PUMP_TRISTATE
,

421 
	`AD9528_PLL1_CHARGE_PUMP_CURRENT_nA
(
dev
->
pda
->

422 
l1_chge_pump_cut_nA
) |

423 
AD9528_PLL1_CHARGE_PUMP_MODE_NORMAL
 |

424 
AD9528_PLL1_CHARGE_PUMP_AUTO_TRISTATE_DIS
));

425 i(
t
 < 0)

426  
t
;

428 
t
 = 
	`ad9528_i_wre_n
(
dev
,

429 
AD9528_PLL1_CTRL
,

430 
	`AD_IFE
(
l1_byss_
,

431 
	`AD_IF
(
osc__diff_
,

432 
AD9528_PLL1_OSC_IN_DIFF_EN
) |

433 
	`AD_IF
(
osc__cmos_g_p_
,

434 
AD9528_PLL1_OSC_IN_CMOS_NEG_INP_EN
) |

435 
AD9528_PLL1_REFB_BYPASS_EN
 |

436 
AD9528_PLL1_REFA_BYPASS_EN
 |

437 
AD9528_PLL1_FEEDBACK_BYPASS_EN
,

438 
	`AD_IF
(
_
,

439 
AD9528_PLL1_REFA_RCV_EN
) |

440 
	`AD_IF
(
fb_
,

441 
AD9528_PLL1_REFB_RCV_EN
) |

442 
	`AD_IF
(
osc__diff_
,

443 
AD9528_PLL1_OSC_IN_DIFF_EN
) |

444 
	`AD_IF
(
osc__cmos_g_p_
,

445 
AD9528_PLL1_OSC_IN_CMOS_NEG_INP_EN
) |

446 
	`AD_IF
(
_diff_rcv_
,

447 
AD9528_PLL1_REFA_DIFF_RCV_EN
) |

448 
	`AD_IF
(
fb_diff_rcv_
,

449 
AD9528_PLL1_REFB_DIFF_RCV_EN
)) |

450 
	`AD_IF
(
_cmos_g_p_
,

451 
AD9528_PLL1_REFA_CMOS_NEG_INP_EN
) |

452 
	`AD_IF
(
fb_cmos_g_p_
,

453 
AD9528_PLL1_REFB_CMOS_NEG_INP_EN
) |

454 
	`AD_IF
(
l1_edback_c_vcxo
,

455 
AD9528_PLL1_SOURCE_VCXO
) |

456 
	`AD9528_PLL1_REF_MODE
(
dev
->
pda
->
f_mode
));

457 i(
t
 < 0)

458  
t
;

464 i(
dev
->
pda
->
l2_byss_
) {

465 
t
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_PLL2_CTRL
,

466 
AD9528_PLL2_CHARGE_PUMP_MODE_TRISTATE
);

467 i(
t
 < 0)

468  
t
;

470 
t
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_SYSREF_RESAMPLE_CTRL
, 0x1);

471 i(
t
 < 0)

472  
t
;

474 
dev
->
pda
->
syef_c
 = 
SYSREF_SRC_EXTERNAL
;

476 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCO
] = dev->
pda
->
vcxo_eq
;

477 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCXO
] = dev->
pda
->
vcxo_eq
;

478 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_SYSREF
] = dev->
pda
->
vcxo_eq
;

480 
l2_bysd
;

483 
l2_ndiv
 = 
dev
->
pda
->
l2_vco_div_m1
 * dev->pda->
l2_n2_div
;

484 i(!
	`ad9528_l2_vid_lib_div
(
l2_ndiv
)) {

485 
	`tf
("Fdback cibti divid vu(%uouonge\n", 
l2_ndiv
);

489 
l2_ndiv_a_t
 = 
l2_ndiv
 % 4;

490 
l2_ndiv_b_t
 = 
l2_ndiv
 / 4;

492 
t
 = 
	`ad9528_i_wre_n
(
dev
,

493 
AD9528_PLL2_CHARGE_PUMP
,

494 
	`AD9528_PLL2_CHARGE_PUMP_CURRENT_nA
(
dev
->
pda
->

495 
l2_chge_pump_cut_nA
));

496 i(
t
 < 0)

497  
t
;

499 
t
 = 
	`ad9528_i_wre_n
(
dev
,

500 
AD9528_PLL2_FEEDBACK_DIVIDER_AB
,

501 
	`AD9528_PLL2_FB_NDIV_A_CNT
(
l2_ndiv_a_t
) |

502 
	`AD9528_PLL2_FB_NDIV_B_CNT
(
l2_ndiv_b_t
));

503 i(
t
 < 0)

504  
t
;

506 
t
 = 
	`ad9528_i_wre_n
(
dev
,

507 
AD9528_PLL2_CTRL
,

508 
AD9528_PLL2_CHARGE_PUMP_MODE_NORMAL
 |

509 
	`AD_IF
(
l2_eq_doubr_
,

510 
AD9528_PLL2_FREQ_DOUBLER_EN
));

511 i(
t
 < 0)

512  
t
;

514 
vco_eq
 = 
	`div_u64
((
ut64_t
)
dev
->
pda
->
vcxo_eq
 *

515 (
dev
->
pda
->
l2_eq_doubr_
 ? 2 : 1* 
l2_ndiv
,

516 
dev
->
pda
->
l2_r1_div
);

518 
vco_
 = 
	`AD_IF
(
l2_eq_doubr_
 || 
dev
->
pda
->
l2_r1_div
 != 1,

519 
AD9528_PLL2_DOUBLER_R1_EN
);

520 
t
 = 
	`ad9528_i_wre_n
(
dev
,

521 
AD9528_PLL2_VCO_CTRL
,

522 
vco_
);

523 i(
t
 < 0)

524  
t
;

526 
t
 = 
	`ad9528_i_wre_n
(
dev
,

527 
AD9528_PLL2_VCO_DIVIDER
,

528 
	`AD9528_PLL2_VCO_DIV_M1
(
dev
->
pda
->

529 
l2_vco_div_m1
) |

530 
	`AD_IFE
(
l2_vco_div_m1
,

532 
AD9528_PLL2_VCO_DIV_M1_PWR_DOWN_EN
));

533 i(
t
 < 0)

534  
t
;

536 i(
dev
->
pda
->
l2_vco_div_m1
)

537 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCO
] =

538 
vco_eq
 / 
dev
->
pda
->
l2_vco_div_m1
;

540 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCO
] = 
vco_eq
;

542 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCXO
] = dev->
pda
->
vcxo_eq
;

544 
t
 = 
	`ad9528_i_wre_n
(
dev
,

545 
AD9528_PLL2_R1_DIVIDER
,

546 
	`AD9528_PLL2_R1_DIV
(
dev
->
pda
->
l2_r1_div
));

547 i(
t
 < 0)

548  
t
;

550 
t
 = 
	`ad9528_i_wre_n
(
dev
,

551 
AD9528_PLL2_N2_DIVIDER
,

552 
	`AD9528_PLL2_N2_DIV
(
dev
->
pda
->
l2_n2_div
));

553 i(
t
 < 0)

554  
t
;

556 
t
 = 
	`ad9528_i_wre_n
(
dev
,

557 
AD9528_PLL2_LOOP_FILTER_CTRL
,

558 
	`AD9528_PLL2_LOOP_FILTER_CPOLE1
(
dev
->
pda
->
e1
) |

559 
	`AD9528_PLL2_LOOP_FILTER_RZERO
(
dev
->
pda
->
rzo
) |

560 
	`AD9528_PLL2_LOOP_FILTER_RPOLE2
(
dev
->
pda
->
e2
) |

561 
	`AD_IF
(
rzo_byss_
,

562 
AD9528_PLL2_LOOP_FILTER_RZERO_BYPASS_EN
));

563 i(
t
 < 0)

564  
t
;

566 
l2_bysd
:

567 
i
 = 0; i < 
dev
->
pda
->
num_chls
; i++) {

568 
ch
 = &
dev
->
pda
->
chls
[
i
];

570 i(
ch
->
ouut_dis
)

573 i(
ch
->
chl_num
 < 
AD9528_NUM_CHAN
) {

574 
aive_mask
 |(1 << 
ch
->
chl_num
);

575 i(
ch
->
sync_igne_
)

576 
ignesync_mask
 |(1 << 
ch
->
chl_num
);

578 
t
 = 
	`ad9528_i_wre_n
(
dev
,

579 
	`AD9528_CHANNEL_OUTPUT
(
ch
->
chl_num
),

580 
	`AD9528_CLK_DIST_DRIVER_MODE
(
ch
->
driv_mode
) |

581 
	`AD9528_CLK_DIST_DIV
(
ch
->
chl_divid
) |

582 
	`AD9528_CLK_DIST_DIV_PHASE
(
ch
->
divid_pha
) |

583 
	`AD9528_CLK_DIST_CTRL
(
ch
->
sigl_sour
));

584 i(
t
 < 0)

585  
t
;

589 
t
 = 
	`ad9528_i_wre_n
(
dev
,

590 
AD9528_CHANNEL_PD_EN
,

591 
	`AD9528_CHANNEL_PD_MASK
(~
aive_mask
));

592 i(
t
 < 0)

593  
t
;

595 
t
 = 
	`ad9528_i_wre_n
(
dev
,

596 
AD9528_CHANNEL_SYNC_IGNORE
,

597 
	`AD9528_CHANNEL_IGNORE_MASK
(
ignesync_mask
));

598 i(
t
 < 0)

599  
t
;

601 
t
 = 
	`ad9528_i_wre_n
(
dev
,

602 
AD9528_SYSREF_K_DIVIDER
,

603 
	`AD9528_SYSREF_K_DIV
(
dev
->
pda
->
syef_k_div
));

604 i(
t
 < 0)

605  
t
;

607 
syef_
 = 
	`AD9528_SYSREF_PATTERN_MODE
(
dev
->
pda
->
syef_n_mode
) |

608 
	`AD9528_SYSREF_SOURCE
(
dev
->
pda
->
syef_c
)|

609 
	`AD9528_SYSREF_NSHOT_MODE
(
dev
->
pda
->
syef_nsh_mode
)|

610 
	`AD9528_SYSREF_PATTERN_TRIGGER_CTRL
(
dev
->
pda
->
syef_q_igg_mode
);

612 
t
 = 
	`ad9528_i_wre_n
(
dev
,

613 
AD9528_SYSREF_CTRL
,

614 
syef_
);

615 i(
t
 < 0)

616  
t
;

618 
t
 = 
	`ad9528_i_wre_n
(
dev
,

619 
AD9528_PD_EN
,

620 
AD9528_PD_BIAS
 |

621 
	`AD_IF
(
l1_byss_
, 
AD9528_PD_PLL1
) |

622 
	`AD_IF
(
l2_byss_
, 
AD9528_PD_PLL2
));

623 i(
t
 < 0)

624  
t
;

626 
t
 = 
	`ad9528_io_upde
(
dev
);

627 i(
t
 < 0)

628  
t
;

630 i(!
dev
->
pda
->
l2_byss_
) {

631 
t
 = 
	`ad9528_i_wre_n
(
dev
,

632 
AD9528_PLL2_VCO_CTRL
,

633 
vco_
 | 
AD9528_PLL2_VCO_CALIBRATE
);

634 i(
t
 < 0)

635  
t
;

637 
t
 = 
	`ad9528_io_upde
(
dev
);

638 i(
t
 < 0)

639  
t
;

641 
t
 = 
	`ad9528_pl
(
dev
,

642 
AD9528_READBACK
,

643 
AD9528_IS_CALIBRATING
,

645 i(
t
 < 0)

646  
t
;

649 
syef_
 |(
dev
->
pda
->
syef_q_
 ? 
AD9528_SYSREF_REQUEST_BY_PIN
 : 
AD9528_SYSREF_PATTERN_REQ
);

650 
t
 = 
	`ad9528_i_wre_n
(
dev
,

651 
AD9528_SYSREF_CTRL
,

652 
syef_
);

653 i(
t
 < 0)

654  
t
;

656 i(
dev
->
pda
->
0_p_func_l
 != 0xFF) {

657 
t
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_STAT_MON0
,

658 
dev
->
pda
->
0_p_func_l
);

659 i(
t
 < 0)

660  
t
;

662 
__mask
 |
AD9528_STAT0_PIN_EN
;

665 i(
dev
->
pda
->
1_p_func_l
 != 0xFF) {

666 
t
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_STAT_MON1
,

667 
dev
->
pda
->
1_p_func_l
);

668 i(
t
 < 0)

669  
t
;

671 
__mask
 |
AD9528_STAT1_PIN_EN
;

674 i(
__mask
) {

675 
t
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_STAT_PIN_EN
,

676 
__mask
);

677 i(
t
 < 0)

678  
t
;

681 
t
 = 
	`ad9528_io_upde
(
dev
);

682 i(
t
 < 0)

683  
t
;

685 
t
 = 
	`ad9528_sync
(
dev
);

686 i(
t
 < 0)

687  
t
;

689 *
devi
 = 
dev
;

692 
	}
}

701 
t32_t
 
	$ad9528_move
(
ad9528_dev
 *
dev
)

703 if(
i_fe
 > 0)

704 
	`o
(
i_fe
);

706 
	`
(
dev
);

709 
	}
}

711 
t32_t
 
	$ad9528_204b_sync_ock
()

713 
	`iol
(
i_fe
, 
AD9528_SYNC_CLK
);

715 
	}
}

725 
ut32_t
 
	$ad9528_lc_out_div
(
ut32_t
 

,

726 
ut32_t
 
_
)

728 
ut32_t
 
div
;

730 
div
 = 
	`DIV_ROUND_CLOSEST
(
_
, 

);

732 
div
 = 
	`amp_t
(,

733 
div
,

734 
AD9528_CLK_DIST_DIV_MIN
,

735 
AD9528_CLK_DIST_DIV_MAX
);

737  
div
;

738 
	}
}

749 
ut32_t
 
	$ad9528_k_round_
(
ad9528_dev
 *
dev
, 
ut32_t
 
ch
,

750 
ut32_t
 

)

752 
ut32_t
 
div
;

753 
ut32_t
 
sigl_sour
;

754 
ut32_t
 
eq
;

756 i(
ch
 >
dev
->
pda
->
num_chls
)

759 
sigl_sour
 = 
dev
->
pda
->
chls
[
ch
].signal_source;

761 i(
sigl_sour
 =
AD9528_VCO
) {

762 
eq
 = 
dev
->
ad9528_
.
vco_out_eq
[
sigl_sour
];

763 
div
 = 
	`ad9528_lc_out_div
(

, 
eq
);

764 } i(
sigl_sour
 =
AD9528_SYSREF
) {

765 
eq
 = 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCXO
] / 2;

766 
div
 = 
	`DIV_ROUND_CLOSEST
(
eq
, 

);

767 
div
 = 
	`amp_t
(,

768 
div
,

769 
AD9528_SYSREF_K_DIV_MIN
,

770 
AD9528_SYSREF_K_DIV_MAX
);

776  
	`DIV_ROUND_CLOSEST
(
eq
, 
div
);

777 
	}
}

788 
t32_t
 
	$ad9528_k_t_
(
ad9528_dev
 *
dev
, 
ut32_t
 
ch
,

789 
ut32_t
 

)

791 
ut32_t
 
div
;

792 
t32_t
 
t
;

793 
ut32_t
 
g
;

794 
ut32_t
 
sigl_sour
;

796 i(
ch
 >
dev
->
pda
->
num_chls
)

799 
sigl_sour
 = 
dev
->
pda
->
chls
[
ch
].signal_source;

802 i(
sigl_sour
 =
AD9528_VCO
) {

803 
div
 = 
	`ad9528_lc_out_div
(

, 
dev
->
ad9528_
.
vco_out_eq
[
sigl_sour
]);

804 
dev
->
pda
->
chls
[
ch
].
chl_divid
 = 
div
;

807 
t
 = 
	`ad9528_i_ad_n
(
dev
,

808 
	`AD9528_CHANNEL_OUTPUT
(
ch
),

809 &
g
);

811 i(
t
 < 0)

812  
t
;

815 
ut32_t
 
divmask
 = 
	`AD9528_CLK_DIST_DIV
(0xFF + 1);

818 
g
 &~
divmask
;

821 
g
 |
	`AD9528_CLK_DIST_DIV
(
dev
->
pda
->
chls
[
ch
].
chl_divid
);

824 
t
 = 
	`ad9528_i_wre_n
(
dev
,

825 
	`AD9528_CHANNEL_OUTPUT
(
dev
->
pda
->
chls
[
ch
].
chl_num
),

826 
g
);

827 i(
t
 < 0)

828  
t
;

832 i(
sigl_sour
 =
AD9528_SYSREF
) {

834 
div
 = 
	`DIV_ROUND_CLOSEST
(
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCXO
] / 2, 

);

836 
div
 = 
	`amp_t
(,

837 
div
,

838 
AD9528_SYSREF_K_DIV_MIN
,

839 
AD9528_SYSREF_K_DIV_MAX
);

842 
g
 = 
div
;

843 
t
 = 
	`ad9528_i_wre_n
(
dev
,

844 
AD9528_SYSREF_K_DIVIDER
,

845 
g
);

847 if(
t
 < 0)

848  
t
;

850 
dev
->
pda
->
syef_k_div
 = 
div
;

851 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_SYSREF
] =

852 
dev
->
ad9528_
.
vco_out_eq
[
AD9528_VCXO
] / 2 / 
div
;

859 
t
 = 
	`ad9528_io_upde
(
dev
);

860 i(
t
 < 0)

861  
t
;

863  
t
;

864 
	}
}

873 
t32_t
 
	$ad9528_t
(
ad9528_dev
 *
dev
)

875 
t32_t
 
s
;

877 if(!
dev
)

880 
s
 = 
	`ad9528_i_wre_n
(
dev
,

881 
AD9528_SERIAL_PORT_CONFIG
,

882 
AD9528_SER_CONF_SOFT_RESET
 |

883 (
dev
->
pda
->
i3we
 ? 0 :

884 
AD9528_SER_CONF_SDO_ACTIVE
));

885 i(
s
 < 0)

886  
s
;

888 
	`up
(100 * 1000);

890 
s
 = 
	`ad9528_i_wre_n
(
dev
, 
AD9528_SERIAL_PORT_CONFIG_B
, 0x00);

891 if(
s
 < 0)

892  
s
;

894 
	`up
(100 * 1000);

897 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/ad9528.h

39 #ide
_AD9528_H_


40 
	#_AD9528_H_


	)

45 
	~<dt.h
>

46 
	~<dbo.h
>

53 
	#AD9528_READ
 (1 << 15)

	)

54 
	#AD9528_WRITE
 (0 << 15)

	)

55 
	#AD9528_CNT
(
x
(((x- 1<< 13)

	)

56 
	#AD9528_ADDR
(
x
((x& 0xFFF)

	)

58 
	#AD9528_1B
(
x
((1 << 16| ((x+ 0))

	)

59 
	#AD9528_2B
(
x
((2 << 16| ((x+ 1))

	)

60 
	#AD9528_3B
(
x
((3 << 16| ((x+ 2))

	)

61 
	#AD9528_4B
(
x
((4 << 16| ((x+ 3))

	)

62 
	#AD9528_TRANSF_LEN
(
x
((x>> 16)

	)

64 
	#AD9528_SERIAL_PORT_CONFIG
 
	`AD9528_1B
(0x0)

	)

65 
	#AD9528_SERIAL_PORT_CONFIG_B
 
	`AD9528_1B
(0x1)

	)

66 
	#AD9528_CHIP_ID
 
	`AD9528_4B
(0x3)

	)

67 
	#AD9528_IO_UPDATE
 
	`AD9528_1B
(0xF)

	)

69 
	#AD9528_PLL1_REF_A_DIVIDER
 
	`AD9528_2B
(0x100)

	)

70 
	#AD9528_PLL1_REF_B_DIVIDER
 
	`AD9528_2B
(0x102)

	)

71 
	#AD9528_PLL1_FEEDBACK_DIVIDER
 
	`AD9528_2B
(0x104)

	)

72 
	#AD9528_PLL1_CHARGE_PUMP_CTRL
 
	`AD9528_2B
(0x106)

	)

73 
	#AD9528_PLL1_CTRL
 
	`AD9528_3B
(0x108)

	)

75 
	#AD9528_PLL2_CHARGE_PUMP
 
	`AD9528_1B
(0x200)

	)

76 
	#AD9528_PLL2_FEEDBACK_DIVIDER_AB
 
	`AD9528_1B
(0x201)

	)

77 
	#AD9528_PLL2_CTRL
 
	`AD9528_1B
(0x202)

	)

78 
	#AD9528_PLL2_VCO_CTRL
 
	`AD9528_1B
(0x203)

	)

79 
	#AD9528_PLL2_VCO_DIVIDER
 
	`AD9528_1B
(0x204)

	)

80 
	#AD9528_PLL2_LOOP_FILTER_CTRL
 
	`AD9528_2B
(0x205)

	)

81 
	#AD9528_PLL2_R1_DIVIDER
 
	`AD9528_1B
(0x207)

	)

82 
	#AD9528_PLL2_N2_DIVIDER
 
	`AD9528_1B
(0x208)

	)

84 
	#AD9528_CHANNEL_OUTPUT
(
ch

	`AD9528_3B
(0x300 + 3 * ch)

	)

85 
	#AD9528_CHANNEL_SYNC
 
	`AD9528_1B
(0x32A)

	)

86 
	#AD9528_CHANNEL_SYNC_IGNORE
 
	`AD9528_2B
(0x32B)

	)

88 
	#AD9528_SYSREF_RESAMPLE_CTRL
 
	`AD9528_2B
(0x32D)

	)

90 
	#AD9528_SYSREF_K_DIVIDER
 
	`AD9528_2B
(0x400)

	)

91 
	#AD9528_SYSREF_CTRL
 
	`AD9528_2B
(0x402)

	)

93 
	#AD9528_PD_EN
 
	`AD9528_1B
(0x500)

	)

94 
	#AD9528_CHANNEL_PD_EN
 
	`AD9528_2B
(0x501)

	)

96 
	#AD9528_STAT_MON0
 
	`AD9528_1B
(0x505)

	)

97 
	#AD9528_STAT_MON1
 
	`AD9528_1B
(0x506)

	)

98 
	#AD9528_STAT_PIN_EN
 
	`AD9528_1B
(0x507)

	)

99 
	#AD9528_READBACK
 
	`AD9528_2B
(0x508)

	)

102 
	#AD9528_SER_CONF_SOFT_RESET
 ((1 << 0| (1 << 7))

	)

103 
	#AD9528_SER_CONF_LSB_FIRST
 ((1 << 1| (1 << 6))

	)

104 
	#AD9528_SER_CONF_ADDR_INCREMENT
 ((1 << 2| (1 << 5))

	)

105 
	#AD9528_SER_CONF_SDO_ACTIVE
 ((1 << 3| (1 << 4))

	)

108 
	#AD9528_SER_CONF_READ_BUFFERED
 (1 << 5)

	)

109 
	#AD9528_SER_CONF_RESET_SANS_REGMAP
 (1 << 2)

	)

112 
	#AD9528_IO_UPDATE_EN
 (1 << 0)

	)

115 
	#AD9528_PLL1_CHARGE_PUMP_AUTO_TRISTATE_DIS
 (1 << 12)

	)

116 
	#AD9528_PLL1_CHARGE_PUMP_MODE_NORMAL
 (3 << 8)

	)

117 
	#AD9528_PLL1_CHARGE_PUMP_MODE_PUMP_DOWN
 (2 << 8)

	)

118 
	#AD9528_PLL1_CHARGE_PUMP_MODE_PUMP_UP
 (1 << 8)

	)

119 
	#AD9528_PLL1_CHARGE_PUMP_MODE_TRISTATE
 (0 << 8)

	)

120 
	#AD9528_PLL1_CHARGE_PUMP_TRISTATE
 (1 << 7)

	)

121 
	#AD9528_PLL1_CHARGE_PUMP_CURRENT_nA
(
x
(((x/ 500& 0x7F)

	)

124 
	#AD9528_PLL1_OSC_CTRL_FAIL_VCC_BY2_EN
 (1 << 18)

	)

125 
	#AD9528_PLL1_REF_MODE
(
x
((x<< 16)

	)

126 
	#AD9528_PLL1_FEEDBACK_BYPASS_EN
 (1 << 13)

	)

127 
	#AD9528_PLL1_REFB_BYPASS_EN
 (1 << 12)

	)

128 
	#AD9528_PLL1_REFA_BYPASS_EN
 (1 << 11)

	)

129 
	#AD9528_PLL1_SOURCE_VCXO
 (1 << 10)

	)

130 
	#AD9528_PLL1_REFB_CMOS_NEG_INP_EN
 (1 << 9)

	)

131 
	#AD9528_PLL1_REFA_CMOS_NEG_INP_EN
 (1 << 8)

	)

132 
	#AD9528_PLL1_FREQ_DETECTOR_PD_EN
 (1 << 7)

	)

133 
	#AD9528_PLL1_REFB_DIFF_RCV_EN
 (1 << 6)

	)

134 
	#AD9528_PLL1_REFA_DIFF_RCV_EN
 (1 << 5)

	)

135 
	#AD9528_PLL1_REFB_RCV_EN
 (1 << 4)

	)

136 
	#AD9528_PLL1_REFA_RCV_EN
 (1 << 3)

	)

137 
	#AD9528_PLL1_VCXO_RCV_PD_EN
 (1 << 2)

	)

138 
	#AD9528_PLL1_OSC_IN_CMOS_NEG_INP_EN
 (1 << 1)

	)

139 
	#AD9528_PLL1_OSC_IN_DIFF_EN
 (1 << 0)

	)

142 
	#AD9528_PLL2_CHARGE_PUMP_CURRENT_nA
(
x
((x/ 3500)

	)

145 
	#AD9528_PLL2_FB_NDIV_A_CNT
(
x
(((x& 0x3<< 6)

	)

146 
	#AD9528_PLL2_FB_NDIV_B_CNT
(
x
(((x& 0x3F<< 0)

	)

147 
	#AD9528_PLL2_FB_NDIV
(
a
, 
b
(4 * (b+ (a))

	)

150 
	#AD9528_PLL2_LOCK_DETECT_PWR_DOWN_EN
 (1 << 7)

	)

151 
	#AD9528_PLL2_FREQ_DOUBLER_EN
 (1 << 5)

	)

152 
	#AD9528_PLL2_CHARGE_PUMP_MODE_NORMAL
 (3 << 0)

	)

153 
	#AD9528_PLL2_CHARGE_PUMP_MODE_PUMP_DOWN
 (2 << 0)

	)

154 
	#AD9528_PLL2_CHARGE_PUMP_MODE_PUMP_UP
 (1 << 0)

	)

155 
	#AD9528_PLL2_CHARGE_PUMP_MODE_TRISTATE
 (0 << 0)

	)

158 
	#AD9528_PLL2_DOUBLER_R1_EN
 (1 << 4)

	)

159 
	#AD9528_PLL2_FORCE_REFERENCE_VALID
 (1 << 2)

	)

160 
	#AD9528_PLL2_FORCE_VCO_MIDSCALE
 (1 << 1)

	)

161 
	#AD9528_PLL2_VCO_CALIBRATE
 (1 << 0)

	)

164 
	#AD9528_PLL2_VCO_DIV_M1_PWR_DOWN_EN
 (1 << 3)

	)

165 
	#AD9528_PLL2_VCO_DIV_M1
(
x
(((x& 0x7<< 0)

	)

168 
	#AD9528_PLL2_LOOP_FILTER_RZERO_BYPASS_EN
 (1 << 8)

	)

169 
	#AD9528_PLL2_LOOP_FILTER_RPOLE2
(
x
(((x& 0x3<< 6)

	)

170 
	#AD9528_PLL2_LOOP_FILTER_RZERO
(
x
(((x& 0x7<< 3)

	)

171 
	#AD9528_PLL2_LOOP_FILTER_CPOLE1
(
x
(((x& 0x7<< 0)

	)

174 
	#AD9528_PLL2_R1_DIV
(
x
(((x& 0x1F<< 0)

	)

177 
	#AD9528_PLL2_N2_DIV
(
x
((((x- 1& 0xFF<< 0)

	)

180 
	#AD9528_CLK_DIST_DIV_MIN
 1

	)

181 
	#AD9528_CLK_DIST_DIV_MAX
 256

	)

182 
	#AD9528_CLK_DIST_DIV
(
x
((((x- 1& 0xFF<< 16)

	)

183 
	#AD9528_CLK_DIST_DIV_REV
(
x
((((x>> 16& 0xFF+ 1)

	)

184 
	#AD9528_CLK_DIST_DRIVER_MODE
(
x
(((x& 0x3<< 13)

	)

185 
	#AD9528_CLK_DIST_DRIVER_MODE_REV
(
x
(((x>> 13& 0x3)

	)

186 
	#AD9528_CLK_DIST_DIV_PHASE
(
x
(((x& 0x3F<< 8)

	)

187 
	#AD9528_CLK_DIST_DIV_PHASE_REV
(
x
(((x>> 8& 0x3F)

	)

188 
	#AD9528_CLK_DIST_CTRL
(
x
(((x& 0x7<< 5)

	)

189 
	#AD9528_CLK_DIST_CTRL_REV
(
x
(((x>> 5& 0x7)

	)

193 
	#AD9528_CLK_DIST_INV_DIV_OUTPUT_EN
 (1 << 7)

	)

197 
	#AD9528_CHANNEL_SYNC_SET
 (1 << 0)

	)

200 
	#AD9528_CHANNEL_IGNORE_MASK
(
x
(((x& 0x3FFF<< 0)

	)

201 
	#AD9528_CHANNEL_IGNORE_MASK_REV
(
x
(((x>> 0& 0x3FFF)

	)

204 
	#AD9528_SYSREF_K_DIV
(
x
(((x& 0xFFFF<< 0)

	)

205 
	#AD9528_SYSREF_K_DIV_MIN
 (0u)

	)

206 
	#AD9528_SYSREF_K_DIV_MAX
 (65535u)

	)

209 
	#AD9528_SYSREF_SOURCE
(
x
(((x& 0x3<< 14)

	)

210 
	#AD9528_SYSREF_PATTERN_MODE
(
x
(((x& 0x3<< 12)

	)

211 
	#AD9528_SYSREF_NSHOT_MODE
(
x
(((x& 0x7<< 9)

	)

212 
	#AD9528_SYSREF_PATTERN_REQ
 (1 << 8)

	)

213 
	#AD9528_SYSREF_REQUEST_BY_PIN
 (1 << 7)

	)

214 
	#AD9528_SYSREF_PATTERN_TRIGGER_CTRL
(
x
(((x& 0x3<< 5)

	)

215 
	#AD9528_SYSREF_RESAMPLER_CLK_SRC_PLL1
 (1 << 4)

	)

216 
	#AD9528_SYSREF_PATTERN_CLK_SRC_PLL1
 (1 << 3)

	)

217 
	#AD9528_SYSREF_TEST_MODE
(
x
(((x& 0x3<< 1)

	)

218 
	#AD9528_SYSREF_RESET
 (1 << 0)

	)

221 
	#AD9528_PD_BIAS
 (1 << 4)

	)

222 
	#AD9528_PD_PLL2
 (1 << 3)

	)

223 
	#AD9528_PD_PLL1
 (1 << 2)

	)

224 
	#AD9528_PD_OUT_CLOCKS
 (1 << 1)

	)

225 
	#AD9528_PD_CHIP
 (1 << 0)

	)

228 
	#AD9528_CHANNEL_PD_MASK
(
x
(((x& 0x3FFF<< 0)

	)

229 
	#AD9528_CHANNEL_PD_MASK_REV
(
x
(((x>> 0& 0x3FFF)

	)

233 
	#AD9528_IS_CALIBRATING
 (1 << 8)

	)

234 
	#AD9528_PLL2_OK
 (1 << 7)

	)

235 
	#AD9528_PLL1_OK
 (1 << 6)

	)

236 
	#AD9528_VCXO_OK
 (1 << 5)

	)

237 
	#AD9528_REFA_REFB_NOK
 (1 << 4)

	)

238 
	#AD9528_REFB_OK
 (1 << 3)

	)

239 
	#AD9528_REFA_OK
 (1 << 2)

	)

240 
	#AD9528_PLL2_LOCKED
 (1 << 1)

	)

241 
	#AD9528_PLL1_LOCKED
 (1 << 0)

	)

244 
	#AD9528_STAT0_PIN_EN
 (1 << 2)

	)

245 
	#AD9528_STAT1_PIN_EN
 (1 << 3)

	)

246 
	#AD9528_STAT0_DIV_EN
 (1 << 1)

	)

247 
	#AD9528_STAT1_DIV_EN
 (1 << 0)

	)

249 
	#AD9528_NUM_CHAN
 14

	)

251 
	#AD9528_SPI_MAGIC
 0x00FF05

	)

254 
	#DRIVER_MODE_LVDS
 0

	)

255 
	#DRIVER_MODE_LVDS_BOOST
 1

	)

256 
	#DRIVER_MODE_HSTL
 2

	)

259 
	#SOURCE_VCO
 0

	)

260 
	#SOURCE_VCXO
 1

	)

261 
	#SOURCE_SYSREF_VCO
 2

	)

262 
	#SOURCE_SYSREF_VCXO
 3

	)

263 
	#SOURCE_VCXO_INV
 5

	)

264 
	#SOURCE_SYSREF_VCXO_INV
 7

	)

267 
	#REF_MODE_STAY_ON_REFB
 0

	)

268 
	#REF_MODE_REVERT_TO_REFA
 1

	)

269 
	#REF_MODE_SELECT_REFA
 2

	)

270 
	#REF_MODE_SELECT_REFB
 3

	)

271 
	#REF_MODE_EXT_REF
 4

	)

274 
	#SYSREF_SRC_EXTERNAL
 0

	)

275 
	#SYSREF_SRC_EXTERNAL_RESAMPLED
 1

	)

276 
	#SYSREF_SRC_INTERNAL
 2

	)

279 
	#SYSREF_PATTERN_NSHOT
 0

	)

280 
	#SYSREF_PATTERN_CONTINUOUS
 1

	)

281 
	#SYSREF_PATTERN_PRBS
 2

	)

282 
	#SYSREF_PATTERN_STOP
 3

	)

286 
	#SYSREF_NSHOT_1_PULSE
 1

	)

287 
	#SYSREF_NSHOT_2_PULSES
 2

	)

288 
	#SYSREF_NSHOT_4_PULSES
 3

	)

289 
	#SYSREF_NSHOT_6_PULSES
 4

	)

290 
	#SYSREF_NSHOT_8_PULSES
 5

	)

294 
	#SYSREF_LEVEL_HIGH
 0

	)

295 
	#SYSREF_EDGE_RISING
 2

	)

296 
	#SYSREF_EDGE_FALLING
 3

	)

299 
	#RPOLE2_900_OHM
 0

	)

300 
	#RPOLE2_450_OHM
 1

	)

301 
	#RPOLE2_300_OHM
 2

	)

302 
	#RPOLE2_225_OHM
 3

	)

305 
	#RZERO_3250_OHM
 0

	)

306 
	#RZERO_2750_OHM
 1

	)

307 
	#RZERO_2250_OHM
 2

	)

308 
	#RZERO_2100_OHM
 3

	)

309 
	#RZERO_3000_OHM
 4

	)

310 
	#RZERO_2500_OHM
 5

	)

311 
	#RZERO_2000_OHM
 6

	)

312 
	#RZERO_1850_OHM
 7

	)

315 
	#CPOLE1_0_PF
 0

	)

316 
	#CPOLE1_8_PF
 1

	)

317 
	#CPOLE1_16_PF
 2

	)

318 
	#CPOLE1_24_PF
 3

	)

319 
	#CPOLE1_32_PF
 5

	)

320 
	#CPOLE1_40_PF
 6

	)

321 
	#CPOLE1_48_PF
 7

	)

331 
	sad9528_chl_ec
 {

333 
ut8_t
 
	mchl_num
;

335 
ut8_t
 
	msync_igne_
;

337 
ut8_t
 
	mouut_dis
;

339 
ut8_t
 
	mdriv_mode
;

340 
ut8_t
 
	msigl_sour
;

344 
ut8_t
 
	mdivid_pha
;

346 
ut16_t
 
	mchl_divid
;

348 
t8_t
 
	mexnded_me
[16];

355 
	sad9528_fm_da
 {

357 
ut32_t
 
	mvcxo_eq
;

359 
ut8_t
 
	mi3we
;

362 
ut8_t
 
	m_
;

364 
ut8_t
 
	mfb_
;

367 
ut8_t
 
	m_diff_rcv_
;

369 
ut8_t
 
	mfb_diff_rcv_
;

371 
ut8_t
 
	mosc__diff_
;

378 
ut8_t
 
	m_cmos_g_p_
;

380 
ut8_t
 
	mfb_cmos_g_p_
;

382 
ut8_t
 
	mosc__cmos_g_p_
;

386 
ut16_t
 
	m_r_div
;

388 
ut16_t
 
	mfb_r_div
;

390 
ut16_t
 
	ml1_edback_div
;

392 
ut8_t
 
	ml1_edback_c_vcxo
;

394 
ut16_t
 
	ml1_chge_pump_cut_nA
;

396 
ut8_t
 
	ml1_byss_
;

400 
ut8_t
 
	mf_mode
;

402 
ut8_t
 
	msyef_c
;

404 
ut8_t
 
	msyef_n_mode
;

406 
ut16_t
 
	msyef_k_div
;

408 
ut8_t
 
	msyef_nsh_mode
;

410 
ut8_t
 
	msyef_q_igg_mode
;

412 
bo
 
	msyef_q_
;

416 
ut32_t
 
	ml2_chge_pump_cut_nA
;

418 
ut8_t
 
	ml2_ndiv_a_t
;

420 
ut8_t
 
	ml2_ndiv_b_t
;

422 
ut8_t
 
	ml2_eq_doubr_
;

424 
ut8_t
 
	ml2_r1_div
;

426 
ut8_t
 
	ml2_n2_div
;

428 
ut8_t
 
	ml2_vco_div_m1
;

430 
bo
 
	ml2_byss_
;

434 
ut8_t
 
	me2
;

436 
ut8_t
 
	mrzo
;

438 
ut8_t
 
	me1
;

440 
ut8_t
 
	mrzo_byss_
;

444 
ut32_t
 
	mnum_chls
;

446 
ad9528_chl_ec
 *
	mchls
;

449 
ut8_t
 
	m0_p_func_l
;

451 
ut8_t
 
	m1_p_func_l
;

455 
	mAD9528_STAT_PLL1_LD
,

456 
	mAD9528_STAT_PLL2_LD
,

457 
	mAD9528_STAT_REFA
,

458 
	mAD9528_STAT_REFB
,

459 
	mAD9528_STAT_REFAB_MISSING
,

460 
	mAD9528_STAT_VCXO
,

461 
	mAD9528_STAT_PLL1_FB_CLK
,

462 
	mAD9528_STAT_PLL2_FB_CLK
,

463 
	mAD9528_SYNC
,

467 
	mAD9528_VCO
,

468 
	mAD9528_VCXO
,

469 
	mAD9528_SYSREF
,

470 
	mAD9528_NUM_CLK_SRC
,

473 
	sad9528_e
 {

474 
ut32_t
 
	mvco_out_eq
[
AD9528_NUM_CLK_SRC
];

477 
	sad9528_dev
 {

479 
ad9528_e
 
	mad9528_
;

480 
ad9528_fm_da
 *
	mpda
;

483 
	sad9528__m
 {

485 
ad9528_fm_da
 *
	mpda
;

489 
	#AD_IFE
(
_pde
, 
_a
, 
_b
((
dev
->
pda
->_pde? _: _b)

	)

490 
	#AD_IF
(
_pde
, 
_a

	`AD_IFE
(_pde, _a, 0)

	)

496 
t32_t
 
ad9528_
(
ad9528__m
 *
_m
);

497 
t32_t
 
ad9528_tup
(
ad9528_dev
 **
devi
,

498 
ad9528__m
 
_m
);

499 
t32_t
 
ad9528_i_ad
(
ad9528_dev
 *
dev
,

500 
ut32_t
 
g_addr
,

501 
ut32_t
 *
g_da
);

502 
t32_t
 
ad9528_i_wre
(
ad9528_dev
 *
dev
,

503 
ut32_t
 
g_addr
,

504 
ut32_t
 
g_da
);

505 
t32_t
 
ad9528_i_ad_n
(
ad9528_dev
 *
dev
,

506 
ut32_t
 
g_addr
,

507 
ut32_t
 *
g_da
);

508 
t32_t
 
ad9528_i_wre_n
(
ad9528_dev
 *
dev
,

509 
ut32_t
 
g_addr
,

510 
ut32_t
 
g_da
);

511 
t32_t
 
ad9528_pl
(
ad9528_dev
 *
dev
,

512 
ut32_t
 
g_addr
,

513 
ut32_t
 
mask
,

514 
ut32_t
 
da
);

515 
t32_t
 
ad9528_io_upde
(
ad9528_dev
 *
dev
);

516 
t32_t
 
ad9528_sync
(
ad9528_dev
 *
dev
);

517 
ut32_t
 
ad9528_k_round_
(
ad9528_dev
 *
dev
, ut32_
ch
,

518 
ut32_t
 

);

519 
t32_t
 
ad9528_k_t_
(
ad9528_dev
 *
dev
, 
ut32_t
 
ch
,

520 
ut32_t
 

);

521 
t32_t
 
ad9528_t
(
ad9528_dev
 *
dev
);

522 
t32_t
 
ad9528_move
(
ad9528_dev
 *
dev
);

524 
t32_t
 
ad9528_204b_sync_ock
();

526 
	sad9528_commd


528 
	maddr
;

529 
	mda
;

530 }
	tad9528_commd
;

532 
	#AD9528_IOC_MAGIC
 'a'

	)

534 
	#AD9528_SYNC_CLK
 
	`_IO
(
AD9528_IOC_MAGIC
, 1)

	)

535 
	#AD9528_WRITE_REG
 
	`_IOW
(
AD9528_IOC_MAGIC
, 2, )

	)

536 
	#AD9528_READ_REG
 
	`_IOR
(
AD9528_IOC_MAGIC
, 3, )

	)

537 
	#AD9528_WRITE_REG_N
 
	`_IOW
(
AD9528_IOC_MAGIC
, 4, )

	)

538 
	#AD9528_READ_REG_N
 
	`_IOR
(
AD9528_IOC_MAGIC
, 5, )

	)

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/appclock.c

1 
	~<rg.h
>

2 
	~<dio.h
>

3 
	~<dlib.h
>

4 
	~<dt.h
>

6 
	~"si5344.h
"

7 
	~"ad9528.h
"

9 
	~<r.h
>

10 
	~"ut.h
"

12 
	~<pock.h
>

14 
ad9528_dev
* 
	gkch_devi
;

16 
	$_ad9528
()

18 
t32_t
 
us
;

20 
ad9528_chl_ec
 
ad9528_chls
[14];

21 
ad9528__m
 
ad9528_m
;

22 
ad9528_fm_da
 
ad9528_pda
;

25 
ad9528_m
.
pda
 = &
ad9528_pda
;

26 
ad9528_m
.
pda
->
num_chls
 = 14;

27 
ad9528_m
.
pda
->
chls
 = &
ad9528_chls
[0];

29 
us
 = 
	`ad9528_
(&
ad9528_m
);

30 if(
us
) {

31 
	`tf
("r:d9528_(ed wh %d\n", 
us
);

32 
r_0
;

36 
ch
 = 0; ch < 
ad9528_m
.
pda
->
num_chls
; ch++) {

37 
ad9528_chls
[
ch
].
chl_num
 = ch;

38 
ad9528_chls
[
ch
].
ouut_dis
 = 1;

44 
ad9528_chls
[0].
ouut_dis
 = 0;

45 
ad9528_chls
[0].
driv_mode
 = 
DRIVER_MODE_LVDS
;

46 
ad9528_chls
[0].
divid_pha
 = 0;

47 
ad9528_chls
[0].
chl_divid
 = 10;

48 
ad9528_chls
[0].
sigl_sour
 = 
SOURCE_VCO
;

51 
ad9528_chls
[1].
ouut_dis
 = 0;

52 
ad9528_chls
[1].
driv_mode
 = 
DRIVER_MODE_LVDS
;

53 
ad9528_chls
[1].
divid_pha
 = 0;

55 
ad9528_chls
[1].
sigl_sour
 = 
SOURCE_SYSREF_VCO
;

58 
ad9528_chls
[2].
ouut_dis
 = 0;

59 
ad9528_chls
[2].
driv_mode
 = 
DRIVER_MODE_LVDS_BOOST
;

60 
ad9528_chls
[2].
divid_pha
 = 0;

61 
ad9528_chls
[2].
chl_divid
 = 10;

62 
ad9528_chls
[2].
sigl_sour
 = 
SOURCE_VCO
;

65 
ad9528_chls
[3].
ouut_dis
 = 0;

66 
ad9528_chls
[3].
driv_mode
 = 
DRIVER_MODE_LVDS
;

67 
ad9528_chls
[3].
divid_pha
 = 0;

68 
ad9528_chls
[3].
chl_divid
 = 10;

69 
ad9528_chls
[3].
sigl_sour
 = 
SOURCE_VCO
;

72 
ad9528_chls
[4].
ouut_dis
 = 0;

73 
ad9528_chls
[4].
driv_mode
 = 
DRIVER_MODE_LVDS
;

74 
ad9528_chls
[4].
divid_pha
 = 0;

76 
ad9528_chls
[4].
sigl_sour
 = 
SOURCE_SYSREF_VCO
;

79 
ad9528_chls
[5].
ouut_dis
 = 0;

80 
ad9528_chls
[5].
driv_mode
 = 
DRIVER_MODE_LVDS_BOOST
;

81 
ad9528_chls
[5].
divid_pha
 = 0;

82 
ad9528_chls
[5].
chl_divid
 = 10;

83 
ad9528_chls
[5].
sigl_sour
 = 
SOURCE_VCO
;

86 
ad9528_chls
[12].
ouut_dis
 = 0;

87 
ad9528_chls
[12].
driv_mode
 = 
DRIVER_MODE_LVDS
;

88 
ad9528_chls
[12].
divid_pha
 = 0;

89 
ad9528_chls
[12].
sigl_sour
 = 
SOURCE_SYSREF_VCO
;

93 
ad9528_m
.
pda
->
i3we
 = 0;

94 
ad9528_m
.
pda
->
vcxo_eq
 = 122880000;

95 
ad9528_m
.
pda
->
fb_
 = 1;

96 
ad9528_m
.
pda
->
_
 = 0;

97 
ad9528_m
.
pda
->
fb_diff_rcv_
 = 1;

98 
ad9528_m
.
pda
->
_diff_rcv_
 = 1;

100 
ad9528_m
.
pda
->
fb_r_div
 = 1;

101 
ad9528_m
.
pda
->
_r_div
 = 1;

102 
ad9528_m
.
pda
->
osc__diff_
 = 0;

103 
ad9528_m
.
pda
->
osc__cmos_g_p_
 = 0;

104 
ad9528_m
.
pda
->
l1_edback_div
 = 1;

105 
ad9528_m
.
pda
->
l1_edback_c_vcxo
 = 0;

106 
ad9528_m
.
pda
->
l1_chge_pump_cut_nA
 = 500;

107 
ad9528_m
.
pda
->
l1_byss_
 = 0;

108 
ad9528_m
.
pda
->
l2_vco_div_m1
 = 3;

109 
ad9528_m
.
pda
->
l2_n2_div
 = 10;

110 
ad9528_m
.
pda
->
l2_r1_div
 = 1;

111 
ad9528_m
.
pda
->
l2_chge_pump_cut_nA
 = 805000;

112 
ad9528_m
.
pda
->
l2_byss_
 = 
l
;

113 
ad9528_m
.
pda
->
syef_c
 = 
SYSREF_SRC_INTERNAL
;

114 
ad9528_m
.
pda
->
syef_k_div
 = 80;

115 
ad9528_m
.
pda
->
syef_n_mode
 = 
SYSREF_PATTERN_CONTINUOUS
;

116 
ad9528_m
.
pda
->
syef_q_
 = 
ue
;

117 
ad9528_m
.
pda
->
syef_nsh_mode
 = 
SYSREF_NSHOT_4_PULSES
;

118 
ad9528_m
.
pda
->
syef_q_igg_mode
 = 
SYSREF_LEVEL_HIGH
;

119 
ad9528_m
.
pda
->
e2
 = 
RPOLE2_900_OHM
;

120 
ad9528_m
.
pda
->
rzo
 = 
RZERO_2750_OHM
;

121 
ad9528_m
.
pda
->
e1
 = 
CPOLE1_32_PF
;

122 
ad9528_m
.
pda
->
0_p_func_l
 = 0x1;

123 
ad9528_m
.
pda
->
1_p_func_l
 = 0x8;

129 
us
 = 
	`ad9528_tup
(&
kch_devi
, 
ad9528_m
);

130 if(
us
 < 0) {

131 
	`tf
("r:d9528_tup(ed wh %d\n", 
us
);

132 
r_1
;

135 
r_1
:

136 
	`tf
("test_2\n");

138 
r_0
:

140 
	}
}

142 
	$rm_ad9528
()

144 
	`ad9528_move
(
kch_devi
);

145 
	}
}

147 
	$pock_
()

149 
	`si5344_
();

150 
	`_ad9528
();

151 
	}
}

153 
	$pock_sync
()

155 
	`ad9528_204b_sync_ock
();

156 
	}
}

158 
	$pock_rm
()

160 
	`rm_ad9528
();

161 
	`si5344_rm
();

162 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/si5344.c

1 
	~<dio.h
>

2 
	~<unid.h
>

3 
	~<f.h
>

4 
	~<sys/iol.h
>

6 
	~"si5344.h
"

7 
	~"Si5344-RevD-Regis.h
"

9 
	#SI5344_NAME
 "/dev/si5344i0"

	)

11 
	gi_fe
;

12 
t32_t
 
	$g_wre_i
(
ut16_t
 
gAddr
, 
ut8_t
 
vue
)

14 
si5344_commd
 
commd
;

15 
commd
.
addr
 = 
gAddr
;

16 
commd
.
da
 = 
vue
;

18 
	`iol
(
i_fe
, 
SI5344_WRITE_REG
, &
commd
);

20 
	}
}

22 
ut8_t
 
	$g_ad_i
(
ut16_t
 
gAddr
)

24 
si5344_commd
 
commd
;

25 
commd
.
addr
 = 
gAddr
;

26 
commd
.
da
 = 0;

27 
	`iol
(
i_fe
, 
SI5344_READ_REG
, &
commd
);

29  
commd
.
da
;

30 
	}
}

32 
t32_t
 
	$si5344_
()

34 
i_fe
 = 
	`ݒ
(
SI5344_NAME
, 
O_RDWR
);

35 if(!
i_fe
)

37 
	`tf
(" ofe: %s\n", 
SI5344_NAME
);

40 
	`iol
(
i_fe
, 
SI5344_PIN_RESET
);

41 
t32_t
 
t
 = 
	`g_ad_i
(0x03);

42 if(
t
 != 0x53)

44 
	`tf
("%ad,addr=[%02X] vue[0x53]=[%02x]\n",
__func__
,0x03,
t
);

46 
t
 = 
	`g_ad_i
(0x02);

47 if(
t
 != 0x44)

49 
	`tf
("%ad,addr=[%02X] vue[0x53]=[%02x]\n",
__func__
,0x03,
t
);

52 
ut16_t
 
m
;

53 
ut8_t
 
n
 = 3;

54 if(
n
 > 0)

56 
t
=
	`g_wre_i
(
si5344_vd_gis
[0].
addss
,si5344_vd_gis[0].
vue
);

57 
t
=
	`g_wre_i
(
si5344_vd_gis
[1].
addss
,si5344_vd_gis[1].
vue
);

58 
t
=
	`g_wre_i
(
si5344_vd_gis
[2].
addss
,si5344_vd_gis[2].
vue
);

59 
	`up
(2000 * 1000);

61 
m
 = 3; m < 
SI5344_REVD_REG_CONFIG_NUM_REGS
; m++)

63 
t
=
	`g_wre_i
(
si5344_vd_gis
[
m
].
addss
, si5344_vd_gis[m].
vue
);

65 
n
--;

69 
	}
}

71 
	$si5344_rm
()

73 if(
i_fe
 > 0)

74 
	`o
(
i_fe
);

75 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/si5344.h

1 #ide
SI5344_H


2 
	#SI5344_H


	)

3 
	~<dt.h
>

5 
	ssi5344_commd


7 
	maddr
;

8 
	mda
;

9 }
	tsi5344_commd
;

11 
	#SI5344_IOC_MAGIC
 's'

	)

13 
	#SI5344_PIN_RESET
 
	`_IO
(
SI5344_IOC_MAGIC
, 1)

	)

14 
	#SI5344_WRITE_REG
 
	`_IOW
(
SI5344_IOC_MAGIC
, 2, )

	)

15 
	#SI5344_READ_REG
 
	`_IOR
(
SI5344_IOC_MAGIC
, 3, )

	)

17 
t32_t
 
si5344_
();

18 
si5344_rm
();

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/util.c

43 
	~<rg.h
>

44 
	~<dlib.h
>

45 
	~"ut.h
"

46 
	~"o.h
"

54 
ut32_t
 
	$fd_f_t_b
(
ut32_t
 
wd
)

56 
ut32_t
 
f_t_b
 = 0;

58 
wd
) {

59 i(
wd
 & 0x1)

60  
f_t_b
;

61 
wd
 >>= 1;

62 
f_t_b
 ++;

66 
	}
}

71 
ut32_t
 
	$fd_ϡ_t_b
(
ut32_t
 
wd
)

73 
ut32_t
 
b
 = 0;

74 
ut32_t
 
ϡ_t_b
 = 32;

76 
wd
) {

77 i(
wd
 & 0x1)

78 
ϡ_t_b
 = 
b
;

79 
wd
 >>= 1;

80 
b
 ++;

83  
ϡ_t_b
;

84 
	}
}

89 
ut32_t
 
	$fd_o
(
t32_t
 
v
,

90 cڡ 
t32_t
 *
y
,

91 
ut32_t
 
size
)

93 
t32_t
 
diff
 = 
	`abs
(
y
[0] - 
v
);

94 
ut32_t
 
t
 = 0;

95 
ut32_t
 
i
;

97 
i
 = 1; i < 
size
; i++) {

98 i(
	`abs
(
y
[
i
] - 
v
< 
diff
) {

99 
diff
 = 
	`abs
(
y
[
i
] - 
v
);

100 
t
 = 
i
;

104  
t
;

105 
	}
}

110 
ut32_t
 
	$fld_
(
ut32_t
 
mask
, ut32_
v
)

112  (
v
 << 
	`fd_f_t_b
(
mask
)) & mask;

113 
	}
}

118 
ut32_t
 
	$fld_g
(
ut32_t
 
mask
, ut32_
wd
)

120  (
wd
 & 
mask
>> 
	`fd_f_t_b
(mask);

121 
	}
}

126 
t32_t
 
	$log_ba_2
(
ut32_t
 
x
)

128  
	`fd_ϡ_t_b
(
x
);

129 
	}
}

134 
ut32_t
 
	$ge_comm_divis
(
ut32_t
 
a
,

135 
ut32_t
 
b
)

137 
ut32_t
 
div
;

138 
ut32_t
 
comm_div
 = 1;

140 i((
a
 =0|| (
b
 == 0))

141  
	`max
(
a
, 
b
);

143 
div
 = 1; (div <
a
&& (div <
b
); div++)

144 i(!(
a
 % 
div
&& !(
b
 % div))

145 
comm_div
 = 
div
;

147  
comm_div
;

148 
	}
}

153 
	$tiڮ_be_oximi
(
ut32_t
 
giv_num
,

154 
ut32_t
 
giv_dom
,

155 
ut32_t
 
max_num
,

156 
ut32_t
 
max_dom
,

157 
ut32_t
 *
be_num
,

158 
ut32_t
 *
be_dom
)

160 
ut32_t
 
gcd
;

162 
gcd
 = 
	`ge_comm_divis
(
giv_num
, 
giv_dom
);

164 *
be_num
 = 
giv_num
 / 
gcd
;

165 *
be_dom
 = 
giv_dom
 / 
gcd
;

167 i((*
be_num
 > 
max_num
) ||

168 (*
be_dom
 > 
max_dom
)) {

169 *
be_num
 = 0;

170 *
be_dom
 = 0;

172 
	}
}

177 
ut32_t
 
	$hweight8
(
ut32_t
 
wd
)

179 
ut32_t
 
cou
 = 0;

181 
wd
) {

182 i(
wd
 & 0x1)

183 
cou
++;

184 
wd
 >>= 1;

187  
cou
;

188 
	}
}

193 
ut64_t
 
	$do_div
(
ut64_t
* 
n
,

194 
ut64_t
 
ba
)

196 
ut64_t
 
mod
 = 0;

198 
mod
 = *
n
 % 
ba
;

199 *
n
 = */ 
ba
;

201  
mod
;

202 
	}
}

207 
ut64_t
 
	$div64_u64_m
(
ut64_t
 
dividd
, ut64_
divis
, ut64_*
mad
)

209 *
mad
 = 
dividd
 % 
divis
;

211  
dividd
 / 
divis
;

212 
	}
}

217 
ut64_t
 
	$div_u64_m
(
ut64_t
 
dividd
, 
ut32_t
 
divis
, ut32_*
mad
)

219 *
mad
 = 
	`do_div
(&
dividd
, 
divis
);

221  
dividd
;

222 
	}
}

227 
ut64_t
 
	$div_u64
(
ut64_t
 
dividd
, 
ut32_t
 
divis
)

229 
ut32_t
 
mad
;

231  
	`div_u64_m
(
dividd
, 
divis
, &
mad
);

232 
	}
}

239 
t32_t
 
	$r_to_t32
(cڡ *
r
)

241 *
d
;

242 
t32_t
 
vue
 = 
	`
(
r
, &
d
, 0);

244 i(
d
 =
r
)

245  -
EINVAL
;

247  
vue
;

248 
	}
}

255 
ut32_t
 
	$t_to_ut32
(cڡ *
r
)

257 *
d
;

258 
ut32_t
 
vue
 = 
	`oul
(
r
, &
d
, 0);

260 i(
d
 =
r
)

261  -
EINVAL
;

263  
vue
;

264 
	}
}

	@/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/util.h

39 #ide
UTIL_H_


40 
	#UTIL_H_


	)

45 
	~<dt.h
>

46 
	~<dbo.h
>

50 
	#BIT
(
x
(1 << (x))

	)

52 
	#ARRAY_SIZE
(
x
) \

53 ((
x
/ ((x)[0]))

	)

55 
	#DIV_ROUND_UP
(
x
,
y
) \

56 (((
x
+ (
y
- 1/ (y))

	)

57 
	#DIV_ROUND_CLOSEST
(
x
, 
y
) \

58 (((
x
+ (
y
/ 2/ (y))

	)

59 
	#DIV_ROUND_CLOSEST_ULL
(
x
, 
y
) \

60 
	`DIV_ROUND_CLOSEST
(
x
, 
y
)

	)

62 
	#m
(
x
, 
y
) \

63 (((
x
< (
y
)? (x: (y))

	)

64 
	#m_t
(
ty
, 
x
, 
y
) \

65 (
ty
)
	`m
(y)(
x
), (ty)(
y
))

	)

67 
	#max
(
x
, 
y
) \

68 (((
x
> (
y
)? (x: (y))

	)

69 
	#max_t
(
ty
, 
x
, 
y
) \

70 (
ty
)
	`max
(y)(
x
), (ty)(
y
))

	)

72 
	#amp
(
v
, 
m_v
, 
max_v
) \

73 (
	`max
(
	`m
((
v
), (
max_v
)), (
m_v
)))

	)

74 
	#amp_t
(
ty
, 
v
, 
m_v
, 
max_v
) \

75 (
ty
)
	`amp
(y)(
v
), (ty)(
m_v
), (ty)(
max_v
))

	)

77 
	#abs
(
x
) \

78 ((
x
< 0 ? (-(x): (x))

	)

80 
	#sw
(
x
, 
y
) \

81 {
	`tyof
(
x

_tmp_
 = (x); (x(
y
); (y_tmp_;}

	)

83 
	#round_up
(
x
,
y
) \

84 (((
x
)+(
y
)-1)/(y))

	)

86 
	#BITS_PER_LONG
 32

	)

88 
	#GENMASK
(
h
, 
l
) ({ \

89 
ut32_t
 
t
 = (uint32_t)(~0UL); \

90 
t
 = << (
BITS_PER_LONG
 - (
h
 - 
l
 + 1)); \

91 
t
 = >> (
BITS_PER_LONG
 - (
h
 + 1)); \

92 
t
; \

93 })

	)

95 
	#bsw_cڡt_32
(
x
) \

96 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

97 (((
x
& 0x0000ff00<< 8| (((x& 0x000000ff<< 24))

	)

99 
	#U16_MAX
 ((
ut16_t
)~0U)

	)

100 
	#S16_MAX
 ((
t16_t
)(
U16_MAX
>>1))

	)

102 
	#DIV_U64
(
x
, 
y
(x / y)

	)

104 
	#UNUSED_PARAM
(
x
(()x)

	)

110 
ut32_t
 
fd_f_t_b
(ut32_
wd
);

112 
ut32_t
 
fd_ϡ_t_b
(ut32_
wd
);

114 
ut32_t
 
fd_o
(
t32_t
 
v
,

115 cڡ 
t32_t
 *
y
,

116 
ut32_t
 
size
);

118 
ut32_t
 
fld_
(ut32_
mask
, ut32_
v
);

120 
ut32_t
 
fld_g
(ut32_
mask
, ut32_
wd
);

122 
t32_t
 
log_ba_2
(
ut32_t
 
x
);

124 
ut32_t
 
ge_comm_divis
(ut32_
a
,

125 
ut32_t
 
b
);

127 
tiڮ_be_oximi
(
ut32_t
 
giv_num
,

128 
ut32_t
 
giv_dom
,

129 
ut32_t
 
max_num
,

130 
ut32_t
 
max_dom
,

131 
ut32_t
 *
be_num
,

132 
ut32_t
 *
be_dom
);

134 
ut32_t
 
hweight8
(ut32_
wd
);

136 
ut64_t
 
do_div
(ut64_t* 
n
,

137 
ut64_t
 
ba
);

139 
ut64_t
 
div64_u64_m
(ut64_
dividd
, ut64_
divis
,

140 
ut64_t
 *
mad
);

142 
ut64_t
 
div_u64_m
(ut64_
dividd
, 
ut32_t
 
divis
, ut32_*
mad
);

144 
ut64_t
 
div_u64
(ut64_
dividd
, 
ut32_t
 
divis
);

146 
t32_t
 
r_to_t32
(cڡ *
r
);

148 
ut32_t
 
t_to_ut32
(cڡ *
r
);

	@
1
.
0
97
5039
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20RU/bz_commands.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/auxADCDAC.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/auxADCDAC.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_config.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_config.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_example_hal.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_talise.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/bz_talise.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/calitest.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/calitest.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/gpio_mux.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/gpio_mux.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/jesd204btest.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/jesd204btest.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/main.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/plaxi.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/rru_runtest.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/rru_runtest.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/spitest.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/spitest.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/testcase.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/testcase.h
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/tonetest.c
/root/BZ_AUTOTEST/BZ20-RRU/app/bz20test/tonetest.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/authhandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/confighandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/datahandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/debughandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/functionhandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/handler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/http.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/httplib.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/httpserver.h
/root/BZ_AUTOTEST/BZ20-RRU/app/httpserver/userhandler.h
/root/BZ_AUTOTEST/BZ20-RRU/app/inc/bz_config.h
/root/BZ_AUTOTEST/BZ20-RRU/app/inc/command.h
/root/BZ_AUTOTEST/BZ20-RRU/app/inc/fft.h
/root/BZ_AUTOTEST/BZ20-RRU/app/inc/talise.h
/root/BZ_AUTOTEST/BZ20-RRU/app/src/command/command.c
/root/BZ_AUTOTEST/BZ20-RRU/app/src/talise/bz_config.c
/root/BZ_AUTOTEST/BZ20-RRU/app/src/talise/plaxi.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz20.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_agc.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_agc_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_cals.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_cals_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_config_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_data_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_error.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_error_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_gpio.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_gpio_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_hal.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_init.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_init_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_jesd204b.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_jesd204b_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_otp.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_otp_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_plat_hal.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_plat_hal_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_radio.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_radio_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_reg_ana.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_reg_dig.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_riscv.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_riscv_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_rx.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_rx_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_tx.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_tx_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/bz_types.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/firmware.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/plaxi.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/inc/svn_version.h
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_agc.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_cals.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_error.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_gpio.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_hal.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_init.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_jesd204b.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_otp.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_plat_hal.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_radio.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_riscv.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_rx.c
/root/BZ_AUTOTEST/BZ20-RRU/libbzsdk/src/bz_tx.c
/root/BZ_AUTOTEST/BZ20-RRU/libclock/inc/appclock.h
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/Si5344-RevD-Registers.h
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/ad9528.c
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/ad9528.h
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/appclock.c
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/si5344.c
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/si5344.h
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/util.c
/root/BZ_AUTOTEST/BZ20-RRU/libclock/src/util.h
